webpackJsonp([2,5],{3510:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=this.props.getModelDefinitionByName(this.props.params.modelType);return!!("edit"!==e&&"clone"!==e||this.props.getCurrentUser().canUpdate(t))}function l(e){var t=this.props.getModelDefinitionByName(this.props.params.modelType);return!("delete"===e&&!this.props.getCurrentUser().canDelete(t))}function c(e){var t=$.a.for(e),n=["name","shortName"];switch(t.indexOf("description")>=0&&n.push("description"),e){case"dataElement":return n.concat(["formName"]);case"organisationUnitLevel":return["name"];case"program":return n.concat(["description"])}return n}function u(e,t,n){return oe[e]&&oe[e][t]?oe[e][t][n]:n}Object.defineProperty(t,"__esModule",{value:!0}),t.getTranslatablePropertiesForModelType=c;var d=n(0),f=n.n(d),p=n(1),h=n.n(p),m=n(19),g=n.n(m),E=n(769),T=n.n(E),v=n(1369),y=n(1374),C=n(92),b=n.n(C),O=n(3562),I=n(3542),D=n(318),R=n(3628),_=n(466),k=n(768),K=n(326),S=n(762),w=n(3638),x=n(3640),N=n(3639),A=n(1382),P=n(1383),L=n(1381),F=n(1372),M=n(3643),B=n(91),$=n(1365),j=n(3623),H=n(3538),q=n(94),U=n(212),z=n(254),W=n(3541),V=n(3641),G=(n(3642),n(208)),X=(n.n(G),n(754)),Y=(n.n(X),n(317)),Z=n(467),Q=(n(1380),n(3636)),J=n(465),ee=n(767),te=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ne={dataTableWrap:{display:"flex",flexDirection:"column",flex:2},detailsBoxWrap:{flex:1,marginLeft:"1rem",marginRight:"1rem",opacity:1,flexGrow:0},listDetailsWrap:{flex:1,display:"flex",flexOrientation:"row"},filterWrap:{clear:"both",minHeight:80},box:{display:"inline-block",marginRight:16,width:256},topPagination:{float:"right"},bottomPagination:{marginTop:"-2rem",paddingBottom:"0.5rem"},filtersDropDownAsync:{display:"relative"}},oe={program:{programType:{WITH_REGISTRATION:"TRACKER_PROGRAM",WITHOUT_REGISTRATION:"EVENT_PROGRAM"}}},ie=function(e){function t(){var e,o,r,s;i(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return o=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={dataRows:[],pager:{total:0},isLoading:!0,detailsObject:null,sharing:{model:null,open:!1},translation:{model:null,open:!1},orgunitassignment:{model:null,open:!1},dataElementOperand:{model:null,open:!1},predictorDialog:{open:!1}},r.getTranslation=function(e){return r.context.d2.i18n.getTranslation(e)},r.translationSaved=function(){B.a.show({message:"translation_saved",translate:!0})},r.translationError=function(e){g.a.error(e),B.a.show({message:"translation_save_error",action:"ok",translate:!0})},r.isContextActionAllowed=function(e,t){if(!e||!e.access)return!1;if("categoryOptionCombo"===e.modelDefinition.name)return"edit"===t?e.access.write:"details"===t&&e.access.read;if(e.access.hasOwnProperty(t))return e.access[t];if("runNow"===t&&"predictor"===e.modelDefinition.name)return r.context.d2.currentUser.authorities.has("F_PREDICTOR_RUN");switch(t){case"edit":return"locale"!==e.modelDefinition.name&&e.access.write;case"clone":return!["dataSet","program","locale","sqlView","optionSet"].includes(e.modelDefinition.name)&&e.access.write;case"translate":return e.access.read&&e.modelDefinition.identifiableObject&&"sqlView"!==e.modelDefinition.name;case"details":return e.access.read;case"share":return!0===e.modelDefinition.isShareable&&e.access.write;case"compulsoryDataElements":case"sectionForm":case"dataEntryForm":return"dataSet"===e.modelDefinition.name&&e.access.write;case"pdfDataSetForm":return"dataSet"===e.modelDefinition.name&&e.access.read;case"runNow":case"preview":return"pushAnalysis"===e.modelDefinition.name&&e.access.write;case"executeQuery":return"sqlView"===e.modelDefinition.name&&e.access.read&&["MATERIALIZED_VIEW","VIEW"].includes(e.type);case"refresh":return"sqlView"===e.modelDefinition.name&&e.access.read&&"MATERIALIZED_VIEW"===e.type;case"showSqlView":return"sqlView"===e.modelDefinition.name&&e.access.read;default:return!0}},r.searchListByName=function(e){var t=e.subscribe(function(e){r.setState({isLoading:!0}),S.a.searchByName({modelType:r.props.params.modelType,searchString:e}).subscribe(function(){},function(e){return g.a.error(e)})});r.registerDisposable(t)},r.closeTranslationDialog=function(){P.a.setState(Object.assign({},P.a.state,{open:!1}))},r.closeSharingDialog=function(e){var t=e?Object.assign(A.a.state.model,{publicAccess:e.publicAccess}):A.a.state.model;A.a.setState(Object.assign({},A.a.state,{model:t,open:!1}))},r.closeDataElementOperandDialog=function(){L.a.setState(Object.assign({},L.a.state,{open:!1}))},r.renderFilters=function(){var e=function(e){return function(t){r.setState({isLoading:!0}),S.a.setFilterValue({filterField:e,filterValue:t.target.value,modelType:r.props.params.modelType})}};return f.a.createElement("div",null,f.a.createElement(x.a,{initialValue:r.state.searchString,searchObserverHandler:r.searchListByName}),n.i(z.d)(r.props.params.modelType).map(function(t){var n=r.context.d2.models[r.props.params.modelType],o=n.modelProperties.hasOwnProperty(t)&&n.modelProperties[t].hasOwnProperty("constants"),i=o&&n.modelProperties[t].constants.map(function(e){return{text:u(r.props.params.modelType,t,e),value:e}}),a=r.context.d2.models.hasOwnProperty(t)?t:r.props.params.modelType+"."+t;return f.a.createElement("div",{key:t,style:ne.box},o?f.a.createElement(q.a,{labelText:r.getTranslation(t),options:i,onChange:e(t),value:r.state.filters?r.state.filters[t]:null,translateOptions:"periodType"!==t}):f.a.createElement(U.a,{labelText:r.getTranslation(t),referenceType:a,onChange:e(t),value:r.state.filters?r.state.filters[t]:null,quickAddLink:!1,preventAutoDefault:!0,style:ne.filterDrowDownAsync,limit:1,top:-15}))}))},s=o,a(r,s)}return r(t,e),te(t,[{key:"componentWillMount",value:function(){var e=this;this.observerDisposables=[];var t=K.a.subscribe(function(t){if(!T()(t.list)||t.modelType!==e.props.params.modelType)return void e.setState({isLoading:!0});S.a.hideDetailsBox(),e.setState({dataRows:t.list,pager:t.pager,tableColumns:t.tableColumns,filters:t.filters,isLoading:!1,searchString:t.searchString,modelDefinition:t.modelDefinition})}),n=k.a.subscribe(function(t){e.setState({detailsObject:t})}),o=A.a.subscribe(function(t){e.setState(function(e){return{sharing:t,dataRows:e.dataRows.map(function(e){return e.id===t.model.id?Object.assign(e,{publicAccess:t.model.publicAccess}):e})}})}),i=P.a.subscribe(function(t){e.setState({translation:t})}),a=L.a.subscribe(function(t){e.setState({dataElementOperand:t})}),r=F.a.subscribe(function(t){e.setState({predictorDialog:t})});this.registerDisposable(t),this.registerDisposable(n),this.registerDisposable(o),this.registerDisposable(i),this.registerDisposable(a),this.registerDisposable(r)}},{key:"componentWillReceiveProps",value:function(e){this.props.params.modelType!==e.params.modelType&&this.setState({isLoading:!0,translation:Object.assign({},this.state.translation,{open:!1})})}},{key:"componentWillUnmount",value:function(){this.observerDisposables.forEach(function(e){return e.unsubscribe()})}},{key:"registerDisposable",value:function(e){this.observerDisposables.push(e)}},{key:"renderContextMenuHeader",value:function(){var e=this,t=this.state.modelDefinition,n=t.filters.getQueryFilterValues(),o={name:t.name,pluralName:t.plural,queryParamFilters:n,objectCount:this.state.pager.total},i=[{title:this.getTranslation("manage_columns"),icon:"view_column",action:this.props.openColumnsDialog},{title:this.getTranslation("download"),icon:"get_app",action:function(){return e.props.openDialog(ee.a,o)}}];return f.a.createElement(Q.a,{actions:i})}},{key:"render",value:function(){var e=this,t=n.i(j.a)(this.state.pager),i={hasNextPage:function(){return Boolean(e.state.pager.hasNextPage)&&e.state.pager.hasNextPage()},hasPreviousPage:function(){return Boolean(e.state.pager.hasPreviousPage)&&e.state.pager.hasPreviousPage()},onNextPageClick:function(){e.setState({isLoading:!0}),S.a.getNextPage()},onPreviousPageClick:function(){e.setState({isLoading:!0}),S.a.getPreviousPage()},total:this.state.pager.total,currentlyShown:t},a=Object.keys(_.a).filter(s,this).filter(l,this).filter(function(t){return"share"!==t||e.context.d2.models[e.props.params.modelType]&&e.context.d2.models[e.props.params.modelType].isShareable}).reduce(function(e,t){return e[t]=_.a[t],e},{}),r={clone:"content_copy",sharing:"share",sectionForm:"assignment_turned_in",dataEntryForm:"assignment",pdfDataSetForm:"picture_as_pdf",compulsoryDataElements:"border_color",runNow:"queue_play_next",preview:"dashboard",executeQuery:"playlist_play",refresh:"refresh",showSqlView:"view_module"},d=function(t){return e.state.tableColumns.reduce(function(e,n){if(n.includes("___")){var i=n.substr(0,n.indexOf("___")),a=n.substr(n.indexOf("___")+3);Object.assign(e,o({},n,t&&t[i]?t[i][a]:""))}return e},t),t},p=function(t){return t.categoryCombo&&t.categoryCombo.displayName&&"default"===t.categoryCombo.displayName&&t.categoryCombo___displayName===t.categoryCombo.displayName&&(t.categoryCombo___displayName=e.getTranslation("none"),t.categoryCombo.displayName=e.getTranslation("none")),t},h=function(t){var n={organisationUnit:["level"],dataSet:["formType"]},o=function(e,t){return!(n.hasOwnProperty(e)&&n[e].includes(t))};return t.noMoreGottaTranslateCauseIsDone?t:e.state.tableColumns.reduce(function(n,i){return o(t.modelDefinition.name,i)&&t&&t.modelDefinition&&t.modelDefinition.modelProperties[i]&&t.modelDefinition.modelProperties[i].constants&&(t.noMoreGottaTranslateCauseIsDone=!0,t[i]&&(n[i]=e.getTranslation(u(t.modelDefinition.name,i,t[i]).toLowerCase()))),n},t)},m=function(e){if(e.access.write&&"locale"!==e.modelDefinition.name)a.edit(e);else{var t="locale"===e.modelDefinition.name?"locales_can_only_be_created_and_deleted":"you_do_not_have_permissions_to_edit_this_object";B.a.show({message:t,translate:!0,action:"dismiss"})}};return f.a.createElement("div",null,f.a.createElement("div",null,f.a.createElement(D.a,null,this.getTranslation(b()(this.props.params.modelType)+"_management"),f.a.createElement(H.a,{schema:this.props.params.modelType})),f.a.createElement(w.a,{modelType:this.props.params.modelType,groupName:this.props.params.groupName})),f.a.createElement("div",{style:ne.filterWrap},f.a.createElement("div",{style:ne.topPagination},f.a.createElement(y.a,i)),this.renderFilters()),f.a.createElement(N.a,{loadingText:["Loading",this.props.params.modelType,"list..."].join(" "),isLoading:this.state.isLoading}),this.state.isLoading?f.a.createElement("div",null,"Loading..."):f.a.createElement("div",{style:ne.listDetailsWrap},f.a.createElement("div",{style:ne.dataTableWrap},this.state.dataRows&&this.state.dataRows.length?f.a.createElement(v.a,{rows:this.state.dataRows.map(d).map(p).map(h),columns:this.state.tableColumns,contextMenuActions:a,contextMenuIcons:r,primaryAction:m,isContextActionAllowed:this.isContextActionAllowed,contextMenuHeader:this.renderContextMenuHeader()}):f.a.createElement("div",null,this.getTranslation("no_results_found"))),!!this.state.detailsObject&&f.a.createElement(R.a,{style:ne.detailsBoxWrap,detailsObject:this.state.detailsObject,onClose:S.a.hideDetailsBox})),!!this.state.dataRows&&!!this.state.dataRows.length&&f.a.createElement("div",{style:ne.bottomPagination},f.a.createElement(y.a,i)),!!this.state.sharing.model&&f.a.createElement(O.a,{d2:this.context.d2,id:this.state.sharing.model.id,type:this.props.params.modelType,open:this.state.sharing.model&&this.state.sharing.open,onRequestClose:this.closeSharingDialog,bodyStyle:{minHeight:"400px"}}),!!this.state.translation.model&&f.a.createElement(I.a,{objectToTranslate:this.state.translation.model,objectTypeToTranslate:this.state.translation.model&&this.state.translation.model.modelDefinition,open:this.state.translation.open,onTranslationSaved:this.translationSaved,onTranslationError:this.translationError,onRequestClose:this.closeTranslationDialog,fieldsToTranslate:c(this.props.params.modelType)}),f.a.createElement(V.a,{model:this.state.dataElementOperand.model,dataElementOperands:this.state.dataElementOperand.dataElementOperands,open:this.state.dataElementOperand.open,onRequestClose:this.closeDataElementOperandDialog}),this.state.predictorDialog&&f.a.createElement(M.a,null))}}]),t}(d.Component);ie.propTypes={params:h.a.shape({modelType:h.a.string.isRequired,groupName:h.a.string.isRequired}).isRequired},ie.contextTypes={d2:h.a.object.isRequired};var ae={openColumnsDialog:Z.a,openDialog:J.a};t.default=n.i(Y.a)(null,ae)(n.i(W.a)(ie))},3514:function(e,t,n){"use strict";function o(e){return"WITH_REGISTRATION"===e.model.programType?r.a.createElement(f.a,e):r.a.createElement(d.a,e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(317),a=n(0),r=n.n(a),s=n(252),l=n(755),c=n.n(l),u=n(320),d=n(3844),f=n(3866),p=n(258),h=n(324),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=function(e){return{isLoading:e.eventProgram.step.isLoading,isProgramStageStepperActive:n.i(h.a)(e)}},E=n.i(s.b)(n.i(i.a)(g),c()(function(e){return e.combineLatest(u.a,function(e,t){return m({},e,{model:t.program})})}),function(e){return n.i(s.e)(e,n.i(s.f)(p.a))}(function(e){return e.isLoading}));t.default=E(o)},3524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={easeOutFunction:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutFunction:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeOut:function(e,t,n,o){if(o=o||this.easeOutFunction,t&&"[object Array]"===Object.prototype.toString.call(t)){for(var i="",a=0;a<t.length;a++)i&&(i+=","),i+=this.create(e,t[a],n,o);return i}return this.create(e,t,n,o)},create:function(e,t,n,o){return e=e||"450ms",t=t||"all",n=n||"0ms",o=o||"linear",t+" "+e+" "+o+" "+n}}},3525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=i.default.oneOf(["left","middle","right"]),r=i.default.oneOf(["top","center","bottom"]);t.default={corners:i.default.oneOf(["bottom-left","bottom-right","top-left","top-right"]),horizontal:a,vertical:r,origin:i.default.shape({horizontal:a,vertical:r}),cornersAndCenter:i.default.oneOf(["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"]),stringOrNumber:i.default.oneOfType([i.default.string,i.default.number]),zDepth:i.default.oneOf([0,1,2,3,4,5])}},3526:function(e,t,n){"use strict";t.__esModule=!0;var o=n(115),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3588),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3528:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){if(!A){var e=document.createElement("style");e.innerHTML="\n      button::-moz-focus-inner,\n      input::-moz-focus-inner {\n        border: 0;\n        padding: 0;\n      }\n    ",document.body.appendChild(e),A=!0}}function a(){P||(_.default.on(window,"keydown",function(e){L="tab"===(0,K.default)(e)}),P=!0)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),s=o(r),l=n(8),c=o(l),u=n(6),d=o(u),f=n(2),p=o(f),h=n(3),m=o(h),g=n(5),E=o(g),T=n(4),v=o(T),y=n(9),C=o(y),b=n(0),O=o(b),I=n(1),D=o(I),R=n(3553),_=o(R),k=n(35),K=o(k),S=n(3607),w=o(S),x=n(3612),N=o(x),A=!1,P=!1,L=!1,F=function(e){function t(){var e,n,o,i;(0,p.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,E.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(r))),o.state={isKeyboardFocused:!1},o.handleKeyDown=function(e){o.props.disabled||o.props.disableKeyboardFocus||("enter"===(0,K.default)(e)&&o.state.isKeyboardFocused&&o.handleTouchTap(e),"esc"===(0,K.default)(e)&&o.state.isKeyboardFocused&&o.removeKeyboardFocus(e)),o.props.onKeyDown(e)},o.handleKeyUp=function(e){o.props.disabled||o.props.disableKeyboardFocus||"space"===(0,K.default)(e)&&o.state.isKeyboardFocused&&o.handleTouchTap(e),o.props.onKeyUp(e)},o.handleBlur=function(e){o.cancelFocusTimeout(),o.removeKeyboardFocus(e),o.props.onBlur(e)},o.handleFocus=function(e){e&&e.persist(),o.props.disabled||o.props.disableKeyboardFocus||(o.focusTimeout=setTimeout(function(){L&&(o.setKeyboardFocus(e),L=!1)},150),o.props.onFocus(e))},o.handleTouchTap=function(e){o.cancelFocusTimeout(),o.props.disabled||(L=!1,o.removeKeyboardFocus(e),o.props.onClick(e))},i=n,(0,E.default)(o,i)}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.disabled,n=e.disableKeyboardFocus,o=e.keyboardFocused;t||!o||n||this.setState({isKeyboardFocused:!0})}},{key:"componentDidMount",value:function(){i(),a(),this.state.isKeyboardFocused&&(this.button.focus(),this.props.onKeyboardFocus(null,!0))}},{key:"componentWillReceiveProps",value:function(e){(e.disabled||e.disableKeyboardFocus)&&this.state.isKeyboardFocused&&(this.setState({isKeyboardFocused:!1}),e.onKeyboardFocus&&e.onKeyboardFocus(null,!1))}},{key:"componentWillUnmount",value:function(){this.focusTimeout&&clearTimeout(this.focusTimeout)}},{key:"isKeyboardFocused",value:function(){return this.state.isKeyboardFocused}},{key:"removeKeyboardFocus",value:function(e){this.state.isKeyboardFocused&&(this.setState({isKeyboardFocused:!1}),this.props.onKeyboardFocus(e,!1))}},{key:"setKeyboardFocus",value:function(e){this.state.isKeyboardFocused||(this.setState({isKeyboardFocused:!0}),this.props.onKeyboardFocus(e,!0))}},{key:"cancelFocusTimeout",value:function(){this.focusTimeout&&(clearTimeout(this.focusTimeout),this.focusTimeout=null)}},{key:"createButtonChildren",value:function(){var e=this.props,t=e.centerRipple,n=e.children,o=e.disabled,i=e.disableFocusRipple,a=e.disableKeyboardFocus,r=e.disableTouchRipple,s=e.focusRippleColor,l=e.focusRippleOpacity,c=e.touchRippleColor,u=e.touchRippleOpacity,d=this.state.isKeyboardFocused,f=!d||o||i||a?void 0:O.default.createElement(w.default,{color:s,opacity:l,show:d,style:{overflow:"hidden"},key:"focusRipple"}),p=o||r?void 0:O.default.createElement(N.default,{centerRipple:t,color:c,opacity:u,key:"touchRipple"},n);return[f,p,p?void 0:n]}},{key:"render",value:function(){var e=this,t=this.props,n=(t.centerRipple,t.children),o=t.containerElement,i=t.disabled,a=(t.disableFocusRipple,t.disableKeyboardFocus),r=(t.disableTouchRipple,t.focusRippleColor,t.focusRippleOpacity,t.href),l=(t.keyboardFocused,t.touchRippleColor,t.touchRippleOpacity,t.onBlur,t.onClick,t.onFocus,t.onKeyUp,t.onKeyDown,t.onKeyboardFocus,t.style),u=t.tabIndex,d=t.type,f=(0,c.default)(t,["centerRipple","children","containerElement","disabled","disableFocusRipple","disableKeyboardFocus","disableTouchRipple","focusRippleColor","focusRippleOpacity","href","keyboardFocused","touchRippleColor","touchRippleOpacity","onBlur","onClick","onFocus","onKeyUp","onKeyDown","onKeyboardFocus","style","tabIndex","type"]),p=this.context.muiTheme,h=p.prepareStyles,m=p.enhancedButton,g=(0,C.default)({border:10,boxSizing:"border-box",display:"inline-block",fontFamily:this.context.muiTheme.baseTheme.fontFamily,WebkitTapHighlightColor:m.tapHighlightColor,cursor:i?"default":"pointer",textDecoration:"none",margin:0,padding:0,outline:"none",fontSize:"inherit",fontWeight:"inherit",position:"relative",verticalAlign:r?"middle":null},l);if(g.backgroundColor||g.background||(g.background="none"),i&&r)return O.default.createElement("span",(0,s.default)({},f,{style:g}),n);var E=(0,s.default)({},f,{style:h(g),ref:function(t){return e.button=t},disabled:i,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onClick:this.handleTouchTap,tabIndex:i||a?-1:u});r&&(E.href=r);var T=this.createButtonChildren();return O.default.isValidElement(o)?O.default.cloneElement(o,E,T):(r||"button"!==o||(E.type=d),O.default.createElement(r?"a":o,E,T))}}]),t}(b.Component);F.defaultProps={containerElement:"button",onBlur:function(){},onClick:function(){},onFocus:function(){},onKeyDown:function(){},onKeyUp:function(){},onKeyboardFocus:function(){},tabIndex:0,type:"button"},F.contextTypes={muiTheme:D.default.object.isRequired},F.propTypes={},t.default=F},3529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3578),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3583),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3587),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3532:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(14),D=o(I),R=n(753),_=o(R),k=n(3551),K=o(k),S=n(3525),w=(o(S),n(3527)),x=o(w),N=n(764),A=o(N),P=n(3589),L=o(P),F={root:{display:"none"}},M=function(e){function t(e,n){(0,d.default)(this,t);var o=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));return o.timeout=null,o.renderLayer=function(){var e=o.props,t=e.animated,n=e.animation,i=(e.anchorEl,e.anchorOrigin,e.autoCloseWhenOffScreen,e.canAutoPosition,e.children),r=(e.onRequestClose,e.style),l=e.targetOrigin,c=(e.useLayerForClickAway,e.scrollableContainer,(0,s.default)(e,["animated","animation","anchorEl","anchorOrigin","autoCloseWhenOffScreen","canAutoPosition","children","onRequestClose","style","targetOrigin","useLayerForClickAway","scrollableContainer"])),u=r;if(!t)return u={position:"fixed",zIndex:o.context.muiTheme.zIndex.popover},o.state.open?C.default.createElement(x.default,(0,a.default)({style:(0,v.default)(u,r)},c),i):null;var d=n||L.default;return C.default.createElement(d,(0,a.default)({targetOrigin:l,style:u},c,{open:o.state.open&&!o.state.closing}),i)},o.componentClickAway=function(){o.requestClose("clickAway")},o.setPlacement=function(e){if(o.state.open&&o.popoverRefs.layer.getLayer()){var t=o.popoverRefs.layer.getLayer().children[0];if(t){var n=o.props,i=n.targetOrigin,a=n.anchorOrigin,r=o.props.anchorEl||o.anchorEl,s=o.getAnchorPosition(r),l=o.getTargetPosition(t),c={top:s[a.vertical]-l[i.vertical],left:s[a.horizontal]-l[i.horizontal]};e&&o.props.autoCloseWhenOffScreen&&o.autoCloseWhenOffScreen(s),o.props.canAutoPosition&&(l=o.getTargetPosition(t),c=o.applyAutoPositionIfNeeded(s,l,i,a,c)),t.style.top=c.top+"px",t.style.left=c.left+"px",t.style.maxHeight=window.innerHeight+"px"}}},o.handleResize=(0,A.default)(o.setPlacement,100),o.handleScroll=(0,A.default)(o.setPlacement.bind(o,!0),50),o.popoverRefs={},o.state={open:e.open,closing:!1},o}return(0,E.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.placementTimeout=setTimeout(this.setPlacement)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.open!==this.props.open)if(e.open)clearTimeout(this.timeout),this.timeout=null,this.anchorEl=e.anchorEl||this.props.anchorEl,this.setState({open:!0,closing:!1});else if(e.animated){if(null!==this.timeout)return;this.setState({closing:!0}),this.timeout=setTimeout(function(){t.setState({open:!1},function(){t.timeout=null})},500)}else this.setState({open:!1})}},{key:"componentDidUpdate",value:function(){clearTimeout(this.placementTimeout),this.placementTimeout=setTimeout(this.setPlacement)}},{key:"componentWillUnmount",value:function(){this.handleResize.cancel(),this.handleScroll.cancel(),this.placementTimeout&&(clearTimeout(this.placementTimeout),this.placementTimeout=null),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},{key:"requestClose",value:function(e){this.props.onRequestClose&&this.props.onRequestClose(e)}},{key:"getAnchorPosition",value:function(e){e||(e=D.default.findDOMNode(this));var t=e.getBoundingClientRect(),n={top:t.top,left:t.left,width:e.offsetWidth,height:e.offsetHeight};return n.right=t.right||n.left+n.width,n.bottom=t.bottom||n.top+n.height,n.middle=n.left+(n.right-n.left)/2,n.center=n.top+(n.bottom-n.top)/2,n}},{key:"getTargetPosition",value:function(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}},{key:"autoCloseWhenOffScreen",value:function(e){(e.top<0||e.top>window.innerHeight||e.left<0||e.left>window.innerWidth)&&this.requestClose("offScreen")}},{key:"getOverlapMode",value:function(e,t,n){return[e,t].indexOf(n)>=0?"auto":e===t?"inclusive":"exclusive"}},{key:"getPositions",value:function(e,t){var n=(0,a.default)({},e),o=(0,a.default)({},t),i={x:["left","right"].filter(function(e){return e!==o.horizontal}),y:["top","bottom"].filter(function(e){return e!==o.vertical})},r={x:this.getOverlapMode(n.horizontal,o.horizontal,"middle"),y:this.getOverlapMode(n.vertical,o.vertical,"center")};return i.x.splice("auto"===r.x?0:1,0,"middle"),i.y.splice("auto"===r.y?0:1,0,"center"),"auto"!==r.y&&(n.vertical="top"===n.vertical?"bottom":"top","inclusive"===r.y&&(o.vertical=o.vertical)),"auto"!==r.x&&(n.horizontal="left"===n.horizontal?"right":"left","inclusive"===r.y&&(o.horizontal=o.horizontal)),{positions:i,anchorPos:n}}},{key:"applyAutoPositionIfNeeded",value:function(e,t,n,o,i){var a=this.getPositions(o,n),r=a.positions,s=a.anchorPos;if(i.top<0||i.top+t.bottom>window.innerHeight){var l=e[s.vertical]-t[r.y[0]];l+t.bottom<=window.innerHeight?i.top=Math.max(0,l):(l=e[s.vertical]-t[r.y[1]])+t.bottom<=window.innerHeight&&(i.top=Math.max(0,l))}if(i.left<0||i.left+t.right>window.innerWidth){var c=e[s.horizontal]-t[r.x[0]];c+t.right<=window.innerWidth?i.left=Math.max(0,c):(c=e[s.horizontal]-t[r.x[1]])+t.right<=window.innerWidth&&(i.left=Math.max(0,c))}return i}},{key:"render",value:function(){var e=this;return C.default.createElement("div",{style:F.root},C.default.createElement(_.default,{target:this.props.scrollableContainer,onScroll:this.handleScroll,onResize:this.handleResize}),C.default.createElement(K.default,{ref:function(t){return e.popoverRefs.layer=t},open:this.state.open,componentClickAway:this.componentClickAway,useLayerForClickAway:this.props.useLayerForClickAway,render:this.renderLayer}))}}]),t}(y.Component);M.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"left"},animated:!0,autoCloseWhenOffScreen:!0,canAutoPosition:!0,onRequestClose:function(){},open:!1,scrollableContainer:"window",style:{overflowY:"auto"},targetOrigin:{vertical:"top",horizontal:"left"},useLayerForClickAway:!0,zDepth:1},M.contextTypes={muiTheme:O.default.object.isRequired},M.propTypes={},t.default=M},3533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3598),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={set:function(e,t,n){e[t]=n}}},3535:function(e,t,n){"use strict";function o(e,t,n){return e<t?t:e>n?n:e}function i(e){var t=e.type,n=e.values;if(t.indexOf("rgb")>-1)for(var o=0;o<3;o++)n[o]=parseInt(n[o]);var i=void 0;return i=t.indexOf("hsl")>-1?e.type+"("+n[0]+", "+n[1]+"%, "+n[2]+"%":e.type+"("+n[0]+", "+n[1]+", "+n[2],4===n.length?i+=", "+e.values[3]+")":i+=")",i}function a(e){if(4===e.length){for(var t="#",n=1;n<e.length;n++)t+=e.charAt(n)+e.charAt(n);e=t}var o={r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)};return"rgb("+o.r+", "+o.g+", "+o.b+")"}function r(e){if("#"===e.charAt(0))return r(a(e));var t=e.indexOf("("),n=e.substring(0,t),o=e.substring(t+1,e.length-1).split(",");return o=o.map(function(e){return parseFloat(e)}),{type:n,values:o}}function s(e,t){var n=l(e),o=l(t),i=(Math.max(n,o)+.05)/(Math.min(n,o)+.05);return Number(i.toFixed(2))}function l(e){if(e=r(e),e.type.indexOf("rgb")>-1){var t=e.values.map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}if(e.type.indexOf("hsl")>-1)return e.values[2]/100}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?d(e,t):f(e,t)}function u(e,t){return e=r(e),t=o(t,0,1),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,i(e)}function d(e,t){if(e=r(e),t=o(t,0,1),e.type.indexOf("hsl")>-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")>-1)for(var n=0;n<3;n++)e.values[n]*=1-t;return i(e)}function f(e,t){if(e=r(e),t=o(t,0,1),e.type.indexOf("hsl")>-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")>-1)for(var n=0;n<3;n++)e.values[n]+=(255-e.values[n])*t;return i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.convertColorToString=i,t.convertHexToRGB=a,t.decomposeColor=r,t.getContrastRatio=s,t.getLuminance=l,t.emphasize=c,t.fade=u,t.darken=d,t.lighten=f;var p=n(12);!function(e){e&&e.__esModule}(p)},3536:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(3621),a=o(i),r=n(3526),s=o(r),l=n(3554),c=(o(l),n(3555)),u=(o(c),function(e){var t=(0,a.default)(function(e,t){return!(0,s.default)(e,t)});return t(e)});t.default=u},3538:function(e,t,n){"use strict";function o(e){return e&&T.a[e]}function i(e){var t=e.major,n=e.minor;return e.snapshot?"master":t+"."+n}function a(e,t){var n=/\$\{(.+?)\}/g;return e.replace(n,function(e,n){return t.has(n)?t.get(n):".+?"})}function r(e,t){return Object.keys(T.a).find(function(n){var o=a(n,t);return new RegExp(o).test(e)})}function s(e,t){return o(e)?a(T.a[e],t):""}function l(e,t){var o=new Map([["objectType",t]]),i=new Map([["objectType",n.i(g.camelCaseToUnderscores)(t)]]);return s(r(e,o),i)}function c(e,t){var n=e.schema,o=t.d2,a=window.location.hash.replace(/^#/,"").replace(/\?.+?$/,""),r="https://ci.dhis2.org/docs/"+i(o.system.version),s=l(a,n);return s?d.a.createElement(m.a,{href:""+r+s,target:"_blank",rel:"noopener noreferrer",tooltip:o.i18n.getTranslation("open_user_guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons",iconStyle:{top:-2}},"help_outline"):null}t.a=c;var u=n(0),d=n.n(u),f=n(1),p=n.n(f),h=n(133),m=n.n(h),g=n(756),E=(n.n(g),n(3539)),T=n.n(E);c.propTypes={schema:p.a.string.isRequired},c.contextTypes={d2:p.a.object}},3539:function(e,t){e.exports={"/edit/categorySection/categoryOptionGroupSet":"/en/user/html/manage_category.html#create_category_option_group_set","/edit/categorySection/categoryOptionGroup":"/en/user/html/manage_category.html#create_category_option_group","/edit/categorySection/categoryOptionCombo":"/en/user/html/manage_category.html#assign_code_category_option_combo","/edit/categorySection/categoryOption":"/en/user/html/manage_category.html#create_category_option","/edit/categorySection/categoryCombo":"/en/user/html/manage_category.html#create_category_combination","/edit/categorySection/category":"/en/user/html/manage_category.html#create_category","/list/categorySection":"/en/user/html/manage_category.html","/edit/dataElementSection/dataElementGroupSet":"/en/user/html/manage_data_element.html#create_data_element_group_set","/edit/dataElementSection/dataElementGroup":"/en/user/html/manage_data_element.html#create_data_element_group","/edit/dataElementSection/dataElement":"/en/user/html/manage_data_element.html#create_data_element","/list/dataElementSection":"/en/user/html/manage_data_element.html","/edit/dataSetSection/dataSet/${objectId}/sections":"/en/user/html/manage_data_set.html#manage_section_form","/edit/dataSetSection/dataSet":"/en/user/html/manage_data_set.html#create_data_set","/list/dataSetSection/dataSet":"/en/user/html/manage_data_set.html","/edit/indicatorSection/programIndicatorGroup":"/en/user/html/configure_program_indicator.html#create_program_indicator_group","/list/indicatorSection/programIndicatorGroup":"/en/user/html/configure_program_indicator.html","/edit/indicatorSection/programIndicator":"/en/user/html/configure_program_indicator.html#create_program_indicator","/list/indicatorSection/programIndicator":"/en/user/html/configure_program_indicator.html","/edit/indicatorSection/indicatorGroupSet":"/en/user/html/manage_indicator.html#create_indicator_group_set","/edit/indicatorSection/indicatorGroup":"/en/user/html/manage_indicator.html#create_indicator_group","/edit/indicatorSection/indicatorType":"/en/user/html/manage_indicator.html#create_indicator_type","/edit/indicatorSection/indicator":"/en/user/html/manage_indicator.html#create_indicator","/list/indicatorSection":"/en/user/html/manage_indicator.html","/edit/organisationUnitSection/organisationUnitGroupSet":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group_set","/edit/organisationUnitSection/organisationUnitGroup":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group","/edit/organisationUnitSection/organisationUnitLevel":"/en/user/html/manage_organisation_unit.html#name_organisation_unit_level","/edit/organisationUnitSection/organisationUnit":"/en/user/html/manage_organisation_unit.html#create_organisation_unit","/list/organisationUnitSection":"/en/user/html/manage_organisation_unit.html","/edit/programSection/trackedEntityAttribute":"/en/user/html/configure_tracked_entity.html#create_tracked_entity_attribute","/edit/programSection/programRuleVariable":"/en/user/html/configure_program_rule.html#create_program_rule_variable","/edit/programSection/relationshipType":"/en/user/html/configure_relationship_type.html#create_relationship_type","/edit/programSection/trackedEntity":"/en/user/html/configure_tracked_entity.html#about_tracked_entity","/edit/programSection/programRule":"/en/user/html/configure_program_rule.html#create_program_rule","/edit/programSection/program":"/en/user/html/configure_event_program_in_maintenance_app.html#create_event_program","/list/programSection":"/en/user/html/configure_programs_in_maintenance_app.html","/edit/validationSection/validationNotificationTemplate":"/en/user/html/manage_validation_rule.html#create_validation_notification","/edit/validationSection/validationRuleGroup":"/en/user/html/manage_validation_rule.html#create_validation_rule_group","/edit/validationSection/validationRule":"/en/user/html/manage_validation_rule.html#create_validation_rule","/list/validationSection":"/en/user/html/manage_validation_rule.html","/edit/otherSection/legendSet":"/en/user/html/manage_legend.html#create_legend","/list/otherSection/legendSet":"/en/user/html/manage_legend.html","/edit/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html#create_push_report","/list/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html","/edit/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html#create_external_map_layer","/list/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html","/edit/otherSection/predictorGroup":"/en/user/html/manage_predictor.html#create_predictor_group","/list/otherSection/predictorGroup":"/en/user/html/manage_predictor.html","/edit/otherSection/optionGroupSet":"/en/user/html/manage_option_set.html#create_option_group_set","/list/otherSection/optionGroupSet":"/en/user/html/manage_option_set.html#create_option_group_set","/edit/otherSection/optionGroup":"/en/user/html/manage_option_set.html#create_option_group","/list/otherSection/optionGroup":"/en/user/html/manage_option_set.html#create_option_group","/edit/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html#create_${objectType}","/list/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html"}},3540:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,o){return n.i(k.isString)(e)?e===t.key:e===o}function r(e){var t=e.onBackClick;return u.a.createElement(y.a,{onClick:t},u.a.createElement(I.a,null))}function s(e){var t=e.onForwardClick;return u.a.createElement(y.a,{onClick:t},u.a.createElement(b.a,null))}function l(e,t){var n={buttons:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"4rem 1rem 1rem"}};return function(o){var i=o.children;return u.a.createElement("div",{style:n.buttons},u.a.createElement(e,null),i,u.a.createElement(t,null))}}n.d(t,"a",function(){return x}),n.d(t,"b",function(){return N}),n.d(t,"g",function(){return A}),n.d(t,"f",function(){return P}),t.e=l,n.d(t,"c",function(){return F}),n.d(t,"d",function(){return M});var c=n(0),u=n.n(c),d=n(1392),f=n.n(d),p=n(1390),h=n.n(p),m=n(1391),g=n.n(m),E=n(1389),T=n.n(E),v=n(208),y=n.n(v),C=n(3654),b=n.n(C),O=n(3653),I=n.n(O),D=n(174),R=n(19),_=n.n(R),k=n(17),K=(n.n(k),n(317)),S=n(206),w=n(3556),x=function(e,t,n){var o=w.a.groupsByField(n);return o&&t.map(function(t){return o[t.name]===e?t.props.style={display:"block"}:t.props.style={display:"none"},t}),[].concat(i(t))},N=function(e){var t=e.steps,n=e.activeStep,o=e.stepperClicked,i=e.orientation,a=void 0===i?"horizontal":i;return u.a.createElement(f.a,{activeStep:n,linear:!1,orientation:a,style:{margin:"0 -16px"}},t.map(function(e,t){return u.a.createElement(T.a,{key:e.label},u.a.createElement(h.a,{onClick:function(){return o(t)}},u.a.createElement(D.a,null,e.label)))}))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return function(i){var r=i.activeStep,s=i.stepperClicked,l=i.disabled,c=o(i,["activeStep","stepperClicked","disabled"]),d=function(e){var t=[];return t.push(u.a.createElement(h.a,{key:"button",onClick:function(){return s(e.key)}},u.a.createElement(D.a,null,e.name))),e.content&&t.push(u.a.createElement(g.a,{key:"content"},u.a.createElement(e.content,c))),t};return u.a.createElement(f.a,{linear:!1,orientation:t,activeStep:n.i(k.isNumber)(r)?r:void 0},e.map(function(e,t){return u.a.createElement(T.a,{key:e.key,active:a(r,e,t),disabled:!!l},d(e))}))}},P=function(e){return function(t){var n=t.activeStep,i=o(t,["activeStep"]),a=e.find(function(e){return e.key===n});return a&&a.component?u.a.createElement(a.component,i):(n?_.a.warn("Could not find a content component for a step with key ("+n+") in",e):_.a.warn("The `activeStep` prop is undefined, therefore the component created by `createStepperContentFromConfig` will render null"),null)}},L=function(e){return function(t){return n.i(S.a)(e,t)}},F=function(e){return n.i(K.a)(void 0,L({onForwardClick:e}))(s)},M=function(e){return n.i(K.a)(void 0,L({onBackClick:e}))(r)}},3541:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),i=n.n(o),a=n(1),r=n.n(a),s=n(461),l=n.n(s),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(e){var t=function(t,n){var o=n.d2,a={getCurrentUser:function(){return o.currentUser},getModelDefinitionByName:function(e){return o.models[e]}};return i.a.createElement(e,c({},t,a))};return t.displayName="WithAuth("+l()(e)+")",t.contextTypes={d2:r.a.object},t}},3542:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(18),d=(n.n(u),n(456)),f=n.n(d),p=n(3558),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),g=function(e){function t(e,a){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return r.i18n=a.d2.i18n,r.state={TranslationForm:n.i(p.a)(r.props.objectToTranslate)},r.translationSaved=r.translationSaved.bind(r),r.translationError=r.translationError.bind(r),r.closeTranslationDialog=r.closeTranslationDialog.bind(r),r}return a(t,e),m(t,[{key:"render",value:function(){return s.a.createElement(f.a,h({title:this.i18n.getTranslation("translation_dialog_title"),autoDetectWindowHeight:!0,autoScrollBodyContent:!0},this.props),s.a.createElement(this.state.TranslationForm,{onTranslationSaved:this.translationSaved,onTranslationError:this.translationError,onCancel:this.closeTranslationDialog,fieldsToTranslate:this.props.fieldsToTranslate}))}},{key:"componentWillReceiveProps",value:function(e){e.objectToTranslate&&this.setState({TranslationForm:n.i(p.a)(e.objectToTranslate)})}},{key:"closeTranslationDialog",value:function(){this.props.onRequestClose()}},{key:"translationSaved",value:function(e){this.props.onTranslationSaved(e),this.closeTranslationDialog()}},{key:"translationError",value:function(e){this.props.onTranslationError(e)}}]),t}(r.Component);g.propTypes={objectToTranslate:c.a.shape({id:c.a.string.isRequired}).isRequired,onTranslationSaved:c.a.func.isRequired,onTranslationError:c.a.func.isRequired,open:c.a.bool,onRequestClose:c.a.func.isRequired,fieldsToTranslate:c.a.array},g.contextTypes={d2:c.a.object},t.a=g},3543:function(e,t,n){"use strict";var o=n(7),i=n.n(o),a=n(6),r=n.n(a),s=n(2),l=n.n(s),c=n(5),u=n.n(c),d=n(4),f=n.n(d),p=n(1),h=n.n(p),m=n(0),g=n.n(m),E=n(3530),T=n.n(E),v=n(3529),y=n.n(v),C=n(3591),b=n.n(C),O=n(3548),I=n.n(O),D=n(79),R=n(3571),_={optionHeader:{paddingLeft:16,paddingTop:16,fontWeight:"500",color:"gray"}},k=function(e){return e.canEdit?"Create":e.canView?"Visibility":"NotInterested"},K=function(e){function t(e,n){l()(this,t);var o=u()(this,(t.__proto__||r()(t)).call(this,e));return o.state={open:!1},o.onOptionClick=function(e,t){var n=i()({},o.props.access,t.props.value);o.props.onChange(n)},o.openMenu=function(e){e.preventDefault(),o.setState({open:!0,anchor:e.currentTarget})},o.closeMenu=function(){o.setState({open:!1})},o.translate=function(e){return o.context.d2.i18n.getTranslation(e)},o.render=function(){var e=o.props.access,t=e.data,n=e.meta,i=o.props.accessOptions,a=i.data,r=i.meta;return g.a.createElement("div",null,g.a.createElement(T.a,{onClick:o.openMenu,disabled:o.props.disabled},g.a.createElement(D.c,{icon:k(n)})),g.a.createElement(b.a,{open:o.state.open,anchorEl:o.state.anchor,onRequestClose:o.closeMenu},g.a.createElement(S,{text:o.translate("metadata")}),g.a.createElement(I.a,{onItemTouchTap:o.onOptionClick},g.a.createElement(R.a,{disabled:!r.canEdit,value:{meta:{canView:!0,canEdit:!0}},primaryText:o.translate("can_edit_and_view"),isSelected:n.canEdit}),g.a.createElement(R.a,{disabled:!r.canView,value:{meta:{canView:!0,canEdit:!1}},primaryText:o.translate("can_view_only"),isSelected:!n.canEdit&&n.canView}),g.a.createElement(R.a,{disabled:!r.noAccess,value:{meta:{canView:!1,canEdit:!1}},primaryText:o.translate("no_access"),isSelected:!n.canEdit&&!n.canView})),g.a.createElement(y.a,null),a&&g.a.createElement("div",null,g.a.createElement(S,{text:o.translate("data")}),g.a.createElement(I.a,{onItemTouchTap:o.onOptionClick},g.a.createElement(R.a,{disabled:!a.canEdit,value:{data:{canView:!0,canEdit:!0}},primaryText:o.translate("can_capture_and_view"),isSelected:t.canEdit}),g.a.createElement(R.a,{disabled:!a.canView,value:{data:{canView:!0,canEdit:!1}},primaryText:o.translate("can_view_only"),isSelected:!t.canEdit&&t.canView}),g.a.createElement(R.a,{disabled:!a.noAccess,value:{data:{canView:!1,canEdit:!1}},primaryText:o.translate("no_access"),isSelected:!t.canEdit&&!t.canView})))))},n.d2.i18n.addStrings(["can_edit_and_view","can_capture_and_view","can_view_only","no_access"]),o}return f()(t,e),t}(m.Component);K.propTypes={access:h.a.object.isRequired,accessOptions:h.a.object.isRequired,onChange:h.a.func.isRequired,disabled:h.a.bool},K.defaultProps={disabled:!1},K.contextTypes={d2:h.a.object.isRequired};var S=function(e){var t=e.text;return g.a.createElement("div",{style:_.optionHeader},t.toUpperCase())};S.propTypes={text:h.a.string.isRequired},t.a=K},3544:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var o=function(e){if(!e)return{data:{canView:!1,canEdit:!1},meta:{canView:!1,canEdit:!1}};var t=e.substring(0,2),n=e.substring(2,4);return{meta:{canView:t.includes("r"),canEdit:t.includes("rw")},data:{canView:n.includes("r"),canEdit:n.includes("rw")}}},i=function(e){var t=function(e){var t=e.canEdit,n=e.canView;return t?"rw":n?"r-":"--"},n="";return n+=t(e.meta),n+=t(e.data),n+="----"}},3545:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(3524),D=o(I),R=n(3535),_=n(3528),k=o(_),K=n(3579),S=o(K),w=function(e){function t(){var e,n,o,i;(0,d.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,m.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(r))),o.state={hovered:!1,isKeyboardFocused:!1,touch:!1},o.handleKeyboardFocus=function(e,t){o.setState({isKeyboardFocused:t}),o.props.onKeyboardFocus(e,t)},o.handleMouseEnter=function(e){o.state.touch||o.setState({hovered:!0}),o.props.onMouseEnter(e)},o.handleMouseLeave=function(e){o.setState({hovered:!1}),o.props.onMouseLeave(e)},o.handleTouchStart=function(e){o.setState({touch:!0}),o.props.onTouchStart(e)},i=n,(0,m.default)(o,i)}return(0,E.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.disabled&&this.setState({hovered:!1})}},{key:"render",value:function(){var e=this.props,t=e.backgroundColor,n=e.children,o=e.disabled,i=e.fullWidth,r=e.hoverColor,l=e.icon,c=e.label,u=e.labelStyle,d=e.labelPosition,f=e.primary,p=e.rippleColor,h=e.secondary,m=e.style,g=(0,s.default)(e,["backgroundColor","children","disabled","fullWidth","hoverColor","icon","label","labelStyle","labelPosition","primary","rippleColor","secondary","style"]),E=this.context.muiTheme,T=E.borderRadius,y=E.button,b=y.height,O=y.minWidth,I=y.textTransform,_=E.flatButton,K=_.buttonFilterColor,w=_.color,x=_.disabledTextColor,N=_.fontSize,A=_.fontWeight,P=_.primaryTextColor,L=_.secondaryTextColor,F=_.textColor,M=_.textTransform,B=void 0===M?I||"uppercase":M,$=o?x:f?P:h?L:F,j=(0,R.fade)(K,.2),H=K,q=r||j,U=p||H,z=t||w,W=(this.state.hovered||this.state.isKeyboardFocused)&&!o,V=(0,v.default)({},{height:b,lineHeight:b+"px",minWidth:i?"100%":O,color:$,transition:D.default.easeOut(),borderRadius:T,userSelect:"none",overflow:"hidden",backgroundColor:W?q:z,padding:0,margin:0,textAlign:"center"},m),G=void 0,X={};if(l){var Y=(0,v.default)({verticalAlign:"middle",marginLeft:c&&"before"!==d?12:0,marginRight:c&&"before"===d?12:0},l.props.style);G=C.default.cloneElement(l,{color:l.props.color||V.color,style:Y,key:"iconCloned"}),"before"===d?X.paddingRight=8:X.paddingLeft=8}var Z=(0,v.default)({letterSpacing:0,textTransform:B,fontWeight:A,fontSize:N},X,u),Q=c?C.default.createElement(S.default,{key:"labelElement",label:c,style:Z}):void 0,J="before"===d?[Q,G,n]:[n,G,Q];return C.default.createElement(k.default,(0,a.default)({},g,{disabled:o,focusRippleColor:U,focusRippleOpacity:.3,onKeyboardFocus:this.handleKeyboardFocus,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onTouchStart:this.handleTouchStart,style:V,touchRippleColor:U,touchRippleOpacity:.3}),J)}}]),t}(y.Component);w.muiName="FlatButton",w.defaultProps={disabled:!1,fullWidth:!1,labelStyle:{},labelPosition:"after",onKeyboardFocus:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onTouchStart:function(){},primary:!1,secondary:!1},w.contextTypes={muiTheme:O.default.object.isRequired},w.propTypes={},t.default=w},3546:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(3549),D=o(I),R=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,o=(0,s.default)(e,["children","style"]),i=this.context.muiTheme.prepareStyles,r=!1,l=y.Children.toArray(t)[0];(0,y.isValidElement)(l)&&l.type===D.default&&(r=!0);var c={root:{padding:(r?0:8)+"px 0px 8px 0px"}};return C.default.createElement("div",(0,a.default)({},o,{style:i((0,v.default)(c.root,n))}),t)}}]),t}(y.Component);R.contextTypes={muiTheme:O.default.object.isRequired},R.propTypes={},t.default=R},3547:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.desktop,o=e.maxHeight,i=e.width,a=t.muiTheme;return{root:{zIndex:a.zIndex.menu,maxHeight:o,overflowY:o?"auto":null},divider:{marginTop:7,marginBottom:8},list:{display:"table-cell",paddingBottom:n?16:8,paddingTop:n?16:8,userSelect:"none",width:i},selectedMenuItem:{color:a.menuItem.selectedTextColor}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(322),u=o(c),d=n(6),f=o(d),p=n(2),h=o(p),m=n(3),g=o(m),E=n(5),T=o(E),v=n(4),y=o(v),C=n(9),b=o(C),O=n(0),I=o(O),D=n(1),R=o(D),_=n(14),k=o(_),K=n(3526),S=o(K),w=n(3550),x=o(w),N=n(35),A=o(N),P=n(3525),L=(o(P),n(3546)),F=o(L),M=n(3586),B=function(e){function t(e,n){(0,h.default)(this,t);var o=(0,T.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e,n));$.call(o);var i=o.getFilteredChildren(e.children),a=o.getLastSelectedIndex(e,i),r=e.disableAutoFocus?-1:a>=0?a:0;return-1!==r&&e.onMenuItemFocusChange&&e.onMenuItemFocusChange(null,r),o.state={focusIndex:r,isKeyboardFocused:e.initiallyKeyboardFocused,keyWidth:e.desktop?64:56},o.hotKeyHolder=new M.HotKeyHolder,o}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){this.props.autoWidth&&this.setWidth(),this.setScollPosition()}},{key:"componentWillReceiveProps",value:function(e){var t=void 0,n=this.getFilteredChildren(e.children);t=!0!==this.props.multiple?this.getLastSelectedIndex(e,n):this.state.focusIndex;var o=e.disableAutoFocus?-1:t>=0?t:0;o!==this.state.focusIndex&&this.props.onMenuItemFocusChange&&this.props.onMenuItemFocusChange(null,o),this.setState({focusIndex:o,keyWidth:e.desktop?64:56})}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,S.default)(this.props,e)||!(0,S.default)(this.state,t)||!(0,S.default)(this.context,n)}},{key:"componentDidUpdate",value:function(){this.props.autoWidth&&this.setWidth()}},{key:"getValueLink",value:function(e){return e.valueLink||{value:e.value,requestChange:e.onChange}}},{key:"setKeyboardFocused",value:function(e){this.setState({isKeyboardFocused:e})}},{key:"getFilteredChildren",value:function(e){var t=[];return I.default.Children.forEach(e,function(e){e&&t.push(e)}),t}},{key:"cloneMenuItem",value:function(e,t,n,o){var i=this,a=e.props.disabled,r={};if(!a){this.isChildSelected(e,this.props)&&(0,b.default)(r,n.selectedMenuItem,this.props.selectedMenuItemStyle)}var s=(0,b.default)({},e.props.style,this.props.menuItemStyle,r),l={desktop:this.props.desktop,style:s};if(!a){var c=t===this.state.focusIndex,u="none";c&&(u=this.state.isKeyboardFocused?"keyboard-focused":"focused"),(0,b.default)(l,{focusState:u,onClick:function(t){i.handleMenuItemTouchTap(t,e,o),e.props.onClick&&e.props.onClick(t)},ref:c?"focusedMenuItem":null})}return I.default.cloneElement(e,l)}},{key:"decrementKeyboardFocusIndex",value:function(e){var t=this.state.focusIndex;t--,t<0&&(t=0),this.setFocusIndex(e,t,!0)}},{key:"getMenuItemCount",value:function(e){var t=0;return e.forEach(function(e){var n=e.type&&"Divider"===e.type.muiName,o=e.props.disabled;n||o||t++}),t}},{key:"getLastSelectedIndex",value:function(e,t){var n=this,o=-1,i=0;return t.forEach(function(t){var a=t.type&&"Divider"===t.type.muiName;n.isChildSelected(t,e)&&(o=i),a||i++}),o}},{key:"setFocusIndexStartsWith",value:function(e,t){var n=-1;return I.default.Children.forEach(this.props.children,function(e,o){if(!(n>=0)){var i=e.props.primaryText;"string"==typeof i&&i.substr(0,t.length).toLowerCase()===t.toLowerCase()&&(n=o)}}),n>=0&&(this.setFocusIndex(e,n,!0),!0)}},{key:"handleMenuItemTouchTap",value:function(e,t,n){var o=this.props.children,i=this.props.multiple,a=this.getValueLink(this.props),r=a.value,s=t.props.value,l=I.default.isValidElement(o)?0:o.indexOf(t);if(this.setFocusIndex(e,l,!1),i){r=r||[];var c=r.indexOf(s),d=r,f=(0,u.default)(d),p=f.slice(0);-1===c?p.push(s):p.splice(c,1),a.requestChange(e,p)}else i||s===r||a.requestChange(e,s);this.props.onItemTouchTap(e,t,n)}},{key:"incrementKeyboardFocusIndex",value:function(e,t){var n=this.state.focusIndex,o=this.getMenuItemCount(t)-1;n++,n>o&&(n=o),this.setFocusIndex(e,n,!0)}},{key:"isChildSelected",value:function(e,t){var n=this.getValueLink(t).value,o=e.props.value;return t.multiple?n&&n.length&&-1!==n.indexOf(o):e.props.hasOwnProperty("value")&&n===o}},{key:"setFocusIndex",value:function(e,t,n){this.props.onMenuItemFocusChange&&this.props.onMenuItemFocusChange(e,t),this.setState({focusIndex:t,isKeyboardFocused:n})}},{key:"setScollPosition",value:function(){var e=this.props.desktop,t=this.refs.focusedMenuItem,n=e?32:48;if(t){var o=k.default.findDOMNode(t).offsetTop,i=o-n;i<n&&(i=0),k.default.findDOMNode(this.refs.scrollContainer).scrollTop=i}}},{key:"cancelScrollEvent",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"setWidth",value:function(){var e=k.default.findDOMNode(this),t=k.default.findDOMNode(this.refs.list),n=e.offsetWidth,o=this.state.keyWidth,i=1.5*o,a=n/o,r=void 0;a=a<=1.5?1.5:Math.ceil(a),r=a*o,r<i&&(r=i),e.style.width=r+"px",t.style.width=r+"px"}},{key:"render",value:function(){var e=this,t=this.props,n=(t.autoWidth,t.children),o=(t.desktop,t.disableAutoFocus,t.initiallyKeyboardFocused,t.listStyle),a=(t.maxHeight,t.multiple,t.onItemTouchTap,t.onEscKeyDown,t.onMenuItemFocusChange,t.selectedMenuItemStyle,t.menuItemStyle,t.style),s=(t.value,t.valueLink,t.width,(0,l.default)(t,["autoWidth","children","desktop","disableAutoFocus","initiallyKeyboardFocused","listStyle","maxHeight","multiple","onItemTouchTap","onEscKeyDown","onMenuItemFocusChange","selectedMenuItemStyle","menuItemStyle","style","value","valueLink","width"])),c=this.context.muiTheme.prepareStyles,u=i(this.props,this.context),d=(0,b.default)(u.root,a),f=(0,b.default)(u.list,o),p=this.getFilteredChildren(n),h=0,m=I.default.Children.map(p,function(t,n){var o=t.props.disabled,i=t.type?t.type.muiName:"",a=t;switch(i){case"MenuItem":a=e.cloneMenuItem(t,h,u,n);break;case"Divider":a=I.default.cloneElement(t,{style:(0,b.default)({},u.divider,t.props.style)})}return"MenuItem"!==i||o||h++,a});return I.default.createElement(x.default,{onClickAway:this.handleClickAway},I.default.createElement("div",{onKeyDown:this.handleKeyDown,onWheel:this.handleOnWheel,style:c(d),ref:"scrollContainer",role:"presentation"},I.default.createElement(F.default,(0,r.default)({},s,{ref:"list",style:f,role:"menu"}),m)))}}]),t}(O.Component);B.defaultProps={autoWidth:!0,desktop:!1,disableAutoFocus:!1,initiallyKeyboardFocused:!1,maxHeight:null,multiple:!1,onChange:function(){},onEscKeyDown:function(){},onItemTouchTap:function(){},onKeyDown:function(){}},B.contextTypes={muiTheme:R.default.object.isRequired};var $=function(){var e=this;this.handleClickAway=function(t){if(!t.defaultPrevented){var n=e.state.focusIndex;if(!(n<0)){var o=e.getFilteredChildren(e.props.children),i=o[n];i.props.menuItems&&i.props.menuItems.length>0||e.setFocusIndex(t,-1,!1)}}},this.handleKeyDown=function(t){var n=e.getFilteredChildren(e.props.children),o=(0,A.default)(t);switch(o){case"down":t.preventDefault(),e.incrementKeyboardFocusIndex(t,n);break;case"esc":e.props.onEscKeyDown(t);break;case"tab":t.preventDefault(),t.shiftKey?e.decrementKeyboardFocusIndex(t):e.incrementKeyboardFocusIndex(t,n);break;case"up":t.preventDefault(),e.decrementKeyboardFocusIndex(t);break;default:if(o&&1===o.length){var i=e.hotKeyHolder.append(o);e.setFocusIndexStartsWith(t,i)&&t.preventDefault()}}e.props.onKeyDown(t)},this.handleOnWheel=function(t){var n=e.refs.scrollContainer;if(!(n.scrollHeight<=n.clientHeight)){var o=n.scrollTop,i=n.scrollHeight,a=n.clientHeight,r=t.deltaY,s=r>0;return s&&r>i-a-o?(n.scrollTop=i,e.cancelScrollEvent(t)):!s&&-r>o?(n.scrollTop=0,e.cancelScrollEvent(t)):void 0}}};B.propTypes={},t.default=B},3548:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuItem=t.Menu=void 0;var i=n(3547),a=o(i),r=n(3531),s=o(r);t.Menu=a.default,t.MenuItem=s.default,t.default=a.default},3549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3597),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3550:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=o(i),r=n(2),s=o(r),l=n(3),c=o(l),u=n(5),d=o(u),f=n(4),p=o(f),h=n(0),m=n(1),g=(o(m),n(14)),E=o(g),T=n(3553),v=o(T),y=function e(t,n){return null!==n&&(t===n||e(t,n.parentNode))},C=["mouseup","touchend"],b=function(e){return C.forEach(function(t){return v.default.on(document,t,e)})},O=function(e){return C.forEach(function(t){return v.default.off(document,t,e)})},I=function(e){function t(){var e,n,o,i;(0,s.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=o=(0,d.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.handleClickAway=function(e){if(!e.defaultPrevented&&o.isCurrentlyMounted){var t=E.default.findDOMNode(o);document.documentElement.contains(e.target)&&!y(t,e.target)&&o.props.onClickAway(e)}},i=n,(0,d.default)(o,i)}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.props.onClickAway&&b(this.handleClickAway)}},{key:"componentDidUpdate",value:function(e){e.onClickAway!==this.props.onClickAway&&(O(this.handleClickAway),this.props.onClickAway&&b(this.handleClickAway))}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,O(this.handleClickAway)}},{key:"render",value:function(){return this.props.children}}]),t}(h.Component);I.propTypes={},t.default=I},3551:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=o(i),r=n(2),s=o(r),l=n(3),c=o(l),u=n(5),d=o(u),f=n(4),p=o(f),h=n(0),m=n(1),g=o(m),E=n(14),T=n(3552),v=o(T),y=function(e){function t(){var e,n,o,i;(0,s.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=o=(0,d.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.onClickAway=function(e){if(!e.defaultPrevented&&o.props.componentClickAway&&o.props.open){var t=o.layer;(e.target!==t&&e.target===window||document.documentElement.contains(e.target)&&!v.default.isDescendant(t,e.target))&&o.props.componentClickAway(e)}},i=n,(0,d.default)(o,i)}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.renderLayer()}},{key:"componentDidUpdate",value:function(){this.renderLayer()}},{key:"componentWillUnmount",value:function(){this.unrenderLayer()}},{key:"getLayer",value:function(){return this.layer}},{key:"unrenderLayer",value:function(){this.layer&&(this.props.useLayerForClickAway?(this.layer.style.position="relative",this.layer.removeEventListener("touchstart",this.onClickAway),this.layer.removeEventListener("click",this.onClickAway)):(window.removeEventListener("touchstart",this.onClickAway),window.removeEventListener("click",this.onClickAway)),(0,E.unmountComponentAtNode)(this.layer),document.body.removeChild(this.layer),this.layer=null)}},{key:"renderLayer",value:function(){var e=this,t=this.props,n=t.open,o=t.render;if(n){this.layer||(this.layer=document.createElement("div"),document.body.appendChild(this.layer),this.props.useLayerForClickAway?(this.layer.addEventListener("touchstart",this.onClickAway),this.layer.addEventListener("click",this.onClickAway),this.layer.style.position="fixed",this.layer.style.top=0,this.layer.style.bottom=0,this.layer.style.left=0,this.layer.style.right=0,this.layer.style.zIndex=this.context.muiTheme.zIndex.layer):setTimeout(function(){window.addEventListener("touchstart",e.onClickAway),window.addEventListener("click",e.onClickAway)},0));var i=o();this.layerElement=(0,E.unstable_renderSubtreeIntoContainer)(this,i,this.layer)}else this.unrenderLayer()}},{key:"render",value:function(){return null}}]),t}(h.Component);y.defaultProps={useLayerForClickAway:!0},y.contextTypes={muiTheme:g.default.object.isRequired},y.propTypes={},t.default=y},3552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isDescendant:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}}}},3553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={once:function(e,t,n){for(var o=t?t.split(" "):[],i=function e(t){return t.target.removeEventListener(t.type,e),n(t)},a=o.length-1;a>=0;a--)this.on(e,o[a],i)},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,function(){n.call(e)})},off:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)},isKeyboard:function(e){return-1!==["keydown","keypress","keyup"].indexOf(e.type)}}},3554:function(e,t,n){"use strict";t.__esModule=!0;var o=n(3620),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(e){return(0,i.default)("displayName",e)};t.default=a},3555:function(e,t,n){"use strict";t.__esModule=!0;var o=n(3619),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(e,t){return t+"("+(0,i.default)(e)+")"};t.default=a},3556:function(e,t,n){"use strict";var o=n(17),i=(n.n(o),n(1365)),a=new Map([["programRule",[{label:"enter_program_rule_details",fields:["program","programStage","name","description","priority"]},{label:"enter_program_rule_expression",fields:["condition"]},{label:"define_program_rule_actions",fields:["programRuleActions"]}]],["dataSetNotificationTemplate",[{label:"what_to_send",fields:["name","code","dataSets","messageTemplate"]},{label:"when_to_send_it",fields:["dataSetNotificationTrigger","relativeScheduledDays","sendStrategy"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels"]}]],["programNotificationTemplate",[{label:"what_to_send",fields:["name","messageTemplate"]},{label:"when_to_send_it",fields:["notificationTrigger","relativeScheduledDays"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels","recipientProgramAttribute","notifyUsersInHierarchyOnly","notifyParentOrganisationUnitOnly"]}]],["programStageNotificationTemplate",[{label:"what_to_send",fields:["name","messageTemplate"]},{label:"when_to_send_it",fields:["notificationTrigger","relativeScheduledDays"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels","recipientDataElement","recipientProgramAttribute","notifyUsersInHierarchyOnly","notifyParentOrganisationUnitOnly"]}]],["programIndicator",[{label:"program_indicator__details",fields:["program","name","shortName","code","description","decimals","aggregationType","analyticsType","analyticsPeriodBoundaries","displayInForm","legendSets","aggregateExportCategoryOptionCombo","aggregateExportAttributeOptionCombo"]},{label:"program_indicator__edit_expression",fields:["expression"]},{label:"program_indicator__edit_filter",fields:["filter"]}]]]);t.a={for:function(e){return this.isGroupedFields(e)?a.get(e):[{label:"details",fields:i.a.for(e)}]},isGroupedFields:function(e){return e&&a.has(e)},getStepLength:function(e){if(this.isGroupedFields(e)){return a.get(e).length}return 0},groupNoByName:function(e,t){if(this.isGroupedFields(t)){var i=a.get(t);return n.i(o.findIndex)(function(t){return t.fields.includes(e)},i)}return 0},groupNameByStep:function(e,t){if(this.isGroupedFields(t)){return a.get(t)[e].label}return""},groupsByField:function(e){if(this.isGroupedFields(e))return a.get(e).map(function(e){return e.fields}).reduce(function(e,t,n){return t.map(function(t){return e[t]=n}),e},{})}}},3557:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(321),d=n.n(u),f=n(209),p=n.n(f),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),g=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));a.onLocaleChange=function(e,t,n){a.setState({locale:n}),a.props.onChange(n,e)};var r=a.context.d2.i18n;return a.getTranslation=r.getTranslation.bind(r),a}return a(t,e),m(t,[{key:"render",value:function(){var e=[{payload:"",text:""}].concat(this.props.locales).map(function(e,t){return s.a.createElement(p.a,{key:t,primaryText:e.name,value:e.locale})});return s.a.createElement(d.a,h({fullWidth:!0},this.props,{value:this.state&&this.state.locale,hintText:this.getTranslation("select_locale"),onChange:this.onLocaleChange}),e)}}]),t}(r.Component);g.propTypes={value:c.a.string,locales:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,locale:c.a.string.isRequired})).isRequired,onChange:c.a.func.isRequired},g.contextTypes={d2:c.a.object},t.a=g},3558:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=b.a.create();return n.i(y.a)(e).subscribe(function(e){t.setState(e)}),T.Observable.combineLatest(n.i(y.b)(),t,function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return Object.assign.apply(Object,[{objectToTranslate:e,setTranslations:function(e){t.setState({translations:e})}}].concat(o))})}function s(e){return n.i(C.a)(r(e),D)}t.a=s;var l=n(0),c=n.n(l),u=n(1),d=n.n(u),f=n(114),p=n.n(f),h=n(92),m=n.n(h),g=n(205),E=n.n(g),T=n(25),v=(n.n(T),n(3557)),y=n(3559),C=n(1366),b=n(49),O=n(171),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),D=function(e){function t(e,a){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));r.state={loading:!0,translations:{},translationValues:{},currentSelectedLocale:""},r.setCurrentLocale=function(e){r.setState({currentSelectedLocale:e})},r.setValue=function(e,t){var n=[].concat(r.props.translations),o=n.find(function(t){return t.locale===r.state.currentSelectedLocale&&t.property.toLowerCase()===m()(e)});o?t.target.value?o.value=t.target.value:n=n.filter(function(e){return e!==o}):(o={property:m()(e).toUpperCase(),locale:r.state.currentSelectedLocale,value:t.target.value},n.push(o)),r.props.setTranslations(n)},r.saveTranslations=function(){n.i(y.c)(r.props.objectToTranslate,r.props.translations).subscribe(r.props.onTranslationSaved,r.props.onTranslationError)};var s=r.context.d2.i18n;return r.getTranslation=s.getTranslation.bind(s),r}return a(t,e),I(t,[{key:"getLoadingdataElement",value:function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(O.a,{mode:"indeterminate"}))}},{key:"renderFieldsToTranslate",value:function(){var e=this;return this.props.fieldsToTranslate.filter(function(e){return e}).map(function(t){return c.a.createElement("div",{key:t},c.a.createElement(p.a,{floatingLabelText:e.getTranslation(m()(t)),value:e.getTranslationValueFor(t),fullWidth:!0,onChange:e.setValue.bind(e,t)}),c.a.createElement("div",null,e.props.objectToTranslate[t]))})}},{key:"renderForm",value:function(){return c.a.createElement("div",null,this.renderFieldsToTranslate(),c.a.createElement(E.a,{label:this.getTranslation("save"),primary:!0,onClick:this.saveTranslations}),c.a.createElement(E.a,{style:{marginLeft:"1rem"},label:this.getTranslation("cancel"),onClick:this.props.onCancel}))}},{key:"renderHelpText",value:function(){return c.a.createElement("div",null,c.a.createElement("p",null,this.getTranslation("select_a_locale_to_enter_translations_for_that_language")))}},{key:"render",value:function(){return this.props.locales||this.props.translations?c.a.createElement("div",{style:{minHeight:250}},c.a.createElement(v.a,{locales:this.props.locales,onChange:this.setCurrentLocale}),this.state.currentSelectedLocale?this.renderForm():this.renderHelpText()):this.getLoadingdataElement()}},{key:"getTranslationValueFor",value:function(e){var t=this,n=this.props.translations.find(function(n){return n.locale===t.state.currentSelectedLocale&&n.property.toLowerCase()===m()(e)});if(n)return n.value}}]),t}(l.Component);D.propTypes={onTranslationSaved:d.a.func.isRequired,onTranslationError:d.a.func.isRequired,objectToTranslate:d.a.shape({id:d.a.string.isRequired}),fieldsToTranslate:d.a.arrayOf(d.a.string)},D.defaultProps={fieldsToTranslate:["name","shortName","description"]},D.contextTypes={d2:d.a.object}},3559:function(e,t,n){"use strict";function o(){return o.localePromise||(o.localePromise=n.i(r.getInstance)().then(function(e){return e.Api.getApi().get("locales/db")}).then(function(e){return{locales:e}})),s.Observable.fromPromise(o.localePromise)}function i(e){return e.href?e.href:e.modelDefinition.apiEndpoint+"/"+e.id}function a(e){return s.Observable.of(e).flatMap(function(e){var t=e.modelDefinition;return t||t.name?n.i(r.getInstance)().then(function(t){return t.Api.getApi().get(i(e)+"/translations")}):Promise.reject(new Error("Can not find modelDefinition for "+e.id))})}t.b=o,t.a=a,n.d(t,"c",function(){return u});var r=n(18),s=(n.n(r),n(25)),l=(n.n(s),n(93)),c=function(){function e(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=l.a.create("saveTranslations");u.subscribe(function(e){var t=c(e.data,2),o=t[0],a=t[1],s=e.complete,l=e.error,u=i(o)+"/translations";n.i(r.getInstance)().then(function(e){e.Api.getApi().update(u,{translations:a},{dataType:"text"}).then(function(){return s(a)}).catch(l)})})},3560:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){var i=e.level,a=e.schema,s=e.children,l=e.groupName,c=e.isDirtyHandler,m=e.skipTranslation,g=o(e,["level","schema","children","groupName","isDirtyHandler","skipTranslation"]);return r.a.createElement(u.a,h({},g,{level:i}),r.a.createElement(f.a,{onClick:function(){return n.i(p.b)("/list/"+l+"/"+a)},iconStyle:{top:3},isDirtyHandler:c}),m?s:t.d2.i18n.getTranslation(s),a&&r.a.createElement(d.a,{schema:a}))}var a=n(0),r=n.n(a),s=n(1),l=n.n(s),c=n(90),u=n(318),d=n(3538),f=n(3563),p=n(207),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};i.propTypes={children:l.a.oneOfType([l.a.string,l.a.array]),level:l.a.number,isDirtyHandler:l.a.func,schema:l.a.string.isRequired,groupName:l.a.string.isRequired,skipTranslation:l.a.bool},i.defaultProps={isDirtyHandler:function(){},level:2,children:"",skipTranslation:!1},t.a=n.i(c.a)(i)},3561:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(i,a){try{var r=t[i](a),s=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.props&&t.props.isRequired?e+" (*)":e}function a(e,t){var o=e.models[t];return Object.keys(o.attributeProperties).map(function(t){var i=o.attributeProperties[t];return n.i(k.a)({name:i.name,valueType:i.valueType,type:k.b.get(i.optionSet?"CONSTANT":i.valueType),required:Boolean(i.mandatory),fieldOptions:{labelText:i.name,options:i.optionSet?i.optionSet.options.map(function(e){return{name:e.displayName||e.name,value:e.code}}):[]}},o,e.models)})}function r(e,t){e.validators&&(e.validators=e.validators.map(function(e){return w({},e,{message:t.i18n.getTranslation(e.message)})}))}function s(e,t){e.translatedName=t.i18n.getTranslation(e.props.labelText),e.props.labelText=i(e.translatedName,e)}function l(e,t,n){if(R.a.isGroupedFields(t)&&"programNotificationTemplate"!==t){var o=R.a.groupNoByName(e.name,t),i=R.a.groupNameByStep(o,t);e.step=o+1+": "+n.i18n.getTranslation(i)}}function c(e,t,o){return function(i){if(!i||!i.trim())return Promise.resolve(!0);var a=t.filter().on(e.fieldOptions.referenceProperty).equals(i);return o&&(a=a.filter().on("id").notEqual(o)),a.list().then(function(e){return 0!==e.size?n.i(T.getInstance)().then(function(e){return e.i18n.getTranslation("value_not_unique")}).then(function(e){return Promise.reject(e)}):Promise.resolve(!0)})}}function u(e,t){return e.unique&&(e.asyncValidators=[c(e,t.modelDefinition,t.id)]),e}function d(e,t){return e.attributes&&new Set(Object.keys(e.attributes)).has(t.name)}function f(e,t){return e.map(function(e){return d(t,e)?w({},e,{value:t.attributes[e.name]}):w({},e,{value:t[e.name]})}).map(N).map(A(t))}function p(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.identity,i=arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments[5];return o=o||C.identity,y()(function(s){return s.filter(function(e){return e.model}).combineLatest(E.Observable.fromPromise(x(e,t,i,r)),function(t,i){var s=f(i,t.model),l=a?n.i(K.a)(n.i(K.b)(r||e),o(s),t.model):s;return w({},t,{fieldConfigs:l})})})}function h(e,t,o,i,a){function r(e){var o=e.fieldConfigs,i=e.model,r=e.editFieldChanged,s=e.detailsFormStatusChange,l=void 0===s?C.noop:s,c=P(o,r),u=n.i(K.a)(n.i(K.b)(a||t),o,i);return g.a.createElement(b.a,{fields:u,onUpdateField:c,onUpdateFormStatus:l})}return n.i(C.compose)(y()(function(t){return t.combineLatest(e,function(e,t){return w({},e,{model:t})})}),p(t,o,void 0,i,!1,a))(r)}n.d(t,"a",function(){return x}),t.b=u,t.c=p,t.e=h,n.d(t,"d",function(){return L});var m=n(0),g=n.n(m),E=n(25),T=(n.n(E),n(18)),v=(n.n(T),n(755)),y=n.n(v),C=n(17),b=(n.n(C),n(1368)),O=n(1386),I=n(1387),D=n(1365),R=n(3556),_=n(1384),k=n(759),K=n(3622),S=function(){function e(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x=function(){var e=o(regeneratorRuntime.mark(function e(t,o){var i,c,u,d,f,p,h,m,g,E,v,y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(T.getInstance)();case 2:for(i=e.sent,c=new I.a(new O.a(i.models)),c.setFieldOrder(o||D.a.for(t)),u=!0,d=!1,f=void 0,e.prev=8,p=_.a.for(C||t)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)m=h.value,g=S(m,2),E=g[0],v=g[1],c.addFieldOverrideFor(E,v);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),d=!0,f=e.t0;case 16:e.prev=16,e.prev=17,!u&&p.return&&p.return();case 19:if(e.prev=19,!d){e.next=22;break}throw f;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",c.getFormFieldsForModel({modelDefinition:i.models[t]},C).map(function(e){return r(e,i),l(e,t,i),s(e,i),e}).concat(y?a(i,t):[]));case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(t,n){return e.apply(this,arguments)}}(),N=function(e){return e.beforePassToFieldConverter?w({},e,{value:e.beforePassToFieldConverter(e.value)}):e},A=function(e){return function(t){return w({},t,{props:w({},t.props,{model:e})})}},P=function(e,t){return function(n,o){var i=e.find(function(e){return e.name===n}),a=i.beforeUpdateConverter||C.identity;return t(n,a(o))}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){return t.length<1||t.includes(n.name)?w({},n,{props:w({},n.props,e)}):n}}},3562:function(e,t,n){"use strict";var o=n(3573);t.a=o.a},3563:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){var n=e.tooltip,i=e.onClick,a=e.isDirtyHandler,s=void 0===a?u.a.getState.bind(u.a):a,c=o(e,["tooltip","onClick","isDirtyHandler"]),f=function(){s&&s()&&s().dirty?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&i.apply(void 0,arguments):i.apply(void 0,arguments)};return r.a.createElement(l.a,d({tooltip:n||t.d2.i18n.getTranslation("back"),tooltipPosition:"bottom-right",onClick:f},c,{iconClassName:"material-icons"}),"")}var a=n(0),r=n.n(a),s=n(208),l=n.n(s),c=n(90),u=n(248),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};i.propTypes={tooltip:r.a.PropTypes.string},t.a=n.i(c.a)(i)},3566:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}))};u=(0,s.default)(u),u.displayName="ContentAdd",u.muiName="SvgIcon",t.default=u},3567:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){var n=t.d2,i=e.isSaving,a=(e.isValid,e.onClick),s=o(e,["isSaving","isValid","onClick"]),l=i?n.i18n.getTranslation("saving"):n.i18n.getTranslation("save");return r.a.createElement(u.a,f({},s,{primary:!0,onClick:a,label:l,disabled:i}))}var a=n(0),r=n.n(a),s=n(1),l=n.n(s),c=n(205),u=n.n(c),d=n(90),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};i.propTypes={isSaving:l.a.bool,isValid:l.a.bool,onClick:l.a.func.isRequired},i.defaultProps={isSaving:!1,isValid:!0},t.a=n.i(d.a)(i)},3568:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=o(i),r=n(2),s=o(r),l=n(3),c=o(l),u=n(5),d=o(u),f=n(4),p=o(f),h=n(9),m=o(h),g=n(0),E=o(g),T=n(1),v=o(T),y=n(3658),C=(o(y),n(3657)),b=o(C),O=n(3659),I=o(O),D=function(e){function t(e,n){var o=n.muiTheme;(0,s.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return i.state={isKeyboardFocused:!1},i.styles=(0,I.default)(o),i.getStylesMain=i.getStylesMain.bind(i),i.getStylesText=i.getStylesText.bind(i),i.getStylesFocus=i.getStylesFocus.bind(i),i.setFocus=i.setFocus.bind(i),i.handleFocus=i.handleFocus.bind(i),i.handleKeyUp=i.handleKeyUp.bind(i),i.handleBlur=i.handleBlur.bind(i),i}return(0,p.default)(t,e),(0,c.default)(t,[{key:"handleBlur",value:function(){this.setState({isKeyboardFocused:!1}),this.props.onBlur()}},{key:"handleFocus",value:function(){this.setState({isKeyboardFocused:!0}),this.props.onFocus()}},{key:"handleKeyUp",value:function(e){this.state.isKeyboardFocused&&13===e.keyCode&&this.props.onClick(e)}},{key:"setFocus",value:function(){this.refs.link.focus()}},{key:"getStylesMain",value:function(){var e=this.props,t=e.isOpen,n=e.direction,o=e.alignment,i=e.style,a=this.styles,r=t?"visible":"invisible";return(0,m.default)({},a.root.main,a.root[r].main,a.root.direction[n],a.root[r].direction[n],a.root.alignment[o],i)}},{key:"getStylesFocus",value:function(e){return this.state.isKeyboardFocused?this.styles.focus[e]:{}}},{key:"getStylesText",value:function(){var e=this.props,t=e.alignment,n=e.styleText,o=this.styles;return(0,m.default)({},o.text.main,o.text.alignment[t],this.getStylesFocus("text"),n)}},{key:"renderAvatar",value:function(e){var t=this.styles,n=this.props[e];return n?E.default.cloneElement(n,{style:(0,m.default)({},n.props.style,t[e],this.getStylesFocus("avatar"))}):null}},{key:"renderContent",value:function(){var e=this.props.primaryText;return E.default.createElement("span",null,this.renderAvatar("leftAvatar"),E.default.createElement("span",{style:this.getStylesText()},e),this.renderAvatar("rightAvatar"))}},{key:"renderLink",value:function(){var e=this.props,t=e.href,n=e.onClick,o=e.tabIndex,i=e.isOpen,a=this.styles;return t?E.default.createElement("a",{href:t,ref:"link",style:a.wrap.main,tabIndex:i?o:-1,onBlur:this.handleBlur,onFocus:this.handleFocus},this.renderContent()):E.default.createElement("a",{ref:"link",style:a.wrap.main,tabIndex:i?o:-1,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyUp:this.handleKeyUp,onClick:n},this.renderContent())}},{key:"render",value:function(){var e=this.props.className;return E.default.createElement("li",{className:e,ref:"item",style:this.getStylesMain()},this.renderLink())}}]),t}(E.default.Component);D.displayName="BubbleListItem",D.propTypes={},D.defaultProps=b.default,D.contextTypes={muiTheme:v.default.object.isRequired},t.default=D},3569:function(e,t,n){"use strict";n.d(t,"c",function(){return y}),n.d(t,"b",function(){return C}),n.d(t,"a",function(){return O});var o=n(7),i=n.n(o),a=n(1),r=n.n(a),s=n(0),l=n.n(s),c=n(3618),u=n(3530),d=n.n(u),f=n(79),p=n(3543),h=n(3544),m={accessView:{fontWeight:"400",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"4px 8px"},accessDescription:{display:"flex",flexDirection:"column",flex:1,paddingLeft:16}},g={d2:r.a.object.isRequired},E=function(e){switch(e){case"user":return"Person";case"userGroup":return"Group";case"external":return"Public";case"public":return"Business";default:return"Person"}},T=function(e){return i()({},e,{access:n.i(h.b)(e.access),onChange:function(t){e.onChange(n.i(h.a)(t))}})},v=function(e){var t=e.access,n=e.accessType,o=e.accessOptions,i=e.primaryText,a=e.secondaryText,r=e.onChange,s=e.onRemove,c=e.disabled;return l.a.createElement("div",{style:m.accessView},l.a.createElement(f.c,{icon:E(n)}),l.a.createElement("div",{style:m.accessDescription},l.a.createElement("div",null,i),l.a.createElement("div",{style:{color:"#818181",paddingTop:4}},a||" ")),l.a.createElement(p.a,{access:t,accessOptions:o,onChange:r,disabled:c}),l.a.createElement(d.a,{disabled:!s,iconStyle:{color:"#bbbbbb"},onClick:s||function(){}},l.a.createElement(f.c,{icon:"Clear"})))};v.contextTypes=g,v.propTypes={access:r.a.object.isRequired,accessType:r.a.string.isRequired,accessOptions:r.a.object.isRequired,primaryText:r.a.string.isRequired,onChange:r.a.func.isRequired,disabled:r.a.bool,secondaryText:r.a.string,onRemove:r.a.func},v.defaultProps={secondaryText:void 0,onRemove:void 0,disabled:!1};var y=n.i(c.a)(n.i(c.b)(T),n.i(c.c)(function(e){return{accessType:e.groupType,primaryText:e.groupName,accessOptions:{meta:{canView:!0,canEdit:!0,noAccess:!1},data:e.dataShareable&&{canView:!0,canEdit:!0,noAccess:!0}}}}))(v),C=n.i(c.a)(n.i(c.d)(g),n.i(c.c)(function(e){return e.d2.i18n.addStrings(["public_access","external_access","anyone_can_view_without_a_login","anyone_can_find_view_and_edit","anyone_can_find_and_view","no_access"]),{accessType:"external",primaryText:e.d2.i18n.getTranslation("external_access"),secondaryText:e.access?e.d2.i18n.getTranslation("anyone_can_view_without_a_login"):e.d2.i18n.getTranslation("no_access"),access:{meta:{canEdit:!1,canView:e.access},data:{canEdit:!1,canView:!1}},onChange:function(t){e.onChange(t.meta.canView)},accessOptions:{meta:{canView:!0,canEdit:!1,noAccess:!0}}}}))(v),b=function(e){var t=e.canView;return e.canEdit?"anyone_can_find_view_and_edit":t?"anyone_can_find_and_view":"no_access"},O=n.i(c.a)(n.i(c.b)(T),n.i(c.d)(g),n.i(c.c)(function(e){return e.d2.i18n.addStrings(["public_access","external_access","anyone_can_view_without_a_login","anyone_can_find_view_and_edit","anyone_can_find_and_view","no_access"]),{accessType:"public",primaryText:e.d2.i18n.getTranslation("public_access"),secondaryText:e.d2.i18n.getTranslation(b(e.access.meta)),accessOptions:{meta:{canView:!0,canEdit:!0,noAccess:!0},data:e.dataShareable&&{canView:!0,canEdit:!0,noAccess:!0}}}}))(v)},3570:function(e,t,n){"use strict";var o=n(1),i=n.n(o),a=n(0),r=n.n(a),s=function(e,t){var n=e.author;t.d2.i18n.addStrings(["created_by","no_author"]);var o=n?t.d2.i18n.getTranslation("created_by")+": "+n.name:t.d2.i18n.getTranslation("no_author");return r.a.createElement("div",null,o)};s.propTypes={author:i.a.object.isRequired},s.contextTypes={d2:i.a.object.isRequired},t.a=s},3571:function(e,t,n){"use strict";var o=n(6),i=n.n(o),a=n(2),r=n.n(a),s=n(5),l=n.n(s),c=n(4),u=n.n(c),d=n(1),f=n.n(d),p=n(0),h=n.n(p),m=n(79),g=n(3531),E=n.n(g),T=function(e){function t(){var e,n,o,a;r()(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=o=l()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(c))),o.ref=null,o.render=function(){return o.props.disabled?null:h.a.createElement(E.a,{insetChildren:!0,leftIcon:o.props.isSelected?h.a.createElement(m.c,{icon:"Done"}):void 0,primaryText:o.props.primaryText,value:o.props.value,disabled:o.props.disabled,onClick:o.props.onClick,focusState:o.props.focusState})},a=n,l()(o,a)}return u()(t,e),t}(p.Component);T.propTypes={disabled:f.a.bool.isRequired,isSelected:f.a.bool,primaryText:f.a.string.isRequired,value:f.a.object.isRequired,onClick:f.a.func,focusState:f.a.string},T.defaultProps={onClick:void 0,focusState:"none",isSelected:!1},T.muiName="MenuItem",t.a=T},3572:function(e,t,n){"use strict";var o=n(66),i=n.n(o),a=n(7),r=n.n(a),s=n(6),l=n.n(s),c=n(2),u=n.n(c),d=n(3),f=n.n(d),p=n(5),h=n.n(p),m=n(4),g=n.n(m),E=n(1),T=n.n(E),v=n(0),y=n.n(v),C=n(3529),b=n.n(C),O=n(3549),I=n.n(O),D=n(79),R=n(3574),_=n(3570),k=n(3569),K={createdBy:{color:"#818181"},titleBodySpace:{paddingTop:30},rules:{height:"240px",overflowY:"scroll"}},S=function(e){function t(e,n){u()(this,t);var o=h()(this,(t.__proto__||l()(t)).call(this,e));return o.onAccessRuleChange=function(e){return function(t){var n=function(n){return n.id===e?r()({},n,{access:t}):n},i=(o.props.sharedObject.object.userAccesses||[]).map(n),a=(o.props.sharedObject.object.userGroupAccesses||[]).map(n);o.props.onChange({userAccesses:i,userGroupAccesses:a})}},o.onAccessRemove=function(e){return function(){var t=function(t){return t.id!==e},n=(o.props.sharedObject.object.userAccesses||[]).filter(t),i=(o.props.sharedObject.object.userGroupAccesses||[]).filter(t);o.props.onChange({userAccesses:n,userGroupAccesses:i})}},o.onPublicAccessChange=function(e){o.props.onChange({publicAccess:e})},o.onExternalAccessChange=function(e){o.props.onChange({externalAccess:e})},o.setAccessListRef=function(e){o.accessListRef=e},o.accessListRef=null,o.addUserAccess=function(e){var t=o.props.sharedObject.object.userAccesses||[];o.props.onChange({userAccesses:[].concat(i()(t),[e])},o.scrollAccessListToBottom())},o.addUserGroupAccess=function(e){var t=o.props.sharedObject.object.userGroupAccesses||[];o.props.onChange({userGroupAccesses:[].concat(i()(t),[e])},o.scrollAccessListToBottom())},o.scrollAccessListToBottom=function(){o.accessListRef.scrollTop=o.accessListRef.scrollHeight},n.d2.i18n.addStrings(["who_has_access"]),o}return g()(t,e),f()(t,[{key:"render",value:function(){var e=this,t=this.props.sharedObject.object,n=t.user,o=t.displayName,i=t.userAccesses,a=t.userGroupAccesses,r=t.publicAccess,s=t.externalAccess,l=this.props.sharedObject.meta,c=l.allowPublicAccess,u=l.allowExternalAccess,d=(i||[]).map(function(e){return e.id}).concat((a||[]).map(function(e){return e.id}));return y.a.createElement("div",null,y.a.createElement(D.b,{text:o,level:2}),y.a.createElement(_.a,{author:n}),y.a.createElement("div",{style:K.titleBodySpace}),y.a.createElement(I.a,null,this.context.d2.i18n.getTranslation("who_has_access")),y.a.createElement(b.a,null),y.a.createElement("div",{style:K.rules,ref:this.setAccessListRef},y.a.createElement(k.a,{access:r,disabled:!c,dataShareable:this.props.dataShareable,onChange:this.onPublicAccessChange}),y.a.createElement(b.a,null),y.a.createElement(k.b,{access:s,disabled:!u,onChange:this.onExternalAccessChange}),y.a.createElement(b.a,null),i&&i.map(function(t){return y.a.createElement("div",{key:t.id},y.a.createElement(k.c,{groupName:t.displayName,groupType:"user",access:t.access,dataShareable:e.props.dataShareable,onRemove:e.onAccessRemove(t.id),onChange:e.onAccessRuleChange(t.id)}),y.a.createElement(b.a,null))}),a&&a.map(function(t){return y.a.createElement("div",{key:t.id},y.a.createElement(k.c,{access:t.access,groupName:t.displayName,groupType:"userGroup",dataShareable:e.props.dataShareable,onRemove:e.onAccessRemove(t.id),onChange:e.onAccessRuleChange(t.id)}),y.a.createElement(b.a,null))})),y.a.createElement(R.a,{onSearch:this.props.onSearch,addUserAccess:this.addUserAccess,addUserGroupAccess:this.addUserGroupAccess,dataShareable:this.props.dataShareable,currentAccessIds:d}))}}]),t}(y.a.Component);S.propTypes={sharedObject:T.a.object.isRequired,dataShareable:T.a.bool.isRequired,onChange:T.a.func.isRequired,onSearch:T.a.func.isRequired},S.contextTypes={d2:T.a.object.isRequired},t.a=S},3573:function(e,t,n){"use strict";var o=n(7),i=n.n(o),a=n(6),r=n.n(a),s=n(2),l=n.n(s),c=n(3),u=n.n(c),d=n(5),f=n.n(d),p=n(4),h=n.n(p),m=n(3577),g=n.n(m),E=n(3545),T=n.n(E),v=n(3593),y=n.n(v),C=n(3596),b=n.n(C),O=n(1),I=n.n(O),D=n(0),R=n.n(D),_=n(3572),k=n(79),K={loadingMask:{position:"relative"}},S={sharedObject:null,errorMessage:""},w=function(e){function t(e){l()(this,t);var n=f()(this,(t.__proto__||r()(t)).call(this,e));return x.call(n),e.d2?e.d2.i18n.addStrings(["share","close","no_manage_access"]):console.error("no d2"),n}return h()(t,e),u()(t,[{key:"getChildContext",value:function(){return{d2:this.props.d2}}},{key:"componentDidMount",value:function(){this.loadDataSharingSettings(),this.props.open&&this.isReadyToLoadObject(this.props)&&this.loadObjectFromApi(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.createPropsChecker(e);(t("id")||t("type")||t("sharedObject"))&&this.isReadyToLoadObject(e)&&(this.resetState(),e.open&&this.loadObjectFromApi(e)),!this.props.open&&e.open&&this.isReadyToLoadObject(e)&&this.loadObjectFromApi(e)}},{key:"render",value:function(){var e=-1!==this.state.dataShareableTypes.indexOf(this.props.type),t=""!==this.state.errorMessage,n=!this.state.sharedObject&&this.props.open&&!t,o=[R.a.createElement(T.a,{label:this.translate("close"),onClick:this.closeDialog})];return this.props.doNotPost&&o.push(R.a.createElement(y.a,{primary:!0,style:{marginLeft:"8px"},label:this.translate("apply"),onClick:this.confirmAndCloseDialog})),R.a.createElement("div",null,R.a.createElement(b.a,{open:t,message:this.state.errorMessage,autoHideDuration:3e3}),R.a.createElement(g.a,i()({autoDetectWindowHeight:!0,autoScrollBodyContent:!0,open:this.props.open,title:this.props.d2.i18n.getTranslation("share"),actions:o,onRequestClose:this.closeDialog},this.props),n&&R.a.createElement(k.a,{style:K.loadingMask,size:1}),this.state.sharedObject&&R.a.createElement(_.a,{sharedObject:this.state.sharedObject,dataShareable:e,onChange:this.onSharingChanged,onSearch:this.onSearchRequest})))}}]),t}(R.a.Component),x=function(){var e=this;this.state=i()({},S,{dataShareableTypes:[]}),this.isReadyToLoadObject=function(e){return e.type&&(e.id||e.sharedObject)},this.onSearchRequest=function(t){return e.props.d2.Api.getApi().get("sharing/search",{key:t}).then(function(e){return e})},this.onSharingChanged=function(t,n){var o={meta:e.state.sharedObject.meta,object:i()({},e.state.sharedObject.object,t)};e.props.doNotPost?e.updateSharedObject(o,n):e.postChanges(o,n)},this.createPropsChecker=function(t){return function(n){return t[n]!==e.props[n]}},this.postChanges=function(t,n){var o="sharing?type="+e.props.type+"&id="+e.props.id;return e.props.d2.Api.getApi().post(o,t).then(function(o){var i=o.httpStatus,a=o.message;return"OK"===i&&e.updateSharedObject(t,n),a}).catch(function(t){var n=t.message;e.setState({errorMessage:n})})},this.updateSharedObject=function(t,n){e.setState({sharedObject:t},function(){n&&n()})},this.resetState=function(){e.setState(S)},this.loadDataSharingSettings=function(){e.props.d2.Api.getApi().get("schemas",{fields:["name","dataShareable"]}).then(function(t){var n=t.schemas.filter(function(e){return e.dataShareable}).map(function(e){return e.name});e.setState({dataShareableTypes:n})})},this.loadObjectFromApi=function(t){var n=function(t){e.setState({sharedObject:t})};t.sharedObject?n(t.sharedObject):e.props.d2.Api.getApi().get("sharing",{type:t.type,id:t.id}).then(function(e){return n(e)}).catch(function(t){e.setState({errorMessage:t.message})})},this.addId=function(t){return i()({},t,{id:e.props.id})},this.closeDialog=function(){e.props.onRequestClose(e.addId(e.state.sharedObject.object,e.props.id))},this.confirmAndCloseDialog=function(){e.props.onConfirm(e.addId(e.state.sharedObject.object,e.props.id))},this.translate=function(t){return e.props.d2.i18n.getTranslation(t)}};w.childContextTypes={d2:I.a.object},w.propTypes={open:I.a.bool.isRequired,type:I.a.string,id:I.a.string,doNotPost:I.a.bool,sharedObject:I.a.shape({object:I.a.shape({user:I.a.shape({name:I.a.string}).isRequired,displayName:I.a.string.isRequired,userAccesses:I.a.array.isRequired,userGroupAccesses:I.a.array.isRequired,publicAccess:I.a.string.isRequired,externalAccess:I.a.bool}),meta:I.a.shape({allowPublicAccess:I.a.bool.isRequired,allowExternalAccess:I.a.bool.isRequired})}),onRequestClose:I.a.func.isRequired,onConfirm:I.a.func,d2:I.a.object.isRequired},w.defaultProps={type:"",id:"",doNotPost:!1,sharedObject:null},t.a=w},3574:function(e,t,n){"use strict";var o=n(7),i=n.n(o),a=n(6),r=n.n(a),s=n(2),l=n.n(s),c=n(3),u=n.n(c),d=n(5),f=n.n(d),p=n(4),h=n.n(p),m=n(0),g=n.n(m),E=n(1),T=n.n(E),v=n(52),y=(n.n(v),n(766)),C=(n.n(y),n(1376)),b=(n.n(C),n(3576)),O=n.n(b),I=n(3544),D=n(3543),R={container:{fontWeight:"400",padding:16,backgroundColor:"#F5F5F5",display:"flex",flexDirection:"column",justifyContent:"center"},innerContainer:{display:"flex",flexDirection:"row",flex:1},title:{color:"#818181",paddingBottom:8},searchBox:{backgroundColor:"white",boxShadow:"2px 2px 2px #cccccc",padding:"0px 16px",marginRight:"16px"}},_=function(e){function t(e,o){l()(this,t);var a=f()(this,(t.__proto__||r()(t)).call(this,e));return a.state={defaultAccess:{meta:{canView:!0,canEdit:!0},data:{canView:!1,canEdit:!1}},searchResult:[],searchText:""},a.onResultClick=function(e,t){a.inputStream.next("");var o=a.state.searchResult[t],r=o.type;delete o.type,"userAccess"===r?a.props.addUserAccess(i()({},o,{access:n.i(I.a)(a.state.defaultAccess)})):a.props.addUserGroupAccess(i()({},o,{access:n.i(I.a)(a.state.defaultAccess)})),a.clearSearchText()},a.inputStream=new v.Subject,a.hasNoCurrentAccess=function(e){return-1===a.props.currentAccessIds.indexOf(e.id)},a.fetchSearchResult=function(e){""===e?a.handleSearchResult([]):a.props.onSearch(e).then(function(e){var t=e.users,n=e.userGroups,o=function(e){return function(t){return i()({},t,{type:e})}},r=t.map(o("userAccess")).filter(a.hasNoCurrentAccess).concat(n.map(o("userGroupAccess")).filter(a.hasNoCurrentAccess));a.handleSearchResult(r)})},a.handleSearchResult=function(e){a.setState({searchResult:e})},a.handleUpdateInput=function(e){a.inputStream.next(e),a.setState({searchText:e})},a.accessOptionsChanged=function(e){a.setState({defaultAccess:e})},a.clearSearchText=function(){a.setState({searchText:""})},a.noFilter=function(){return!0},o.d2.i18n.addStrings(["add_users_and_user_groups","enter_names"]),a}return h()(t,e),u()(t,[{key:"componentWillMount",value:function(){var e=this;this.inputStream.pipe(n.i(C.debounce)(function(){return n.i(y.timer)(300)})).subscribe(function(t){e.fetchSearchResult(t)})}},{key:"render",value:function(){return g.a.createElement("div",{style:R.container},g.a.createElement("div",{style:R.title},this.context.d2.i18n.getTranslation("add_users_and_user_groups")),g.a.createElement("div",{style:R.innerContainer},g.a.createElement(O.a,{fullWidth:!0,openOnFocus:!0,filter:this.noFilter,dataSource:this.state.searchResult,dataSourceConfig:{text:"displayName",value:"id"},hintText:this.context.d2.i18n.getTranslation("enter_names"),onNewRequest:this.onResultClick,onUpdateInput:this.handleUpdateInput,style:R.searchBox,searchText:this.state.searchText,underlineShow:!1}),g.a.createElement(D.a,{access:this.state.defaultAccess,accessOptions:{meta:{canView:!0,canEdit:!0,noAccess:!1},data:this.props.dataShareable&&{canView:!0,canEdit:!0,noAccess:!0}},onChange:this.accessOptionsChanged})))}}]),t}(m.Component);_.propTypes={onSearch:T.a.func.isRequired,addUserAccess:T.a.func.isRequired,dataShareable:T.a.bool.isRequired,addUserGroupAccess:T.a.func.isRequired,currentAccessIds:T.a.array.isRequired},_.contextTypes={d2:T.a.object.isRequired},t.a=_},3575:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=n.anchorEl,i=e.fullWidth,a={root:{display:"inline-block",position:"relative",width:i?"100%":256},menu:{width:"100%"},list:{display:"block",width:i?"100%":256},innerDiv:{overflow:"hidden"}};return o&&i&&(a.popover={width:o.clientWidth}),a}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(95),l=o(s),c=n(8),u=o(c),d=n(6),f=o(d),p=n(2),h=o(p),m=n(3),g=o(m),E=n(5),T=o(E),v=n(4),y=o(v),C=n(9),b=o(C),O=n(0),I=o(O),D=n(1),R=o(D),_=n(14),k=o(_),K=n(35),S=o(K),w=n(3604),x=o(w),N=n(3548),A=o(N),P=n(3531),L=o(P),F=n(3529),M=o(F),B=n(3532),$=o(B),j=n(3525),H=(o(j),function(e){function t(){var e,n,o,i;(0,h.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,T.default)(this,(e=t.__proto__||(0,f.default)(t)).call.apply(e,[this].concat(r))),o.state={anchorEl:null,focusTextField:!0,open:!1,searchText:void 0},o.handleRequestClose=function(){o.state.focusTextField||o.close()},o.handleMouseDown=function(e){e.preventDefault()},o.handleItemTouchTap=function(e,t){var n=o.props.dataSource,i=parseInt(t.key,10),a=n[i],r=o.chosenRequestText(a),s=function(){return o.props.onUpdateInput(r,o.props.dataSource,{source:"click"})};o.timerTouchTapCloseId=function(){return setTimeout(function(){o.timerTouchTapCloseId=null,o.close(),o.props.onNewRequest(a,i)},o.props.menuCloseDelay)},void 0!==o.props.searchText?(s(),o.timerTouchTapCloseId()):o.setState({searchText:r},function(){s(),o.timerTouchTapCloseId()})},o.chosenRequestText=function(e){return"string"==typeof e?e:e[o.props.dataSourceConfig.text]},o.handleEscKeyDown=function(){o.close()},o.handleKeyDown=function(e){switch(o.props.onKeyDown&&o.props.onKeyDown(e),(0,S.default)(e)){case"enter":o.close();var t=o.state.searchText;""!==t&&o.props.onNewRequest(t,-1);break;case"esc":o.close();break;case"down":e.preventDefault(),o.setState({open:!0,focusTextField:!1,anchorEl:k.default.findDOMNode(o.refs.searchTextField)})}},o.handleChange=function(e){var t=e.target.value;if(t!==o.state.searchText){var n={open:!0,anchorEl:k.default.findDOMNode(o.refs.searchTextField)};void 0===o.props.searchText&&(n.searchText=t),o.setState(n),o.props.onUpdateInput(t,o.props.dataSource,{source:"change"})}},o.handleBlur=function(e){o.state.focusTextField&&null===o.timerTouchTapCloseId&&(o.timerBlurClose=setTimeout(function(){o.close()},0)),o.props.onBlur&&o.props.onBlur(e)},o.handleFocus=function(e){!o.state.open&&o.props.openOnFocus&&o.setState({open:!0,anchorEl:k.default.findDOMNode(o.refs.searchTextField)}),o.setState({focusTextField:!0}),o.props.onFocus&&o.props.onFocus(e)},i=n,(0,T.default)(o,i)}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){this.requestsList=[],this.setState({open:this.props.open,searchText:this.props.searchText||""}),this.timerTouchTapCloseId=null}},{key:"componentWillReceiveProps",value:function(e){this.props.searchText!==e.searchText&&this.setState({searchText:e.searchText}),this.props.open!==e.open&&this.setState({open:e.open,anchorEl:k.default.findDOMNode(this.refs.searchTextField)})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerTouchTapCloseId),clearTimeout(this.timerBlurClose)}},{key:"close",value:function(){this.setState({open:!1,anchorEl:null}),this.props.onClose&&this.props.onClose()}},{key:"blur",value:function(){this.refs.searchTextField.blur()}},{key:"focus",value:function(){this.refs.searchTextField.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.anchorOrigin,o=t.animated,a=t.animation,s=t.dataSource,c=(t.dataSourceConfig,t.disableFocusRipple),d=t.errorStyle,f=t.floatingLabelText,p=t.filter,h=t.fullWidth,m=t.style,g=t.hintText,E=t.maxSearchResults,T=(t.menuCloseDelay,t.textFieldStyle),v=t.menuStyle,y=t.menuProps,C=t.listStyle,O=t.targetOrigin,D=(t.onBlur,t.onClose,t.onFocus,t.onKeyDown,t.onNewRequest,t.onUpdateInput,t.openOnFocus,t.popoverProps),R=(t.searchText,(0,u.default)(t,["anchorOrigin","animated","animation","dataSource","dataSourceConfig","disableFocusRipple","errorStyle","floatingLabelText","filter","fullWidth","style","hintText","maxSearchResults","menuCloseDelay","textFieldStyle","menuStyle","menuProps","listStyle","targetOrigin","onBlur","onClose","onFocus","onKeyDown","onNewRequest","onUpdateInput","openOnFocus","popoverProps","searchText"])),_=D||{},k=_.style,K=(0,u.default)(_,["style"]),S=this.state,w=S.open,N=S.anchorEl,P=S.searchText,F=S.focusTextField,B=this.context.muiTheme.prepareStyles,j=i(this.props,this.context,this.state),H=[];s.every(function(t,n){switch(void 0===t?"undefined":(0,l.default)(t)){case"string":p(P,t,t)&&H.push({text:t,value:I.default.createElement(L.default,{innerDivStyle:j.innerDiv,value:t,primaryText:t,disableFocusRipple:c,key:n})});break;case"object":if(t&&"string"==typeof t[e.props.dataSourceConfig.text]){var o=t[e.props.dataSourceConfig.text];if(!e.props.filter(P,o,t))break;var i=t[e.props.dataSourceConfig.value];!i.type||i.type.muiName!==L.default.muiName&&i.type.muiName!==M.default.muiName?H.push({text:o,value:I.default.createElement(L.default,{innerDivStyle:j.innerDiv,primaryText:o,disableFocusRipple:c,key:n})}):H.push({text:o,value:I.default.cloneElement(i,{key:n,disableFocusRipple:c})})}}return!(E&&E>0&&H.length===E)}),this.requestsList=H;var q=w&&H.length>0&&I.default.createElement(A.default,(0,r.default)({ref:"menu",autoWidth:!1,disableAutoFocus:F,onEscKeyDown:this.handleEscKeyDown,initiallyKeyboardFocused:!0,onItemTouchTap:this.handleItemTouchTap,onMouseDown:this.handleMouseDown,style:(0,b.default)(j.menu,v),listStyle:(0,b.default)(j.list,C)},y),H.map(function(e){return e.value}));return I.default.createElement("div",{style:B((0,b.default)(j.root,m))},I.default.createElement(x.default,(0,r.default)({ref:"searchTextField",autoComplete:"off",onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,floatingLabelText:f,hintText:g,fullWidth:h,multiLine:!1,errorStyle:d,style:T},R,{value:P,onChange:this.handleChange})),I.default.createElement($.default,(0,r.default)({style:(0,b.default)({},j.popover,k),canAutoPosition:!1,anchorOrigin:n,targetOrigin:O,open:w,anchorEl:N,useLayerForClickAway:!1,onRequestClose:this.handleRequestClose,animated:o,animation:a},K),q))}}]),t}(O.Component));H.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"left"},animated:!0,dataSourceConfig:{text:"text",value:"value"},disableFocusRipple:!0,filter:function(e,t){return""!==e&&-1!==t.indexOf(e)},fullWidth:!1,open:!1,openOnFocus:!1,onUpdateInput:function(){},onNewRequest:function(){},menuCloseDelay:300,targetOrigin:{vertical:"top",horizontal:"left"}},H.contextTypes={muiTheme:R.default.object.isRequired},H.propTypes={},H.levenshteinDistance=function(e,t){for(var n=[],o=void 0,i=void 0,a=0;a<=t.length;a++)for(var r=0;r<=e.length;r++)i=a&&r?e.charAt(r-1)===t.charAt(a-1)?o:Math.min(n[r],n[r-1],o)+1:a+r,o=n[r],n[r]=i;return n.pop()},H.noFilter=function(){return!0},H.defaultFilter=H.caseSensitiveFilter=function(e,t){return""!==e&&-1!==t.indexOf(e)},H.caseInsensitiveFilter=function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())},H.levenshteinDistanceFilter=function(e){if(void 0===e)return H.levenshteinDistance;if("number"!=typeof e)throw"Error: AutoComplete.levenshteinDistanceFilter is a filter generator, not a filter!";return function(t,n){return H.levenshteinDistance(t,n)<e}},H.fuzzyFilter=function(e,t){var n=t.toLowerCase();e=e.toLowerCase();for(var o=0,i=0;i<t.length;i++)n[i]===e[o]&&(o+=1);return o===e.length},H.Item=L.default,H.Divider=M.default,t.default=H},3576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3575),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3577:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.autoScrollBodyContent,o=e.open,i=t.muiTheme,a=i.baseTheme,r=a.spacing,s=a.palette,l=i.dialog,c=i.zIndex,u=r.desktopGutter,d="1px solid "+s.borderColor;return{root:{position:"fixed",boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",zIndex:c.dialog,top:0,left:o?0:-1e4,width:"100%",height:"100%",transition:o?x.default.easeOut("0ms","left","0ms"):x.default.easeOut("0ms","left","450ms")},content:{boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",transition:x.default.easeOut(),position:"relative",width:"75%",maxWidth:12*r.desktopKeylineIncrement,margin:"0 auto",zIndex:c.dialog},actionsContainer:{boxSizing:"border-box",WebkitTapHighlightColor:"rgba(0,0,0,0)",padding:8,width:"100%",textAlign:"right",marginTop:n?-1:0},overlay:{zIndex:c.dialogOverlay},title:{margin:0,padding:u+"px "+u+"px 20px "+u+"px",color:s.textColor,fontSize:l.titleFontSize,lineHeight:"32px",fontWeight:400,marginBottom:n?-1:0},body:{fontSize:l.bodyFontSize,color:l.bodyColor,padding:(e.title?0:u)+"px "+u+"px "+u+"px",boxSizing:"border-box",overflowY:n?"auto":"hidden",borderTop:n?d:"none",borderBottom:n?d:"none"}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(14),R=o(D),_=n(753),k=o(_),K=n(35),S=o(K),w=n(3524),x=o(w),N=n(3608),A=o(N),P=n(3551),L=o(P),F=n(3527),M=o(F),B=n(210),$=o(B),j=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={style:{}},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimeout),clearTimeout(this.leaveTimeout)}},{key:"componentWillEnter",value:function(e){this.componentWillAppear(e)}},{key:"componentWillAppear",value:function(e){var t=this.context.muiTheme.baseTheme.spacing;this.setState({style:{opacity:1,transform:"translate(0, "+t.desktopKeylineIncrement+"px)"}}),this.enterTimeout=setTimeout(e,450)}},{key:"componentWillLeave",value:function(e){this.setState({style:{opacity:0,transform:"translate(0, 0)"}}),this.leaveTimeout=setTimeout(e,450)}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.children,o=(0,l.default)(e,["style","children"]),i=this.context.muiTheme.prepareStyles;return b.default.createElement("div",(0,r.default)({},o,{style:i((0,y.default)({},this.state.style,t))}),n)}}]),t}(C.Component);j.contextTypes={muiTheme:I.default.object.isRequired},j.propTypes={};var H=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.handleTouchTapOverlay=function(){o.requestClose(!1)},o.handleKeyUp=function(e){"esc"===(0,S.default)(e)&&o.requestClose(!1)},o.handleResize=function(){o.positionDialog()},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.positionDialog()}},{key:"componentDidUpdate",value:function(){this.positionDialog()}},{key:"positionDialog",value:function(){var e=this.props,t=e.actions,n=e.autoDetectWindowHeight,o=e.autoScrollBodyContent,a=e.bodyStyle,r=e.open,s=e.repositionOnUpdate,l=e.title;if(r){var c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=R.default.findDOMNode(this),d=R.default.findDOMNode(this.refs.dialogWindow),f=R.default.findDOMNode(this.refs.dialogContent);d.style.height="",f.style.height="";var p=d.offsetHeight,h=(c-p)/2-64;if(h<16&&(h=16),!s&&u.style.paddingTop||(u.style.paddingTop=h+"px"),n||o){var m=i(this.props,this.context);m.body=(0,y.default)(m.body,a);var g=c-128;l&&(g-=f.previousSibling.offsetHeight),b.default.Children.count(t)&&(g-=f.nextSibling.offsetHeight),f.style.maxHeight=g+"px",g>p&&(f.style.borderBottom="none",f.style.borderTop="none")}}}},{key:"requestClose",value:function(e){!e&&this.props.modal||this.props.onRequestClose&&this.props.onRequestClose(!!e)}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.actionsContainerClassName,o=e.actionsContainerStyle,a=e.bodyClassName,s=e.bodyStyle,l=e.children,c=e.className,u=e.contentClassName,d=e.contentStyle,f=e.overlayClassName,p=e.overlayStyle,h=e.open,m=e.paperClassName,g=e.paperProps,E=e.style,T=e.titleClassName,v=e.titleStyle,C=e.title,O=this.context.muiTheme.prepareStyles,I=i(this.props,this.context);I.root=(0,y.default)(I.root,E),I.content=(0,y.default)(I.content,d),I.body=(0,y.default)(I.body,s),I.actionsContainer=(0,y.default)(I.actionsContainer,o),I.overlay=(0,y.default)(I.overlay,p),I.title=(0,y.default)(I.title,v);var D=b.default.Children.count(t)>0&&b.default.createElement("div",{className:n,style:O(I.actionsContainer)},b.default.Children.toArray(t)),R=C;return b.default.isValidElement(C)?R=b.default.cloneElement(C,{className:C.props.className||T,style:O((0,y.default)(I.title,C.props.style))}):"string"==typeof C&&(R=b.default.createElement("h3",{className:T,style:O(I.title)},C)),b.default.createElement("div",{className:c,style:O(I.root)},h&&b.default.createElement(k.default,{target:"window",onKeyUp:this.handleKeyUp,onResize:this.handleResize}),b.default.createElement($.default,{component:"div",ref:"dialogWindow",transitionAppear:!0,transitionAppearTimeout:450,transitionEnter:!0,transitionEnterTimeout:450},h&&b.default.createElement(j,{className:u,style:I.content},b.default.createElement(M.default,(0,r.default)({className:m,zDepth:4},g),R,b.default.createElement("div",{ref:"dialogContent",className:a,style:O(I.body)},l),D))),b.default.createElement(A.default,{show:h,className:f,style:I.overlay,onClick:this.handleTouchTapOverlay}))}}]),t}(C.Component);H.contextTypes={muiTheme:I.default.object.isRequired},H.propTypes={};var q=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.renderLayer=function(){return b.default.createElement(H,o.props)},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return b.default.createElement(L.default,{render:this.renderLayer,open:!0,useLayerForClickAway:!1})}}]),t}(C.Component);q.contextTypes={muiTheme:I.default.object.isRequired},q.defaultProps={autoDetectWindowHeight:!0,autoScrollBodyContent:!1,modal:!1,repositionOnUpdate:!0},q.propTypes={},t.default=q},3578:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(9),c=o(l),u=n(0),d=o(u),f=n(1),p=o(f),h=function(e,t){var n=e.inset,o=e.style,i=(0,s.default)(e,["inset","style"]),r=t.muiTheme,l=r.baseTheme,u=r.prepareStyles,f={root:{margin:0,marginTop:-1,marginLeft:n?72:0,height:1,border:"none",backgroundColor:l.palette.borderColor}};return d.default.createElement("hr",(0,a.default)({},i,{style:u((0,c.default)(f.root,o))}))};h.muiName="Divider",h.propTypes={},h.defaultProps={inset:!1},h.contextTypes={muiTheme:p.default.object.isRequired},t.default=h},3579:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t.muiTheme.baseTheme;return{root:{position:"relative",paddingLeft:n.spacing.desktopGutterLess,paddingRight:n.spacing.desktopGutterLess,verticalAlign:"middle"}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),s=n(2),l=o(s),c=n(3),u=o(c),d=n(5),f=o(d),p=n(4),h=o(p),m=n(9),g=o(m),E=n(0),T=o(E),v=n(1),y=o(v),C=function(e){function t(){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.style,o=this.context.muiTheme.prepareStyles,a=i(this.props,this.context);return T.default.createElement("span",{style:o((0,g.default)(a.root,n))},t)}}]),t}(E.Component);C.contextTypes={muiTheme:y.default.object.isRequired},C.propTypes={},t.default=C},3580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3545),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3581:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=e.color,i=e.hoverColor,a=t.muiTheme.baseTheme,r=o||a.palette.textColor,s=i||r;return{root:{color:n.hovered?s:r,position:"relative",fontSize:a.spacing.iconSize,display:"inline-block",userSelect:"none",transition:R.default.easeOut()}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3524),R=o(D),_=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={hovered:!1},o.handleMouseLeave=function(e){void 0!==o.props.hoverColor&&o.setState({hovered:!1}),o.props.onMouseLeave&&o.props.onMouseLeave(e)},o.handleMouseEnter=function(e){void 0!==o.props.hoverColor&&o.setState({hovered:!0}),o.props.onMouseEnter&&o.props.onMouseEnter(e)},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=(e.hoverColor,e.onMouseLeave,e.onMouseEnter,e.style),n=(0,l.default)(e,["hoverColor","onMouseLeave","onMouseEnter","style"]),o=this.context.muiTheme.prepareStyles,a=i(this.props,this.context,this.state);return b.default.createElement("span",(0,r.default)({},n,{onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,style:o((0,y.default)(a.root,t))}))}}]),t}(C.Component);_.muiName="FontIcon",_.defaultProps={onMouseEnter:function(){},onMouseLeave:function(){}},_.contextTypes={muiTheme:I.default.object.isRequired},_.propTypes={},t.default=_},3582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3581),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3583:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t.muiTheme.baseTheme;return{root:{boxSizing:"border-box",overflow:"visible",transition:R.default.easeOut(),padding:n.spacing.iconSize/2,width:2*n.spacing.iconSize,height:2*n.spacing.iconSize,fontSize:0},tooltip:{boxSizing:"border-box"},disabled:{color:n.palette.disabledColor,fill:n.palette.disabledColor,cursor:"default"}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3524),R=o(D),_=n(3525),k=(o(_),n(3528)),K=o(k),S=n(3582),w=o(S),x=n(3611),N=o(x),A=n(3616),P=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={hovered:!1,isKeyboardFocused:!1,touch:!1,tooltipShown:!1},o.handleBlur=function(e){o.hideTooltip(),o.props.onBlur&&o.props.onBlur(e)},o.handleFocus=function(e){o.showTooltip(),o.props.onFocus&&o.props.onFocus(e)},o.handleMouseLeave=function(e){o.button.isKeyboardFocused()||o.hideTooltip(),o.setState({hovered:!1}),o.props.onMouseLeave&&o.props.onMouseLeave(e)},o.handleMouseOut=function(e){o.props.disabled&&o.hideTooltip(),o.props.onMouseOut&&o.props.onMouseOut(e)},o.handleMouseEnter=function(e){o.showTooltip(),o.state.touch||o.setState({hovered:!0}),o.props.onMouseEnter&&o.props.onMouseEnter(e)},o.handleTouchStart=function(e){o.setState({touch:!0}),o.props.onTouchStart&&o.props.onTouchStart(e)},o.handleKeyboardFocus=function(e,t){var n=o.props,i=n.disabled,a=n.onFocus,r=n.onBlur,s=n.onKeyboardFocus;t&&!i?(o.showTooltip(),a&&a(e)):(o.hideTooltip(),r&&r(e)),o.setState({isKeyboardFocused:t}),s&&s(e,t)},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.disabled&&this.setState({hovered:!1})}},{key:"setKeyboardFocus",value:function(){this.button.setKeyboardFocus()}},{key:"showTooltip",value:function(){this.props.tooltip&&this.setState({tooltipShown:!0})}},{key:"hideTooltip",value:function(){this.props.tooltip&&this.setState({tooltipShown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,o=t.hoveredStyle,a=t.disableTouchRipple,s=t.children,c=t.iconClassName,u=t.style,d=t.tooltip,f=t.tooltipPosition,p=t.tooltipStyles,h=t.touch,m=t.iconStyle,g=(0,l.default)(t,["disabled","hoveredStyle","disableTouchRipple","children","iconClassName","style","tooltip","tooltipPosition","tooltipStyles","touch","iconStyle"]),E=void 0,T=i(this.props,this.context),v=f.split("-"),C=(this.state.hovered||this.state.isKeyboardFocused)&&!n,O=(0,y.default)(T.root,u,C?o:{}),I=d?b.default.createElement(N.default,{label:d,show:this.state.tooltipShown,touch:h,style:(0,y.default)(T.tooltip,p),verticalPosition:v[0],horizontalPosition:v[1]}):null;if(c){var D=m.iconHoverColor,R=(0,l.default)(m,["iconHoverColor"]);E=b.default.createElement(w.default,{className:c,hoverColor:n?null:D,style:(0,y.default)({},n&&T.disabled,R),color:this.context.muiTheme.baseTheme.palette.textColor},s)}var _=n?(0,y.default)({},m,T.disabled):m;return b.default.createElement(K.default,(0,r.default)({ref:function(t){return e.button=t}},g,{centerRipple:!0,disabled:n,onTouchStart:this.handleTouchStart,style:O,disableTouchRipple:a,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onMouseOut:this.handleMouseOut,onKeyboardFocus:this.handleKeyboardFocus}),I,E,(0,A.extendChildren)(s,{style:_}))}}]),t}(C.Component);P.muiName="IconButton",P.defaultProps={disabled:!1,disableTouchRipple:!1,iconStyle:{},tooltipPosition:"bottom-center",touch:!1},P.contextTypes={muiTheme:I.default.object.isRequired},P.propTypes={},t.default=P},3584:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=e.autoGenerateNestedIndicator,i=e.insetChildren,a=e.leftAvatar,r=e.leftCheckbox,s=e.leftIcon,l=e.nestedItems,c=e.nestedLevel,u=e.rightAvatar,d=e.rightIcon,f=e.rightIconButton,p=e.rightToggle,h=e.secondaryText,m=e.secondaryTextLines,g=t.muiTheme,E=g.listItem,T=g.baseTheme.palette.textColor,v=e.hoverColor||(0,K.fade)(T,.1),y=!h&&(a||u),C=!h&&!(a||u),b=h&&1===m,O=h&&m>1;return{root:{backgroundColor:!(void 0!==e.isKeyboardFocused?e:n).isKeyboardFocused&&!n.hovered||n.rightIconButtonHovered||n.rightIconButtonKeyboardFocused?null:v,color:T,display:"block",fontSize:16,lineHeight:"16px",position:"relative",transition:w.default.easeOut()},innerDiv:{marginLeft:c*E.nestedLevelDepth,paddingLeft:s||a||r||i?72:16,paddingRight:d||u||f||l.length&&o?56:p?72:16,paddingBottom:y?20:16,paddingTop:C||O?16:20,position:"relative"},icons:{height:24,width:24,display:"block",position:"absolute",top:b?12:y?4:0,margin:12},leftIcon:{left:4},rightIcon:{right:4},avatars:{position:"absolute",top:y?8:16},label:{cursor:"pointer"},leftAvatar:{left:16},rightAvatar:{right:16},leftCheckbox:{position:"absolute",display:"block",width:24,top:b?24:y?16:12,left:16},primaryText:{},rightIconButton:{position:"absolute",display:"block",top:b?12:y?4:0,right:4},rightToggle:{position:"absolute",display:"block",width:54,top:b?25:y?17:13,right:8},secondaryText:{fontSize:14,lineHeight:O?"18px":"16px",height:O?36:16,margin:0,marginTop:4,color:E.secondaryTextColor,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:O?null:"nowrap",display:O?"-webkit-box":null,WebkitLineClamp:O?2:null,WebkitBoxOrient:O?"vertical":null}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),s=n(7),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(14),R=o(D),_=n(3526),k=o(_),K=n(3535),S=n(3524),w=o(S),x=n(3528),N=o(x),A=n(3530),P=o(A),L=n(3614),F=o(L),M=n(3615),B=o(M),$=n(3585),j=o($),H=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={hovered:!1,isKeyboardFocused:!1,open:!1,rightIconButtonHovered:!1,rightIconButtonKeyboardFocused:!1,touch:!1},o.handleKeyboardFocus=function(e,t){o.setState({isKeyboardFocused:t}),o.props.onKeyboardFocus(e,t)},o.handleMouseEnter=function(e){o.state.touch||o.setState({hovered:!0}),o.props.onMouseEnter(e)},o.handleMouseLeave=function(e){o.setState({hovered:!1}),o.props.onMouseLeave(e)},o.handleTouchTap=function(e){o.props.onClick&&o.props.onClick(e),o.props.primaryTogglesNestedList&&o.handleNestedListToggle(e)},o.handleNestedListToggle=function(e){o.props.leftCheckbox&&e.preventDefault(),e.stopPropagation(),null===o.props.open?o.setState({open:!o.state.open},function(){o.props.onNestedListToggle(o)}):o.props.onNestedListToggle((0,l.default)({},o,{state:{open:!o.state.open}}))},o.handleRightIconButtonKeyboardFocus=function(e,t){t&&o.setState({isKeyboardFocused:!1,rightIconButtonKeyboardFocused:t});var n=o.props.rightIconButton;n&&n.props.onKeyboardFocus&&n.props.onKeyboardFocus(e,t)},o.handleRightIconButtonMouseLeave=function(e){var t=o.props.rightIconButton;o.setState({rightIconButtonHovered:!1}),t&&t.props.onMouseLeave&&t.props.onMouseLeave(e)},o.handleRightIconButtonMouseEnter=function(e){var t=o.props.rightIconButton;o.setState({rightIconButtonHovered:!0}),t&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},o.handleRightIconButtonMouseUp=function(e){var t=o.props.rightIconButton;e.stopPropagation(),t&&t.props.onMouseUp&&t.props.onMouseUp(e)},o.handleRightIconButtonTouchTap=function(e){var t=o.props.rightIconButton;e.stopPropagation(),t&&t.props.onClick&&t.props.onClick(e)},o.handleTouchStart=function(e){o.setState({touch:!0}),o.props.onTouchStart(e)},o.handleTouchEnd=function(e){o.setState({touch:!0}),o.props.onTouchEnd(e)},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){this.setState({open:null===this.props.open?!0===this.props.initiallyOpen:this.props.open})}},{key:"componentWillReceiveProps",value:function(e){null!==e.open&&this.setState({open:e.open}),e.disabled&&this.state.hovered&&this.setState({hovered:!1})}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,k.default)(this.props,e)||!(0,k.default)(this.state,t)||!(0,k.default)(this.context,n)}},{key:"applyFocusState",value:function(e){if(this.button){var t=R.default.findDOMNode(this.button);switch(e){case"none":t.blur();break;case"focused":t.focus();break;case"keyboard-focused":this.button.setKeyboardFocus(),t.focus()}}}},{key:"createDisabledElement",value:function(e,t,n){var o=this.props,i=o.innerDivStyle,a=o.style,r=(0,y.default)({},e.root,e.innerDiv,i,a);return b.default.createElement("div",(0,l.default)({},n,{style:this.context.muiTheme.prepareStyles(r)}),t)}},{key:"createLabelElement",value:function(e,t,n){var o=this.props,i=o.innerDivStyle,a=o.style,r=(0,y.default)({},e.root,e.innerDiv,i,e.label,a);return b.default.createElement("label",(0,l.default)({},n,{style:this.context.muiTheme.prepareStyles(r)}),t)}},{key:"createTextElement",value:function(e,t,n){var o=this.context.muiTheme.prepareStyles;if(b.default.isValidElement(t)){var i=(0,y.default)({},e,t.props.style);return"string"==typeof t.type&&(i=o(i)),b.default.cloneElement(t,{key:n,style:i})}return b.default.createElement("div",{key:n,style:o(e)},t)}},{key:"pushElement",value:function(e,t,n,o){if(t){var i=(0,y.default)({},n,t.props.style);e.push(b.default.cloneElement(t,(0,l.default)({key:e.length,style:i},o)))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoGenerateNestedIndicator,o=t.children,a=t.containerElement,s=t.disabled,c=t.disableKeyboardFocus,u=(t.hoverColor,t.initiallyOpen,t.innerDivStyle),d=(t.insetChildren,t.leftAvatar),f=t.leftCheckbox,p=t.leftIcon,h=t.nestedItems,m=t.nestedLevel,g=t.nestedListStyle,E=(t.onKeyboardFocus,t.isKeyboardFocused,t.onMouseEnter,t.onMouseLeave,t.onNestedListToggle,t.onTouchStart,t.onClick,t.rightAvatar),T=t.rightIcon,v=t.rightIconButton,C=t.rightToggle,O=t.primaryText,I=t.primaryTogglesNestedList,D=t.secondaryText,R=(t.secondaryTextLines,t.style),_=(0,r.default)(t,["autoGenerateNestedIndicator","children","containerElement","disabled","disableKeyboardFocus","hoverColor","initiallyOpen","innerDivStyle","insetChildren","leftAvatar","leftCheckbox","leftIcon","nestedItems","nestedLevel","nestedListStyle","onKeyboardFocus","isKeyboardFocused","onMouseEnter","onMouseLeave","onNestedListToggle","onTouchStart","onClick","rightAvatar","rightIcon","rightIconButton","rightToggle","primaryText","primaryTogglesNestedList","secondaryText","secondaryTextLines","style"]),k=this.context.muiTheme.prepareStyles,K=i(this.props,this.context,this.state),S=[o];if(p){var w={color:p.props.color||this.context.muiTheme.listItem.leftIconColor};this.pushElement(S,p,(0,y.default)({},K.icons,K.leftIcon),w)}if(T){var x={color:T.props.color||this.context.muiTheme.listItem.rightIconColor};this.pushElement(S,T,(0,y.default)({},K.icons,K.rightIcon),x)}d&&this.pushElement(S,d,(0,y.default)({},K.avatars,K.leftAvatar)),E&&this.pushElement(S,E,(0,y.default)({},K.avatars,K.rightAvatar)),f&&this.pushElement(S,f,(0,y.default)({},K.leftCheckbox));var A=h.length,L=E||T||v||C,M=A&&n&&!L;if(v||M){var $=v,H={onKeyboardFocus:this.handleRightIconButtonKeyboardFocus,onMouseEnter:this.handleRightIconButtonMouseEnter,onMouseLeave:this.handleRightIconButtonMouseLeave,onClick:this.handleRightIconButtonTouchTap,onMouseDown:this.handleRightIconButtonMouseUp,onMouseUp:this.handleRightIconButtonMouseUp};M&&($=this.state.open?b.default.createElement(P.default,null,b.default.createElement(F.default,null)):b.default.createElement(P.default,null,b.default.createElement(B.default,null)),H.onClick=this.handleNestedListToggle),this.pushElement(S,$,(0,y.default)({},K.rightIconButton),H)}if(C&&this.pushElement(S,C,(0,y.default)({},K.rightToggle)),O){var q=this.createTextElement(K.primaryText,O,"primaryText");S.push(q)}if(D){var U=this.createTextElement(K.secondaryText,D,"secondaryText");S.push(U)}var z=h.length?b.default.createElement(j.default,{nestedLevel:m,open:this.state.open,style:g},h):void 0,W=!I&&(f||C);return b.default.createElement("div",null,W?this.createLabelElement(K,S,_):s?this.createDisabledElement(K,S,_):b.default.createElement(N.default,(0,l.default)({containerElement:a},_,{disableKeyboardFocus:c||this.state.rightIconButtonKeyboardFocused,onKeyboardFocus:this.handleKeyboardFocus,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onClick:this.handleTouchTap,disabled:s,ref:function(t){return e.button=t},style:(0,y.default)({},K.root,R)}),b.default.createElement("div",{style:k((0,y.default)(K.innerDiv,u))},S)),z)}}]),t}(C.Component);H.muiName="ListItem",H.defaultProps={autoGenerateNestedIndicator:!0,containerElement:"span",disableKeyboardFocus:!1,disabled:!1,initiallyOpen:!1,insetChildren:!1,nestedItems:[],nestedLevel:0,onKeyboardFocus:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onNestedListToggle:function(){},onTouchEnd:function(){},onTouchStart:function(){},open:null,primaryTogglesNestedList:!1,secondaryTextLines:1},H.contextTypes={muiTheme:I.default.object.isRequired},H.propTypes={},t.default=H},3585:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(1),s=(o(r),n(3546)),l=o(s),c=function(e){var t=e.children,n=e.open,o=e.nestedLevel,r=e.style;return n?a.default.createElement(l.default,{style:r},i.Children.map(t,function(e){return(0,i.isValidElement)(e)?(0,i.cloneElement)(e,{nestedLevel:o+1}):e})):null};c.propTypes={},t.default=c},3586:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HotKeyHolder=void 0;var i=n(2),a=o(i),r=n(3),s=o(r);t.HotKeyHolder=function(){function e(){var t=this;(0,a.default)(this,e),this.clear=function(){t.timerId=null,t.lastKeys=null}}return(0,s.default)(e,[{key:"append",value:function(e){return clearTimeout(this.timerId),this.timerId=setTimeout(this.clear,500),this.lastKeys=(this.lastKeys||"")+e}}]),e}()},3587:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t.muiTheme.baseTheme.palette.disabledColor,o=t.muiTheme.baseTheme.palette.textColor,i=e.desktop?64:72,a=e.desktop?24:16;return{root:{color:e.disabled?n:o,cursor:e.disabled?"default":"pointer",minHeight:e.desktop?"32px":"48px",lineHeight:e.desktop?"32px":"48px",fontSize:e.desktop?15:16,whiteSpace:"nowrap"},innerDivStyle:{paddingLeft:e.leftIcon||e.insetChildren||e.checked?i:a,paddingRight:e.rightIcon?i:a,paddingBottom:0,paddingTop:0},secondaryText:{float:"right"},leftIconDesktop:{margin:0,left:24,top:4},rightIconDesktop:{margin:0,right:24,top:4,fill:t.muiTheme.menuItem.rightIconDesktopFill}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(14),R=o(D),_=n(3526),k=o(_),K=n(3532),S=o(K),w=n(3613),x=o(w),N=n(3584),A=o(N),P=n(3547),L=o(P),F=n(3525),M=(o(F),{position:"relative"}),B=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={open:!1},o.cloneMenuItem=function(e){return b.default.cloneElement(e,{onClick:function(t){e.props.menuItems||o.handleRequestClose(),e.props.onClick&&e.props.onClick(t)}})},o.handleTouchTap=function(e){e.preventDefault(),o.setState({open:!0,anchorEl:R.default.findDOMNode(o)}),o.props.onClick&&o.props.onClick(e)},o.handleRequestClose=function(){o.setState({open:!1,anchorEl:null})},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.applyFocusState()}},{key:"componentWillReceiveProps",value:function(e){this.state.open&&"none"===e.focusState&&this.handleRequestClose()}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,k.default)(this.props,e)||!(0,k.default)(this.state,t)||!(0,k.default)(this.context,n)}},{key:"componentDidUpdate",value:function(){this.applyFocusState()}},{key:"componentWillUnmount",value:function(){this.state.open&&this.setState({open:!1})}},{key:"applyFocusState",value:function(){this.refs.listItem.applyFocusState(this.props.focusState)}},{key:"render",value:function(){var e=this.props,t=e.checked,n=e.children,o=e.desktop,a=e.disabled,s=(e.focusState,e.innerDivStyle),c=e.insetChildren,u=e.leftIcon,d=e.menuItems,f=e.rightIcon,p=e.secondaryText,h=e.style,m=e.animation,g=e.anchorOrigin,E=e.targetOrigin,T=(e.value,(0,l.default)(e,["checked","children","desktop","disabled","focusState","innerDivStyle","insetChildren","leftIcon","menuItems","rightIcon","secondaryText","style","animation","anchorOrigin","targetOrigin","value"])),v=this.context.muiTheme.prepareStyles,C=i(this.props,this.context),O=(0,y.default)(C.root,h),I=(0,y.default)(C.innerDivStyle,s),D=u||(t?b.default.createElement(x.default,null):null);if(D){var R=o?(0,y.default)(C.leftIconDesktop,D.props.style):D.props.style;D=b.default.cloneElement(D,{style:R})}var _=void 0;if(f){var k=o?(0,y.default)(C.rightIconDesktop,f.props.style):f.props.style;_=b.default.cloneElement(f,{style:k})}var K=void 0;if(p){var w=b.default.isValidElement(p),N=w?(0,y.default)(C.secondaryText,p.props.style):null;K=w?b.default.cloneElement(p,{style:N}):b.default.createElement("div",{style:v(C.secondaryText)},p)}var P=void 0;return d&&(P=b.default.createElement(S.default,{animation:m,anchorOrigin:g,anchorEl:this.state.anchorEl,open:this.state.open,targetOrigin:E,useLayerForClickAway:!1,onRequestClose:this.handleRequestClose},b.default.createElement(L.default,{desktop:o,disabled:a,style:M},b.default.Children.map(d,this.cloneMenuItem))),T.onClick=this.handleTouchTap),b.default.createElement(A.default,(0,r.default)({},T,{disabled:a,hoverColor:this.context.muiTheme.menuItem.hoverColor,innerDivStyle:I,insetChildren:c,leftIcon:D,ref:"listItem",rightIcon:_,role:"menuitem",style:O}),n,K,P)}}]),t}(C.Component);B.muiName="MenuItem",B.defaultProps={anchorOrigin:{horizontal:"right",vertical:"top"},checked:!1,desktop:!1,disabled:!1,focusState:"none",insetChildren:!1,targetOrigin:{horizontal:"left",vertical:"top"}},B.contextTypes={muiTheme:I.default.object.isRequired},B.propTypes={},t.default=B},3588:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.rounded,o=e.circle,i=e.transitionEnabled,a=e.zDepth,r=t.muiTheme,s=r.baseTheme,l=r.paper,c=r.borderRadius;return{root:{color:l.color,backgroundColor:l.backgroundColor,transition:i&&_.default.easeOut(),boxSizing:"border-box",fontFamily:s.fontFamily,WebkitTapHighlightColor:"rgba(0,0,0,0)",boxShadow:l.zDepthShadows[a-1],borderRadius:o?"50%":n?c:"0px"}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3525),R=(o(D),n(3524)),_=o(R),k=function(e){function t(){return(0,f.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,T.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.circle,e.rounded,e.style),o=(e.transitionEnabled,e.zDepth,(0,l.default)(e,["children","circle","rounded","style","transitionEnabled","zDepth"])),a=this.context.muiTheme.prepareStyles,s=i(this.props,this.context);return b.default.createElement("div",(0,r.default)({},o,{style:a((0,y.default)(s.root,n))}),t)}}]),t}(C.Component);k.defaultProps={circle:!1,rounded:!0,transitionEnabled:!0,zDepth:1},k.contextTypes={muiTheme:I.default.object.isRequired},k.propTypes={},t.default=k},3589:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=e.targetOrigin,i=n.open,a=t.muiTheme,r=o.horizontal.replace("middle","vertical");return{root:{position:"fixed",zIndex:a.zIndex.popover,opacity:i?1:0,transform:i?"scale(1, 1)":"scale(0, 0)",transformOrigin:r+" "+o.vertical,transition:T.default.easeOut("250ms",["transform","opacity"]),maxHeight:"100%"},horizontal:{maxHeight:"100%",overflowY:"auto",transform:i?"scaleX(1)":"scaleX(0)",opacity:i?1:0,transformOrigin:r+" "+o.vertical,transition:T.default.easeOut("250ms",["transform","opacity"])},vertical:{opacity:i?1:0,transform:i?"scaleY(1)":"scaleY(0)",transformOrigin:r+" "+o.vertical,transition:T.default.easeOut("500ms",["transform","opacity"])}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),s=n(2),l=o(s),c=n(3),u=o(c),d=n(5),f=o(d),p=n(4),h=o(p),m=n(9),g=o(m),E=n(3524),T=o(E),v=n(0),y=o(v),C=n(1),b=o(C),O=n(3525),I=(o(O),n(3527)),D=o(I),R=function(e){function t(){var e,n,o,i;(0,l.default)(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return n=o=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(s))),o.state={open:!1},i=n,(0,f.default)(o,i)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.setState({open:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.zDepth,a=this.context.muiTheme.prepareStyles,r=i(this.props,this.context,this.state);return y.default.createElement(D.default,{style:(0,g.default)(r.root,n),zDepth:o,className:t},y.default.createElement("div",{style:a(r.horizontal)},y.default.createElement("div",{style:a(r.vertical)},this.props.children)))}}]),t}(v.Component);R.defaultProps={style:{},zDepth:1},R.contextTypes={muiTheme:b.default.object.isRequired},R.propTypes={},t.default=R},3590:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=e.targetOrigin,i=n.open,a=t.muiTheme,r=o.horizontal.replace("middle","center");return{root:{position:"fixed",zIndex:a.zIndex.popover,opacity:i?1:0,transform:i?"scaleY(1)":"scaleY(0)",transformOrigin:r+" "+o.vertical,transition:I.default.easeOut("450ms",["transform","opacity"]),maxHeight:"100%"}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),s=n(2),l=o(s),c=n(3),u=o(c),d=n(5),f=o(d),p=n(4),h=o(p),m=n(9),g=o(m),E=n(0),T=o(E),v=n(1),y=o(v),C=n(3527),b=o(C),O=n(3524),I=o(O),D=n(3525),R=(o(D),function(e){function t(){var e,n,o,i;(0,l.default)(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return n=o=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(s))),o.state={open:!1},i=n,(0,f.default)(o,i)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.setState({open:!0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.zDepth,a=i(this.props,this.context,this.state);return T.default.createElement(b.default,{style:(0,g.default)(a.root,n),zDepth:o,className:t},this.props.children)}}]),t}(E.Component));R.defaultProps={style:{},zDepth:1},R.contextTypes={muiTheme:y.default.object.isRequired},R.propTypes={},t.default=R},3591:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PopoverAnimationVertical=t.Popover=void 0;var i=n(3532),a=o(i),r=n(3590),s=o(r);t.Popover=a.default,t.PopoverAnimationVertical=s.default,t.default=a.default},3592:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=t.muiTheme,i=o.baseTheme,a=o.button,r=o.raisedButton,s=o.borderRadius,l=e.disabled,c=e.disabledBackgroundColor,u=e.disabledLabelColor,d=e.fullWidth,f=e.icon,p=e.label,h=e.labelPosition,m=e.primary,g=e.secondary,E=e.style,T=m||g?.4:.08,v=r.color,y=r.textColor;l?(v=c||r.disabledColor,y=u||r.disabledTextColor):m?(v=r.primaryColor,y=r.primaryTextColor):g?(v=r.secondaryColor,y=r.secondaryTextColor):(e.backgroundColor&&(v=e.backgroundColor),e.labelColor&&(y=e.labelColor));var C=E&&E.height||a.height;return{root:{display:"inline-block",transition:R.default.easeOut(),minWidth:d?"100%":a.minWidth},button:{height:C,lineHeight:C+"px",width:"100%",padding:0,borderRadius:s,transition:R.default.easeOut(),backgroundColor:v,textAlign:"center"},label:{position:"relative",opacity:1,fontSize:r.fontSize,letterSpacing:0,textTransform:r.textTransform||a.textTransform||"uppercase",fontWeight:r.fontWeight,margin:0,userSelect:"none",paddingLeft:f&&"before"!==h?8:i.spacing.desktopGutterLess,paddingRight:f&&"before"===h?8:i.spacing.desktopGutterLess,color:y},icon:{verticalAlign:"middle",marginLeft:p&&"before"!==h?12:0,marginRight:p&&"before"===h?12:0},overlay:{height:C,borderRadius:s,backgroundColor:(n.keyboardFocused||n.hovered)&&!l&&(0,_.fade)(y,T),transition:R.default.easeOut(),top:0},ripple:{color:y,opacity:m||g?.16:.1}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3524),R=o(D),_=n(3535),k=n(3528),K=o(k),S=n(3527),w=o(S),x=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={hovered:!1,keyboardFocused:!1,touched:!1,initialZDepth:0,zDepth:0},o.handleMouseDown=function(e){0===e.button&&o.setState({zDepth:o.state.initialZDepth+1}),o.props.onMouseDown&&o.props.onMouseDown(e)},o.handleMouseUp=function(e){o.setState({zDepth:o.state.initialZDepth}),o.props.onMouseUp&&o.props.onMouseUp(e)},o.handleMouseLeave=function(e){o.state.keyboardFocused||o.setState({zDepth:o.state.initialZDepth,hovered:!1}),o.props.onMouseLeave&&o.props.onMouseLeave(e)},o.handleMouseEnter=function(e){o.state.keyboardFocused||o.state.touched||o.setState({hovered:!0}),o.props.onMouseEnter&&o.props.onMouseEnter(e)},o.handleTouchStart=function(e){o.setState({touched:!0,zDepth:o.state.initialZDepth+1}),o.props.onTouchStart&&o.props.onTouchStart(e)},o.handleTouchEnd=function(e){o.setState({touched:!0,zDepth:o.state.initialZDepth}),o.props.onTouchEnd&&o.props.onTouchEnd(e)},o.handleKeyboardFocus=function(e,t){var n=t&&!o.props.disabled?o.state.initialZDepth+1:o.state.initialZDepth;o.setState({zDepth:n,keyboardFocused:t})},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.disabled?0:1;this.setState({zDepth:e,initialZDepth:e})}},{key:"componentWillReceiveProps",value:function(e){var t=e.disabled?0:1,n={zDepth:t,initialZDepth:t};e.disabled&&(n.hovered=!1),this.setState(n)}},{key:"render",value:function(){var e=this.props,t=(e.backgroundColor,e.buttonStyle),n=e.children,o=e.className,a=e.disabled,s=(e.disabledBackgroundColor,e.disabledLabelColor,e.fullWidth,e.icon),c=e.label,u=(e.labelColor,e.labelPosition),d=e.labelStyle,f=e.overlayStyle,p=(e.primary,e.rippleStyle),h=(e.secondary,e.style),m=(0,l.default)(e,["backgroundColor","buttonStyle","children","className","disabled","disabledBackgroundColor","disabledLabelColor","fullWidth","icon","label","labelColor","labelPosition","labelStyle","overlayStyle","primary","rippleStyle","secondary","style"]),g=this.context.muiTheme.prepareStyles,E=i(this.props,this.context,this.state),T=(0,y.default)({},E.ripple,p),v=a?{}:{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onKeyboardFocus:this.handleKeyboardFocus},O=c&&b.default.createElement("span",{style:g((0,y.default)(E.label,d)),key:"labelElement"},c),I=s&&(0,C.cloneElement)(s,{color:s.props.color||E.label.color,style:(0,y.default)(E.icon,s.props.style),key:"iconCloned"}),D="before"===u?[O,I,n]:[n,I,O];return b.default.createElement(w.default,{className:o,style:(0,y.default)(E.root,h),zDepth:this.state.zDepth},b.default.createElement(K.default,(0,r.default)({},m,v,{ref:"container",disabled:a,style:(0,y.default)(E.button,t),focusRippleColor:T.color,touchRippleColor:T.color,focusRippleOpacity:T.opacity,touchRippleOpacity:T.opacity}),b.default.createElement("div",{ref:"overlay",style:g((0,y.default)(E.overlay,f))},D)))}}]),t}(C.Component);x.muiName="RaisedButton",x.defaultProps={disabled:!1,labelPosition:"after",fullWidth:!1,primary:!1,secondary:!1},x.contextTypes={muiTheme:I.default.object.isRequired},x.propTypes={},t.default=x},3593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3592),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3594:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=t.muiTheme,i=o.baseTheme.spacing.desktopSubheaderHeight,a=o.zIndex,r=n.open;return{root:{position:"fixed",left:"50%",display:"flex",bottom:0,zIndex:a.snackbar,visibility:r?"visible":"hidden",transform:r?"translate(-50%, 0)":"translate(-50%, "+i+"px)",transition:R.default.easeOut("400ms","transform")+", "+R.default.easeOut("400ms","visibility")}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3524),R=o(D),_=n(3550),k=o(_),K=n(3595),S=o(K),w=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.componentClickAway=function(){o.timerTransitionId||(null!==o.props.open&&o.props.onRequestClose?o.props.onRequestClose("clickaway"):o.setState({open:!1}))},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){this.setState({open:this.props.open,message:this.props.message,action:this.props.action})}},{key:"componentDidMount",value:function(){this.state.open&&(this.setAutoHideTimer(),this.setTransitionTimer())}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.open&&e.open&&(e.message!==this.props.message||e.action!==this.props.action))this.setState({open:!1}),clearTimeout(this.timerOneAtTheTimeId),this.timerOneAtTheTimeId=setTimeout(function(){t.setState({message:e.message,action:e.action,open:!0})},400);else{var n=e.open;this.setState({open:null!==n?n:this.state.open,message:e.message,action:e.action})}}},{key:"componentDidUpdate",value:function(e,t){t.open!==this.state.open&&(this.state.open?(this.setAutoHideTimer(),this.setTransitionTimer()):clearTimeout(this.timerAutoHideId))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAutoHideId),clearTimeout(this.timerTransitionId),clearTimeout(this.timerOneAtTheTimeId)}},{key:"setAutoHideTimer",value:function(){var e=this,t=this.props.autoHideDuration;t>0&&(clearTimeout(this.timerAutoHideId),this.timerAutoHideId=setTimeout(function(){null!==e.props.open&&e.props.onRequestClose?e.props.onRequestClose("timeout"):e.setState({open:!1})},t))}},{key:"setTransitionTimer",value:function(){var e=this;this.timerTransitionId=setTimeout(function(){e.timerTransitionId=void 0},400)}},{key:"render",value:function(){var e=this.props,t=(e.autoHideDuration,e.contentStyle),n=e.bodyStyle,o=(e.message,e.onRequestClose,e.onActionTouchTap),a=e.style,s=(0,l.default)(e,["autoHideDuration","contentStyle","bodyStyle","message","onRequestClose","onActionTouchTap","style"]),c=this.state,u=c.action,d=c.message,f=c.open,p=this.context.muiTheme.prepareStyles,h=i(this.props,this.context,this.state);return b.default.createElement(k.default,{onClickAway:f?this.componentClickAway:null},b.default.createElement("div",(0,r.default)({},s,{style:p((0,y.default)(h.root,a))}),b.default.createElement(S.default,{action:u,contentStyle:t,message:d,open:f,onActionTouchTap:o,style:n})))}}]),t}(C.Component);w.contextTypes={muiTheme:I.default.object.isRequired},w.propTypes={},t.default=w},3595:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.open,o=e.width,i=t.muiTheme,a=i.baseTheme,r=a.spacing,s=r.desktopGutter,l=r.desktopSubheaderHeight,c=a.fontFamily,u=i.snackbar,d=u.backgroundColor,f=u.textColor,p=u.actionColor,h=i.borderRadius,m=o===E.SMALL;return{root:{fontFamily:c,backgroundColor:d,padding:"0 "+s+"px",height:l,lineHeight:l+"px",borderRadius:m?0:h,maxWidth:m?"inherit":568,minWidth:m?"inherit":288,width:m?"calc(100vw - "+2*s+"px)":"auto",flexGrow:m?1:0},content:{fontSize:14,color:f,opacity:n?1:0,transition:n?g.default.easeOut("500ms","opacity","100ms"):g.default.easeOut("400ms","opacity")},action:{color:p,float:"right",marginTop:6,marginRight:-16,marginLeft:s,backgroundColor:"transparent"}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarBody=void 0;var a=n(7),r=o(a),s=n(8),l=o(s),c=n(9),u=o(c),d=n(0),f=o(d),p=n(1),h=o(p),m=n(3524),g=o(m),E=n(3617),T=o(E),v=n(3580),y=o(v),C=function(e,t){var n=e.action,o=e.contentStyle,a=e.message,s=(e.open,e.onActionTouchTap),c=e.style,d=(0,l.default)(e,["action","contentStyle","message","open","onActionTouchTap","style"]),p=t.muiTheme.prepareStyles,h=i(e,t),m=n&&f.default.createElement(y.default,{style:h.action,label:n,onClick:s});return f.default.createElement("div",(0,r.default)({},d,{style:p((0,u.default)(h.root,c))}),f.default.createElement("div",{style:p((0,u.default)(h.content,o))},f.default.createElement("span",null,a),m))};t.SnackbarBody=C,C.propTypes={},C.contextTypes={muiTheme:h.default.object.isRequired},t.default=(0,T.default)()(C)},3596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3594),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3597:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(9),c=o(l),u=n(0),d=o(u),f=n(1),p=o(f),h=function(e,t){var n=e.children,o=e.inset,i=e.style,r=(0,s.default)(e,["children","inset","style"]),l=t.muiTheme,u=l.prepareStyles,f=l.subheader,p={root:{boxSizing:"border-box",color:f.color,fontSize:14,fontWeight:f.fontWeight,lineHeight:"48px",paddingLeft:o?72:16,width:"100%"}};return d.default.createElement("div",(0,a.default)({},r,{style:u((0,c.default)(p.root,i))}),n)};h.muiName="Subheader",h.propTypes={},h.defaultProps={inset:!1},h.contextTypes={muiTheme:p.default.object.isRequired},t.default=h},3598:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(3524),D=o(I),R=function(e){function t(){var e,n,o,i;(0,d.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,m.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(r))),o.state={hovered:!1},o.handleMouseLeave=function(e){o.setState({hovered:!1}),o.props.onMouseLeave(e)},o.handleMouseEnter=function(e){o.setState({hovered:!0}),o.props.onMouseEnter(e)},i=n,(0,m.default)(o,i)}return(0,E.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.color,o=e.hoverColor,i=(e.onMouseEnter,e.onMouseLeave,e.style),r=e.viewBox,l=(0,s.default)(e,["children","color","hoverColor","onMouseEnter","onMouseLeave","style","viewBox"]),c=this.context.muiTheme,u=c.svgIcon,d=c.prepareStyles,f=n||"currentColor",p=o||f,h=(0,v.default)({display:"inline-block",color:u.color,fill:this.state.hovered?p:f,height:24,width:24,userSelect:"none",transition:D.default.easeOut()},i);return C.default.createElement("svg",(0,a.default)({},l,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:d(h),viewBox:r}),t)}}]),t}(y.Component);R.muiName="SvgIcon",R.defaultProps={onMouseEnter:function(){},onMouseLeave:function(){},viewBox:"0 0 24 24"},R.contextTypes={muiTheme:O.default.object.isRequired},R.propTypes={},t.default=R},3599:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return{root:{position:"relative"},textarea:{height:n.height,width:"100%",resize:"none",font:"inherit",padding:0,cursor:"inherit"},shadow:{resize:"none",overflow:"hidden",visibility:"hidden",position:"absolute",height:"auto"}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(753),R=o(D),_=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={height:null},o.handleResize=function(e){o.syncHeightWithShadow(o.props.value,e)},o.handleChange=function(e){o.props.hasOwnProperty("value")||o.syncHeightWithShadow(e.target.value),o.props.hasOwnProperty("valueLink")&&o.props.valueLink.requestChange(e.target.value),o.props.onChange&&o.props.onChange(e)},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){this.setState({height:24*this.props.rows})}},{key:"componentDidMount",value:function(){this.syncHeightWithShadow(this.props.value)}},{key:"componentWillReceiveProps",value:function(e){e.value===this.props.value&&e.rowsMax===this.props.rowsMax||this.syncHeightWithShadow(e.value,null,e)}},{key:"getInputNode",value:function(){return this.refs.input}},{key:"setValue",value:function(e){this.getInputNode().value=e,this.syncHeightWithShadow(e)}},{key:"syncHeightWithShadow",value:function(e,t,n){var o=this.refs.shadow,i=!this.props.hintText||""!==e&&void 0!==e&&null!==e?e:this.props.hintText;void 0!==i&&(o.value=i);var a=o.scrollHeight;if(void 0!==a&&(n=n||this.props,n.rowsMax>=n.rows&&(a=Math.min(24*n.rowsMax,a)),a=Math.max(a,24),this.state.height!==a)){var r=this.refs.input,s=r.selectionStart;this.setState({height:a},function(){r.setSelectionRange(s,s)}),n.onHeightChange&&n.onHeightChange(t,a)}}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.onHeightChange,e.rows,e.rowsMax,e.shadowStyle),n=e.style,o=(e.hintText,e.textareaStyle),a=e.valueLink,s=(0,l.default)(e,["onChange","onHeightChange","rows","rowsMax","shadowStyle","style","hintText","textareaStyle","valueLink"]),c=this.context.muiTheme.prepareStyles,u=i(this.props,this.context,this.state),d=(0,y.default)(u.root,n),f=(0,y.default)(u.textarea,o),p=(0,y.default)({},f,u.shadow,t),h={};return this.props.hasOwnProperty("valueLink")&&(s.value=a.value,h.valueLink=a),b.default.createElement("div",{style:c(d)},b.default.createElement(R.default,{target:"window",onResize:this.handleResize}),b.default.createElement("textarea",(0,r.default)({ref:"shadow",style:c(p),tabIndex:"-1",rows:this.props.rows,defaultValue:this.props.defaultValue,readOnly:!0,value:this.props.value},h)),b.default.createElement("textarea",(0,r.default)({},s,{ref:"input",rows:this.props.rows,style:c(f),onChange:this.handleChange})))}}]),t}(C.Component);_.defaultProps={rows:1},_.contextTypes={muiTheme:I.default.object.isRequired},_.propTypes={},t.default=_},3600:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return""!==e&&void 0!==e&&null!==e&&!(Array.isArray(e)&&0===e.length)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(14),R=o(D),_=n(3526),k=o(_),K=n(3524),S=o(K),w=n(3599),x=o(w),N=n(3601),A=o(N),P=n(3602),L=o(P),F=n(3603),M=o(F),B=n(12),$=(o(B),function(e,t,n){var o=t.muiTheme,i=o.baseTheme,a=o.textField,r=a.floatingLabelColor,s=a.focusColor,l=a.textColor,c=a.disabledTextColor,u=a.backgroundColor,d=a.errorColor,f={root:{fontSize:16,lineHeight:"24px",width:e.fullWidth?"100%":256,height:24*(e.rows-1)+(e.floatingLabelText?72:48),display:"inline-block",position:"relative",backgroundColor:u,fontFamily:i.fontFamily,transition:S.default.easeOut("200ms","height"),cursor:e.disabled?"not-allowed":"auto"},error:{position:"relative",bottom:2,fontSize:12,lineHeight:"12px",color:d,transition:S.default.easeOut()},floatingLabel:{color:e.disabled?c:r,pointerEvents:"none"},input:{padding:0,position:"relative",width:"100%",border:"none",outline:"none",backgroundColor:"rgba(0,0,0,0)",color:e.disabled?c:l,cursor:"inherit",font:"inherit",WebkitOpacity:1,WebkitTapHighlightColor:"rgba(0,0,0,0)"},inputNative:{appearance:"textfield"}};return f.textarea=(0,y.default)({},f.input,{marginTop:e.floatingLabelText?36:12,marginBottom:e.floatingLabelText?-36:-12,boxSizing:"border-box",font:"inherit"}),f.input.height="100%",n.isFocused&&(f.floatingLabel.color=s),e.floatingLabelText&&(f.input.boxSizing="border-box",e.multiLine||(f.input.marginTop=14),n.errorText&&(f.error.bottom=e.multiLine?3:f.error.fontSize+3)),n.errorText&&n.isFocused&&(f.floatingLabel.color=f.error.color),f}),j=function(e){function t(){var e,n,o,a;(0,f.default)(this,t);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.state={isFocused:!1,errorText:void 0,hasValue:!1},o.handleInputBlur=function(e){o.setState({isFocused:!1}),o.props.onBlur&&o.props.onBlur(e)},o.handleInputChange=function(e){o.props.hasOwnProperty("value")||o.setState({hasValue:i(e.target.value)}),o.props.onChange&&o.props.onChange(e,e.target.value)},o.handleInputFocus=function(e){o.props.disabled||(o.setState({isFocused:!0}),o.props.onFocus&&o.props.onFocus(e))},o.handleHeightChange=function(e,t){var n=t+24;o.props.floatingLabelText&&(n+=24),R.default.findDOMNode(o).style.height=n+"px"},a=n,(0,g.default)(o,a)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.children,n=e.name,o=e.hintText,a=e.floatingLabelText,r=(e.id,t?t.props:this.props);this.setState({errorText:this.props.errorText,hasValue:i(r.value)||i(r.defaultValue)});var s=n+"-"+o+"-"+a+"-"+Math.floor(65535*Math.random());this.uniqueId=s.replace(/[^A-Za-z0-9-]/gi,"")}},{key:"componentWillReceiveProps",value:function(e){if(e.disabled&&!this.props.disabled&&this.setState({isFocused:!1}),e.errorText!==this.props.errorText&&this.setState({errorText:e.errorText}),e.children&&e.children.props&&(e=e.children.props),e.hasOwnProperty("value")){var t=i(e.value);this.setState({hasValue:t})}}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,k.default)(this.props,e)||!(0,k.default)(this.state,t)||!(0,k.default)(this.context,n)}},{key:"blur",value:function(){this.input&&this.getInputNode().blur()}},{key:"focus",value:function(){this.input&&this.getInputNode().focus()}},{key:"select",value:function(){this.input&&this.getInputNode().select()}},{key:"getValue",value:function(){return this.input?this.getInputNode().value:void 0}},{key:"getInputNode",value:function(){return this.props.children||this.props.multiLine?this.input.getInputNode():R.default.findDOMNode(this.input)}},{key:"_isControlled",value:function(){return this.props.hasOwnProperty("value")}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.className,i=t.disabled,a=t.errorStyle,s=(t.errorText,t.floatingLabelFixed),c=t.floatingLabelFocusStyle,u=t.floatingLabelShrinkStyle,d=t.floatingLabelStyle,f=t.floatingLabelText,p=(t.fullWidth,t.hintText),h=t.hintStyle,m=t.id,g=t.inputStyle,E=t.multiLine,T=(t.onBlur,t.onChange,t.onFocus,t.style),v=t.type,C=t.underlineDisabledStyle,O=t.underlineFocusStyle,I=t.underlineShow,D=t.underlineStyle,R=t.rows,_=t.rowsMax,k=t.textareaStyle,K=(0,l.default)(t,["children","className","disabled","errorStyle","errorText","floatingLabelFixed","floatingLabelFocusStyle","floatingLabelShrinkStyle","floatingLabelStyle","floatingLabelText","fullWidth","hintText","hintStyle","id","inputStyle","multiLine","onBlur","onChange","onFocus","style","type","underlineDisabledStyle","underlineFocusStyle","underlineShow","underlineStyle","rows","rowsMax","textareaStyle"]),S=this.context.muiTheme.prepareStyles,w=$(this.props,this.context,this.state),N=m||this.uniqueId,P=this.state.errorText&&b.default.createElement("div",{style:S((0,y.default)(w.error,a))},this.state.errorText),F=f&&b.default.createElement(L.default,{muiTheme:this.context.muiTheme,style:(0,y.default)(w.floatingLabel,d,this.state.isFocused?c:null),shrinkStyle:u,htmlFor:N,shrink:this.state.hasValue||this.state.isFocused||s,disabled:i},f),B={id:N,ref:function(t){return e.input=t},disabled:this.props.disabled,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus},j=(0,y.default)(w.input,g),H=void 0;H=n?b.default.cloneElement(n,(0,r.default)({},B,n.props,{style:(0,y.default)(j,n.props.style)})):E?b.default.createElement(x.default,(0,r.default)({style:j,textareaStyle:(0,y.default)(w.textarea,w.inputNative,k),rows:R,rowsMax:_,hintText:p},K,B,{onHeightChange:this.handleHeightChange})):b.default.createElement("input",(0,r.default)({type:v,style:S((0,y.default)(w.inputNative,j))},K,B));var q={};return n&&(q=K),b.default.createElement("div",(0,r.default)({},q,{className:o,style:S((0,y.default)(w.root,T))}),F,p?b.default.createElement(A.default,{muiTheme:this.context.muiTheme,show:!(this.state.hasValue||f&&!this.state.isFocused)||!this.state.hasValue&&f&&s&&!this.state.isFocused,style:h,text:p}):null,H,I?b.default.createElement(M.default,{disabled:i,disabledStyle:C,error:!!this.state.errorText,errorStyle:a,focus:this.state.isFocused,focusStyle:O,muiTheme:this.context.muiTheme,style:D}):null,P)}}]),t}(C.Component);j.defaultProps={disabled:!1,floatingLabelFixed:!1,multiLine:!1,fullWidth:!1,type:"text",underlineShow:!0,rows:1},j.contextTypes={muiTheme:I.default.object.isRequired},j.propTypes={},t.default=j},3601:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.muiTheme.textField.hintColor;return{root:{position:"absolute",opacity:e.show?1:0,color:t,transition:d.default.easeOut(),bottom:12}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),r=o(a),s=n(0),l=o(s),c=n(1),u=(o(c),n(3524)),d=o(u),f=function(e){var t=e.muiTheme.prepareStyles,n=e.style,o=e.text,a=i(e);return l.default.createElement("div",{style:t((0,r.default)(a.root,n))},o)};f.propTypes={},f.defaultProps={show:!0},t.default=f},3602:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={position:"absolute",lineHeight:"22px",top:38,transition:d.default.easeOut(),zIndex:1,transform:"scale(1) translate(0, 0)",transformOrigin:"left top",pointerEvents:"auto",userSelect:"none"},n=e.shrink?(0,r.default)({transform:"scale(0.75) translate(0, -28px)",pointerEvents:"none"},e.shrinkStyle):null;return{root:(0,r.default)(t,e.style,n)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),r=o(a),s=n(0),l=o(s),c=n(1),u=(o(c),n(3524)),d=o(u),f=function(e){var t=e.muiTheme,n=e.className,o=e.children,a=e.htmlFor,r=e.onClick,s=t.prepareStyles,c=i(e);return l.default.createElement("label",{className:n,style:s(c.root),htmlFor:a,onClick:r},o)};f.propTypes={},f.defaultProps={disabled:!1,shrink:!1},t.default=f},3603:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=o(i),r=n(0),s=o(r),l=n(1),c=o(l),u=n(3524),d=o(u),f=(c.default.bool,c.default.object,c.default.bool,c.default.object,c.default.bool,c.default.object,c.default.object.isRequired,c.default.object,{disabled:!1,disabledStyle:{},error:!1,errorStyle:{},focus:!1,focusStyle:{},style:{}}),p=function(e){var t=e.disabled,n=e.disabledStyle,o=e.error,i=e.errorStyle,r=e.focus,l=e.focusStyle,c=e.muiTheme,u=e.style,f=i.color,p=c.prepareStyles,h=c.textField,m=h.borderColor,g=h.disabledTextColor,E=h.errorColor,T=h.focusColor,v={root:{borderTop:"none",borderLeft:"none",borderRight:"none",borderBottomStyle:"solid",borderBottomWidth:1,borderColor:m,bottom:8,boxSizing:"content-box",margin:0,position:"absolute",width:"100%"},disabled:{borderBottomStyle:"dotted",borderBottomWidth:2,borderColor:g},focus:{borderBottomStyle:"solid",borderBottomWidth:2,borderColor:T,transform:"scaleX(0)",transition:d.default.easeOut()},error:{borderColor:f||E,transform:"scaleX(1)"}},y=(0,a.default)({},v.root,u),C=(0,a.default)({},y,v.focus,l);return t&&(y=(0,a.default)({},y,v.disabled,n)),r&&(C=(0,a.default)({},C,{transform:"scaleX(1)"})),o&&(C=(0,a.default)({},C,v.error)),s.default.createElement("div",null,s.default.createElement("hr",{"aria-hidden":"true",style:p(y)}),s.default.createElement("hr",{"aria-hidden":"true",style:p(C)}))};p.propTypes={},p.defaultProps=f,t.default=p},3604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3600),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default},3605:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=o(i),r=n(2),s=o(r),l=n(3),c=o(l),u=n(5),d=o(u),f=n(4),p=o(f),h=n(0),m=n(1),g=(o(m),null),E=0,T=function(e){function t(){var e,n,o,i;(0,s.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=o=(0,d.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.locked=!1,i=n,(0,d.default)(o,i)}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){!0===this.props.lock&&this.preventScrolling()}},{key:"componentWillReceiveProps",value:function(e){this.props.lock!==e.lock&&(e.lock?this.preventScrolling():this.allowScrolling())}},{key:"componentWillUnmount",value:function(){this.allowScrolling()}},{key:"preventScrolling",value:function(){if(!0!==this.locked&&(E+=1,this.locked=!0,1===E)){var e=document.getElementsByTagName("body")[0];g=e.style.overflow,e.style.overflow="hidden"}}},{key:"allowScrolling",value:function(){if(!0===this.locked&&(E-=1,this.locked=!1),0===E&&null!==g){document.getElementsByTagName("body")[0].style.overflow=g||"",g=null}}},{key:"render",value:function(){return null}}]),t}(h.Component);T.propTypes={},t.default=T},3606:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(14),D=o(I),R=n(3526),_=o(R),k=n(3534),K=o(k),S=n(3524),w=o(S),x=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,_.default)(this.props,e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimer),clearTimeout(this.leaveTimer)}},{key:"componentWillAppear",value:function(e){this.initializeAnimation(e)}},{key:"componentWillEnter",value:function(e){this.initializeAnimation(e)}},{key:"componentDidAppear",value:function(){this.animate()}},{key:"componentDidEnter",value:function(){this.animate()}},{key:"componentWillLeave",value:function(e){D.default.findDOMNode(this).style.opacity=0;var t=this.props.aborted?0:2e3;this.enterTimer=setTimeout(e,t)}},{key:"animate",value:function(){var e=D.default.findDOMNode(this).style,t=w.default.easeOut("2s","opacity")+", "+w.default.easeOut("1s","transform");K.default.set(e,"transition",t),K.default.set(e,"transform","scale(1)")}},{key:"initializeAnimation",value:function(e){var t=D.default.findDOMNode(this).style;t.opacity=this.props.opacity,K.default.set(t,"transform","scale(0)"),this.leaveTimer=setTimeout(e,0)}},{key:"render",value:function(){var e=this.props,t=(e.aborted,e.color),n=(e.opacity,e.style),o=(e.touchGenerated,(0,s.default)(e,["aborted","color","opacity","style","touchGenerated"])),i=this.context.muiTheme.prepareStyles,r=(0,v.default)({position:"absolute",top:0,left:0,height:"100%",width:"100%",borderRadius:"50%",backgroundColor:t},n);return C.default.createElement("div",(0,a.default)({},o,{style:i(r)}))}}]),t}(y.Component);x.defaultProps={opacity:.1,aborted:!1},x.contextTypes={muiTheme:O.default.object.isRequired},x.propTypes={},t.default=x},3607:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=o(i),r=n(2),s=o(r),l=n(3),c=o(l),u=n(5),d=o(u),f=n(4),p=o(f),h=n(9),m=o(h),g=n(0),E=o(g),T=n(1),v=o(T),y=n(14),C=o(y),b=n(3526),O=o(b),I=n(3534),D=o(I),R=n(3524),_=o(R),k=n(3609),K=o(k),S=750,w=function(e){function t(){var e,n,o,i;(0,s.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=o=(0,d.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.pulsate=function(){var e=C.default.findDOMNode(o.refs.innerCircle);if(e){var t=e.style.transform||"scale(1)",n="scale(1)"===t?"scale(0.85)":"scale(1)";D.default.set(e.style,"transform",n),o.timeout=setTimeout(o.pulsate,S)}},i=n,(0,d.default)(o,i)}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.props.show&&(this.setRippleSize(),this.pulsate())}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,O.default)(this.props,e)||!(0,O.default)(this.state,t)}},{key:"componentDidUpdate",value:function(){this.props.show?(this.setRippleSize(),this.pulsate()):this.timeout&&clearTimeout(this.timeout)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"getRippleElement",value:function(e){var t=e.color,n=e.innerStyle,o=e.opacity,i=this.context.muiTheme,a=i.prepareStyles,r=i.ripple,s=(0,m.default)({position:"absolute",height:"100%",width:"100%",borderRadius:"50%",opacity:o||.16,backgroundColor:t||r.color,transition:_.default.easeOut(S+"ms","transform",null,_.default.easeInOutFunction)},n);return E.default.createElement("div",{ref:"innerCircle",style:a((0,m.default)({},s))})}},{key:"setRippleSize",value:function(){var e=C.default.findDOMNode(this.refs.innerCircle),t=e.offsetHeight,n=e.offsetWidth,o=Math.max(t,n),i=0;-1!==e.style.top.indexOf("px",e.style.top.length-2)&&(i=parseInt(e.style.top)),e.style.height=o+"px",e.style.top=t/2-o/2+i+"px"}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.style,o=(0,m.default)({height:"100%",width:"100%",position:"absolute",top:0,left:0},n),i=t?this.getRippleElement(this.props):null;return E.default.createElement(K.default,{maxScale:.85,style:o},i)}}]),t}(g.Component);w.contextTypes={muiTheme:v.default.object.isRequired},w.propTypes={},t.default=w},3608:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t.muiTheme.overlay,o={root:{position:"fixed",height:"100%",width:"100%",top:0,left:"-100%",opacity:0,backgroundColor:n.backgroundColor,WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",willChange:"opacity",transform:"translateZ(0)",transition:e.transitionEnabled&&R.default.easeOut("0ms","left","400ms")+", "+R.default.easeOut("400ms","opacity")}};return e.show&&(0,y.default)(o.root,{left:0,opacity:1,transition:R.default.easeOut("0ms","left")+", "+R.default.easeOut("400ms","opacity")}),o}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3524),R=o(D),_=n(3605),k=o(_),K=function(e){function t(){return(0,f.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,T.default)(t,e),(0,h.default)(t,[{key:"setOpacity",value:function(e){this.refs.overlay.style.opacity=e}},{key:"render",value:function(){var e=this.props,t=e.autoLockScrolling,n=e.show,o=e.style,a=(e.transitionEnabled,(0,l.default)(e,["autoLockScrolling","show","style","transitionEnabled"])),s=this.context.muiTheme.prepareStyles,c=i(this.props,this.context);return b.default.createElement("div",(0,r.default)({},a,{ref:"overlay",style:s((0,y.default)(c.root,o))}),t&&b.default.createElement(k.default,{lock:n}))}}]),t}(C.Component);K.defaultProps={autoLockScrolling:!0,style:{},transitionEnabled:!0},K.contextTypes={muiTheme:I.default.object.isRequired},K.propTypes={},t.default=K},3609:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(210),D=o(I),R=n(3610),_=o(R),k=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.childStyle,o=e.enterDelay,i=e.maxScale,r=e.minScale,l=e.style,c=(0,s.default)(e,["children","childStyle","enterDelay","maxScale","minScale","style"]),u=this.context.muiTheme.prepareStyles,d=(0,v.default)({},{position:"relative",height:"100%"},l),f=C.default.Children.map(t,function(e){return C.default.createElement(_.default,{key:e.key,enterDelay:o,maxScale:i,minScale:r,style:n},e)});return C.default.createElement(D.default,(0,a.default)({},c,{style:u(d),component:"div"}),f)}}]),t}(y.Component);k.defaultProps={enterDelay:0},k.contextTypes={muiTheme:O.default.object.isRequired},k.propTypes={},t.default=k},3610:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=o(i),r=n(8),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(14),D=o(I),R=n(3534),_=o(R),k=n(3524),K=o(k),S=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,p.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimer),clearTimeout(this.leaveTimer)}},{key:"componentWillAppear",value:function(e){this.initializeAnimation(e)}},{key:"componentWillEnter",value:function(e){this.initializeAnimation(e)}},{key:"componentDidAppear",value:function(){this.animate()}},{key:"componentDidEnter",value:function(){this.animate()}},{key:"componentWillLeave",value:function(e){var t=D.default.findDOMNode(this).style;t.opacity="0",_.default.set(t,"transform","scale("+this.props.minScale+")"),this.leaveTimer=setTimeout(e,450)}},{key:"animate",value:function(){var e=D.default.findDOMNode(this).style;e.opacity="1",_.default.set(e,"transform","scale("+this.props.maxScale+")")}},{key:"initializeAnimation",value:function(e){var t=D.default.findDOMNode(this).style;t.opacity="0",_.default.set(t,"transform","scale(0)"),this.enterTimer=setTimeout(e,this.props.enterDelay)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.enterDelay,e.maxScale,e.minScale,e.style),o=(0,s.default)(e,["children","enterDelay","maxScale","minScale","style"]),i=this.context.muiTheme.prepareStyles,r=(0,v.default)({},{position:"absolute",height:"100%",width:"100%",top:0,left:0,transition:K.default.easeOut(null,["transform","opacity"])},n);return C.default.createElement("div",(0,a.default)({},o,{style:i(r)}),t)}}]),t}(y.Component);S.defaultProps={enterDelay:0,maxScale:1,minScale:0},S.contextTypes={muiTheme:O.default.object.isRequired},S.propTypes={},t.default=S},3611:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=e.verticalPosition,i=e.horizontalPosition,a=e.touch?10:0,r=e.touch?-20:-10,s="bottom"===o?14+a:-14-a,l=t.muiTheme,c=l.baseTheme,u=l.zIndex,d=l.tooltip,f=l.borderRadius;return{root:{position:"absolute",fontFamily:c.fontFamily,fontSize:"10px",lineHeight:"22px",padding:"0 8px",zIndex:u.tooltip,color:d.color,overflow:"hidden",top:-1e4,borderRadius:f,userSelect:"none",opacity:0,right:"left"===i?12:null,left:"center"===i?(n.offsetWidth-48)/2*-1:"right"===i?12:null,transition:R.default.easeOut("0ms","top","450ms")+", "+R.default.easeOut("450ms","transform","0ms")+", "+R.default.easeOut("450ms","opacity","0ms")},label:{position:"relative",whiteSpace:"nowrap"},ripple:{position:"absolute",left:"center"===i?"50%":"left"===i?"100%":"0%",top:"bottom"===o?0:"100%",transform:"translate(-50%, -50%)",borderRadius:"50%",backgroundColor:"transparent",transition:R.default.easeOut("0ms","width","450ms")+", "+R.default.easeOut("0ms","height","450ms")+", "+R.default.easeOut("450ms","backgroundColor","0ms")},rootWhenShown:{top:"top"===o?r:36,opacity:d.opacity,transform:"translate(0px, "+s+"px)",transition:R.default.easeOut("0ms","top","0ms")+", "+R.default.easeOut("450ms","transform","0ms")+", "+R.default.easeOut("450ms","opacity","0ms")},rootWhenTouched:{fontSize:"14px",lineHeight:"32px",padding:"0 16px"},rippleWhenShown:{backgroundColor:d.rippleBackgroundColor,transition:R.default.easeOut("450ms","width","0ms")+", "+R.default.easeOut("450ms","height","0ms")+", "+R.default.easeOut("450ms","backgroundColor","0ms")}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=o(a),s=n(8),l=o(s),c=n(6),u=o(c),d=n(2),f=o(d),p=n(3),h=o(p),m=n(5),g=o(m),E=n(4),T=o(E),v=n(9),y=o(v),C=n(0),b=o(C),O=n(1),I=o(O),D=n(3524),R=o(D),_=function(e){function t(){var e,n,o,i;(0,f.default)(this,t);for(var a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=o=(0,g.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(r))),o.state={offsetWidth:null},i=n,(0,g.default)(o,i)}return(0,T.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.setRippleSize(),this.setTooltipPosition()}},{key:"componentWillReceiveProps",value:function(){this.setTooltipPosition()}},{key:"componentDidUpdate",value:function(){this.setRippleSize()}},{key:"setRippleSize",value:function(){var e=this.refs.ripple,t=this.refs.tooltip,n=parseInt(t.offsetWidth,10)/("center"===this.props.horizontalPosition?2:1),o=parseInt(t.offsetHeight,10),i=Math.ceil(2*Math.sqrt(Math.pow(o,2)+Math.pow(n,2)));this.props.show?(e.style.height=i+"px",e.style.width=i+"px"):(e.style.width="0px",e.style.height="0px")}},{key:"setTooltipPosition",value:function(){this.setState({offsetWidth:this.refs.tooltip.offsetWidth})}},{key:"render",value:function(){var e=this.props,t=(e.horizontalPosition,e.label),n=(e.show,e.touch,e.verticalPosition,(0,l.default)(e,["horizontalPosition","label","show","touch","verticalPosition"])),o=this.context.muiTheme.prepareStyles,a=i(this.props,this.context,this.state);return b.default.createElement("div",(0,r.default)({},n,{ref:"tooltip",style:o((0,y.default)(a.root,this.props.show&&a.rootWhenShown,this.props.touch&&a.rootWhenTouched,this.props.style))}),b.default.createElement("div",{ref:"ripple",style:o((0,y.default)(a.ripple,this.props.show&&a.rippleWhenShown))}),b.default.createElement("span",{style:o(a.label)},t))}}]),t}(C.Component);_.contextTypes={muiTheme:I.default.object.isRequired},_.propTypes={},t.default=_},3612:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(66),a=o(i),r=n(6),s=o(r),l=n(2),c=o(l),u=n(3),d=o(u),f=n(5),p=o(f),h=n(4),m=o(h),g=n(322),E=o(g),T=n(9),v=o(T),y=n(0),C=o(y),b=n(1),O=o(b),I=n(14),D=o(I),R=n(210),_=o(R),k=n(3552),K=o(k),S=n(3606),w=o(S),x=function(e){return(0,E.default)(e).slice(1)},N=function(e){function t(e,n){(0,c.default)(this,t);var o=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return o.handleMouseDown=function(e){0===e.button&&o.start(e,!1)},o.handleMouseUp=function(){o.end()},o.handleMouseLeave=function(){o.end()},o.handleTouchStart=function(e){e.stopPropagation(),o.props.abortOnScroll&&e.touches&&(o.startListeningForScrollAbort(e),o.startTime=Date.now()),o.start(e,!0)},o.handleTouchEnd=function(){o.end()},o.handleTouchMove=function(e){if(Math.abs(Date.now()-o.startTime)>300)return void o.stopListeningForScrollAbort();var t=Math.abs(e.touches[0].clientY-o.firstTouchY),n=Math.abs(e.touches[0].clientX-o.firstTouchX);if(t>6||n>6){var i=o.state.ripples,r=i[0],s=C.default.cloneElement(r,{aborted:!0});i=x(i),i=[].concat((0,a.default)(i),[s]),o.setState({ripples:i},function(){o.end()})}},o.ignoreNextMouseDown=!1,o.state={hasRipples:!1,nextKey:0,ripples:[]},o}return(0,m.default)(t,e),(0,d.default)(t,[{key:"start",value:function(e,t){var n=this.context.muiTheme.ripple;if(this.ignoreNextMouseDown&&!t)return void(this.ignoreNextMouseDown=!1);var o=this.state.ripples;o=[].concat((0,a.default)(o),[C.default.createElement(w.default,{key:this.state.nextKey,style:this.props.centerRipple?{}:this.getRippleStyle(e),color:this.props.color||n.color,opacity:this.props.opacity,touchGenerated:t})]),this.ignoreNextMouseDown=t,this.setState({hasRipples:!0,nextKey:this.state.nextKey+1,ripples:o})}},{key:"end",value:function(){var e=this.state.ripples;this.setState({ripples:x(e)}),this.props.abortOnScroll&&this.stopListeningForScrollAbort()}},{key:"startListeningForScrollAbort",value:function(e){this.firstTouchY=e.touches[0].clientY,this.firstTouchX=e.touches[0].clientX,document.body.addEventListener("touchmove",this.handleTouchMove)}},{key:"stopListeningForScrollAbort",value:function(){document.body.removeEventListener("touchmove",this.handleTouchMove)}},{key:"getRippleStyle",value:function(e){var t=D.default.findDOMNode(this),n=t.offsetHeight,o=t.offsetWidth,i=K.default.offset(t),a=e.touches&&e.touches.length,r=a?e.touches[0].pageX:e.pageX,s=a?e.touches[0].pageY:e.pageY,l=r-i.left,c=s-i.top,u=this.calcDiag(l,c),d=this.calcDiag(o-l,c),f=this.calcDiag(o-l,n-c),p=this.calcDiag(l,n-c),h=Math.max(u,d,f,p),m=2*h;return{directionInvariant:!0,height:m,width:m,top:c-h,left:l-h}}},{key:"calcDiag",value:function(e,t){return Math.sqrt(e*e+t*t)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,o=this.state,i=o.hasRipples,a=o.ripples,r=this.context.muiTheme.prepareStyles,s=void 0;if(i){var l=(0,v.default)({height:"100%",width:"100%",position:"absolute",top:0,left:0,overflow:"hidden",pointerEvents:"none",zIndex:1},n);s=C.default.createElement(_.default,{style:r(l)},a)}return C.default.createElement("div",{onMouseUp:this.handleMouseUp,onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},s,t)}}]),t}(y.Component);N.defaultProps={abortOnScroll:!0},N.contextTypes={muiTheme:O.default.object.isRequired},N.propTypes={},t.default=N},3613:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(3536),s=o(r),l=n(3533),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}))};u=(0,s.default)(u),u.displayName="NavigationCheck",u.muiName="SvgIcon",t.default=u},3614:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(3536),s=o(r),l=n(3533),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}))};u=(0,s.default)(u),u.displayName="NavigationExpandLess",u.muiName="SvgIcon",t.default=u},3615:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(3536),s=o(r),l=n(3533),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))};u=(0,s.default)(u),u.displayName="NavigationExpandMore",u.muiName="SvgIcon",t.default=u},3616:function(e,t,n){"use strict";function o(e,t,n){return a.default.Children.map(e,function(e){if(!a.default.isValidElement(e))return e;var o="function"==typeof t?t(e):t,i="function"==typeof n?n(e):n||e.props.children;return a.default.cloneElement(e,o,i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.extendChildren=o;var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},3617:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.largeWidth,n=void 0===t?992:t,o=e.mediumWidth,i=void 0===o?768:o,a=e.resizeInterval,s=void 0===a?166:a;return function(e){return function(t){function o(){var e,t,n,i;(0,u.default)(this,o);for(var a=arguments.length,r=Array(a),c=0;c<a;c++)r[c]=arguments[c];return t=n=(0,h.default)(this,(e=o.__proto__||(0,l.default)(o)).call.apply(e,[this].concat(r))),n.state={width:null},n.handleResize=function(){clearTimeout(n.deferTimer),n.deferTimer=setTimeout(function(){n.updateWidth()},s)},i=t,(0,h.default)(n,i)}return(0,g.default)(o,t),(0,f.default)(o,[{key:"componentDidMount",value:function(){this.updateWidth()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.deferTimer)}},{key:"updateWidth",value:function(){var e=window.innerWidth,t=void 0;(t=e>=n?O:e>=i?b:C)!==this.state.width&&this.setState({width:t})}},{key:"render",value:function(){var t=this.state.width;return null===t?null:T.default.createElement(y.default,{target:"window",onResize:this.handleResize},T.default.createElement(e,(0,r.default)({width:t},this.props)))}}]),o}(E.Component)}}Object.defineProperty(t,"__esModule",{value:!0}),t.LARGE=t.MEDIUM=t.SMALL=void 0;var a=n(7),r=o(a),s=n(6),l=o(s),c=n(2),u=o(c),d=n(3),f=o(d),p=n(5),h=o(p),m=n(4),g=o(m);t.default=i;var E=n(0),T=o(E),v=n(753),y=o(v),C=t.SMALL=1,b=t.MEDIUM=2,O=t.LARGE=3},3618:function(e,t,n){"use strict";function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}n.d(t,"b",function(){return c}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return o});var i=n(0),a=(n.n(i),n(115)),r=(n.n(a),n(250)),s=(n.n(r),n(763)),l=(n.n(s),n(253)),c=function(e){return function(t){var o=n.i(i.createFactory)(t),a=function(t){return o(e(t))};return a}},u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},p=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},h=function(e){var t=c(function(t){return d({},t,"function"==typeof e?e(t):e)});return t},m=(Object.keys,function(e){function t(){return u(this,t),p(this,e.apply(this,arguments))}f(t,e),t.prototype.render=function(){return null}}(i.Component),function(e){return function(t){var o=n.i(i.createFactory)(t),a=function(e,t){return o(d({},e,t))};return a.contextTypes=e,a}}),g={fromESObservable:null,toESObservable:null},E={fromESObservable:function(e){return"function"==typeof g.fromESObservable?g.fromESObservable(e):e},toESObservable:function(e){return"function"==typeof g.toESObservable?g.toESObservable(e):e}}},3619:function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){if("string"==typeof e)return e;if(e)return e.displayName||e.name||"Component"};t.default=o},3620:function(e,t,n){"use strict";t.__esModule=!0;var o=function(e,t){return function(n){return n[e]=t,n}};t.default=o},3621:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(0),l=n(3554),c=(o(l),n(3555)),u=(o(c),function(e){return function(t){var n=(0,s.createFactory)(t),o=function(t){function o(){return i(this,o),a(this,t.apply(this,arguments))}return r(o,t),o.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},o.prototype.render=function(){return n(this.props)},o}(s.Component);return o}});t.default=u},3622:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e){return K.a.has(e)?K.a.get(e):[]}function a(e,t,n,o){n&&t.setValue(o,e)}function r(e,t,n){if(e)return e.props[t.propName]=n?t.thenValue:t.elseValue}function s(e,t,n){n&&e?(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null}):e&&e.hiddenComponent&&(e.component=e.hiddenComponent,delete e.hiddenComponent)}function l(e,t,n){n&&e.hiddenComponent?(e.component=e.hiddenComponent,delete e.hiddenComponent):(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null})}function c(e){return x.has(e)?x.get(e):D.a}function u(e){return w.has(e)?w.get(e):D.a}function d(e){return void 0!==e&&null!==e}function f(e){return d(e)&&e.toString().trim().length>0}function p(e,t){return e===t}function h(e,t){return e!==t}function m(e,t){return t.indexOf(e)>=0}function g(e,t){return t.indexOf(e)<0}function E(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){return!1}}function T(e,t,n){return n.hasOwnProperty("hiddenComponent")}function v(e,t){return!0===(S.a.getState()?S.a.getState()[t]:void 0)}function y(e,t){return!1===(S.a.getState()?S.a.getState()[t]:void 0)}function C(e,t,n){var o=e.whenFieldName,i=e.operatorFn,a=e.whenValue;return i(n[o],a,t,n,o)}function b(e,t,n,o){return e.map(function(e,i){var a=o.find(function(n){return n.name===(e.field||t.field)});return C({whenFieldName:e.field?e.field:t.field,operatorFn:u(e.operator),whenValue:e.value},a,n)})}function O(e,t,n){return e.forEach(function(e){var i=k()(e.when)?e.when:[e.when],a=b(i,e,n,t).some(function(e){return!0===e});(e.operations||[e.operation]).forEach(function(i){var r=t.find(function(t){return t.name===(i.field||e.field)}),s=(i.field,i.type),l=o(i,["field","type"]);c(s)(r,l,a,n)})}),t}t.b=i,t.a=O;var I=n(468),D=n.n(I),R=n(17),_=(n.n(R),n(173)),k=n.n(_),K=n(3645),S=n(470),w=new Map([["EQUALS",p],["NOT_EQUALS",h],["HAS_VALUE",d],["HAS_NO_VALUE",n.i(R.negate)(d)],["HAS_STRING_VALUE",f],["ONEOF",m],["NONEOF",g],["SYSTEM_SETTING_IS_TRUE",v],["SYSTEM_SETTING_IS_FALSE",y],["IS_VALID_POINT",E],["IS_HIDDEN_FIELD",T]]),x=new Map([["SET_PROP",r],["CHANGE_VALUE",a],["HIDE_FIELD",s],["SHOW_FIELD",l]])},3623:function(e,t,n){"use strict";function o(e){var t=e.query&&e.query.pageSize||50,n=e.total,o=e.pageCount,i=e.page,a=n-(n-(o-(o-i))*t),r=1+a-t,s=a;return r+" - "+(s>n?n:s)}t.a=o},3625:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){var n=e.onClick,i=(e.isPristine,e.isDirtyHandler),a=void 0===i?u.a.getState.bind(u.a):i,s=o(e,["onClick","isPristine","isDirtyHandler"]),c=a&&a()&&a().dirty,f=function(){c?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&n.apply(void 0,arguments):n.apply(void 0,arguments)};return r.a.createElement(l.a,d({},s,{onClick:f,secondary:c,label:t.d2.i18n.getTranslation("cancel")}))}var a=n(0),r=n.n(a),s=n(80),l=n.n(s),c=n(90),u=n(248),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};i.propTypes={onClick:r.a.PropTypes.func.isRequired,isDirtyHandler:r.a.PropTypes.func},t.a=n.i(c.a)(i)},3628:function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(25),d=(n.n(u),n(319)),f=n.n(d),p=n(3637),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=function(t){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),h(n,[{key:"componentDidMount",value:function(){var t=this;this.subscription=u.Observable.fromEvent(e,"scroll").debounceTime(200).map(function(){return document.querySelector("body").scrollTop}).subscribe(function(){return t.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){var e={maxWidth:500,minWidth:300,marginTop:document.querySelector("body").scrollTop};return s.a.createElement("div",{style:this.props.style},s.a.createElement(f.a,{zDepth:1,rounded:!1,style:e},s.a.createElement(p.a,{source:this.props.detailsObject,showDetailBox:!!this.props.detailsObject,onClose:this.props.onClose})))}}]),n}(r.Component);m.propTypes={style:c.a.object,detailsObject:c.a.object.isRequired,onClose:c.a.func.isRequired},m.defaultProps={style:{}},t.a=m}).call(t,n(29))},3629:function(e,t,n){"use strict";function o(e){var t=e.style,n=void 0===t?{}:t,o=e.large,i=void 0!==o&&o,a=e.small,r=void 0!==a&&a;return s.a.createElement("div",{style:Object.assign({},c,n)},s.a.createElement(l.a,{large:i,small:r}))}t.a=o;var i=n(1),a=n.n(i),r=n(0),s=n.n(r),l=n(171),c={left:"45%",position:"fixed",top:"45%"};o.propTypes={style:a.a.object,large:a.a.bool,small:a.a.bool}},3634:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleListItem=t.BubbleList=t.SpeedDial=void 0;var i=n(3664),a=o(i),r=n(3660),s=o(r),l=n(3568),c=o(l);t.SpeedDial=a.default,t.BubbleList=s.default,t.BubbleListItem=c.default},3635:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return r});var o=n(17),i=(n.n(o),n.i(o.get)("eventProgram.step.activeStep")),a=n.i(o.get)("eventProgram.step.disabled"),r=n.i(o.get)("eventProgram.step.isSaving")},3636:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(133),d=n.n(u),f=n(1375),p=n.n(f),h=n(464),m=n.n(h),g=n(116),E=n.n(g),T=n(97),v=n.n(T),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),C=function(e){function t(){var e,n,a,r;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={open:!1},a.handleOpen=function(e){e.preventDefault(),a.setState({open:!0,anchorEl:e.currentTarget})},a.handleRequestClose=function(){a.setState({open:!1})},a.handleAction=function(e){a.handleRequestClose(),e()},r=n,i(a,r)}return a(t,e),y(t,[{key:"render",value:function(){var e=this,t=this.props.actions.map(function(t){return s.a.createElement(E.a,{primaryText:t.title,key:t.title,leftIcon:s.a.createElement(v.a,{className:"material-icons"},t.icon),onClick:function(){return e.handleAction(t.action)}})});return s.a.createElement("div",null,s.a.createElement(d.a,{onClick:this.handleOpen},s.a.createElement(v.a,{color:"gray",className:"material-icons"},"settings")),s.a.createElement(p.a,{open:this.state.open,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.handleRequestClose},s.a.createElement(m.a,null,t)))}}]),t}(r.Component);C.propTypes={actions:c.a.array},t.a=C},3637:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(24),d=n.n(u),f=n(754),p=n.n(f),h=n(92),m=n.n(h),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),E=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.getTranslation=function(e){return a.context.d2.i18n.getTranslation(e)},a.getDetailBoxContent=function(){return a.props.source?a.props.fields.filter(function(e){return a.props.source[e]}).map(function(e){var t=a.getValueToRender(e,a.props.source[e]);return s.a.createElement("div",{key:e,className:"detail-field"},s.a.createElement("div",{className:"detail-field__label detail-field__"+e+"-label"},a.getTranslation(m()(e))),s.a.createElement("div",{className:"detail-field__value detail-field__"+e},t))}):s.a.createElement("div",{className:"detail-box__status"},"Loading details...")},a.getDateString=function(e){var t=new Date(e).toString();return"Invalid Date"===t?e:t},a.getNamesToDisplay=function(e){var t=e.map(function(e){return e.displayName?e.displayName:e.name}).filter(function(e){return e});return s.a.createElement("ul",null,t.map(function(e){return s.a.createElement("li",{key:e},e)}))},a.getJsonApiResource=function(e){return s.a.createElement("a",{style:{wordBreak:"break-all"},href:e+".json",rel:"noopener noreferrer",target:"_blank"},e)},a.getValueToRender=function(e,t){return Array.isArray(t)&&t.length?a.getNamesToDisplay(t):"created"===e||"lastUpdated"===e?a.getDateString(t):"href"===e?a.getJsonApiResource(t):t},r=n,i(a,r)}return a(t,e),g(t,[{key:"render",value:function(){var e=d()("details-box"),t=s.a.createElement(p.a,{className:"details-box__close-button material-icons",onClick:this.props.onClose},"close");return!1===this.props.showDetailBox?null:s.a.createElement("div",{className:e},t,s.a.createElement("div",null,this.getDetailBoxContent()))}}]),t}(r.Component);E.propTypes={fields:c.a.array,showDetailBox:c.a.bool,source:c.a.object,onClose:c.a.func},E.defaultProps={source:c.a.object,fields:["name","locale","shortName","code","displayDescription","created","lastUpdated","id","href"],showDetailBox:!1,onClose:function(){}},E.contextTypes={d2:c.a.object.isRequired},t.a=E},3638:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1371),c=n.n(l),u=n(754),d=n.n(u),f=n(765),p=n.n(f),h=n(207),m=n(3541),g=n(3634),E=(n.n(g),n(90)),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),y=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={items:[{id:"WITHOUT_REGISTRATION",primaryText:n.d2.i18n.getTranslation("event_program"),rightAvatar:s.a.createElement(p.a,{className:"material-icons",icon:s.a.createElement(d.a,null,"event")})},{id:"WITH_REGISTRATION",primaryText:n.d2.i18n.getTranslation("tracker_program"),rightAvatar:s.a.createElement(p.a,{className:"material-icons",icon:s.a.createElement(d.a,null,"assignment")})}]},a}return a(t,e),v(t,[{key:"handleClick",value:function(e){n.i(h.a)("/edit/"+this.props.groupName+"/"+this.props.modelType+"/add?type="+e.id)}},{key:"render",value:function(){var e=this;return s.a.createElement(g.SpeedDial,{hasBackdrop:!0},s.a.createElement(g.BubbleList,null,this.state.items.map(function(t,n){return s.a.createElement(g.BubbleListItem,T({key:t.id},t,{onClick:e.handleClick.bind(e,t)}))})))}}]),t}(s.a.Component);y=n.i(E.a)(y);var C=s.a.createClass({displayName:"ListActionBar",propTypes:{modelType:s.a.PropTypes.string.isRequired,groupName:s.a.PropTypes.string.isRequired},_addClick:function(){n.i(h.a)("/edit/"+this.props.groupName+"/"+this.props.modelType+"/add")},render:function(){var e={textAlign:"right",marginTop:"1rem",bottom:"1.5rem",right:"1.5rem",position:"fixed",zIndex:10},t=this.props.getModelDefinitionByName(this.props.modelType);return this.props.getCurrentUser().canCreate(t)?s.a.createElement("div",{style:e},"program"===this.props.modelType?s.a.createElement(y,this.props):s.a.createElement(c.a,{onClick:this._addClick},s.a.createElement(d.a,{className:"material-icons"},"add"))):null}});t.a=n.i(m.a)(C)},3639:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(251),r=n.n(a);t.a=i.a.createClass({displayName:"LoadingStatus.component",propTypes:{isLoading:i.a.PropTypes.bool.isRequired},getDefaultProps:function(){return{isLoading:!1}},render:function(){return this.props.isLoading?i.a.createElement(r.a,{mode:"indeterminate",style:{backgroundColor:"lightblue"}}):null}})},3640:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(3646),r=n(1367),s=n(114),l=n.n(s),c=n(134),u=n(327),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=["organisationUnit"],p=i.a.createClass({displayName:"SearchBox",propTypes:{searchObserverHandler:i.a.PropTypes.func.isRequired,initialValue:i.a.PropTypes.string},mixins:[a.a,r.a],getInitialState:function(){return{showSearchField:!1,value:this.props.initialValue||""}},componentWillMount:function(){this.searchBoxCb=this.createEventObserver("searchBox")},componentWillReceiveProps:function(e){this.props.params.modelType!==e.params.modelType&&this.setState({value:""})},componentDidMount:function(){var e=this,t=this.events.searchBox.debounceTime(400).map(function(e){return e&&e.target&&e.target.value?e.target.value:""}).distinctUntilChanged();this.props.searchObserverHandler(t),this.subscription=c.d.subscribe(function(t){return e.setState(d({},e.state,{showSearchField:!f.includes(t)}))})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe&&this.subscription.unsubscribe()},render:function(){var e={display:"inline-block",marginRight:16,position:"relative",top:-15};return this.state.showSearchField?i.a.createElement("div",{className:"search-list-items",style:e},i.a.createElement(l.a,{className:"list-search-field",value:this.state.value,fullWidth:!1,type:"search",onChange:this._onKeyUp,floatingLabelText:""+this.getTranslation("search_by_name_code_id")})):null},_onKeyUp:function(e){this.setState({value:e.target.value}),this.searchBoxCb(e)}});t.a=n.i(u.g)(p)},3641:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(i,a){try{var r=t[i](a),s=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(456),u=n.n(c),d=n(172),f=n.n(d),p=n(205),h=n.n(p),m=n(114),g=n.n(m),E=n(90),T=n(318),v=n(459),y=n(49),C=n(91),b=function(){function e(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),I=y.a.create(),D=y.a.create(),R=function(e){function t(e,n){var r=this;i(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s._changeFilter=function(e){s.setState({filterText:e.target.value})},s._assignItems=function(){var e=o(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=D.getState().concat(t),D.setState(n),e.abrupt("return",Promise.resolve(!0));case 3:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),s._removeItems=function(e){var t=D.getState().filter(function(t){return-1===e.indexOf(t)});return D.setState(t),Promise.resolve(!0)},s._saveCollection=function(){var e=D.getState().map(function(e){return e.split(".")}).filter(function(e){return 2===e.length}).map(function(e){var t=b(e,2);return{dataElement:{id:t[0]},categoryOptionCombo:{id:t[1]}}});s.setState({isSaving:!0}),s.props.model.compulsoryDataElementOperands=e,s.props.model.save().then(function(){C.a.show({message:"saved_compulsory_data_elements",translate:!0})}).catch(function(){C.a.show({message:"failed_to_save_compulsory_data_elements",action:"ok",translate:!0})}).then(function(){s.setState({isSaving:!1}),s.props.onRequestClose()})},s.state={filterText:"",isSaving:!1},s.i18n=n.d2.i18n,e.dataElementOperands&&e.model&&(I.setState(e.dataElementOperands.map(function(e){return{text:e.displayName,value:e.dataElementId+"."+e.optionComboId}})),D.setState(e.model.compulsoryDataElementOperands.filter(function(e){return e.dataElement&&e.categoryOptionCombo}).map(function(e){return e.dataElement.id+"."+e.categoryOptionCombo.id}))),s}return r(t,e),O(t,[{key:"componentWillReceiveProps",value:function(e){e.open?e.dataElementOperands&&e.model&&(I.setState(e.dataElementOperands.map(function(e){return{text:e.displayName,value:[e.dataElementId,e.optionComboId].join(".")}})),D.setState(e.model.compulsoryDataElementOperands.filter(function(e){return e.dataElement&&e.categoryOptionCombo}).map(function(e){return[e.dataElement.id,e.categoryOptionCombo.id].join(".")}))):(I.setState(void 0),D.setState([]))}},{key:"render",value:function(){var e=this.state.isSaving?this.i18n.getTranslation("saving"):this.i18n.getTranslation("save"),t=[l.a.createElement(f.a,{disabled:this.state.isSaving,style:{marginRight:"1rem"},onClick:this.props.onRequestClose,label:this.i18n.getTranslation("close")}),l.a.createElement(h.a,{labelColor:"white",disabled:this.state.isSaving,primary:!0,onClick:this._saveCollection,label:e})];return l.a.createElement(u.a,{open:this.props.open,onRequestClose:this.props.onRequestClose,autoScrollBodyContent:!0,modal:!0,actions:t,contentStyle:{maxWidth:"none",width:"95%"}},l.a.createElement("div",{style:{marginBottom:"3.5rem"}},l.a.createElement(T.a,null,this.i18n.getTranslation("edit_compulsory_data_elements")," - ",this.props.model&&this.props.model.displayName),l.a.createElement(g.a,{floatingLabelText:this.i18n.getTranslation("filter"),style:{width:"100%"},onChange:this._changeFilter}),l.a.createElement(v.a,{itemStore:I,assignedItemStore:D,onAssignItems:this._assignItems,onRemoveItems:this._removeItems,height:350,filterText:this.state.filterText})))}}]),t}(s.Component);t.a=n.i(E.a)(R)},3642:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(1388),r=n(760),s=n.n(r),l=n(1393),c=n.n(l),u=n(3652),d=n.n(u),f=n(1395),p=n.n(f),h=n(1373),m=n.n(h),g=n(249),E=n.n(g),T=n(17),v=(n.n(T),n(174)),y=E()(function(){return{}}),C=s()(function(e){var t=e.value;return!n.i(T.isString)(t)},m.a),b=s()(function(e){return!0===e.value},p()(y(c.a)))(y(d.a));n.i(a.b)(function(e){return"BOOLEAN"===e.valueType},b),n.i(a.b)(function(e){var t=e.columnName,n=e.valueType;return"formType"===t&&"CONSTANT"===n},C(function(e){var t=e.value;return i.a.createElement(v.a,null,t.toLowerCase())}))},3643:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(i,a){try{var r=t[i](a),s=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(154),u=n.n(c),d=n(80),f=n.n(d),p=n(96),h=n.n(p),m=n(469),g=n.n(m),E=n(771),T=n.n(E),v=n(18),y=(n.n(v),n(91)),C=n(1372),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),O=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return s.state={open:!1,running:!1},s.getTranslation=s.context.d2.i18n.getTranslation.bind(s.context.d2.i18n),s.setStartDate=s.setStartDate.bind(s),s.setEndDate=s.setEndDate.bind(s),s.executeAction=s.executeAction.bind(s),s}return r(t,e),b(t,[{key:"componentDidMount",value:function(){var e=this;this.subscriptions=[],this.subscriptions.push(C.a.subscribe(function(t){return e.setState(t)}))}},{key:"componentWillUnmount",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe&&e.unsubscribe()})}},{key:"requestClose",value:function(){C.a.setState(Object.assign({},C.a.state,{open:!1}))}},{key:"setStartDate",value:function(e,t){var n=new Date(t);this.setState({startDate:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()})}},{key:"setEndDate",value:function(e,t){var n=new Date(t);this.setState({endDate:n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()})}},{key:"executeAction",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,o,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(v.getInstance)();case 2:t=e.sent,o=[this.state.model.modelDefinition.plural,this.state.model.id,"run"].join("/"),i=o+"?startDate="+this.state.startDate+"&endDate="+this.state.endDate,this.setState({running:!0}),t.Api.getApi().post(i,{startDate:this.state.startDate,endDate:this.state.endDate}).then(function(e){y.a.show({message:e.message,action:"ok"}),a.setState({open:!1,running:!1})}).catch(function(e){y.a.show({message:a.getTranslation("failed_to_start_predictor")+": "+e.message,action:"ok"}),a.setState({open:!1,running:!1}),console.error(e)});case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=[l.a.createElement(f.a,{label:this.getTranslation("cancel"),onClick:this.requestClose,style:{marginRight:16},disabled:this.state.running}),l.a.createElement(u.a,{label:this.getTranslation("run_predictor"),primary:!0,onClick:this.executeAction,disabled:!this.state.startDate||!this.state.endDate||this.state.running})];return l.a.createElement(h.a,{open:this.state.open,actions:e,title:this.getTranslation("run_predictor"),contentStyle:{maxWidth:450},bodyStyle:{marginLeft:64}},this.state.running?l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center",marginRight:64}},this.getTranslation("running_predictor")),l.a.createElement("div",{style:{marginTop:32,marginRight:64,textAlign:"center"}},l.a.createElement(T.a,null))):l.a.createElement("div",null,l.a.createElement(g.a,{autoOk:!0,floatingLabelText:this.getTranslation("start_date")+" (*)",onChange:this.setStartDate}),l.a.createElement(g.a,{autoOk:!0,floatingLabelText:this.getTranslation("end_date")+" (*)",onChange:this.setEndDate})),l.a.createElement("div",{style:{marginBottom:16}}))}}]),t}(l.a.Component);O.contextTypes={d2:l.a.PropTypes.any},t.a=O},3644:function(e,t,n){"use strict";function o(e,t){var o={enrollment:[{analyticsPeriodBoundaryType:r.g,boundaryTarget:r.c},{analyticsPeriodBoundaryType:r.f,boundaryTarget:r.c}],event:[{analyticsPeriodBoundaryType:r.g,boundaryTarget:r.b},{analyticsPeriodBoundaryType:r.f,boundaryTarget:r.b}]};return t&&function(e){return!n.i(a.isEqual)(e,o.event)&&!n.i(a.isEqual)(e,o.enrollment)}(t)?t:o[e]}function i(e,t){return{field:e,when:[{operator:"EQUALS",value:void 0}],operations:[{type:"CHANGE_VALUE",setValue:function(e,n){n&&(n.value=t,e[n.name]=t)}}]}}t.b=o,t.a=i;var a=n(17),r=(n.n(a),n(1385))},3645:function(e,t,n){"use strict";function o(e,t){e.optionSet&&e.optionSet.valueType&&(t.value=e.optionSet.valueType,e[t.name]!==e.optionSet.valueType&&(e[t.name]=e.optionSet.valueType))}var i=n(3644);t.a=new Map([["dataElement",[{field:"domainType",when:{operator:"EQUALS",value:"TRACKER"},operations:[{field:"categoryCombo",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:o}]},{field:"aggregationType",when:{field:"valueType",operator:"ONEOF",value:["TEXT","LONG_TEXT","LETTER","PHONE_NUMBER","EMAIL","TRACKER_ASSOCIATE","USERNAME","FILE_RESOURCE","COORDINATE"]},operations:[{field:"aggregationType",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"aggregationType",type:"CHANGE_VALUE",setValue:function(e,t){t.value="NONE",e[t.name]="NONE"}}]}]],["dataSetNotificationTemplate",[{when:[{field:"dataSetNotificationTrigger",operator:"NOT_EQUALS",value:"SCHEDULED_DAYS"}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"},{field:"sendStrategy",type:"HIDE_FIELD"}]},{field:"deliveryChannels",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"ORGANISATION_UNIT_CONTACT"}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]}]],["attribute",[{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:o}]}]],["trackedEntityAttribute",[{field:"unique",when:[{field:"valueType",operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{field:"unique",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"unique",type:"CHANGE_VALUE",setValue:function(e,t){t.value=!1,e.unique=!1}}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:o}]},{field:"orgunitScope",when:[{field:"unique",operator:"NOT_EQUALS",value:!0},{field:"valueType",operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{type:"HIDE_FIELD"}]},{field:"generated",when:[{field:"orgunitScope",operator:"IS_HIDDEN_FIELD"},{field:"orgunitScope",operator:"ONEOF",value:["organisation_unit"]},{field:"orgunitScope",operator:"EQUALS",value:!0}],operations:[{type:"HIDE_FIELD"},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=!1,e.generated=!1}}]},{field:"pattern",when:[{field:"generated",operator:"IS_HIDDEN_FIELD"},{field:"generated",operator:"NOT_EQUALS",value:!0}],operations:[{type:"HIDE_FIELD"},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=null,e.pattern=null}}]}]],["externalMapLayer",[{field:"legendSetUrl",when:[{field:"legendSet",operator:"HAS_VALUE"}],operations:[{field:"legendSetUrl",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"legendSet",when:[{field:"legendSetUrl",operator:"HAS_STRING_VALUE"}],operations:[{field:"legendSet",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["organisationUnit",[{field:"dataSets",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"dataSets",type:"HIDE_FIELD"}]},{field:"programs",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"programs",type:"HIDE_FIELD"}]},{field:"featureType",when:[{field:"coordinates",operator:"HAS_VALUE"}],operations:[{type:"CHANGE_VALUE",setValue:function(e){e.coordinates?function(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){}return!1}(e.coordinates)&&(e.featureType="POINT"):e.featureType=null}}]}]],["programRule",[{field:"name",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"description",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"priority",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"condition",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"programRuleActions",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]}]],["programRuleVariable",[{field:"program",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"},{field:"trackedEntityAttribute",operator:"HAS_STRING_VALUE"},{field:"programStage",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"dataElement",when:[{field:"programRuleVariableSourceType",operator:"ONEOF",value:["CALCULATED_VALUE","TEI_ATTRIBUTE"]}],operations:[{field:"dataElement",type:"HIDE_FIELD"}]},{field:"trackedEntityAttribute",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"TEI_ATTRIBUTE"}],operations:[{field:"trackedEntityAttribute",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE"}],operations:[{field:"programStage",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["programStage",[{field:"autoGenerateEvent",when:[{field:"autoGenerateEvent",operator:"NOT_EQUALS",value:!0}],operations:[{field:"openAfterEnrollment",type:"HIDE_FIELD"},{field:"reportDateToUse",type:"HIDE_FIELD"}]},{field:"reportDateToUse",when:[{field:"openAfterEnrollment",operator:"NOT_EQUALS",value:!0}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["eventProgramStage",[n.i(i.a)("validationStrategy","ON_COMPLETE")]],["programIndicator",[{field:"analyticsPeriodBoundaries",when:[{field:"analyticsType",operator:"EQUALS",value:"EVENT"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t&&(t.value=n.i(i.b)("event",t.value),e[t.name]=n.i(i.b)("event",t.value))}}]},{field:"analyticsPeriodBoundaries",when:[{field:"analyticsType",operator:"EQUALS",value:"ENROLLMENT"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t&&(t.value=n.i(i.b)("enrollment",t.value),e[t.name]=n.i(i.b)("enrollment",t.value))}}]}]],["programStageNotificationTemplate",[{field:"notificationTrigger",when:[{field:"notificationTrigger",operator:"NOT_EQUALS",value:"SCHEDULED_DAYS_DUE_DATE"}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NONEOF",value:["TRACKED_ENTITY_INSTANCE","ORGANISATION_UNIT_CONTACT"]}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"DATA_ELEMENT"}],operations:[{field:"recipientDataElement",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"PROGRAM_ATTRIBUTE"}],operations:[{field:"recipientProgramAttribute",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyUsersInHierarchyOnly",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyParentOrganisationUnitOnly",type:"HIDE_FIELD"}]},{field:"notifyUsersInHierarchyOnly",when:[{field:"notifyParentOrganisationUnitOnly",operator:"EQUALS",value:!0}],operations:[{field:"notifyUsersInHierarchyOnly",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"notifyParentOrganisationUnitOnly",when:[{field:"notifyUsersInHierarchyOnly",operator:"EQUALS",value:!0}],operations:[{field:"notifyParentOrganisationUnitOnly",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["programNotificationTemplate",[{field:"notificationTrigger",when:[{field:"notificationTrigger",operator:"NONEOF",value:["SCHEDULED_DAYS_INCIDENT_DATE","SCHEDULED_DAYS_ENROLLMENT_DATE"]}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NONEOF",value:["TRACKED_ENTITY_INSTANCE","ORGANISATION_UNIT_CONTACT"]}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"PROGRAM_ATTRIBUTE"}],operations:[{field:"recipientProgramAttribute",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyUsersInHierarchyOnly",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyParentOrganisationUnitOnly",type:"HIDE_FIELD"}]}]],["categoryCombo",[{field:"dataDimensionType",when:[{field:"dataDimensionType",operator:"HAS_NO_VALUE"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.name]="DISAGGREGATION"}}]}]],["sqlView",[{field:"name",when:{field:"id",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"type",when:{field:"id",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]]])},3646:function(e,t,n){"use strict";var o=n(25),i=(n.n(o),n(19)),a=n.n(i),r={getInitialState:function(){return this.events={},this.eventSubjects={},{}},createEventObserver:function(){var e=new Map;return function(t){var n=void 0;return e.has(t)?n=e.get(t):(n=new o.Subject,e.set(t,n)),this.events[t]||(this.events[t]=n.map(function(e){return Object.assign({},e)})),function(e){n.next(e)}}}(),componentWillUnmount:function(){var e=this;Object.keys(this.eventSubjects).forEach(function(t){a.a.debug("Completing: "+[e.constructor.name,t].join(".")),e.eventSubjects[t].completed()})}};t.a=r},3652:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M19 13H5v-2h14v2z"}))};u=(0,s.default)(u),u.displayName="ContentRemove",u.muiName="SvgIcon",t.default=u},3653:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))};u=(0,s.default)(u),u.displayName="NavigationArrowBack",u.muiName="SvgIcon",t.default=u},3654:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}))};u=(0,s.default)(u),u.displayName="NavigationArrowForward",u.muiName="SvgIcon",t.default=u},3655:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))};u=(0,s.default)(u),u.displayName="NavigationClose",u.muiName="SvgIcon",t.default=u},3657:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isOpen:!1,isInTransition:!1,positionV:"bottom",tabIndex:1,onBlur:function(){},onClick:function(){},onFocus:function(){},onKeyDown:function(){},onKeyUp:function(){},onMouseDown:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onMouseUp:function(){},onTouchEnd:function(){},onTouchStart:function(){}}},3658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.default={alignment:o.PropTypes.string,className:o.PropTypes.string,direction:o.PropTypes.string,href:o.PropTypes.string,isInTransition:o.PropTypes.bool,isOpen:o.PropTypes.bool,leftAvatar:o.PropTypes.object,positionV:o.PropTypes.string,primaryText:o.PropTypes.string,rightAvatar:o.PropTypes.object,style:o.PropTypes.object,styleText:o.PropTypes.object,tabIndex:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]),onBlur:o.PropTypes.func,onClick:o.PropTypes.func,onFocus:o.PropTypes.func,onKeyboardFocus:o.PropTypes.func,onKeyDown:o.PropTypes.func,onKeyUp:o.PropTypes.func,onMouseDown:o.PropTypes.func,onMouseEnter:o.PropTypes.func,onMouseLeave:o.PropTypes.func,onMouseUp:o.PropTypes.func}},3659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(e){var t=e.paper,n=e.baseTheme;return{root:{main:{backgroundColor:"transparent",listStyle:"none",cursor:"pointer",transition:i.default.easeOut()},direction:{down:{marginBottom:14},up:{marginTop:14},right:{textAlign:"left",float:"left",marginRight:14},left:{textAlign:"right",float:"right",marginLeft:14}},alignment:{right:{},left:{}},visible:{main:{opacity:1,visibility:"visible"},direction:{down:{},up:{},right:{},left:{}}},invisible:{main:{opacity:0,visibility:"hidden"},direction:{left:{marginRight:-20},right:{marginLeft:-20},up:{marginTop:-40},down:{marginBottom:-40}}}},wrap:{main:{position:"relative",display:"inline-block",lineHeight:"40px",outline:0,textDecoration:"none"}},text:{main:{borderRadius:"5px",padding:"6px 12px 5px",fontSize:14,color:n.palette.secondaryTextColor,backgroundColor:n.palette.canvasColor,boxShadow:t.zDepthShadows[1],whiteSpace:"nowrap"},alignment:{left:{marginLeft:24},right:{marginRight:24},up:{display:"none"},down:{display:"none"}}},rightAvatar:{float:"right",boxShadow:t.zDepthShadows[1]},leftAvatar:{float:"left",boxShadow:t.zDepthShadows[1]},focus:{avatar:{boxShadow:t.zDepthShadows[2]},text:{boxShadow:t.zDepthShadows[2]}}}}},3660:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return null!==e&&"object"===(void 0===e?"undefined":(0,g.default)(e))&&!(e instanceof Array)&&e.type&&e.type.displayName===t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),s=n(2),l=o(s),c=n(3),u=o(c),d=n(5),f=o(d),p=n(4),h=o(p),m=n(95),g=o(m),E=n(9),T=o(E),v=n(0),y=o(v),C=n(1),b=o(C),O=n(3661),I=o(O),D=function(e){function t(e,n){var o=n.muiTheme;(0,l.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return i.styles=(0,I.default)(o),i.getStylesMain=i.getStylesMain.bind(i),i.renderChild=i.renderChild.bind(i),i}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getStylesMain",value:function(){var e=this.props,t=e.isOpen,n=e.direction,o=void 0===n?"up":n,i=e.alignment,a=void 0===i?"right":i,r=e.positionV,s=void 0===r?"bottom":r,l=this.styles,c=t?"visible":"invisible";return(0,T.default)({},l.root.main,l.root[c].main,l.root.direction[o],l.root.direction[o+"_"+s],l.root.alignment[a])}},{key:"renderChild",value:function(e,t){var n=this.props,o=n.isOpen,a=n.isInTransition,r=n.direction,s=void 0===r?"up":r,l=n.alignment,c=void 0===l?"right":l;return i(e,"BubbleListItem")?y.default.cloneElement(e,{key:t,isOpen:o,isInTransition:a,alignment:c,direction:s,ref:"listItem"+t}):e}},{key:"renderChildren",value:function(){var e=this.props.children;return e?i(e,"BubbleListItem")?this.renderChild(e,0):e instanceof Array?e.map(this.renderChild):e:y.default.createElement("ul",{style:this.getStylesMain()})}},{key:"render",value:function(){var e=this.props.className;return y.default.createElement("ul",{className:e,style:this.getStylesMain()},this.renderChildren())}}]),t}(y.default.Component);D.displayName="BubbleList",D.propTypes={},D.defaultProps={isOpen:!1,isInTransition:!1},D.contextTypes={muiTheme:b.default.object.isRequired},t.default=D},3661:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(){return{root:{main:{position:"absolute",opacity:1,padding:0,margin:0,width:320,transition:i.default.easeOut()},direction:{down:{top:0},up:{bottom:0},right:{left:0},left:{right:0},down_inline:{paddingTop:40},up_inline:{paddingBottom:40}},alignment:{down:{top:0},up:{bottom:-7},right:{right:0,textAlign:"right"},left:{left:0,textAlign:"left"},middle:{top:-22}},visible:{main:{opacity:1}},invisible:{main:{opacity:0}}}}}},3662:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=[],o=(0,l.default)({},c,e),i=o.className,a=o.name,s=o.type,u=o.duration,d=o.iterationCount,f=["animation:"+a+" "+s+" "+u+";","animation-iteration-count:"+d+";"];return n.push("."+i+"{"+f.join("")+"}"),n.push("@keyframes "+a+"{"),(0,r.default)(t).forEach(function(e){var o=[],i=t[e];(0,r.default)(i).forEach(function(e){o.push(e+"("+i[e]+")")}),n.push(e+"{transform:"+o.join(" ")+"}")}),n.push("}"),n.join("")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(45),r=o(a),s=n(9),l=o(s),c={className:"animation",name:"animationFrame",type:"linear",duration:"0.45s",iterationCount:1};t.default=i},3663:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(3566),s=o(r),l=n(3655),c=o(l);t.default={closeOnSecondClick:!0,closeOnScrollDown:!1,closeOnScrollUp:!1,hasBackdrop:!0,icon:a.default.createElement(s.default,null),iconOpen:a.default.createElement(c.default,null),isInitiallyOpen:!1,positionH:"right",positionV:"bottom",style:{},styleBackdrop:{},styleButtonWrap:{},tabIndex:1,onClickPrimaryButton:function(){},onChangeState:function(){}}},3664:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){return document.body.scrollTop||document.documentElement.scrollTop}function a(e,t){return null!==e&&"object"===(void 0===e?"undefined":(0,v.default)(e))&&!(e instanceof Array)&&e.type&&e.type.displayName===t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),s=o(r),l=n(6),c=o(l),u=n(2),d=o(u),f=n(3),p=o(f),h=n(5),m=o(h),g=n(4),E=o(g),T=n(95),v=o(T),y=n(9),C=o(y),b=n(0),O=o(b),I=n(1),D=o(I),R=n(463),_=o(R),k=n(135),K=n(3568),S=o(K),w=n(3666),x=(o(w),n(3663)),N=o(x),A=n(3667),P=o(A),L=n(3665),F=function(e){function t(e,n){(0,d.default)(this,t);var o=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));return o.state={isOpen:e.isOpen||e.isInitiallyOpen,isInTransition:!1,wasOpened:!e.isInitiallyOpen,isBackdropFocused:!1,openedScrollPos:0},o.instanceKey=String(1e4*Math.random()).substring(0,4),o.isControlled=Boolean("boolean"==typeof e.isOpen),o.getStylesBackdrop=o.getStylesBackdrop.bind(o),o.isChildrenBubbleList=o.isChildrenBubbleList.bind(o),o.isToolbox=o.isToolbox.bind(o),o.handleClickOpen=o.handleClickOpen.bind(o),o.handleClickClose=o.handleClickClose.bind(o),o.handleClickCloseToolbox=o.handleClickCloseToolbox.bind(o),o.handleClickBackdrop=o.handleClickBackdrop.bind(o),o.handleFocusFirstListItem=o.handleFocusFirstListItem.bind(o),o.handleFocusPrimaryText=o.handleFocusPrimaryText.bind(o),o.handleFocusBackdrop=o.handleFocusBackdrop.bind(o),o.handleBlurBackdrop=o.handleBlurBackdrop.bind(o),o.handleBackdropKeyUp=o.handleBackdropKeyUp.bind(o),o.handleScroll=o.handleScroll.bind(o),o.styles=(0,P.default)(n.muiTheme),o.isControlled&&"function"!=typeof e.onChange&&console.error("Warning: Failed speed-dial propType: You provided a `isOpen` prop to a speed-dial without an `onChange` handler"),o}return(0,E.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.closeOnScrollDown,n=e.closeOnScrollUp;!0!==t&&!0!==n||window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillReceiveProps",value:function(e){this.isControlled&&this.setState({isOpen:e.isOpen})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.closeOnScrollDown,n=e.closeOnScrollUp;!0!==t&&!0!==n||window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this.props,t=e.closeOnScrollDown,n=e.closeOnScrollUp,o=this.state,a=o.isOpen,r=o.openedScrollPos;if(a){var s=Number(i()||0)-r;!0===t&&s>=30&&this.handleClickClose(),!0===n&&s<=-30&&this.handleClickClose()}}},{key:"handleFocusFirstListItem",value:function(){this.refs.list&&this.refs.list.refs&&this.refs.list.refs.listItem0&&this.refs.list.refs.listItem0.setFocus()}},{key:"handleClickOpen",value:function(){var e=this;this.updateState({wasOpened:!1,isOpen:!0,isInTransition:!0,openedScrollPos:i()}),setTimeout(function(){e.updateState({wasOpened:!1,isInTransition:!1}),e.handleFocusFirstListItem()},450)}},{key:"handleClickClose",value:function(){var e=this;this.props.onClickPrimaryButton(),this.props.closeOnSecondClick&&this.updateState({wasOpened:!0,isOpen:!1,isInTransition:!0}),setTimeout(function(){e.updateState({wasOpened:!1,isInTransition:!1})},450)}},{key:"handleClickCloseToolbox",value:function(){var e=this;this.updateState({wasOpened:!0,isOpen:!1,isInTransition:!0}),setTimeout(function(){e.updateState({wasOpened:!1,isInTransition:!1})},450)}},{key:"handleClickBackdrop",value:function(e){var t=this;e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),this.updateState({isOpen:!1,isInTransition:!0}),setTimeout(function(){t.updateState({isInTransition:!1})},450)}},{key:"handleFocusPrimaryText",value:function(){this.refs.btn.refs.container.refs.enhancedButton.focus()}},{key:"handleFocusBackdrop",value:function(){this.updateState({isBackdropFocused:!0})}},{key:"handleBlurBackdrop",value:function(){this.updateState({isBackdropFocused:!1})}},{key:"handleBackdropKeyUp",value:function(e){13===e.keyCode&&this.handleClickBackdrop(e)}},{key:"getCurrentTransitionState",value:function(){var e=this.state,t=e.isOpen,n=e.isInTransition,o=e.wasOpened;return n?t&&!o?"opening":"closing":t?"open":"closed"}},{key:"getDirection",value:function(){var e=this.props,t=e.children,n=e.positionV;return t&&t.props&&t.props.direction?t.props.direction:"bottom"===n?"up":"down"}},{key:"getAlignment",value:function(){var e=this.props,t=e.children,n=e.positionH;return t&&t.props&&t.props.alignment?t.props.alignment:n}},{key:"getActionButton",value:function(){try{return this.refs.btn.refs.container}catch(e){return{}}}},{key:"getActionButtonStyles",value:function(){try{return(0,C.default)({},this.getActionButton().refs.enhancedButton.style)}catch(e){return{}}}},{key:"getStylesBtn",value:function(){var e=this.props,t=e.positionV,n=e.positionH,o=e.styleButtonWrap,i=this.getCurrentTransitionState(),a=this.styles;return this.isToolbox()?(0,C.default)({},a.btnWrap.main,a.btnWrap[t],a.btnWrap[n],o,a.btnWrap.toolbox[i]):(0,C.default)({},a.btnWrap.main,a.btnWrap[t],a.btnWrap[n],o)}},{key:"getStylesMain",value:function(){var e=this.props,t=e.positionV,n=e.style,o=this.styles;return(0,C.default)({},o.root.main,o.root[t],n)}},{key:"getStylesContentWrap",value:function(){var e=this.props,t=e.positionV,n=e.positionH,o=this.state.isOpen,i=this.styles,a={};return this.isChildrenBubbleList()||(a=(0,C.default)({},i.notBubbleList.main,i.notBubbleList[o?"visible":"invisible"])),(0,C.default)({},i.contentWrap.main,i.contentWrap[t],i.contentWrap[n],i.contentWrap.direction[this.getDirection()],i.contentWrap.alignment[this.getAlignment()],a)}},{key:"getStylesPrimaryText",value:function(){var e=this.props.positionH,t=this.state.isOpen,n=this.styles;return(0,C.default)({},n.primaryText.main,n.primaryText[String(t)],n.primaryText[e])}},{key:"getStylesBackdrop",value:function(){var e=this.state,t=e.isOpen,n=e.isBackdropFocused,o=this.styles,i=t?o.backdrop.main:o.backdrop.invisible,a=n?o.backdrop.focus:{};return(0,C.default)({},i,a)}},{key:"getStylesToolbox",value:function(){var e=this.state.isOpen,t=this.props.toolbox,n=this.styles;if(!e)return(0,C.default)({},n.toolbox.main);var o={height:t.height};return(0,C.default)({},n.toolbox.main,o)}},{key:"getStylesToolboxInner",value:function(){return(0,C.default)({},this.styles.toolboxInner.main,this.styles.toolboxInner[this.getCurrentTransitionState()])}},{key:"getStylesMorphActionButton",value:function(){var e=this.styles,t=this.getStylesBtn(),n=this.getActionButtonStyles(),o=(0,C.default)({},e.morphActionButton.main,{backgroundColor:n.backgroundColor||k.cyan500,width:n.width||56,height:n.height||56});return(0,C.default)({},t,o,e.morphActionButton[this.getCurrentTransitionState()])}},{key:"updateState",value:function(e){this.setState(e),this.props.onChangeState(e),this.isControlled&&"boolean"==typeof e.isOpen&&this.props.onChange({isOpen:e.isOpen})}},{key:"isChildrenBubbleList",value:function(){return a(this.props.children,"BubbleList")}},{key:"isToolbox",value:function(){var e=this.props.toolbox;return Boolean(e&&"number"==typeof e.height)}},{key:"renderIcon",value:function(){var e=this.props,t=e.icon,n=e.iconOpen,o=this.state.isOpen;return[O.default.cloneElement(t,{key:"0",style:o?this.styles.iconClosed.invisible:this.styles.iconClosed.main}),O.default.cloneElement(n,{key:"1",style:o?this.styles.iconOpen.main:this.styles.iconOpen.invisible})]}},{key:"renderToolbox",value:function(){var e=this.props,t=e.toolbox,n=e.children;return this.isToolbox()?O.default.createElement("div",{className:t.className,style:this.getStylesToolbox()},O.default.createElement("div",{style:this.styles.morphWrap},this.renderMorphActionButton()),O.default.createElement("div",{style:this.getStylesToolboxInner()},O.default.cloneElement(n,{onClickCloseToolbox:this.handleClickCloseToolbox}))):null}},{key:"renderChildren",value:function(){var e=this.props,t=e.children,n=e.positionV,o=this.state,i=o.isOpen,r=o.isInTransition;return this.isToolbox()?null:a(t,"BubbleList")?O.default.cloneElement(t,{isOpen:i,isInTransition:r,direction:this.getDirection(),alignment:this.getAlignment(),positionV:n,ref:"list"}):t}},{key:"renderBackdrop",value:function(){var e=this.props,t=e.hasBackdrop,n=e.classNameBackdrop,o=e.tabIndex,i=e.styleBackdrop,a=this.state.isOpen,r=this.styles,s=a?r.backdropWrap.main:r.backdropWrap.invisible;return!t||this.isToolbox()?null:O.default.createElement("span",{className:n,style:(0,C.default)({},s,i)},O.default.createElement("a",{style:this.getStylesBackdrop(),tabIndex:a?o+1:-1,onBlur:this.handleBlurBackdrop,onFocus:this.handleFocusBackdrop,onKeyUp:this.handleBackdropKeyUp,onClick:this.handleClickBackdrop}))}},{key:"renderPrimaryText",value:function(){var e=this.props,t=e.primaryText,n=e.onClickPrimaryButton,o=e.tabIndex,i=this.state.isOpen;return["left","right"].indexOf(this.getDirection())>=0?null:t&&""!==t?O.default.createElement("ul",{style:this.getStylesPrimaryText()},O.default.createElement(S.default,{isOpen:!0,primaryText:t,tabIndex:i?o:-1,onClick:n,onFocus:this.handleFocusPrimaryText})):null}},{key:"renderMorphActionButton",value:function(){var e=this.getCurrentTransitionState(),t=this.props.toolbox,n=[];return t.classNameMorphButton&&n.push(t.classNameMorphButton),"closing"===e&&n.push("anim-btn-morph-closing"+this.instanceKey),"opening"===e&&n.push("anim-btn-morph"+this.instanceKey),O.default.createElement("div",{className:n.join(" "),ref:"morphBtn",style:this.getStylesMorphActionButton()})}},{key:"renderCssKeyframes",value:function(){var e=this.props,t=e.toolbox,n=e.positionH;if(!this.isToolbox())return null;var o={height:t.height,btnHeight:56,positionH:n};return O.default.createElement("style",null,(0,L.getCssKeyFrames)("anim-btn-morph",this.instanceKey,o),(0,L.getCssKeyFramesClosing)("anim-btn-morph-closing",this.instanceKey,o))}},{key:"render",value:function(){var e=this.props,t=e.floatingActionButtonProps,n=e.className,o=e.classNameInTransition,i=e.classNameOpen,a=e.classNameButtonWrap,r=e.tabIndex,l=this.state,c=l.isOpen,u=l.isInTransition,d=c?this.handleClickClose:this.handleClickOpen,f=[n],p=(0,C.default)({},t,{onClick:d});return u&&o&&f.push(o),c&&i&&f.push(i),O.default.createElement("div",{className:f.join(" "),style:this.getStylesMain()},this.renderCssKeyframes(),this.renderToolbox(),this.renderBackdrop(),O.default.createElement("div",{style:this.getStylesContentWrap()},this.renderChildren()),O.default.createElement("div",{className:a,style:this.getStylesBtn()},this.renderPrimaryText(),O.default.createElement(_.default,(0,s.default)({ref:"btn",tabIndex:r},p),this.renderIcon())))}}]),t}(O.default.Component);F.displayName="SpeedDial",F.propTypes={},F.defaultProps=N.default,F.contextTypes={muiTheme:D.default.object.isRequired},t.default=F},3665:function(e,t,n){"use strict";function o(){return Number(window.innerWidth<=1024?window.innerWidth:1024)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCssKeyFramesClosing=t.getCssKeyFrames=void 0;var i=n(3662),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.getCssKeyFrames=function(e,t,n){var i=n.height,r=n.btnHeight,s=n.positionH,l=o(),c=Number(i/2)+"px",u=l/2-r+"px",d="0px,"+c,f=l/40,p="0px,0px";return p="left"===s?u+","+c:"-"+u+","+c,(0,a.default)({className:e+t,name:e+t,iterationCount:1},{"0%":{translate:"0px,0px",scaleX:1,scaleY:1},"20%":{translate:d,scaleX:1,scaleY:1},"40%":{translate:p,scaleX:f/2,scaleY:f/2},"100%":{translate:p,scaleX:f,scaleY:f}})},t.getCssKeyFramesClosing=function(e,t,n){var i=n.height,r=n.btnHeight,s=n.positionH,l=o(),c=Number(i/2)+"px",u=l/2-r+"px",d="0px,"+c,f=l/40,p="0px,0px";return p="left"===s?u+","+c:"-"+u+","+c,(0,a.default)({className:e+t,name:e+t,iterationCount:1},{"0%":{translate:p,scaleX:f,scaleY:f},"20%":{translate:d,scaleX:f/2,scaleY:f/2},"40%":{translate:"0px,0px",scaleX:1,scaleY:1},"100%":{translate:"0px,0px",scaleX:1,scaleY:1}})}},3666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.default={children:o.PropTypes.any,className:o.PropTypes.string,classNameBackdrop:o.PropTypes.string,classNameButtonWrap:o.PropTypes.string,classNameInTransition:o.PropTypes.string,classNameOpen:o.PropTypes.string,closeOnSecondClick:o.PropTypes.bool,closeOnScrollDown:o.PropTypes.bool,closeOnScrollUp:o.PropTypes.bool,floatingActionButtonProps:o.PropTypes.shape({backgroundColor:o.PropTypes.string,className:o.PropTypes.string,disabled:o.PropTypes.bool,iconClassName:o.PropTypes.string,iconStyle:o.PropTypes.object,mini:o.PropTypes.bool,secondary:o.PropTypes.bool,style:o.PropTypes.object,zDepth:o.PropTypes.number}),hasBackdrop:o.PropTypes.bool,icon:o.PropTypes.object,iconOpen:o.PropTypes.object,isInitiallyOpen:o.PropTypes.bool,isOpen:o.PropTypes.bool,positionH:o.PropTypes.string,positionV:o.PropTypes.string,primaryText:o.PropTypes.string,style:o.PropTypes.object,styleBackdrop:o.PropTypes.object,styleButtonWrap:o.PropTypes.object,tabIndex:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.number]),toolbox:o.PropTypes.shape({height:o.PropTypes.number.isRequired,className:o.PropTypes.string,classNameMorphButton:o.PropTypes.string}),onClickPrimaryButton:o.PropTypes.func,onChange:o.PropTypes.func,onChangeState:o.PropTypes.func}},3667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(135),i=n(22),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){var t=e.baseTheme;return{root:{main:{position:"fixed",width:"100%",left:0,zIndex:9999},inline:{position:"relative"},top:{top:0},bottom:{bottom:0}},actionButton:{invisible:{opacity:0}},toolbox:{main:{position:"relative",transition:a.default.easeOut(),height:0,width:"100%"}},toolboxInner:{main:{transition:a.default.easeOut()},closed:{opacity:0},closing:{opacity:0},open:{opacity:1},opening:{opacity:0}},morphWrap:{position:"absolute",width:"100%",height:"100%",left:0,top:0,overflow:"hidden"},morphActionButton:{main:{display:"inline-block",transition:a.default.easeOut(),height:56,width:56,background:o.cyan500,zIndex:0,opacity:1,borderRadius:"50%"},closed:{transition:"none"},closing:{transition:"none"},opening:{},open:{transition:"none",position:"absolute",width:"auto",height:"auto",top:0,right:0,bottom:0,left:0,opacity:1,borderRadius:"0%"}},notBubbleList:{main:{transition:a.default.easeOut()},invisible:{opacity:0},visible:{opacity:1}},contentWrap:{main:{position:"absolute"},top:{top:88},bottom:{bottom:88},left:{left:23},right:{right:23},direction:{up:{},down:{},left:{right:88},right:{left:88}},alignment:{up:{bottom:23},down:{top:23},left:{},right:{}}},backdropWrap:{main:{position:"fixed",width:"100%",height:"100%",overflow:"hidden",top:0,opacity:1},invisible:{opacity:0}},backdrop:{main:{position:"absolute",backgroundColor:t.palette.borderColor,display:"block",transition:a.default.easeOut(),width:"100%",height:"100%",top:0,right:0,opacity:.8},invisible:{opacity:0},focus:{backgroundColor:t.palette.secondaryTextColor,opacity:.4}},btnWrap:{main:{transition:a.default.easeOut(),position:"absolute",opacity:1},inline:{top:-28},bottom:{bottom:16},top:{top:16},left:{left:16},right:{right:16},toolbox:{open:{opacity:0},closed:{opacity:1},opening:{opacity:0},closing:{opacity:0}}},iconClosed:{main:{position:"absolute",transform:"rotate(0deg)",opacity:1},invisible:{position:"absolute",transform:"rotate(90deg)",opacity:0}},iconOpen:{main:{transform:"rotate(0deg)",opacity:1},invisible:{transform:"rotate(-90deg)",opacity:0}},primaryText:{main:{position:"absolute",bottom:10,margin:0,transition:a.default.easeOut()},true:{opacity:1},false:{opacity:0},left:{left:33},right:{right:73}}}}},3668:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e){var t=e.level,n=e.children,i=o(e,["level","children"]),a=Object.assign({},c,i.style);return r.a.createElement(s.a,l({},i,{style:a,level:t||3}),n)}var a=n(0),r=n.n(a),s=n(318),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c={fontSize:"1.25rem",paddingTop:".5rem",fontWeight:100};i.propTypes={children:r.a.PropTypes.string,level:r.a.PropTypes.number},t.a=i},3669:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return h});var o=n(0),i=n.n(o),a=n(17),r=(n.n(a),n(319)),s=n.n(r),l=n(249),c=n.n(l),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=function(e){return function(t){var o=n.i(a.isNil)(e)?{padding:"3rem"}:e;return function(e){return i.a.createElement(s.a,{style:o},i.a.createElement(t,e))}}},f=d(),p=c()(function(e){return u({},e,{groupName:e.params.groupName,modelType:e.schema,modelId:e.params.modelId})}),h=function(e){return d({padding:"3rem",marginTop:"15px"})(e)}},3699:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(317),u=n(1401),d=(n.n(u),n(319)),f=n.n(d),p=n(206),h=n(460),m=(n.n(h),n(3849)),g=n(3851),E=n(3848),T=n(3855),v=n(755),y=n.n(v),C=n(249),b=n.n(C),O=n(17),I=(n.n(O),n(761)),D=n.n(I),R=n(320),_=n(3701),k=n(1405),K=n(324),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),x={tabContent:{padding:"3rem"},helpText:{color:"gray",marginBottom:"2rem"}},N=function(e){function t(){var e,o,r,s;i(this,t);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return o=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),r.programDataElementOrderChanged=function(e){var t=e.oldIndex,o=e.newIndex;r.props.onChangeDefaultOrder(n.i(h.arrayMove)(r.props.availableDataElements.map(function(e){return e.id}),t,o))},r.renderTab=function(e,t){return l.a.createElement(u.Tab,{style:x.tab,label:e},l.a.createElement("div",{style:x.tabContent},l.a.createElement(A,null),t))},r.getTranslation=function(e){return r.context.d2.i18n.getTranslation(e)},s=o,a(r,s)}return r(t,e),w(t,[{key:"render",value:function(){return l.a.createElement(f.a,null,l.a.createElement(u.Tabs,{initialSelectedIndex:1},this.renderTab(this.getTranslation("basic"),l.a.createElement(m.a,{availableDataElements:this.props.availableDataElements,onChange:this.programDataElementOrderChanged})),this.renderTab(this.getTranslation("section"),l.a.createElement(g.a,{availableDataElements:this.props.availableDataElements,programStageSections:this.props.programStageSections,onSectionUpdated:this.props.onSectionUpdated,onSectionOrderChanged:this.props.onSectionOrderChanged,onSectionAdded:this.props.onSectionAdded,onSectionRemoved:this.props.onSectionRemoved})),this.renderTab(this.getTranslation("custom"),l.a.createElement(E.a,{programStage:this.props.programStage}))))}}]),t}(s.Component);N.contextTypes={d2:s.PropTypes.object};var A=function(e,t){var n=t.d2;return l.a.createElement("div",{style:x.helpText},n.i18n.getTranslation("program_forms_help_text"))};A.contextTypes={d2:s.PropTypes.object},N.propTypes={onChangeDefaultOrder:s.PropTypes.func.isRequired,onSectionOrderChanged:s.PropTypes.func.isRequired,onSectionUpdated:s.PropTypes.func.isRequired,onSectionAdded:s.PropTypes.func.isRequired,onSectionRemoved:s.PropTypes.func.isRequired,programStageSections:s.PropTypes.arrayOf(s.PropTypes.shape({id:s.PropTypes.string.isRequired,sortOrder:s.PropTypes.number.isRequired,displayName:s.PropTypes.string.isRequired,dataElements:s.PropTypes.arrayOf(s.PropTypes.shape({id:s.PropTypes.string.isRequired,displayName:s.PropTypes.string.isRequired})).isRequired})).isRequired};var P=function(e){return{currentProgramStageId:n.i(T.a)(e)}},L=function(e){return n.i(p.a)({changeProgramStageDataElementOrder:k.a,changeProgramStageSectionOrder:k.b,addProgramStageSection:k.c,removeProgramStageSection:k.d,updateProgramStageSection:k.e},e)},F=R.a.map(n.i(O.getOr)([],"programStageSections")),M=R.a.map(n.i(O.getOr)([],"availableDataElements")),B=n.i(O.compose)(n.i(c.a)(P,L),y()(function(e){return e.combineLatest(n.i(_.a)(e),F,M,R.a,function(e,t,o,i,a){return S({},e,{programStage:t,programStageSections:n.i(K.c)(a,t.id)||[],trackerDataElements:i})})}),b()(function(e){var t=e.trackerDataElements,i=o(e,["trackerDataElements"]),a=function(e){return e.displayName||n.i(O.get)("displayName",n.i(O.find)(function(t){return e.id===t.id},t))},r=i.programStage.programStageDataElements;return S({},i,{programStageSections:n.i(O.sortBy)(["sortOrder"],i.programStageSections.map(function(e){return e.dataElements=Array.from(e.dataElements.values()).map(function(e){return{id:e.id,displayName:a(e)}}),e})),availableDataElements:n.i(O.sortBy)(["sortOrder"],r.map(function(e){return S({},e.dataElement,{displayName:a(e.dataElement),sortOrder:e.sortOrder})}))})}),D()({onChangeDefaultOrder:function(e){var t=e.programStage,n=e.changeProgramStageDataElementOrder;return function(e){n({programStage:t.id,newDataElementOrder:e})}},onSectionUpdated:function(e){var t=e.programStage,n=e.updateProgramStageSection;return function(e,o){n({programStage:t.id,programStageSectionId:e,newProgramStageSectionData:o})}},onSectionOrderChanged:function(e){var t=e.programStage,n=e.changeProgramStageSectionOrder;return function(e){n({programStage:t.id,programStageSections:e})}},onSectionAdded:function(e){var t=e.programStage,n=e.addProgramStageSection;return function(e){n({programStage:t.id,newSectionData:e})}},onSectionRemoved:function(e){var t=e.programStage,n=e.removeProgramStageSection;return function(e){n({programStage:t.id,programStageSection:e})}}}));t.a=B(N)},3700:function(e,t,n){"use strict";function o(e){var t=e.onAddClick,n={textAlign:"right",marginTop:"1rem",bottom:"1.5rem",right:"1.5rem",position:"fixed",zIndex:10};return r.a.createElement("div",{style:n},r.a.createElement(c.a,{onClick:t},r.a.createElement(d.a,null)))}function i(e){var t=e.notifications,n=e.onRemoveNotification,o=e.onEditNotification,i=e.onAddNotification,a=e.addButton,l=e.showProgramStage,c=e.showAddButton,u=l?["name","programStage","lastUpdated"]:["name","lastUpdated"],d=a||C;return r.a.createElement("div",null,c&&r.a.createElement(d,{modelType:"programNotificationTemplate",onAddClick:i}),r.a.createElement(s.a,{rows:t,columns:u,contextMenuActions:{edit:o,delete:n},primaryAction:o}))}n.d(t,"b",function(){return y}),t.a=i;var a=n(0),r=n.n(a),s=n(1369),l=n(1371),c=n.n(l),u=n(3566),d=n.n(u),f=n(330),p=n.n(f),h=n(211),m=n.n(h),g=n(760),E=n.n(g),T=n(1373),v=n.n(T),y=m()(p()({d2:a.PropTypes.object}),E()(function(e){var t=e.d2,n=e.modelType;return!t.currentUser.canCreate(t.models[n])},v.a)),C=y(o);i.propTypes={notifications:a.PropTypes.array,showAddButton:a.PropTypes.bool},i.defaultProps={showAddButton:!0}},3701:function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return m});var o=n(755),i=n.n(o),a=n(320),r=n(17),s=(n.n(r),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),l=a.a.map(n.i(r.get)("program")),c=a.a.map(n.i(r.get)("programStages")),u=n.i(r.compose)(r.first,n.i(r.get)("programStages")),d=a.a.map(u),f=i()(function(e){return e.combineLatest(e.flatMap(function(e){return e.programStage$}),function(e,t){return s({},e,{programStage:t})})}),p=n.i(r.compose)(i()(function(e){return e.combineLatest(l,c,function(e,t,n){return s({},e,{program:t,programStages:n})})})),h=function(e){return c.flatMap(function(e){return e}).filter(function(t){return t.id&&t.id===e})},m=function(e){return e.take(1).flatMap(function(e){return e.programStage$?e.programStage$:a.a.map(u)})}},3738:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}))};u=(0,s.default)(u),u.displayName="AlertWarning",u.muiName="SvgIcon",t.default=u},3749:function(e,t,n){"use strict";function o(e){var t=e.onSaveAction,n=e.onCancelAction,o=e.isDirtyHandler,i=e.isSaving;return r.a.createElement("div",null,r.a.createElement(p.a,{onClick:t,isSaving:i}),r.a.createElement(h.a,{onClick:n,isDirtyHandler:o,style:g.cancelButton}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=function(e,t){return function(){return n.i(m.b)("/list/"+e+"/"+t)}};return n.i(f.compose)(d()(function(e){var t=e.groupName,n=e.schema;return{onCancelAction:i(t,n)}}),n.i(c.a)(t,e))(o)}t.b=o,t.a=i;var a=n(0),r=n.n(a),s=n(1),l=n.n(s),c=n(317),u=n(474),d=n.n(u),f=n(17),p=(n.n(f),n(3567)),h=n(3625),m=n(207),g={cancelButton:{marginLeft:"1rem"}};o.propTypes={onSaveAction:l.a.func.isRequired,onCancelAction:l.a.func.isRequired,isDirtyHandler:l.a.func,isSaving:l.a.bool},o.defaultProps={isDirtyHandler:function(){},isSaving:!1}},3750:function(e,t,n){"use strict";var o=n(206),i=n(457),a=n(3749),r=n(3635),s=function(e){return n.i(o.a)({onSaveAction:i.d},e)},l=function(e){return{isSaving:n.i(r.a)(e)}},c=n.i(a.a)(s,l);t.a=c},3751:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(i){var a=i.dataElement,r=o(i,["dataElement"]),s=e.find(function(e){return e.id===a.id}),l=n.i($.f)(a,$.g,t);if(!s)return console.warn("Could not find tracker-element with id",a.id),j({},r,{dataElement:j({},a,{renderTypeOptions:l})});var c=s.displayName,u=s.valueType,d=s.optionSet;return j({},r,{dataElement:j({},a,{displayName:c,valueType:u,optionSet:d,renderTypeOptions:l})})}}function r(e,t){var o=t.d2,i=L.a.create(),r=L.a.create(),s=new Set,c=e.trackerDataElements.map(function(e){return s.add(e.id),{id:e.id,text:e.displayName,value:e.id}}),u=e.model.programStageDataElements.filter(function(e){var t=e.dataElement;return"TRACKER"!==t.domainType&&!s.has(t.id)}).map(function(e){var t=e.dataElement;return{id:t.id,text:t.displayName,value:t.id}});i.setState(c.concat(u)),r.setState(e.model.programStageDataElements.map(function(e){return e.dataElement.id}));var d=e.model.programStageDataElements.map(a(e.trackerDataElements,e.renderingOptions)).map(function(t,n){return l.a.createElement(X,{key:t.id,programStageDataElement:t,onEditProgramStageDataElement:e.onEditProgramStageDataElement})});return l.a.createElement(m.a,null,l.a.createElement("div",{style:j({padding:"2rem 3rem 4rem"},e.outerDivStyle)},l.a.createElement(k.a,{hintText:o.i18n.getTranslation("search_available_selected_items"),onChange:f()(e.setDataElementFilter,n.i(T.getOr)("","target.value")),value:e.dataElementFilter,fullWidth:!0}),l.a.createElement(p.a,{itemStore:i,assignedItemStore:r,height:250,filterText:e.dataElementFilter,onAssignItems:e.onAssignItems,onRemoveItems:e.onRemoveItems})),l.a.createElement(N.Table,null,l.a.createElement(N.TableHeader,{displaySelectAll:!1,adjustForCheckbox:!1},l.a.createElement(N.TableRow,null,l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("name")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("compulsory")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("allow_provided_elsewhere")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("display_in_reports")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("date_in_future")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("skip_synchronization")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("render_type_mobile")),l.a.createElement(N.TableHeaderColumn,null,o.i18n.getTranslation("render_type_desktop")))),l.a.createElement(N.TableBody,{displayRowCheckbox:!1},d)))}var s=n(0),l=n.n(s),c=n(249),u=n.n(c),d=n(211),f=n.n(d),p=n(459),h=n(319),m=n.n(h),g=n(755),E=n.n(g),T=n(17),v=(n.n(T),n(206)),y=n(317),C=n(761),b=n.n(C),O=n(4056),I=n.n(O),D=n(4055),R=n.n(D),_=n(114),k=n.n(_),K=n(41),S=n.n(K),w=n(325),x=n.n(w),N=n(777),A=(n.n(N),n(770)),P=n.n(A),L=n(49),F=n(781),M=n(320),B=n(327),$=n(1379),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H=f()(T.first,n.i(T.get)("programStages")),q=function(e){return e.take(1).flatMap(function(e){return e.programStage$?e.programStage$:M.a.map(H)})},U=M.a.map(n.i(T.get)("availableDataElements")).take(1),z=M.a.map(n.i(T.get)("renderingOptions")).take(1),W=function(e){return n.i(v.a)({addDataElementsToStage:F.a,removeDataElementsFromStage:F.b,editProgramStageDataElement:F.c},e)},V=f()(B.g,u()(function(e){return j({},e,{groupName:e.params.groupName,modelType:e.schema,modelId:e.params.modelId})}),n.i(y.a)(null,W),E()(function(e){return e.combineLatest(q(e),U,z,function(e,t,n,o){return j({},e,{trackerDataElements:n,renderingOptions:o,model:t,items:t.programStageDataElements})})}),b()({onAssignItems:function(e){return function(t){var n=e.model;return(0,e.addDataElementsToStage)({programStage:n.id,dataElements:t}),Promise.resolve()}},onRemoveItems:function(e){var t=e.model,n=e.removeDataElementsFromStage;return function(e){return n({programStage:t.id,dataElements:e}),Promise.resolve()}},onEditProgramStageDataElement:function(e){var t=e.model,n=e.editProgramStageDataElement;return function(e){return n({programStage:t.id,programStageDataElement:e})}}}),x()("dataElementFilter","setDataElementFilter","")),G=function(e,t){return j({},e,i({},t,!e[t]))},X=S()(function(e){var t=e.programStageDataElement,o=e.onEditProgramStageDataElement,i="DATE"===t.dataElement.valueType,a=function(e){return function(){return o(G(t,e))}},r=n.i(T.getOr)(!1,T.__,t);return l.a.createElement(N.TableRow,null,l.a.createElement(N.TableRowColumn,{title:t.dataElement.displayName},t.dataElement.displayName),l.a.createElement(N.TableRowColumn,null,l.a.createElement(P.a,{checked:r("compulsory"),onClick:a("compulsory")})),l.a.createElement(N.TableRowColumn,null,l.a.createElement(P.a,{checked:r("allowProvidedElsewhere"),onClick:a("allowProvidedElsewhere")})),l.a.createElement(N.TableRowColumn,null,l.a.createElement(P.a,{checked:r("displayInReports"),checkedIcon:l.a.createElement(I.a,null),uncheckedIcon:l.a.createElement(R.a,null),onClick:a("displayInReports")})),l.a.createElement(N.TableRowColumn,null,i?l.a.createElement(P.a,{checked:r("allowFutureDate"),onClick:a("allowFutureDate")}):null),l.a.createElement(N.TableRowColumn,null,l.a.createElement(P.a,{checked:r("skipSynchronization"),onClick:a("skipSynchronization")})),l.a.createElement(N.TableRowColumn,null,l.a.createElement($.a,{device:$.b,target:t,options:t.dataElement.renderTypeOptions,changeHandler:o})),l.a.createElement(N.TableRowColumn,null,l.a.createElement($.a,{device:$.c,target:t,options:t.dataElement.renderTypeOptions,changeHandler:o})))});r.contextTypes={d2:s.PropTypes.object,outerDivStyle:s.PropTypes.object},t.a=V(r)},3752:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(17),c=(n.n(l),n(19)),u=n.n(c),d=n(25),f=(n.n(d),n(3891)),p=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),h=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.setContainerRef=function(e){a.editorContainer=e},a.subscriptions=new Set,a}return a(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.onEditorChange,o=void 0===n?l.noop:n,i=t.onEditorInitialized,a=void 0===i?l.noop:i;window.CKEDITOR||u.a.error("CKEDITOR namespace can not be found on the window. You probably forgot to load the CKEditor script"),this.editor=window.CKEDITOR.replace(this.editorContainer,{plugins:["a11yhelp","basicstyles","bidi","blockquote","clipboard","colorbutton","colordialog","contextmenu","dialogadvtab","div","elementspath","enterkey","entities","filebrowser","find","floatingspace","font","format","horizontalrule","htmlwriter","image","indentlist","indentblock","justify","link","list","liststyle","magicline","maximize","forms","pastefromword","pastetext","preview","removeformat","resize","selectall","showblocks","showborders","sourcearea","specialchar","stylescombo","tab","table","tabletools","toolbar","undo","wsc","wysiwygarea"].join(","),removePlugins:"scayt,wsc,about",allowedContent:!0,extraPlugins:"div",height:500}),this.editor.setData(this.props.initialContent);var r=d.Observable.fromEventPattern(function(t){e.editor.on("change",t)}).debounceTime(250).subscribe(function(){o(e.editor.getData())});this.subscriptions.add(r),a(this.editor)}},{key:"componentWillUnmount",value:function(){this.editor&&this.editor.destroy(),this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return s.a.createElement("textarea",{ref:this.setContainerRef})}}]),t}(r.Component);t.a=h,h.propTypes={onEditorChange:r.PropTypes.func,onEditorInitialized:r.PropTypes.func,initialContent:r.PropTypes.string}},3753:function(e,t,n){"use strict";function o(e,t){var n=e.keySet,o=e.label,i=e.filter,r=e.expand,s=e.expandClick,c=e.usedIds,u=e.insertFn,d=e.styles,f=t.d2,p=Object.keys(n).filter(function(e){return!i.length||i.every(function(t){return-1!==n[e].toLowerCase().indexOf(t.toLowerCase())})}),h=o===r?"cell expanded":"cell";return a.a.createElement("div",{className:h},a.a.createElement("div",{style:l({},d),className:"header",onClick:s},a.a.createElement("div",{className:"arrow"},""),f.i18n.getTranslation(o),":",a.a.createElement("div",{className:"count"},p.length)),a.a.createElement("div",{className:"items"},p.sort(function(e,t){return n[e]?n[e].localeCompare(n[t]):e.localeCompare(t)}).map(function(e){var t=-1===c.indexOf(e),o=t?"item active":"item inactive",i=n[e].name||n[e];return a.a.createElement("div",{key:e,className:o,title:i},a.a.createElement("a",{onClick:u[e]},i))})))}var i=n(0),a=n.n(i),r=n(41),s=n.n(r),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};o.contextTypes={d2:a.a.PropTypes.object};var c=s()(o);t.a=c},3754:function(e,t,n){"use strict";function o(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"entryfield",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"id",r=t?" style="+t:"",s=n?" disabled="+n:"";return"<input "+a+'="'+e+'" '+((i?'name="'+i+'"':"")+' title="'+o+'" value="[ '+o+' ]"'+r+s).trim()+"/>"}function i(e){if(!e)return null;for(var t in u){var n=u[t],o=e[n];if(o){var i=o;return{idString:e[0],id:i,fieldType:t}}}return null}function a(e,t){for(var n=e,a="",r=[],s=l.exec(n),u=0;null!==s;){a+=n.substr(u,s.index-u),u=l.lastIndex;var d=s[0],f=(/style="(.*?)"/.exec(d)||["",""])[1],p=null!==/disabled/.exec(d),h=c.exec(d),m=i(h);if(m&&m.idString&&m.id){var g=m.id,E=m.fieldType;r.push(g);a+=o(g,f,p,t&&t[g],"id"===E?"entryfield":null,E)}else a+=d;s=l.exec(n)}return a+=n.substr(u),{usedIds:r,outHtml:a}}function r(e,t,n,o){var i={};return Object.keys(e).forEach(function(e){i[e]=t.bind(n,e,o)}),i}function s(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",a="id"===i?"entryfield":null,r=o(e,null,null,t,a,i);n.insertHtml(r,"unfiltered_html");var s=n.getSelection().getRanges()[0];s&&s.moveToElementEditablePosition(s.endContainer,!0)}t.a=a,t.b=r,t.c=s;var l=/<input.*?\/>/gi,c=/attributeid="(\w*?)"|programid="(\w*?)"|id="((\w*?)-(\w*?)-val)"/,u={attributeid:1,programid:2,id:3}},3755:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var i=n(0),a=n.n(i),r=n(1),s=n.n(r),l=n(211),c=n.n(l),u=n(330),d=n.n(u),f=n(249),p=n.n(f),h=n(80),m=n.n(h),g=n(96),E=n.n(g),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v=function(e){var t=e.onCancel,n=e.onConfirm,o=e.question,i=e.open,r=e.t,s=[a.a.createElement(m.a,{label:r("cancel"),primary:!0,onTouchTap:t}),a.a.createElement(m.a,{label:r("delete"),primary:!0,onTouchTap:n})];return a.a.createElement(E.a,{actions:s,modal:!1,open:i,onRequestClose:t},o)};v.propTypes={onCancel:s.a.func,onConfirm:s.a.func,question:s.a.string,t:s.a.func};var y=c()(d()({d2:s.a.object}),p()(function(e){var t=e.d2,n=e.name,i=o(e,["d2","name"]);return T({t:t.i18n.getTranslation.bind(t.i18n),question:t.i18n.getTranslation("delete")+" "+n+"?"},i)}));t.a=y(v)},3756:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var i=n(0),a=n.n(i),r=n(206),s=n(317),l=n(760),c=n.n(l),u=n(1373),d=n.n(u),f=n(1370),p=n(3859),h=n(80),m=n.n(h),g=n(96),E=n.n(g),T=n(325),v=n.n(T),y=n(211),C=n.n(y),b=n(474),O=n.n(b),I=n(3540),D=n(462),R=n(782),_=n.n(R),k=n(3889),K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S=C()(v()("activeStep","setActiveStep",0),O()(function(e){var t=e.setActiveStep,n=e.dataElements;return{stepperClicked:function(e){t(p.a.findIndex(function(t){return t.key===e}))},dataElements:n}})),w=function(e){return S(n.i(I.g)(e,"vertical"))},x=w(p.a),N=w(p.b),A={content:{width:"60%",minWidth:700,maxWidth:"none"},titleStyle:{fontWeight:400,margin:0}},P=function(e){return a.a.createElement("div",{style:K({},e.style,{paddingBottom:10})},a.a.createElement("h3",{style:A.titleStyle},e.title),a.a.createElement(_.a,null,e.subtitle))},L=function(e,t){var n=t.d2,i=e.model,r=e.onCancel,s=e.onConfirm,l=e.dataElements,c=e.isTracker,u=e.isProgram,d=o(e,["model","onCancel","onConfirm","dataElements","isTracker","isProgram"]),f=n.i18n.getTranslation.bind(n.i18n),p={attributes:c?d.program.programTrackedEntityAttributes:[],programStages:d.programStages,dataElements:l,isTracker:c,isProgram:u},h=[a.a.createElement(m.a,{label:f("cancel"),primary:!0,onTouchTap:r}),a.a.createElement(m.a,{label:f("done"),primary:!0,onTouchTap:function(){return s(i)}})],g=""+f(!c||u?"program_notification":"program_stage_notification"),T=u?N:x;return a.a.createElement(E.a,{actions:h,open:!!i,onRequestClose:r,title:a.a.createElement(P,{title:g,subtitle:i.displayName}),autoDetectWindowHeight:!0,repositionOnUpdate:!1,autoScrollBodyContent:!0,contentStyle:A.content,style:{paddingTop:0}},a.a.createElement(T,p))};L.contextTypes={d2:i.PropTypes.object},L.propTypes={model:i.PropTypes.object.isRequired,onCancel:i.PropTypes.func.isRequired,onConfirm:i.PropTypes.func.isRequired,dataElements:i.PropTypes.array,isTracker:i.PropTypes.bool,isProgram:i.PropTypes.bool},L.defaultProps={isProgram:!1,isTracker:!1};var F=function(e,t){var o=t.model,i=t.availableDataElements,a=t.programStages,r=t.dataElements,s=o&&o.programStage&&o.programStage.id||a.length>0&&a[0].id||null;return{model:o,dataElements:r||n.i(f.d)({availableDataElements:i,programStages:a})(s)}},M=function(e){return n.i(r.a)({onCancel:D.c.bind(null,null),onConfirm:D.e},e)},B=C()(n.i(k.a)(function(e){var t=e.programStages;return t&&t.length<1},{message:"cannot_create_program_notification_without_program_stage",translate:!0}),n.i(s.a)(F,M))(L),$=n.i(s.a)(null,function(e){return n.i(r.a)({onCancel:D.c.bind(null,null),onConfirm:D.f},e)})(L),j=function(e){return e.isProgram?a.a.createElement($,K({},e,{dialogStyle:A})):a.a.createElement(B,K({},e,{dialogStyle:A}))},H=C()(n.i(s.a)(function(e){return{notificationType:n.i(f.e)(e),isProgram:n.i(f.f)(e),model:n.i(f.g)(e)}}),c()(function(e){return!e.model},d.a))(j);t.a=H},3757:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(319),r=n.n(a),s=n(1),l=n.n(s),c=n(318),u=n(476),d=n(3862),f=n(252),p={paper:{padding:"3rem"},padding:{paddingTop:"3rem"}},h=function(){return i.a.createElement("div",null,"Save the program in order to access sharing settings")},m=n.i(f.e)(function(e){return!e.model.dataValues.publicAccess},n.i(f.f)(h))(d.a),g=function(e,t){var n=e.modelToEdit,o=t.d2;return n?i.a.createElement(r.a,{style:p.paper},i.a.createElement(c.a,null,o.i18n.getTranslation("organisation_units")),i.a.createElement(u.a,{value:n.organisationUnits,model:n,modelDefinition:n.modelDefinition}),i.a.createElement(c.a,{style:p.padding},o.i18n.getTranslation("roles_and_access")),i.a.createElement(m,{model:n})):null};g.contextTypes={d2:l.a.object},t.a=g},3837:function(e,t,n){var o=n(3893);"string"==typeof o&&(o=[[e.i,o,""]]);n(475)(o,{});o.locals&&(e.exports=o.locals)},3844:function(e,t,n){"use strict";function o(e){var t=e.params.modelType||"program",o=e.params.groupName;return a.a.createElement("div",null,a.a.createElement("div",{style:C.heading},a.a.createElement(c.a,{schema:t,groupName:o,isDirtyHandler:b},"event_"+n.i(l.camelCaseToUnderscores)(t)),a.a.createElement(u.a,null,e.model.displayName)),a.a.createElement("div",null,a.a.createElement(d.a,null)),a.a.createElement(f.a,E({schema:t},e)),a.a.createElement(y,null,a.a.createElement(h.a,{groupName:o,schema:t,isDirtyHandler:b})))}var i=n(0),a=n.n(i),r=n(1),s=n.n(r),l=n(756),c=(n.n(l),n(3560)),u=n(3668),d=n(3845),f=n(3846),p=n(320),h=n(3750),m=n(3540),g=n(457),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},T=n.i(m.c)(g.b),v=n.i(m.d)(g.c),y=n.i(m.e)(v,T),C={heading:{display:"flex",flexDirection:"column",marginBottom:"1rem"}},b=function(){return{dirty:n.i(p.b)(p.a.getState())}};o.propTypes={params:s.a.object.isRequired,isProgramStageStepperActive:s.a.bool,model:s.a.object.isRequired},o.defaultProps={isProgramStageStepperActive:!1},t.a=o},3845:function(e,t,n){"use strict";var o=n(3540),i=n(3635),a=n(317),r=n(1397),s=n(457),l=n(206),c=function(e){return{activeStep:n.i(i.b)(e)}},u=function(e){return n.i(l.a)({stepperClicked:s.f},e)},d=n.i(a.a)(c,u)(n.i(o.g)(r.a));t.a=d},3846:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(317),r=n(206),s=n(755),l=n.n(s),c=n(17),u=(n.n(c),n(3540)),d=n(3635),f=n(320),p=n(1397),h=n(3751),m=n(3699),g=n(3757),E=n(3858),T=n(3561),v=n(457),y=n(3669),C=n(1365),b=n(1368),O=n(323),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},D=C.a.for("eventProgram"),R=C.a.for("eventProgramStage"),_=function(e){return i.a.createElement(b.a,{fields:e.fieldConfigs,onUpdateField:e.editFieldChanged})};_=n.i(T.c)("program",D,void 0,!0,!0,"eventProgram")(_);var k=function(e){return i.a.createElement(b.a,{fields:e.fieldConfigs,onUpdateField:e.editProgramStageFieldChange})};k=n.i(T.c)("programStage",R,void 0,null,!0,"eventProgramStage")(k);var K=function(e){return i.a.createElement("div",null,i.a.createElement(_,{model:e.model,editFieldChanged:e.editFieldChanged}),i.a.createElement(k,{model:e.programStage,editProgramStageFieldChange:e.editProgramStageFieldChange}))},S=function(e,t){return n.i(r.a)({editFieldChanged:v.e,editProgramStageFieldChange:function(e,o){return n.i(O.a)(t.programStage.id,e,o)}},e)};K=n.i(a.a)(null,S)(n.i(y.a)(K));var w=function(e){return{activeStep:n.i(d.b)(e)}},x=n.i(c.compose)(n.i(a.a)(w),l()(function(e){return e.combineLatest(f.a,function(e,t){var o=t.program,i=t.programStages;return I({},e,{modelToEdit:o,programStage:n.i(c.first)(i)})})}))(n.i(u.f)(function(){var e={EditProgramDetailsForm:K,AssignDataElements:h.a,EditDataEntryForm:m.a,ProgramAccess:g.a,EventProgramNotifications:E.a};return p.a.map(function(t){return t.component=e[t.componentName],t})}()));t.a=x},3847:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(96),c=n.n(l),u=n(80),d=n.n(u),f=n(99),p=n.n(f),h=n(463),m=n.n(h),g=n(3566),E=n.n(g),T=n(1379),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),C={container:{textAlign:"right",width:"100%"}},b={dialogOpen:!1,section:{id:null,name:"",description:"",renderType:{MOBILE:{type:T.d},DESKTOP:{type:T.d}}}},O=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onNameChanged=function(e,t){n.setState({section:v({},n.state.section,{name:t})})},n.onDescriptionChanged=function(e,t){n.setState({section:v({},n.state.section,{description:t})})},n.onRenderTypeChanged=function(e){n.setState({section:e})},n.getTranslation=function(e){return n.context.d2.i18n.getTranslation(e)},n.closeDialog=function(){n.props.clearEditingSection(),n.setState(v({},b))},n.openDialog=function(){n.setState({dialogOpen:!0})},n.confirmAddNewSection=function(){n.closeDialog(),n.props.onSectionAdded(n.state.section)},n.confirmUpdateSection=function(){var e=n.state.section;n.closeDialog(),n.props.onSectionUpdated(e.id,e)},n.focusOnSectionName=function(e){e&&setTimeout(function(){e.focus()},20)},n.render=function(){var e=n.state.section,t=e.id,o=e.name,i=e.description,a=void 0,r=void 0,l=void 0;t?(a=n.getTranslation("update_program_stage_section"),r=n.confirmUpdateSection,l=n.getTranslation("update")):(a=n.getTranslation("add_new_program_stage_section"),r=n.confirmAddNewSection,l=n.getTranslation("add"));var u=[s.a.createElement(d.a,{primary:!0,label:n.getTranslation("cancel"),onTouchTap:n.closeDialog}),s.a.createElement(d.a,{primary:!0,label:l,disabled:!o,onTouchTap:r})];return s.a.createElement("div",{style:C.container},s.a.createElement(m.a,{onTouchTap:n.openDialog},s.a.createElement(E.a,null)),s.a.createElement(c.a,{title:a,actions:u,open:n.state.dialogOpen,onRequestClose:n.closeDialog},s.a.createElement(p.a,{ref:n.focusOnSectionName,hintText:n.getTranslation("name"),onChange:n.onNameChanged,value:o,fullWidth:!0}),s.a.createElement(p.a,{hintText:n.getTranslation("description"),onChange:n.onDescriptionChanged,value:i,fullWidth:!0,multiLine:!0,rows:2,rowsMax:4}),s.a.createElement(T.a,{device:T.b,target:n.state.section,options:T.e,inDialog:!0,changeHandler:n.onRenderTypeChanged}),s.a.createElement(T.a,{device:T.c,target:n.state.section,options:T.e,inDialog:!0,changeHandler:n.onRenderTypeChanged})))},n.state=v({},b),n}return a(t,e),y(t,[{key:"componentDidUpdate",value:function(e){this.props.editingSection&&!e.editingSection&&this.showDialogForEditingModel(this.props.editingSection)}},{key:"getSaveData",value:function(){var e=this.state.section;return v({},e,{renderType:{MOBILE:{type:e.renderType},DESKTOP:{type:e.renderType}}})}},{key:"showDialogForEditingModel",value:function(e){var t=e.id,n=e.name,o=e.description,i=e.renderType;this.setState({dialogOpen:!0,section:{id:t,name:n,description:o,renderType:{MOBILE:{type:i?i.MOBILE.type:T.d},DESKTOP:{type:i?i.DESKTOP.type:T.d}}}})}}]),t}(r.Component);O.propTypes={onSectionAdded:r.PropTypes.func.isRequired,onSectionUpdated:r.PropTypes.func.isRequired,editingSection:r.PropTypes.object,clearEditingSection:r.PropTypes.func.isRequired},O.defaultProps={editingSection:null},O.contextTypes={d2:r.PropTypes.object},t.a=O},3848:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(3856),r=function(e){return i.a.createElement(a.a,e)};t.a=r},3849:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(3853),r=function(e){var t=e.availableDataElements,n=e.onChange;return i.a.createElement(a.a,{darkItems:!0,dataElements:t,onSortEnd:n})};r.propTypes={availableDataElements:o.PropTypes.array.isRequired,onChange:o.PropTypes.func.isRequired},t.a=r},3850:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(135),c=(n.n(l),n(460)),u=(n.n(c),n(318)),d=n(80),f=n.n(d),p=n(96),h=n.n(p),m=n(133),g=n.n(m),E=n(97),T=n.n(E),v=n(1377),y=n(3854),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),O={sectionContainer:{width:"100%",borderRadius:"8px",borderStyle:"solid",borderColor:l.grey300,borderWidth:"3px",marginBottom:"1.2rem"},noDataElementsMessage:{height:"4rem",lineHeight:"4rem",borderRadius:"6px",backgroundColor:"white",paddingLeft:"1.5rem"},sectionContent:{backgroundColor:l.grey300},sectionHeader:{color:"black",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:l.grey300,borderRadius:"4px 4px 0 0",paddingLeft:"1rem",minHeight:"55px"},collapsibleArrow:{color:"black",cursor:"pointer",transition:"none",userSelect:"none"},row:{display:"flex",flexDirection:"row",alignItems:"center"},sectionName:{textAlign:"left",color:"black",fontSize:"1.7rem",fontWeight:"400",wordWrap:"break-word",width:"100%"}},I=function(e){var t=e.onClick,n=e.icon,o=function(e){e&&e.stopPropagation(),t()};return s.a.createElement(g.a,{style:{transition:"none"},iconStyle:{transition:"none"},onClick:o},s.a.createElement(T.a,{color:"gray",className:"material-icons"},n))},D=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.onSortEnd=function(e,t){a.props.sortItems(e,t)},a.getTranslation=function(e){return a.context.d2.i18n.getTranslation(e)},a.openRemovalDialog=function(){a.setState({showRemovalDialog:!0})},a.closeRemovalDialog=function(){a.setState({showRemovalDialog:!1})},a.confirmSectionRemoval=function(){a.closeRemovalDialog(),a.props.onSectionRemoved()},a.state={showRemovalDialog:!1},a}return a(t,e),b(t,[{key:"render",value:function(){var e=[s.a.createElement(f.a,{primary:!0,label:this.getTranslation("cancel"),onTouchTap:this.closeRemovalDialog}),s.a.createElement(f.a,{primary:!0,label:this.getTranslation("delete"),onTouchTap:this.confirmSectionRemoval})],t=this.props.section.dataElements.length>0?s.a.createElement("div",{style:O.sectionContent},s.a.createElement(y.a,{distance:4,onSortEnd:this.onSortEnd,onDataElementRemoved:this.props.onDataElementRemoved,sectionDataElements:this.props.section.dataElements})):s.a.createElement("div",{style:O.noDataElementsMessage},this.getTranslation("no_data_elements"));return s.a.createElement("div",{style:C({},O.sectionContainer,{borderColor:this.props.selected?l.grey800:l.grey300})},s.a.createElement("div",{onClick:this.props.onSelect,style:O.sectionHeader},s.a.createElement("div",{style:C({},O.row,{width:"100%"})},s.a.createElement(v.a,null),s.a.createElement(I,{onClick:this.props.onToggleEdit,icon:"mode_edit"}),s.a.createElement("div",{style:O.sectionName},this.props.section.displayName)),s.a.createElement("div",{style:O.row},s.a.createElement(I,{onClick:this.props.onToggleOpen,icon:this.props.collapsed?"keyboard_arrow_down":"keyboard_arrow_up"}),s.a.createElement(I,{onClick:this.openRemovalDialog,icon:"clear"}))),!this.props.collapsed&&t,s.a.createElement(h.a,{title:this.getTranslation("delete_section_message"),actions:e,open:this.state.showRemovalDialog,onRequestClose:this.closeRemovalDialog},s.a.createElement(u.a,{level:2},this.props.section.displayName)))}}]),t}(r.Component);D.propTypes={section:r.PropTypes.object.isRequired,selected:r.PropTypes.bool.isRequired,collapsed:r.PropTypes.bool.isRequired,onSectionRemoved:r.PropTypes.func.isRequired,onDataElementRemoved:r.PropTypes.func.isRequired,onToggleEdit:r.PropTypes.func.isRequired,onToggleOpen:r.PropTypes.func.isRequired,onSelect:r.PropTypes.func.isRequired,sortItems:r.PropTypes.func.isRequired},D.contextTypes={d2:r.PropTypes.object},t.a=n.i(c.SortableElement)(D)},3851:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(460),c=(n.n(l),n(17)),u=(n.n(c),n(1414)),d=n.n(u),f=n(3852),p=n(3847),h=n(1404),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),g={sectionForm:{display:"flex",flexDirection:"row",alignItems:"space-between"}},E=function(e){return n.i(c.flatten)(e.map(function(e){return e.dataElements}))},T=function(e){function t(e,a){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return r.onToggleEditing=function(e){r.setState({editingSection:r.state.editingSection&&n.i(c.isEqual)(e.id,r.state.editingSection.id)?null:e})},r.getTranslation=function(e){return r.context.d2.i18n.getTranslation(e)},r.clearEditingSection=function(){r.setState({editingSection:null})},r.openSection=function(e){r.setState({collapsedSections:n.i(c.pull)(e,r.state.collapsedSections)})},r.closeSection=function(e){var t=r.state.collapsedSections;t.push(e),r.setState({collapsedSections:t})},r.selectSection=function(e){r.setState({selectedSectionId:e})},r.openNoSelectionSectionMessage=function(){r.setState({showNoSelectionSectionMessage:!0})},r.closeNoSelectionSectionMessage=function(){r.setState({showNoSelectionSectionMessage:!1})},r.isSectionCollapsed=function(e){return r.state.collapsedSections.includes(e)},r.onToggleSection=function(e){r.isSectionCollapsed(e)?r.openSection(e):r.closeSection(e)},r.openSectionIfClosed=function(e){r.isSectionCollapsed(e)&&r.openSection(e)},r.onSelectSection=function(e){r.openSectionIfClosed(e),r.selectSection(e)},r.onSectionUpdated=function(e,t){r.props.onSectionUpdated(e,t),r.clearEditingSection()},r.onSortEnd=function(e){var t=e.oldIndex,o=e.newIndex;r.props.onSectionOrderChanged(n.i(l.arrayMove)(r.props.programStageSections,t,o))},r.onDataElementPicked=function(e){var t=n.i(c.find)(function(t){return n.i(c.isEqual)(t.id,e)},r.props.availableDataElements);if(t){var o=n.i(c.findIndex)(function(e){return n.i(c.isEqual)(r.state.selectedSectionId,e.id)},r.props.programStageSections);if(-1===o)return void r.openNoSelectionSectionMessage();var i=r.props.programStageSections[o],a=i.dataElements.concat(t),s=r.props.programStageSections;s[o].dataElements=a,r.props.onSectionOrderChanged(s),r.openSectionIfClosed(i.id)}},r.removeDataElementFromSection=function(e,t){var o=n.i(c.findIndex)(function(e){return n.i(c.isEqual)(e.id,t)},r.props.programStageSections),i=r.props.programStageSections[o],a=n.i(c.filter)(n.i(c.negate)(function(t){return n.i(c.isEqual)(t.id,e)}),i.dataElements),s=r.props.programStageSections;s[o].dataElements=a,r.props.onSectionOrderChanged(s)},r.sortItems=function(e,t,o){var i=n.i(l.arrayMove)(r.props.programStageSections[e].dataElements,t,o),a=r.props.programStageSections;a[e].dataElements=i,r.props.onSectionOrderChanged(a)},r.render=function(){return s.a.createElement("div",{style:g.sectionForm},s.a.createElement("div",{style:{flex:2}},s.a.createElement(f.a,{useDragHandle:!0,distance:4,sections:r.props.programStageSections,selectedSectionId:r.state.selectedSectionId,collapsedSections:r.state.collapsedSections,onToggleSection:r.onToggleSection,onToggleEditing:r.onToggleEditing,onSelectSection:r.onSelectSection,onSectionRemoved:r.props.onSectionRemoved,onDataElementRemoved:r.removeDataElementFromSection,onSortEnd:r.onSortEnd,sortItems:r.sortItems}),s.a.createElement(p.a,{onSectionAdded:r.props.onSectionAdded,onSectionUpdated:r.onSectionUpdated,editingSection:r.state.editingSection,clearEditingSection:r.clearEditingSection})),s.a.createElement("div",{style:{flex:1}},s.a.createElement(h.a,{availableDataElements:n.i(c.sortBy)(["displayName"],r.props.availableDataElements),activeDataElements:r.state.activeDataElements,onElementPicked:r.onDataElementPicked})),s.a.createElement(d.a,{open:r.state.showNoSelectionSectionMessage,message:r.getTranslation("no_section_selected_error"),autoHideDuration:3e3,onRequestClose:r.closeNoSelectionSectionMessage}))},r.state={collapsedSections:[],activeDataElements:E(r.props.programStageSections),selectedSectionId:n.i(c.getOr)(-1,"programStageSections[0].id",r.props.programStageSections),editingSection:null,showNoSelectionSectionMessage:!1},r}return a(t,e),m(t,[{key:"componentWillReceiveProps",value:function(e){if(e.programStageSections!==this.props.programStageSections){this.setState({activeDataElements:E(e.programStageSections)});var t=n.i(c.difference)(e.programStageSections,this.props.programStageSections)[0];t&&this.selectSection(t.id)}}}]),t}(r.Component);T.PropTypes={onSectionUpdated:r.PropTypes.func.isRequired,onSectionOrderChanged:r.PropTypes.func.isRequired,onSectionAdded:r.PropTypes.func.isRequired,onSectionRemoved:r.PropTypes.func.isRequired,availableDataElements:r.PropTypes.array.isRequired,programStageSections:r.PropTypes.arrayOf(r.PropTypes.shape({id:r.PropTypes.string.isRequired,sortOrder:r.PropTypes.number.isRequired,displayName:r.PropTypes.string.isRequired,dataElements:r.PropTypes.arrayOf(r.PropTypes.shape({id:r.PropTypes.string.isRequired,displayName:r.PropTypes.string.isRequired})).isRequired})).isRequired},T.contextTypes={d2:r.PropTypes.object},t.a=T},3852:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(460),r=(n.n(a),n(17)),s=(n.n(r),n(3850)),l=function(e){var t=e.sections,o=e.selectedSectionId,a=e.onToggleEditing,l=e.collapsedSections,c=e.onToggleSection,u=e.onSelectSection,d=e.onSectionRemoved,f=e.onDataElementRemoved,p=e.sortItems;return i.a.createElement("div",null,t.map(function(e,t){return i.a.createElement(s.a,{key:"section-"+t,index:t,section:e,selected:n.i(r.isEqual)(e.id,o),collapsed:l.includes(e.id),onToggleEdit:function(){a(e)},onToggleOpen:function(){c(e.id)},onSelect:function(){u(e.id)},onSectionRemoved:function(){d(e)},onDataElementRemoved:function(t){f(t,e.id)},sortItems:function(e){var n=e.oldIndex,o=e.newIndex;p(t,n,o)}})}))};t.a=n.i(a.SortableContainer)(l)},3853:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(460),r=(n.n(a),n(1377)),s=n(135),l=(n.n(s),{dataElement:{padding:"1rem 1rem",backgroundColor:s.grey200,marginBottom:"4px",borderRadius:"8px"},row:{userSelect:"none",display:"flex",flexDirection:"row",alignItems:"center"},horizontalSpace:{paddingLeft:"1rem"}}),c=function(e){var t=e.dataElement;return i.a.createElement("div",{style:l.dataElement},i.a.createElement("div",{style:l.row},i.a.createElement(r.a,null),i.a.createElement("div",{style:l.horizontalSpace}),t.displayName))};c.propTypes={dataElement:o.PropTypes.shape({id:o.PropTypes.string.isRequired,displayName:o.PropTypes.string.isRequired})};var u=n.i(a.SortableElement)(c),d=n.i(a.SortableContainer)(function(e){var t=e.dataElements,n=e.isSortingIndex;return i.a.createElement("div",null,t.map(function(e,t){return i.a.createElement(u,{dataElement:e,index:t,isSortingIndex:n,key:"item-"+t,sortIndex:t})}))});t.a=d},3854:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(460),r=(n.n(a),n(1377)),s=n(135),l=(n.n(s),n(1403)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u={dataElement:{height:"55px",display:"flex",paddingLeft:"1rem",backgroundColor:s.grey100,borderRadius:"6px",justifyContent:"space-between",alignItems:"center"},row:{userSelect:"none",display:"flex",flexDirection:"row",alignItems:"center"},horizontalSpace:{paddingLeft:"1rem"}},d=function(e){var t=e.first,n=e.dataElement,o=e.onRemove,a=c({},u.dataElement,{marginTop:t?"0px":"4px"});return i.a.createElement("div",{style:a},i.a.createElement("div",{style:u.row},i.a.createElement(r.a,null),i.a.createElement("div",{style:u.horizontalSpace}),n.displayName),i.a.createElement(l.a,{onClick:o,icon:"clear"}))};d.propTypes={dataElement:o.PropTypes.shape({id:o.PropTypes.string.isRequired,displayName:o.PropTypes.string.isRequired})};var f=n.i(a.SortableElement)(d),p=n.i(a.SortableContainer)(function(e){var t=e.sectionDataElements,n=e.onDataElementRemoved;return i.a.createElement("div",null,t.map(function(e,t){return i.a.createElement(f,{first:0===t,dataElement:e,onRemove:function(){n(e.id)},index:t,key:"item-"+t})}))});t.a=p},3855:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(e){return e.eventProgram.programStageStepper.stageId}},3856:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(25),u=(n.n(c),n(172)),d=n.n(u),f=n(321),p=n.n(f),h=n(209),m=n.n(h),g=n(319),E=n.n(g),T=n(114),v=n.n(T),y=n(3629),C=n(93),b=n(755),O=n.n(b),I=n(17),D=(n.n(I),n(206)),R=n(317),_=n(1378),k=n(320),K=n(3752),S=n(3837),w=(n.n(S),n(1370)),x=n(3753),N=n(3754),A=n(1),P=n.n(A),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),M=function(e){return function(t){return{id:e+"."+t.id,displayName:t.displayName}}},B=x.a,$={heading:{paddingBottom:18},formContainer:{},formPaper:{display:"flex",flexDirection:"row",width:"100%",margin:"0 auto 2rem",padding:"4rem 4rem",alignItems:"center"},formSection:{display:"flex",flexWrap:"wrap"},cancelButton:{marginLeft:"2rem"},deleteButton:{marginLeft:"2rem"},paletteHeader:{},paletteFilter:{padding:"0 8px 8px"},paletteFilterField:{width:"100%"},greySwitch:{position:"absolute",bottom:8,left:8,right:8}},j=function(e){function t(e,o){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));r.handleEditorChanged=function(e){if(e||r.props.dataEntryForm){var t=n.i(N.a)(e,r.operands),o=t.usedIds,i=t.outHtml;r.setState({usedIds:o},function(){r.props.dataEntryForm&&r.props.dataEntryForm.htmlCode===i||r.props.onFormChange(i)})}};var s=e.dataEntryForm;r.state={usedIds:[],filter:"",expand:"data_elements",insertFn:{}},r.disposables=new Set;var l=e.programStage,u=e.dataElements;return r.disposables.add(c.Observable.fromPromise(o.d2.Api.getApi().get("system/flags")).subscribe(function(e){r.operands=u.map(M(l.id)).filter(function(e){return-1!==e.id.indexOf(".")}).reduce(function(e,t){return e[t.id.split(".").join("-")+"-val"]=t.displayName,e},{}),r.flags=e.reduce(function(e,t){return e[t.path]=t.name,e},{});var t=n.i(N.b)(r.operands,r.insertElement,r),o=n.i(N.b)(r.flags,r.insertFlag,r),i=L({},t,o),a=n.i(N.a)(n.i(I.getOr)("","htmlCode",s),r.operands),c=a.usedIds,d=a.outHtml,f=s?d:"";r.setState({usedIds:c,insertFn:i,formHtml:f,dataEntryForm:s,formTitle:r.props.formTitle})})),r.filterAction=C.a.create("filter"),r.disposables.add(r.filterAction.map(function(e){var t=e.data,n=e.complete,o=e.error;return{data:t[1],complete:n,error:o}}).debounceTime(75).subscribe(function(e){var t=e.data.split(" ").filter(function(e){return e.length});r.setState({filter:t})})),r.getTranslation=r.context.d2.i18n.getTranslation.bind(r.context.d2.i18n),r.handleDeleteClick=r.handleDeleteClick.bind(r),r.handleStyleChange=r.handleStyleChange.bind(r),r.setEditorReference=r.setEditorReference.bind(r),r}return r(t,e),F(t,[{key:"componentWillUnmount",value:function(){this.disposables.forEach(function(e){return e.unsubscribe()})}},{key:"componentWillReceiveProps",value:function(e){var t=e.dataEntryForm;!this.props.dataEntryForm||t&&t.id||this._editor.setData("")}},{key:"handleDeleteClick",value:function(){this.props.onFormDelete()}},{key:"handleStyleChange",value:function(e,t,n){this.state.dataEntryForm.style!==n&&this.props.onStyleChange(n)}},{key:"insertElement",value:function(e){if(-1===this.state.usedIds.indexOf(e))return n.i(N.c)(e,this.operands[e],this._editor)}},{key:"insertFlag",value:function(e){this._editor.insertHtml('<img src="../dhis-web-commons/flags/'+e+'" />',"unfiltered_html");var t=this._editor.getSelection().getRanges()[0];t.moveToElementEditablePosition(t.endContainer,!0)}},{key:"setEditorReference",value:function(e){this._editor=e}},{key:"renderPalette",value:function(){var e=this;return l.a.createElement("div",{className:"paletteContainer",style:{}},l.a.createElement("div",{className:"palette"},l.a.createElement("div",{style:$.paletteFilter},l.a.createElement(v.a,{hintText:this.getTranslation("filter_elements"),style:$.paletteFilterField,onChange:this.filterAction,fullWidth:!0})),l.a.createElement("div",{className:"elements"},l.a.createElement(B,{keySet:this.operands,label:"data_elements",filter:this.state.filter,expand:this.state.expand,expandClick:function(){e.setState({expand:"data_elements"})},usedIds:this.state.usedIds,insertFn:this.state.insertFn}),l.a.createElement(B,{keySet:this.flags,label:"flags",filter:this.state.filter,expand:this.state.expand,expandClick:function(){e.setState({expand:"flags"})},usedIds:this.state.usedIds,insertFn:this.state.insertFn}))))}},{key:"render",value:function(){var e=this.props;return void 0===this.state.formHtml?l.a.createElement(y.a,null):l.a.createElement("div",{style:Object.assign({},$.formContainer,{})},l.a.createElement("div",{className:"programStageEditForm"},l.a.createElement("div",{className:"left"},l.a.createElement(K.a,{onEditorChange:this.handleEditorChanged,onEditorInitialized:this.setEditorReference,initialContent:this.state.formHtml}),l.a.createElement(E.a,{style:$.formPaper},l.a.createElement("div",{style:$.formSection},l.a.createElement(p.a,{value:n.i(I.getOr)("NORMAL","style",e.dataEntryForm),floatingLabelText:"Form display style",onChange:this.handleStyleChange},l.a.createElement(m.a,{value:"NORMAL",primaryText:this.getTranslation("normal")}),l.a.createElement(m.a,{value:"COMFORTABLE",primaryText:this.getTranslation("comfortable")}),l.a.createElement(m.a,{value:"COMPACT",primaryText:this.getTranslation("compact")}),l.a.createElement(m.a,{value:"NONE",primaryText:this.getTranslation("none")}))),l.a.createElement("div",{style:$.formSection},e.dataEntryForm&&e.dataEntryForm.id?l.a.createElement(d.a,{primary:!0,label:this.getTranslation("delete"),style:$.deleteButton,onClick:this.handleDeleteClick}):void 0))),l.a.createElement("div",{className:"right"},this.renderPalette())))}}]),t}(l.a.Component);j.propTypes={params:P.a.object,onFormChange:P.a.func,onStyleChange:P.a.func,onFormDelete:P.a.func,elements:P.a.array},j.defaultProps={onFormChange:I.noop,onStyleChange:I.noop,onFormDelete:I.noop},j.contextTypes={d2:P.a.any};var H=function(e,t){var o=t.programStage;return n.i(D.a)({onFormChange:n.i(I.curry)(_.a)(o.id)("htmlCode"),onStyleChange:n.i(I.curry)(_.a)(o.id)("style"),onFormDelete:_.b.bind(void 0,o.id)},e)},q=n.i(I.compose)(O()(function(e){return e.combineLatest(k.a,function(e,t){var i=e.programStage,a=o(e,["programStage"]);return L({},a,{programStage:i,dataEntryForm:t.dataEntryFormForProgramStage[i.id],dataElements:n.i(w.d)(t)(i.id),formTitle:i.displayName})})}),n.i(R.a)(void 0,H));t.a=q(j)},3857:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return H});var r=n(0),s=n.n(r),l=n(172),c=n.n(l),u=n(321),d=n.n(u),f=n(209),p=n.n(f),h=n(319),m=n.n(h),g=n(114),E=n.n(g),T=n(3629),v=n(93),y=n(755),C=n.n(y),b=n(17),O=(n.n(b),n(206)),I=n(317),D=n(1378),R=n(320),_=n(3752),k=n(3837),K=(n.n(k),n(3753)),S=n(3754),w=n(1),x=n.n(w),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),P=function(e){var t=e.programTrackedEntityAttributes,n=e.availableAttributes,o={};return t.map(function(e){var t=n.find(function(t){return t.id===e.trackedEntityAttribute.id});o[t.id]=t.displayName}),o},L=K.a,F={heading:{paddingBottom:18},formContainer:{},formPaper:{display:"flex",flexDirection:"row",width:"100%",margin:"0 auto 2rem",padding:"4rem 4rem",alignItems:"center"},formSection:{display:"flex",flexWrap:"wrap"},cancelButton:{marginLeft:"2rem"},deleteButton:{marginLeft:"2rem"},paletteHeader:{},paletteFilter:{padding:"0 8px 8px"},paletteFilterField:{width:"100%"},greySwitch:{position:"absolute",bottom:8,left:8,right:8}},M=function(e){function t(e,a){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));B.call(r),r.getTranslation=r.context.d2.i18n.getTranslation.bind(r.context.d2.i18n);var s=e.dataEntryForm,l={incidentDate:r.getTranslation("date_of_incident"),enrollmentDate:r.getTranslation("date_of_enrollment")},c=n.i(S.a)(n.i(b.getOr)("","htmlCode",s),N({},l,r.props.elements)),u=c.usedIds,d=c.outHtml,f=s?d:"";return r.state={usedIds:u||[],filter:"",expand:"attributes",insertFn:N({},n.i(S.b)(e.elements,r.insertElement,r),n.i(S.b)(l,r.insertProgramElement,r)),formTitle:r.props.formTitle,formHtml:f,programElements:l},r.filterAction=v.a.create("filter"),r.disposables=new Set,r.disposables.add(r.filterAction.map(function(e){var t=e.data,n=e.complete,o=e.error;return{data:t[1],complete:n,error:o}}).debounceTime(75).subscribe(function(e){var t=e.data.split(" ").filter(function(e){return e.length});r.setState({filter:t})})),r.handleDeleteClick=r.handleDeleteClick.bind(r),r.handleStyleChange=r.handleStyleChange.bind(r),r.setEditorReference=r.setEditorReference.bind(r),r}return a(t,e),A(t,[{key:"componentWillUnmount",value:function(){this.disposables.forEach(function(e){return e.unsubscribe()})}},{key:"componentWillReceiveProps",value:function(e){var t=e.dataEntryForm;this.props.dataEntryForm&&!t&&this._editor.setData("")}},{key:"handleDeleteClick",value:function(){this.props.onFormDelete()}},{key:"handleStyleChange",value:function(e,t,n){this.props.dataEntryForm.style!==n&&this.props.onStyleChange(n)}},{key:"insertElement",value:function(e){if(-1===this.state.usedIds.indexOf(e))return n.i(S.c)(e,this.props.elements[e],this._editor,"attributeid")}},{key:"insertProgramElement",value:function(e){if(-1===this.state.usedIds.indexOf(e))return n.i(S.c)(e,this.state.programElements[e],this._editor,"programid")}},{key:"setEditorReference",value:function(e){this._editor=e}},{key:"renderPalette",value:function(){var e=this;return s.a.createElement("div",{className:"paletteContainer",style:{}},s.a.createElement("div",{className:"palette"},s.a.createElement("div",{style:F.paletteFilter},s.a.createElement(E.a,{hintText:this.getTranslation("filter_elements"),style:F.paletteFilterField,onChange:this.filterAction,fullWidth:!0})),s.a.createElement("div",{className:"elements"},s.a.createElement(L,{keySet:this.props.elements,label:"attributes",filter:this.state.filter,expand:this.state.expand,expandClick:function(){e.setState({expand:"attributes"})},usedIds:this.state.usedIds,insertFn:this.state.insertFn})),s.a.createElement("div",{className:"elements"},s.a.createElement(L,{keySet:this.state.programElements,label:"program",filter:this.state.filter,expand:this.state.expand,expandClick:function(){e.setState({expand:"program"})},usedIds:this.state.usedIds,insertFn:this.state.insertFn}))))}},{key:"render",value:function(){var e=this.props;return void 0===this.state.formHtml?s.a.createElement(T.a,null):s.a.createElement("div",{style:Object.assign({},F.formContainer,{})},s.a.createElement("div",{className:"programStageEditForm"},s.a.createElement("div",{className:"left"},s.a.createElement(_.a,{onEditorChange:this.handleEditorChanged,onEditorInitialized:this.setEditorReference,initialContent:this.state.formHtml}),s.a.createElement(m.a,{style:F.formPaper},s.a.createElement("div",{style:F.formSection},s.a.createElement(E.a,{floatingLabelText:this.getTranslation("form_name"),defaultValue:this.props.program.displayName,onChange:this.props.onFormNameChange}),s.a.createElement(d.a,{value:n.i(b.getOr)("NORMAL","style",e.dataEntryForm),floatingLabelText:"Form display style",onChange:this.handleStyleChange},s.a.createElement(p.a,{value:"NORMAL",primaryText:this.getTranslation("normal")}),s.a.createElement(p.a,{value:"COMFORTABLE",primaryText:this.getTranslation("comfortable")}),s.a.createElement(p.a,{value:"COMPACT",primaryText:this.getTranslation("compact")}),s.a.createElement(p.a,{value:"NONE",primaryText:this.getTranslation("none")}))),s.a.createElement("div",{style:F.formSection},e.dataEntryForm&&e.dataEntryForm.id?s.a.createElement(c.a,{primary:!0,label:this.getTranslation("delete"),style:F.deleteButton,onClick:this.handleDeleteClick}):void 0))),s.a.createElement("div",{className:"right"},this.renderPalette())))}}]),t}(s.a.Component),B=function(){var e=this;this.handleEditorChanged=function(t){if(t||e.props.dataEntryForm){var o=n.i(S.a)(t,N({},e.state.programElements,e.props.elements)),i=o.usedIds,a=o.outHtml;e.setState({usedIds:i},function(){e.props.dataEntryForm&&e.props.dataEntryForm.htmlCode===a||e.props.onFormChange(a)})}}};M.propTypes={params:x.a.object,onFormChange:x.a.func,onStyleChange:x.a.func,onFormDelete:x.a.func},M.defaulRFFtProps={onFormChange:b.noop,onStyleChange:b.noop,onFormDelete:b.noop},M.contextTypes={d2:x.a.any};var $=function(e,t){var o=t.program;return n.i(O.a)({onFormChange:n.i(b.curry)(D.d)("htmlCode"),onFormNameChange:function(e){return n.i(D.d)("name",e.target.value)},onStyleChange:n.i(b.curry)(D.d)("style"),onFormDelete:D.c.bind(void 0,o.id)},e)},j=n.i(b.compose)(C()(function(e){return e.combineLatest(R.a,function(e,t){var n=t.program,o=t.availableAttributes;return N({},e,{program:n,dataEntryForm:n.dataEntryForm,elements:P({programTrackedEntityAttributes:n.programTrackedEntityAttributes,availableAttributes:o}),formTitle:n.displayName})})}),n.i(I.a)(void 0,$)),H=j(M)},3858:function(e,t,n){"use strict";function o(e){var t=e.notifications,n=e.askForConfirmation,o=e.onCancel,i=e.onDelete,r=e.open,s=e.setOpen,l=e.modelToDelete,c=e.setEditModel,u=e.setAddModel,d=e.dataElements,f=e.programStages;return a.a.createElement("div",null,a.a.createElement(g.a,{notifications:t,onRemoveNotification:n,onEditNotification:c,onAddNotification:u}),a.a.createElement(y.a,{dataElements:d,programStages:f}),a.a.createElement(T.a,{setOpen:s,open:r,onCancel:o,onConfirm:i,name:l&&l.name}))}var i=n(0),a=n.n(i),r=n(317),s=n(206),l=n(325),c=n.n(l),u=n(211),d=n.n(u),f=n(761),p=n.n(f),h=n(755),m=n.n(h),g=n(3700),E=n(1370),T=n(3755),v=n(462),y=n(3756),C=n(320),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O=C.a.map(E.a),I=C.a.map(E.b),D=C.a.map(E.c);o.propTypes={notifications:i.PropTypes.any.isRequired,askForConfirmation:i.PropTypes.any.isRequired,onCancel:i.PropTypes.any.isRequired,onDelete:i.PropTypes.any.isRequired,open:i.PropTypes.any.isRequired,setOpen:i.PropTypes.any.isRequired,modelToDelete:i.PropTypes.any,setEditModel:i.PropTypes.any.isRequired,setAddModel:i.PropTypes.any.isRequired,dataElements:i.PropTypes.any.isRequired};var R=function(e){return n.i(s.a)({removeStageNotification:v.b,setEditModel:function(e){return n.i(v.c)(e,"PROGRAM_STAGE_NOTIFICATION")},setAddModel:v.d},e)},_=d()(n.i(r.a)(void 0,R,void 0,{pure:!1}),c()("open","setOpen",!1),c()("modelToDelete","setModelToDelete",null),p()({onCancel:function(e){var t=e.setOpen;return function(){return t(!1)}},onDelete:function(e){var t=e.setOpen,n=e.removeStageNotification,o=e.modelToDelete;return function(){t(!1),n(o)}},askForConfirmation:function(e){var t=e.setOpen,n=e.setModelToDelete;return function(e){n(e),t(!0)}}}),m()(function(e){return e.combineLatest(D,O,I,function(e,t,n,o){return b({},e,{programStages:t,notifications:n,dataElements:o})})}));t.a=_(o)},3859:function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return R}),n.d(t,"b",function(){return _});var s=n(0),l=n.n(s),c=n(317),u=n(211),d=n.n(u),f=n(1368),p=n(1370),h=n(462),m=n(3561),g=n(94),E=n(3556),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),y=function(e){return{model:n.i(p.g)(e)}},C=function(e){return{onUpdateField:function(t,o){e(n.i(h.a)(t,o))},handleProgramStageSelect:function(t){e(n.i(h.g)(t))}}},b=function(e){return e.map(function(e,t){return{text:e.displayName,value:e.id}})},O=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleProgramStage=function(e){var t=e.target.value,o=n.props.programStages.find(function(e){return e.id===t});n.setState(T({},n.state,{programStageId:t})),n.props.handleProgramStageSelect(o)},n.createProgramStageDropdown=function(){return{name:"programStage",component:g.a,props:{options:b(n.props.programStages),labelText:"Program stage",fullWidth:!0,value:n.state.programStageId,onChange:n.handleProgramStage}}},n.state={programStageId:e.model.programStage?e.model.programStage.id:null},n}return r(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.fieldConfigs,i=e.onUpdateField,a=e.isTracker,r=e.isProgram,s=e.dataElements,c=e.attributes,u=a&&!r?[this.createProgramStageDropdown()].concat(o(t)):t,d={dataElements:s,attributes:c,isProgram:r};return l.a.createElement(f.a,{fields:u.map(n.i(m.d)(d,["messageTemplate"])),onUpdateField:i})}}]),t}(s.Component);O=d()(n.i(c.a)(y,function(e){return{onUpdateField:function(t,o){e(n.i(h.a)(t,o))},handleProgramStageSelect:function(t){e(n.i(h.g)(t))}}},void 0,{pure:!1}),n.i(m.c)("programNotificationTemplate",E.a.for("programStageNotificationTemplate")[0].fields))(O);var I=function(e){var t=e.fieldConfigs,o=void 0===t?[]:t,i=e.onUpdateField,a=e.dataElements,r=e.isTracker,s=e.isProgram,c=e.attributes,u={dataElements:a,isTracker:r,isProgram:s,attributes:c},d=o;return r||(d=d.map(function(e){if("notificationRecipient"===e.name){var t=e.props.options.filter(function(e){return"PROGRAM_ATTRIBUTE"!==e.value}),n=T({},e.props,{options:t});return T({},e,{props:T({},n)})}return e})),l.a.createElement(f.a,{fields:d.map(n.i(m.d)(u,["recipientDataElement","recipientProgramAttribute"])),onUpdateField:i})},D=n.i(c.a)(y,C,void 0,{pure:!1}),R=[{key:"what",name:"what_to_send",content:O},{key:"when",name:"when_to_send_it",content:d()(D,n.i(m.c)("programNotificationTemplate",E.a.for("programStageNotificationTemplate")[1].fields,void 0,null,!0,"programStageNotificationTemplate"))(I)},{key:"who",name:"who_to_send_it_to",content:d()(D,n.i(m.c)("programNotificationTemplate",E.a.for("programStageNotificationTemplate")[2].fields,void 0,null,!0,"programStageNotificationTemplate"))(I)}],_=[{key:"what",name:"what_to_send",content:O},{key:"when",name:"when_to_send_it",content:d()(D,n.i(m.c)("programNotificationTemplate",E.a.for("programNotificationTemplate")[1].fields))(I)},{key:"who",name:"who_to_send_it_to",content:d()(D,n.i(m.c)("programNotificationTemplate",E.a.for("programNotificationTemplate")[2].fields))(I)}]},3860:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(3700),d=n(90),f=n(765),p=n.n(f),h=n(97),m=n.n(h),g=n(3634),E=(n.n(g),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.handleOpen=function(e){var t=e.isOpen;a.setState(E({},a.state,{open:t}))},a.handleItemClick=function(e,t){a.setState(E({},a.state,{open:!1})),a.props.onAddClick(e)},a.state={items:[{id:"PROGRAM_NOTIFICATION",primaryText:n.d2.i18n.getTranslation("program_notification"),rightAvatar:s.a.createElement(p.a,{className:"material-icons",icon:s.a.createElement(m.a,null,"event")})},{id:"PROGRAM_STAGE_NOTIFICATION",primaryText:n.d2.i18n.getTranslation("program_stage_notification"),rightAvatar:s.a.createElement(p.a,{className:"material-icons",icon:s.a.createElement(m.a,null,"event_note")})}],open:!1},a}return a(t,e),T(t,[{key:"render",value:function(){var e=this;return s.a.createElement(g.SpeedDial,{hasBackdrop:!0,isOpen:this.state.open,onChange:this.handleOpen},s.a.createElement(g.BubbleList,null,this.state.items.map(function(t,n){return s.a.createElement(g.BubbleListItem,E({key:t.id},t,{onClick:e.handleItemClick.bind(e,t.id)}))})))}}]),t}(s.a.Component);v.propTypes={onAddClick:c.a.func.isRequired};var y=n.i(u.b)(n.i(d.a)(v));t.a=y},3861:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var i=n(0),a=n.n(i),r=n(1),s=n.n(r),l=n(1401),c=(n.n(l),n(317)),u=n(206),d=n(17),f=(n.n(d),n(325)),p=n.n(f),h=n(211),m=n.n(h),g=n(761),E=n.n(g),T=n(755),v=n.n(T),y=n(3700),C=n(1370),b=n(3755),O=n(462),I=n(3756),D=n(320),R=n(324),_=n(3860),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K=D.a.map(C.c),S=D.a.map(n.i(d.get)("programStageNotifications")),w=D.a.map(C.h).map(function(e){return e.toArray()}),x=D.a.map(n.i(d.get)("availableDataElements")),N=function(e,t){var i=t.d2,r=e.programStages,s=e.programStageNotifications,c=e.programNotifications,u=e.askForConfirmation,f=e.onCancel,p=e.onDelete,h=e.open,m=e.setOpen,g=e.modelToDelete,E=e.setEditProgramModel,T=e.setEditProgramStageModel,v=e.setAddModel,C=e.availableDataElements,O=e.model,D=o(e,["programStages","programStageNotifications","programNotifications","askForConfirmation","onCancel","onDelete","open","setOpen","modelToDelete","setEditProgramModel","setEditProgramStageModel","setAddModel","availableDataElements","model"]),R=[];for(var k in s)!function(e){var t=s[e],o=D.getProgramStageById(e),i=n.i(d.pick)(["displayName","id"],o);t.forEach(function(e){e.programStage=i,R.push(e)})}(k);return a.a.createElement("div",null,a.a.createElement(l.Tabs,{initialSelectedIndex:0},a.a.createElement(l.Tab,{label:i.i18n.getTranslation("program_stage_notifications")},a.a.createElement(y.a,{showProgramStage:!0,notifications:R,onRemoveNotification:u,onEditNotification:T,onAddNotification:v,showAddButton:!0,addButton:_.a})),a.a.createElement(l.Tab,{label:i.i18n.getTranslation("program_notifications")},a.a.createElement(y.a,{notifications:c,onRemoveNotification:u,onEditNotification:E,onAddNotification:v,showAddButton:!1}))),a.a.createElement(I.a,{availableDataElements:C,isTracker:!0,program:O,programStages:r}),a.a.createElement(b.a,{setOpen:m,open:h,onCancel:f,onConfirm:p,name:g&&g.name}))};N.propTypes={programStageNotifications:s.a.any.isRequired,programNotifications:s.a.any.isRequired,askForConfirmation:s.a.any.isRequired,onCancel:s.a.any.isRequired,onDelete:s.a.any.isRequired,open:s.a.any.isRequired,setOpen:s.a.any.isRequired,modelToDelete:s.a.any,setEditProgramStageModel:s.a.func.isRequired,setEditProgramModel:s.a.func.isRequired,setAddModel:s.a.any.isRequired},N.contextTypes={d2:s.a.object};var A=function(e){return n.i(u.a)({removeStageNotification:O.b,removeProgramNotification:O.h,setEditProgramStageModel:function(e){return n.i(O.c)(e,"PROGRAM_STAGE_NOTIFICATION")},setEditProgramModel:function(e){return n.i(O.c)(e,"PROGRAM_NOTIFICATION")},setAddModel:O.d},e)},P=m()(n.i(c.a)(function(e){return{}},A,void 0,{pure:!1}),p()("open","setOpen",!1),p()("modelToDelete","setModelToDelete",null),E()({onCancel:function(e){var t=e.setOpen;return function(){return t(!1)}},onDelete:function(e){var t=e.setOpen,n=e.removeStageNotification,o=e.removeProgramNotification,i=e.modelToDelete;return function(){t(!1),i.programStage?n(i):o(i)}},askForConfirmation:function(e){var t=e.setOpen,n=e.setModelToDelete;return function(e){n(e),t(!0)}}}),v()(function(e){return e.combineLatest(K,S,w,x,D.a,function(e,t,o,i,a,r){return k({},e,{programStages:t,programStageNotifications:o,programNotifications:i,availableDataElements:a,getProgramStageById:n.i(R.d)(r)})})}));t.a=P(N)},3862:function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(1),u=n.n(c),d=n(332),f=n.n(d),p=n(136),h=n.n(p),m=n(4058),g=n.n(m),E=n(3738),T=n.n(E),v=n(417),y=n(80),C=n.n(y),b=n(133),O=n.n(b),I=n(3562),D=n(317),R=n(206),_=n(457),k=n(323),K=n(3863),S=n(3864),w=n(135),x=(n.n(w),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),N={container:{paddingTop:32,display:"flex",flexDirection:"column"},vertical:{display:"flex",flexDirection:"column",justifyContent:"space-between"},horizontal:{display:"flex",flexDirection:"row",justifyContent:"space-between"},programHeading:{padding:"5px 0px"},accessDescription:{color:"#aaa",fontWeight:400,overflow:"hidden"},programStageList:{width:"100%",display:"flex",flexDirection:"row"},warningIcon:{top:"22px",height:"32px",width:"32px"},stageSharingItem:{height:"80px"}},A=["publicAccess","userAccesses","userGroupAccesses"],P=function(e){function t(e){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));L.call(o);var r=o.props.model.dataValues,s=Array.from(o.props.model.dataValues.programStages.valuesContainerMap).map(function(e){return e[1]}),l=[],c=[];return s.forEach(function(e){n.i(S.a)(r,e)&&(c.push(e.id),l.push(e.id))}),o.state={sharingDialogOpen:!1,stagesSharing:s,programSharing:r,selectedStages:l,stagesWithSimilarAccessAsProgram:c},o}return r(t,e),t}(l.a.Component),L=function(){var e=this;this.translate=function(t){return e.context.d2.i18n.getTranslation(t)},this.toggleStageSelection=function(t){return function(n,i){e.setState({selectedStages:i?[].concat(o(e.state.selectedStages),[t]):e.state.selectedStages.filter(function(e){return e!==t})},e.updateInternalState)}},this.selectSimilarStages=function(){var t=[];e.state.stagesSharing.forEach(function(o){n.i(S.a)(o,e.state.programSharing)&&t.push(o.id)}),e.setState({selectedStages:t})},this.selectAllStages=function(){e.setState({selectedStages:e.state.stagesSharing.map(function(e){return e.id})})},this.deselectAllStages=function(){e.setState({selectedStages:[]})},this.openSharingDialog=function(t,n){var o={meta:{allowPublicAccess:!0,allowExternalAccess:!1},object:{user:t.user,displayName:t.displayName||t.name,userAccesses:t.userAccesses,userGroupAccesses:t.userGroupAccesses,publicAccess:t.publicAccess,externalAccess:!1}};e.setState({sharingDialogOpen:!0,sharingType:n,sharingId:t.id,objectToShare:o})},this.closeSharingDialog=function(){e.setState({sharingDialogOpen:!1})},this.confirmAndCloseSharingDialog=function(t){t.userAccesses||(t.userAccesses=[]),t.userGroupAccesses||(t.userGroupAccesses=[]),t.id===e.state.programSharing.id?e.updateProgramAccess(t):e.updateStageAccess(t),e.closeSharingDialog()},this.updateProgramAccess=function(t){e.storeProgramChanges(t),e.setState({programSharing:t},e.updateInternalState)},this.updateStageAccess=function(t){e.storeStageChanges(t.id,t),e.setState({stagesSharing:e.state.stagesSharing.map(function(e){return t.id===e.id?t:e})},e.updateInternalState)},this.storeProgramChanges=function(t){A.forEach(function(n){e.props.editFieldChanged(n,t[n])})},this.storeStageChanges=function(t,n){A.forEach(function(o){e.props.editProgramStageField(t,o,n[o])})},this.propagateAccess=function(t){t.stopPropagation(),e.state.stagesSharing.forEach(function(t){e.state.selectedStages.includes(t.id)&&e.storeStageChanges(t.id,e.state.programSharing)});var n=function(t){return e.state.selectedStages.includes(t.id)?x({},e.state.programSharing,{id:t.id,displayName:t.displayName||t.name}):t};e.setState({stagesSharing:e.state.stagesSharing.map(n)},e.updateInternalState)},this.updateInternalState=function(){var t=e.state.stagesSharing.filter(function(t){return n.i(S.a)(e.state.programSharing,t)}).map(function(e){return e.id});e.setState({stagesWithSimilarAccessAsProgram:t})},this.render=function(){var t=e.state.stagesSharing.map(function(t){var o=e.state.stagesWithSimilarAccessAsProgram.includes(t.id)?l.a.createElement("div",null):l.a.createElement(O.a,{style:{pointer:"default"},tooltip:e.translate("differs_from_program")},l.a.createElement(T.a,{style:N.warningIcon,color:w.yellow800}));return l.a.createElement(f.a,{style:N.stageSharingItem,onClick:function(){return e.openSharingDialog(t,"programStage")},leftAvatar:o,key:t.id,primaryText:t.displayName||t.name,secondaryText:n.i(S.b)(t)})}),o=e.state.stagesSharing.map(function(t){return l.a.createElement(v.Checkbox,{key:t.id,style:{height:"80px",paddingTop:"24px",paddingLeft:"32px"},onCheck:e.toggleStageSelection(t.id),checked:e.state.selectedStages.includes(t.id)})});return l.a.createElement("div",{style:N.container},l.a.createElement(f.a,{onClick:function(){return e.openSharingDialog(e.props.model,"program")},primaryText:e.props.model.displayName||e.props.model.name,secondaryText:n.i(S.b)(e.state.programSharing),rightIconButton:l.a.createElement(C.a,{primary:!0,disabled:0===e.state.selectedStages.length,style:{height:45},icon:l.a.createElement(g.a,null),label:e.translate("apply_to_selected_stages"),labelPosition:"before",onClick:e.propagateAccess})}),l.a.createElement(h.a,null),l.a.createElement(K.a,{selectAll:e.selectAllStages,deselectAll:e.deselectAllStages,selectSimilar:e.selectSimilarStages,areNoneSelected:0===e.state.selectedStages.length,areAllSelected:e.state.selectedStages.length===e.state.stagesSharing.length}),0!==e.state.stagesSharing.length&&l.a.createElement("div",{style:N.programStageList},l.a.createElement("div",{style:{flex:1}},t),l.a.createElement("div",null,o)),l.a.createElement(I.a,{doNotPost:!0,sharedObject:e.state.objectToShare,open:e.state.sharingDialogOpen,id:e.state.sharingId,type:e.state.sharingType,onRequestClose:e.closeSharingDialog,onConfirm:e.confirmAndCloseSharingDialog,d2:e.context.d2}))}};P.contextTypes={d2:u.a.object};var F=function(){return{}},M=function(e){return n.i(R.a)({editFieldChanged:_.e,editProgramStageField:k.a},e)};t.a=n.i(D.a)(F,M)(P)},3863:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(1),r=n.n(a),s=n(80),l=n.n(s),c=n(4053),u=n.n(c),d=n(4054),f=n.n(d),p=n(4057),h=n.n(p),m=function(e,t){var n=e.selectAll,o=e.selectSimilar,a=e.deselectAll,r=e.areAllSelected,s=e.areNoneSelected,c=t.d2,d=function(e){return c.i18n.getTranslation(e)};return i.a.createElement("div",{style:{alignSelf:"flex-end",height:60,display:"flex",flexDirection:"row",alignItems:"center"}},i.a.createElement(l.a,{primary:!0,labelPosition:"before",disabled:s,style:{height:45},icon:i.a.createElement(h.a,null),label:d("deselect_all"),onClick:a}),i.a.createElement(l.a,{primary:!0,labelPosition:"before",style:{height:45},icon:i.a.createElement(f.a,null),label:d("select_similar"),onClick:o}),i.a.createElement(l.a,{primary:!0,labelPosition:"before",disabled:r,style:{height:45},icon:i.a.createElement(u.a,null),label:d("select_all"),onClick:n}))};m.contextTypes={d2:r.a.object},t.a=m},3864:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var o=n(17),i=(n.n(o),function(e,t){if(e.publicAccess!==t.publicAccess)return!1;if(!!e.externalAccess!=!!t.externalAccess)return!1;var i=function(e,t){return e.id<t.id};return!!n.i(o.isEqual)(Array.sort(e.userAccesses||[],i),Array.sort(t.userAccesses||[],i))&&n.i(o.isEqual)(Array.sort(e.userGroupAccesses||[],i),Array.sort(t.userGroupAccesses||[],i))}),a=function(e){if("----"===e.substr(0,4))return"No public access";if("rwrw"===e.substr(0,4))return"Complete public access";var t="";switch(e.substr(0,2)){case"rw":t+="Public metadata read- and write access";break;case"r-":t+="Public metadata read access";break;default:t+="No public metadata access"}switch(t=t+=", ",e.substr(2,2)){case"rw":return t+"public data read- and write access";case"r-":return t+"public data read access";default:return t+"no public data access"}},r=function(e){var t=e.publicAccess,n=e.userGroupAccesses,o=e.userAccesses,i=a(t),r=n?n.length:0,s=o?o.length:0,l=i;if(s||r){if(l+=", accessible to ",s){l+=s+" user"+(s>1?"s":"")}if(r){s&&(l+=" and ");l+=r+" user group"+(r>1?"s":"")}}return l}},3865:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(256),c=n.n(l),u=n(90),d=n(3857),f=n(317),p=n(1378),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),g={outer:{marginTop:"24px"},checkbox:{marginBottom:"24px"}},E=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={useCustom:!!a.props.model.dataEntryForm&&!!a.props.model.dataEntryForm.id},a.handleUseCustom=function(e,t){t||a.props.disableForm(),a.setState(h({},a.state,{useCustom:t}))},a.renderCustomForm=function(){return s.a.createElement(d.a,null)},r=n,i(a,r)}return a(t,e),m(t,[{key:"render",value:function(){return s.a.createElement("div",{style:g.outer},s.a.createElement(c.a,{checked:this.state.useCustom,onCheck:this.handleUseCustom,label:this.context.d2.i18n.getTranslation("use_custom_registration_form"),style:g.checkbox}),this.state.useCustom&&this.renderCustomForm())}}]),t}(r.Component),T=function(e){return{disableForm:function(){e(n.i(p.c)())}}};t.a=n.i(f.a)(null,T)(n.i(u.a)(E))},3866:function(e,t,n){"use strict";function o(e){var t=e.params.modelType||"program",o=e.params.groupName;return a.a.createElement("div",null,a.a.createElement("div",{style:y.heading},a.a.createElement(l.a,{schema:t,groupName:o,isDirtyHandler:C},"tracker_"+n.i(s.camelCaseToUnderscores)(t)),a.a.createElement(c.a,null,e.model.displayName)),a.a.createElement("div",null,a.a.createElement(u.a,null)),a.a.createElement(d.a,g({schema:t},e)),!e.isProgramStageStepperActive&&a.a.createElement(v,null,a.a.createElement(p.a,{groupName:o,schema:t,isDirtyHandler:C})))}var i=n(0),a=n.n(i),r=n(1),s=(n.n(r),n(756)),l=(n.n(s),n(3560)),c=n(3668),u=n(3868),d=n(3869),f=n(320),p=n(3750),h=n(457),m=n(3540),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E=n.i(m.c)(h.g),T=n.i(m.d)(h.h),v=n.i(m.e)(T,E),y={heading:{display:"flex",flexDirection:"column",marginBottom:"1rem"}},C=function(){return{dirty:n.i(f.b)(f.a.getState())}};o.propTypes={params:r.PropTypes.object.isRequired,isProgramStageStepperActive:r.PropTypes.bool,model:r.PropTypes.object.isRequired},o.defaultProps={isProgramStageStepperActive:!1},t.a=o},3867:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(317),r=n(206),s=n(17),l=(n.n(s),n(3561)),c=n(3669),u=n(320),d=n(1365),f=n(457),p=n(3865),h=u.a.map(n.i(s.get)("program")),m=d.a.for("enrollment"),g=function(e){return n.i(r.a)({editFieldChanged:f.e},e)},E=n.i(s.compose)(c.b,n.i(a.a)(null,g)),T=E(n.i(l.e)(h,"program",m,!1,"enrollment")),v=function(e){return i.a.createElement("div",null,i.a.createElement(T,e),i.a.createElement(p.a,e))};t.a=n.i(c.a)(v)},3868:function(e,t,n){"use strict";var o=n(206),i=n(317),a=n(3540),r=n(3635),s=n(1398),l=n(457),c=function(e){return{activeStep:n.i(r.b)(e),disabled:n.i(r.c)(e)}},u=function(e){return n.i(o.a)({stepperClicked:l.f},e)},d=n.i(i.a)(c,u)(n.i(a.g)(s.a));t.a=d},3869:function(e,t,n){"use strict";var o=n(317),i=n(206),a=n(755),r=n.n(a),s=n(17),l=(n.n(s),n(3540)),c=n(3635),u=n(320),d=n(1398),f=n(3699),p=n(3757),h=n(3861),m=n(3561),g=n(457),E=n(3669),T=n(1365),v=n(3870),y=n(3874),C=n(3867),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O=function(e){return{activeStep:n.i(c.b)(e)}},I=n.i(s.compose)(n.i(o.a)(O),r()(function(e){return e.combineLatest(u.a,function(e,t){var n=t.program;return b({},e,{modelToEdit:n})})}))(n.i(l.f)(function(){var e=u.a.map(n.i(s.get)("program")),t=function(e){return n.i(i.a)({editFieldChanged:g.e},e)},a=n.i(s.compose)(E.b,n.i(o.a)(null,t)),r=T.a.for("trackerProgram"),l={EditProgramDetailsForm:a(n.i(E.a)(n.i(m.e)(e,"program",r,!0,"trackerProgram"))),Enrollment:C.a,AssignAttributes:v.a,ProgramStage:y.a,EditDataEntryForm:f.a,ProgramAccess:p.a,TrackerProgramNotifications:h.a};return d.a.map(function(e){return e.component=l[e.componentName],e})}()));t.a=I},3870:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e){return e&&n.i(p.has)("trackedEntityType.trackedEntityTypeAttributes",e)?e.trackedEntityType.trackedEntityTypeAttributes.filter(function(t){return!e.programTrackedEntityAttributes.find(function(e){return e.trackedEntityAttribute.id===t.trackedEntityAttribute.id})}):[]}function a(e,t){return function(i){var a=i.trackedEntityAttribute,r=o(i,["trackedEntityAttribute"]),s=e.find(function(e){return e.id===a.id}),l=s.displayName,c=s.valueType,u=s.optionSet,d=s.unique,f=n.i(L.f)(i,L.h,t);return F({},r,{trackedEntityAttribute:F({},a,{displayName:l,valueType:c,optionSet:u,unique:d,renderTypeOptions:f})})}}function r(e,t){var n=t.d2,o=_.a.create(),i=_.a.create();o.setState(e.availableAttributes.map(function(e){return{id:e.id,text:e.displayName,value:e.id}})),i.setState(e.assignedAttributes.map(function(e){return e.trackedEntityAttribute.id}));var r=function(t){i.setState(t),e.setAttributesOrder(t)},s=e.assignedAttributes.map(a(e.availableAttributes,e.renderingOptions)).map(function(t){return l.a.createElement(N.a,{key:t.id,displayName:t.trackedEntityAttribute.displayName,attribute:t,onEditAttribute:e.onEditProgramAttribute,isDateValue:"DATE"===t.trackedEntityAttribute.valueType,isUnique:t.trackedEntityAttribute.unique,hasOptionSet:!!t.trackedEntityAttribute.optionSet,renderTypeOptions:t.trackedEntityAttribute.renderTypeOptions})});return l.a.createElement(K.a,null,l.a.createElement("div",{style:M.groupEditor},l.a.createElement("div",{style:M.fieldname},n.i18n.getTranslation("program_tracked_entity_attributes")),l.a.createElement(w.a,{hintText:n.i18n.getTranslation("search_available_program_tracked_entity_attributes"),onChange:e.onAttributeFilter,value:e.attributeFilter,fullWidth:!0}),l.a.createElement(R.a,{itemStore:o,assignedItemStore:i,height:250,filterText:e.attributeFilter,onAssignItems:e.onAssignItems,onRemoveItems:e.onRemoveItems,onOrderChanged:r})),l.a.createElement(x.Table,null,l.a.createElement(x.TableHeader,{displaySelectAll:!1,adjustForCheckbox:!1},l.a.createElement(x.TableRow,null,l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("name")),l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("display_in_list")),l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("mandatory")),l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("date_in_future")),l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("searchable")),l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("render_type_mobile")),l.a.createElement(x.TableHeaderColumn,null,n.i18n.getTranslation("render_type_desktop")))),l.a.createElement(x.TableBody,{displayRowCheckbox:!1},s)))}var s=n(0),l=n.n(s),c=n(1),u=n.n(c),d=n(206),f=n(317),p=n(17),h=(n.n(p),n(249)),m=n.n(h),g=n(211),E=n.n(g),T=n(755),v=n.n(T),y=n(325),C=n.n(y),b=n(761),O=n.n(b),I=n(1423),D=n.n(I),R=n(773),_=n(49),k=n(319),K=n.n(k),S=n(114),w=n.n(S),x=n(777),N=(n.n(x),n(1411)),A=n(320),P=n(1406),L=n(1379),F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},M={groupEditor:{padding:"2rem 3rem 4rem"},fieldname:{fontSize:16,color:"#00000080"}},B=A.a.map(n.i(p.get)("program")),$=A.a.map(n.i(p.get)("availableAttributes")).take(1),j=A.a.map(n.i(p.get)("renderingOptions")).take(1),H=function(e){return n.i(d.a)({addAttributesToProgram:P.a,removeAttributesFromProgram:P.b,editProgramAttributes:P.c,setAttributesOrder:P.d},e)},q=E()(m()(function(e){return{groupName:e.params.groupName,modelType:e.schema,modelId:e.params.modelId}}),n.i(f.a)(null,H),v()(function(e){return e.combineLatest(B,$,j,function(e,t,n,o){return F({},e,{availableAttributes:n,renderingOptions:o,model:t,assignedAttributes:t.programTrackedEntityAttributes})})}),D()({componentDidMount:function(){var e=i(this.props.model).map(function(e){return e.trackedEntityAttribute.id});this.props.addAttributesToProgram({attributes:e})}}),C()("attributeFilter","setAttributeFilter",""),O()({onAssignItems:function(e){var t=e.addAttributesToProgram;return function(e){return t({attributes:e}),Promise.resolve()}},onRemoveItems:function(e){var t=e.removeAttributesFromProgram;return function(e){return t({attributes:e}),Promise.resolve()}},onEditProgramAttribute:function(e){var t=e.editProgramAttributes;return function(e){return t({attribute:e})}},onAttributeFilter:function(e){var t=e.setAttributeFilter;return function(e){return t(e.target.value)}}}));r.propTypes={availableAttributes:u.a.array.isRequired,assignedAttributes:u.a.array.isRequired,onEditProgramAttribute:u.a.func.isRequired,attributeFilter:u.a.string.isRequired,onAttributeFilter:u.a.func.isRequired,onAssignItems:u.a.func.isRequired,onRemoveItems:u.a.func.isRequired},r.contextTypes={d2:u.a.object},t.a=q(r)},3871:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(3751),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.a=function(e){return e.programStage$&&i.a.createElement(a.a,r({outerDivStyle:{marginTop:"15px"}},e,{programStage$:e.programStage$}))}},3872:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(317),r=n(206),s=n(252),l=n(3876),c=n(3701),u=n(457),d=n(323),f=n(3749),p=function(e){var t={buttons:{padding:"2rem 1rem 1rem",marginLeft:"10px"}};return i.a.createElement("div",null,i.a.createElement(l.a,{programStage$:e.programStage$,programStage:e.programStage}),i.a.createElement("div",{style:t.buttons},i.a.createElement(f.b,{onSaveAction:e.saveProgramStageEdit,onCancelAction:e.cancelProgramStageEdit})))};t.a=n.i(s.b)(n.i(a.a)(null,function(e){return n.i(r.a)({changeStepperDisabledState:u.i,saveProgramStageEdit:d.f,cancelProgramStageEdit:d.g,editProgramStageReset:d.h},e)}),n.i(s.g)({componentWillMount:function(){this.props.changeStepperDisabledState(!0)},componentWillUnmount:function(){this.props.changeStepperDisabledState(!1),this.props.editProgramStageReset()},shouldComponentUpdate:function(e){return!(e.programStage!==this.props.programStage||!this.props.programStage&&!e.programStage)&&e!==this.props}}),c.e)(p)},3873:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(1),r=(n.n(a),n(206)),s=n(317),l=n(41),c=n.n(l),u=n(323),d=n(1365),f=n(3669),p=n(3561),h=d.a.for("programStage"),m=function(e){var t=n.i(s.a)(null,function(t){return n.i(r.a)({editFieldChanged:function(t,o){return n.i(u.a)(e.programStage.id,t,o)}},t)}),o=c()(t(n.i(f.c)(n.i(p.e)(e.programStage$,"programStage",h))));return i.a.createElement(o,e)};m.propTypes={programStage$:a.PropTypes.object.isRequired},t.a=m},3874:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=(n.n(l),n(317)),u=n(252),d=n(3875),f=n(3872),p=n(323),h=n(3701),m=n(324),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),E=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"shouldComponentUpdate",value:function(e){return e.programStage===this.props.programStage}},{key:"render",value:function(){var e=this.props,t="add"!==e.currentProgramStageId&&n.i(h.b)(e.currentProgramStageId).defaultIfEmpty(h.c);return s.a.createElement("div",null,this.props.currentProgramStageId?s.a.createElement(f.a,{programStage$:t}):s.a.createElement(d.a,{program:e.program,programStages:e.programStages}))}}]),t}(r.Component),T=function(e){return{currentProgramStageId:n.i(m.e)(e)}},v=function(e){return{editProgramStage:function(t){e(n.i(p.b)(t))}}};E.propTypes={programStage:l.PropTypes.object,currentProgramStageId:l.PropTypes.string},E.defaultProps={currentProgramStageId:"",programStage:{}},t.a=n.i(u.b)(n.i(c.a)(T,v),h.d)(E)},3875:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(317),d=n(206),f=n(1369),p=n(3562),h=n(3542),m=n(1371),g=n.n(m),E=n(754),T=n.n(E),v=n(3628),y=n(254),C=n(3510),b=n(1407),O=n(323),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),R={fab:{textAlign:"right",marginTop:"1rem",bottom:"1.5rem",right:"1.5rem",position:"fixed",zIndex:10},detailsBox:{flex:1,marginLeft:"1rem",marginRight:"1rem",opacity:1,flexGrow:0,paddingLeft:"1rem"},detailsBoxWrap:{paddingLeft:"1rem"},listWrap:{flex:1,display:"flex",flexOrientation:"row"},sharingDialogBody:{minHeight:"400px"}},_=function(e){function t(){var e,a,r,l;o(this,t);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={stages:r.props.programStages,modelType:"programStage",detailsObject:null,sharing:{id:null},translate:{model:null},tableColumns:n.i(y.c)("programStage")},r.openSharing=function(e){r.setState(I({},r.state,{sharing:I({},r.state.sharing,{id:e.id})}))},r.closeSharing=function(){r.setState(I({},r.state,{sharing:I({},r.state.sharing,{id:null})}))},r.openDetails=function(e){return r.setState({detailsObject:e})},r.closeDetails=function(){return r.setState({detailsObject:null})},r.openTranslate=function(e){r.setState(I({},r.state,{translate:I({},r.state.translate,{model:e})}))},r.handleOnRequestClose=function(){r.setState(I({},r.state,{translate:I({},r.state.translate,{model:null})}))},r.swapStages=function(e,t){r.setState(function(n){var o=e.sortOrder;return e.sortOrder=t.sortOrder,t.sortOrder=o,{sections:n.stages.sort(function(e,t){return e.sortOrder-t.sortOrder})}})},r.contextActionChecker=function(e,t){return"move_up"===t?r.state.stages.indexOf(e)>0:"move_down"!==t||r.state.stages.indexOf(e)<r.state.stages.length-1},r.moveStageUp=function(e){var t=r.state.stages.indexOf(e);if(t>0){var n=r.state.stages[t-1];r.swapStages(n,e)}},r.moveStageDown=function(e){var t=r.state.stages.indexOf(e);if(t<r.state.stages.length-1){var n=r.state.stages[t+1];r.swapStages(n,e)}},r.renderSharing=function(){return!!r.state.sharing.id&&s.a.createElement(p.a,{id:r.state.sharing.id,type:r.state.modelType,open:!!r.state.sharing.id,onRequestClose:r.closeSharing,bodyStyle:R.sharingDialogBody,d2:r.context.d2})},r.renderTranslate=function(){return!!r.state.translate.model&&s.a.createElement(h.a,{objectToTranslate:r.state.translate.model,objectTypeToTranslate:r.state.translate.model.modelDefinition,open:!!r.state.translate.model,onTranslationSaved:b.a,onTranslationError:b.b,onRequestClose:r.handleOnRequestClose,fieldsToTranslate:n.i(C.getTranslatablePropertiesForModelType)(r.state.modelType)})},r.renderDetails=function(){return!!r.state.detailsObject&&s.a.createElement("div",{style:R.detailsBoxWrap},s.a.createElement(v.a,{detailsObject:r.state.detailsObject,onClose:r.closeDetails,styles:R.detailsBox}))},r.renderFAB=function(){return s.a.createElement("div",{style:R.fab},s.a.createElement(g.a,{onClick:r.props.handleNewProgramStage},s.a.createElement(T.a,{className:"material-icons"},"add")))},l=a,i(r,l)}return a(t,e),D(t,[{key:"componentWillReceiveProps",value:function(e){this.state.stages!==e.programStages&&this.props.programStages!==e.programStages&&this.setState(I({},this.state,{stages:e.programStages}))}},{key:"render",value:function(){var e={edit:this.props.handleEditProgramStage,share:this.openSharing,delete:this.props.handleDeleteProgramStage,details:this.openDetails,translate:this.openTranslate,move_up:this.moveStageUp,move_down:this.moveStageDown},t={edit:"edit",share:"share",move_up:"arrow_upward",move_down:"arrow_downward"};return s.a.createElement("div",{style:R.listWrap},s.a.createElement(f.a,{rows:this.state.stages,columns:this.props.tableColumns,primaryAction:this.props.handleEditProgramStage,contextMenuActions:e,contextMenuIcons:t,isContextActionAllowed:this.contextActionChecker}),this.renderDetails(),this.renderSharing(),this.renderTranslate(),this.renderFAB())}}]),t}(r.Component);_.propTypes={programStages:c.a.array.isRequired,tableColumns:c.a.array,handleNewProgramStage:c.a.func.isRequired,handleEditProgramStage:c.a.func.isRequired,handleDeleteProgramStage:c.a.func.isRequired},_.defaultProps={tableColumns:["name","lastUpdated"]},_.contextTypes={d2:c.a.object.isRequired},t.a=n.i(u.a)(null,function(e){return n.i(d.a)({handleEditProgramStage:function(e){return n.i(O.b)(e.id)},handleNewProgramStage:function(){return n.i(O.c)()},handleDeleteProgramStage:function(e){return n.i(O.d)(e.id)}},e)})(_)},3876:function(e,t,n){"use strict";var o=n(0),i=n.n(o),a=n(1),r=n.n(a),s=n(317),l=n(41),c=n.n(l),u=n(206),d=n(1408),f=n(323),p=n(3540),h=n(3873),m=n(3871),g=n(3699),E=n(324),T=function(e){return i.a.createElement("div",{style:{marginTop:"15px"}},i.a.createElement(g.a,e))},v=n.i(s.a)(function(e){return{activeStep:n.i(E.f)(e)}},function(e){return n.i(u.a)({stepperClicked:f.i},e)})(n.i(p.g)(function(){var e={EditProgramStageDetails:h.a,AssignProgramStageDataElements:m.a,CreateDataEntryForm:T};return d.a.map(function(t){return t.component=e[t.componentName],t.content=e[t.componentName],t})}(),"vertical")),y=c()(function(e){return i.a.createElement("div",null,i.a.createElement(v,{programStage$:e.programStage$,programStage:e.programStage}))});y.propTypes={programStage$:r.a.object.isRequired,programStage:r.a.object},t.a=y},3889:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(0),i=n.n(o),a=n(252),r=n(91),s=function(){return null},l=n.i(a.g)({componentDidMount:function(){r.a.show(this.props.snackAction)}})(s),c=function(e,t){return n.i(a.e)(e,function(e){return function(e){return i.a.createElement(l,{snackAction:t})}})}},3891:function(e,t){!function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"J1QC",version:"4.11.3 (Standard)",revision:"8b53603e8",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var n=document.getElementsByTagName("script"),o=0;o<n.length;o++){var i=n[o].src.match(e);if(i){t=i[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(e){}}function t(){for(var e;e=n.shift();)e()}var n=[];return function(t){function o(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(o,1)}e()}if(n.push(t),"complete"===document.readyState&&setTimeout(e,1),1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(e){}document.documentElement.doScroll&&t&&o()}}}()},n=window.CKEDITOR_GETURL;if(n){var o=t.getUrl;t.getUrl=function(e){return n.call(t,e)||o.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,n=CKEDITOR.event.prototype;for(t in n)null==e[t]&&(e[t]=n[t])},CKEDITOR.event.prototype=function(){function e(e){var o=t(this);return o[e]||(o[e]=new n(e))}var t=function(e){return e=e.getPrivate&&e.getPrivate()||e._||(e._={}),e.events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(t,n){var o=e.call(this,t);CKEDITOR.tools.extend(o,n,!0)},on:function(t,n,o,i,a){function r(e,a,r,l){return e={name:t,sender:this,editor:e,data:a,listenerData:i,stop:r,cancel:l,removeListener:s},!1!==n.call(o,e)&&e.data}function s(){c.removeListener(t,n)}var l=e.call(this,t);if(0>l.getListenerIndex(n)){l=l.listeners,o||(o=this),isNaN(a)&&(a=10);var c=this;r.fn=n,r.priority=a;for(var u=l.length-1;0<=u;u--)if(l[u].priority<=a)return l.splice(u+1,0,r),{removeListener:s};l.unshift(r)}return{removeListener:s}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,n=function(){e=1},o=0,i=function(){o=1};return function(a,r,s){var l=t(this)[a];a=e;var c=o;if(e=o=0,l){var u=l.listeners;if(u.length)for(var d,u=u.slice(0),f=0;f<u.length;f++){if(l.errorProof)try{d=u[f].call(this,s,r,n,i)}catch(e){}else d=u[f].call(this,s,r,n,i);if(!1===d?o=1:void 0!==d&&(r=d),e||o)break}}return r=!o&&(void 0===r||r),e=a,o=c,r}}(),fireOnce:function(e,n,o){return n=this.fire(e,n,o),delete t(this)[e],n},removeListener:function(e,n){var o=t(this)[e];if(o){var i=o.getListenerIndex(n);0<=i&&o.listeners.splice(i,1)}},removeAllListeners:function(){var e,n=t(this);for(e in n)delete n[e]},hasListeners:function(e){return(e=t(this)[e])&&0<e.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/edge[ \/](\d+.?\d*)/),n=-1<e.indexOf("trident/"),n=!(!t&&!n),n={ie:n,edge:!!t,webkit:!n&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.ie,n.webkit&&(-1<e.indexOf("chrome")?n.chrome=!0:n.safari=!0);var o=0;return n.ie&&(o=t?parseFloat(t[1]):n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==o,n.ie8Compat=8==o,n.ie7Compat=7==o,n.ie6Compat=7>o||n.quirks),n.gecko&&(t=e.match(/rv:([\d\.]+)/))&&(t=t[1].split("."),o=1e4*t[0]+100*(t[1]||0)+1*(t[2]||0)),n.air&&(o=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(o=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=o,n.isCompatible=!(n.ie&&7>o||n.gecko&&4e4>o||n.webkit&&534>o),n.hidpi=2<=window.devicePixelRatio,n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<o,n.needsNbspFiller=n.ie&&11>o,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" cke_browser_quirks"),n.ie&&(n.cssClass+=" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version)),n.air&&(n.cssClass+=" cke_browser_air"),n.iOS&&(n.cssClass+=" cke_browser_ios"),n.hidpi&&(n.cssClass+=" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*t))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:t})},CKEDITOR.error=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:t})},CKEDITOR.on("log",function(e){if(window.console&&window.console.log){var t=console[e.data.type]?e.data.type:"log",n=e.data.errorCode;(e=e.data.additionalData)?console[t]("[CKEDITOR] Error code: "+n+".",e):console[t]("[CKEDITOR] Error code: "+n+"."),console[t]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+n)}},null,null,999),CKEDITOR.dom={},function(){function e(e,t,n){this._minInterval=e,this._context=n,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(t,n||{});var o=this;this.input=function(){function e(){o._lastOutput=(new Date).getTime(),o._scheduledTimer=0,o._call()}if(!o._scheduledTimer||!1!==o._reschedule()){var t=(new Date).getTime()-o._lastOutput;t<o._minInterval?o._scheduledTimer=setTimeout(e,o._minInterval-t):e()}}}function t(t,n,o){e.call(this,t,n,o),this._args=[];var i=this;this.input=CKEDITOR.tools.override(this.input,function(e){return function(){i._args=Array.prototype.slice.call(arguments),e.call(this)}})}var n=[],o=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",i=/&/g,a=/>/g,r=/</g,s=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,c={lt:"<",gt:">",amp:"&",quot:'"',nbsp:"",shy:""},u=function(e,t){return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1),10)):c[t]};CKEDITOR.on("reset",function(){n=[]}),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},getIndex:function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=CKEDITOR.tools.clone(e[n]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;t=new e.constructor;for(n in e)t[n]=CKEDITOR.tools.clone(e[n]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,n,o=arguments.length;"boolean"==typeof(t=arguments[o-1])?o--:"boolean"==typeof(t=arguments[o-2])&&(n=arguments[o-1],o-=2);for(var i=1;i<o;i++){var a,r=arguments[i];for(a in r)!0!==t&&null!=e[a]||(!n||a in n)&&(e[a]=r[a])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,t,n){return n?o+e+":"+t+";"+e+":"+t:(n={},n[e]=t,n[o+e]=t,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=void 0!==e.cssFloat?"cssFloat":void 0!==e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(e){e=[].concat(e);for(var t,n=[],o=0;o<e.length;o++)(t=e[o])&&(/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return n.join("")},htmlEncode:function(e){return void 0===e||null===e?"":String(e).replace(i,"&amp;").replace(a,"&gt;").replace(r,"&lt;")},htmlDecode:function(e){return e.replace(l,u)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(s,"&quot;")},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var n=t==CKEDITOR.ENTER_BR,o=this.htmlEncode(e.replace(/\r\n/g,"\n")),o=o.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i=t==CKEDITOR.ENTER_P?"p":"div";if(!n){var a=/\n{2}/g;if(a.test(o))var r="<"+i+">",s="</"+i+">",o=r+o.replace(a,function(){return s+r})+s}return o=o.replace(/\n/g,"<br>"),n||(o=o.replace(new RegExp("<br>(?=</"+i+">)"),function(e){return CKEDITOR.tools.repeat(e,2)})),o=o.replace(/^ | $/g,"&nbsp;"),o=o.replace(/(>|\s) /g,function(e,t){return t+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var e="e",t=0;8>t;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,o,i){return i||(i=window),n||(n=i),i.setTimeout(function(){o?e.apply(n,[].concat(o)):e.apply(n)},t||0)},throttle:function(e,t,n){return new this.buffers.throttle(e,t,n)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var n=0,o=e.length;n<o;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return 0<=n?e[n]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,n=e.base,o=e.privates||e._,i=e.proto;if(e=e.statics,!t&&(t=function(){n&&this.base.apply(this,arguments)}),o)var a=t,t=function(){var e,t=this._||(this._={});for(e in o){var n=o[e];t[e]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}a.apply(this,arguments)};return n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function(){this.base=n.prototype.base,n.apply(this,arguments),this.base=arguments.callee}),i&&this.extend(t.prototype,i,!0),e&&this.extend(t,e,!0),t},addFunction:function(e,t){return n.push(function(){return e.apply(t||this,arguments)})-1},removeFunction:function(e){n[e]=null},callFunction:function(e){var t=n[e];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(n){return e=CKEDITOR.tools.trim(n+"")+"px",t.test(e)?e:n||""}}(),convertToPx:function(){var e;return function(t){if(e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),!/%$/.test(t)){var n=0>parseFloat(t);return n&&(t=t.replace("-","")),e.setStyle("width",t),t=e.$.clientWidth,n?-t:t}return t}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var o=arguments[t];try{e=o();break}catch(e){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout(function(){e.apply(n,t)},0)}},normalizeCssText:function(e,t){var n,o=[],i=CKEDITOR.tools.parseCssText(e,!0,t);for(n in i)o.push(n+":"+i[n]);return o.sort(),o.length?o.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,n,o){for(e=[t,n,o],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")})},normalizeHex:function(e){return e.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(e,t,n,o){return e=t.toLowerCase(),3==e.length&&(e=e.split(""),e=[e[0],e[0],e[1],e[1],e[2],e[2]].join("")),"#"+e+o})},parseCssText:function(e,t,n){var o={};return n&&(e=new CKEDITOR.dom.element("span").setAttribute("style",e).getAttribute("style")||""),e&&(e=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(e))),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,i){t&&(n=n.toLowerCase(),"font-family"==n&&(i=i.replace(/\s*,\s*/g,",")),i=CKEDITOR.tools.trim(i)),o[n]=i}),o):o},writeCssText:function(e,t){var n,o=[];for(n in e)o.push(n+":"+e[n]);return t&&o.sort(),o.join("; ")},objectCompare:function(e,t,n){var o;if(!e&&!t)return!0;if(!e||!t)return!1;for(o in e)if(e[o]!=t[o])return!1;if(!n)for(o in t)if(e[o]!=t[o])return!1;return!0},objectKeys:function(e){var t,n=[];for(t in e)n.push(t);return n},convertArrayToObject:function(e,t){var n={};1==arguments.length&&(t=!0);for(var o=0,i=e.length;o<i;++o)n[e[o]]=t;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(!(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=e}return!!e},eventsBuffer:function(e,t,n){return new this.buffers.event(e,t,n)},enableHtml5Elements:function(e,t){for(var n,o="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),i=o.length;i--;)n=e.createElement(o[i]),t&&e.appendChild(n)},checkIfAnyArrayItemMatches:function(e,t){for(var n=0,o=e.length;n<o;++n)if(e[n].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var n in e)if(n.match(t))return!0;return!1},keystrokeToString:function(e,t){var n=this.keystrokeToArray(e,t);return n.display=n.display.join("+"),n.aria=n.aria.join("+"),n},keystrokeToArray:function(e,t){var n=16711680&t,o=65535&t,i=CKEDITOR.env.mac,a=[],r=[];return n&CKEDITOR.CTRL&&(a.push(i?"":e[17]),r.push(i?e[224]:e[17])),n&CKEDITOR.ALT&&(a.push(i?"":e[18]),r.push(e[18])),n&CKEDITOR.SHIFT&&(a.push(i?"":e[16]),r.push(e[16])),o&&(e[o]?(a.push(e[o]),r.push(e[o])):(a.push(String.fromCharCode(o)),r.push(String.fromCharCode(o)))),{display:a,aria:r}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(e){e=e.toLowerCase();for(var t,n=document.cookie.split(";"),o=0;o<n.length;o++)if(t=n[o].split("="),decodeURIComponent(CKEDITOR.tools.trim(t[0]).toLowerCase())===e)return decodeURIComponent(1<t.length?t[1]:"");return null},setCookie:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/"},getCsrfToken:function(){var e=CKEDITOR.tools.getCookie("ckCsrfToken");if(!e||40!=e.length){var e=[],t="";if(window.crypto&&window.crypto.getRandomValues)e=new Uint8Array(40),window.crypto.getRandomValues(e);else for(var n=0;40>n;n++)e.push(Math.floor(256*Math.random()));for(n=0;n<e.length;n++)var o="abcdefghijklmnopqrstuvwxyz0123456789".charAt(e[n]%36),t=t+(.5<Math.random()?o.toUpperCase():o);e=t,CKEDITOR.tools.setCookie("ckCsrfToken",e)}return e},escapeCss:function(e){return e?window.CSS&&CSS.escape?CSS.escape(e):isNaN(parseInt(e.charAt(0),10))?e:"\\3"+e.charAt(0)+" "+e.substring(1,e.length):""},getMouseButton:function(e){return!!(e=e.data?e.data.$:e)&&(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.ie6Compat)?4===e.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===e.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:e.button)},convertHexStringToBytes:function(e){var t,n=[],o=e.length/2;for(t=0;t<o;t++)n.push(parseInt(e.substr(2*t,2),16));return n},convertBytesToBase64:function(e){var t,n="",o=e.length;for(t=0;t<o;t+=3){var i,a=e.slice(t,t+3),r=a.length,s=[];if(3>r)for(i=r;3>i;i++)a[i]=0;for(s[0]=(252&a[0])>>2,s[1]=(3&a[0])<<4|a[1]>>4,s[2]=(15&a[1])<<2|(192&a[2])>>6,s[3]=63&a[2],i=0;4>i;i++)n=i<=r?n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s[i]):n+"="}return n},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t={},n=this._findColor(e);return n.length&&(t.color=n[0],CKEDITOR.tools.array.forEach(n,function(t){e=e.replace(t,"")})),(e=CKEDITOR.tools.trim(e))&&(t.unprocessed=e),t},margin:function(e){function t(e){n.top=o[e[0]],n.right=o[e[1]],n.bottom=o[e[2]],n.left=o[e[3]]}var n={},o=e.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(o.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}return n},border:function(e){var t={},n=e.split(/\s+/g);return e=CKEDITOR.tools.style.parse._findColor(e),e.length&&(t.color=e[0]),CKEDITOR.tools.array.forEach(n,function(e){t.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,e)?!t.width&&CKEDITOR.tools.style.parse._widthRegExp.test(e)&&(t.width=e):t.style=e}),t},_findColor:function(e){var t=[],n=CKEDITOR.tools.array,t=t.concat(e.match(this._rgbaRegExp)||[]),t=t.concat(e.match(this._hslaRegExp)||[]);return t=t.concat(n.filter(e.split(/\s+/),function(e){return!!e.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||e.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(e,t,n){var o=[];return this.forEach(e,function(i,a){t.call(n,i,a,e)&&o.push(i)}),o},forEach:function(e,t,n){var o,i=e.length;for(o=0;o<i;o++)t.call(n,e[o],o,e)},map:function(e,t,n){for(var o=[],i=0;i<e.length;i++)o.push(t.call(n,e[i],i,e));return o},reduce:function(e,t,n,o){for(var i=0;i<e.length;i++)n=t.call(o,n,e[i],i,e);return n},every:function(e,t,n){return!e.length||(t=this.filter(e,t,n),e.length===t.length)}},object:{findKey:function(e,t){if("object"!=typeof e)return null;for(var n in e)if(e[n]===t)return n;return null},merge:function(e,t){var n=CKEDITOR.tools,o=n.clone(e),i=n.clone(t);return n.array.forEach(n.objectKeys(i),function(e){o[e]="object"==typeof i[e]&&"object"==typeof o[e]?n.object.merge(o[e],i[e]):i[e]}),o}},getAbsoluteRectPosition:function(e,t){function n(e){if(e){var t=e.getClientRect();o.top+=t.top,o.left+=t.left,"x"in o&&"y"in o&&(o.x+=t.x,o.y+=t.y),n(e.getWindow().getFrame())}}var o=CKEDITOR.tools.copy(t);n(e.getFrame());var i=CKEDITOR.document.getWindow().getScrollPosition();return o.top+=i.y,o.left+=i.x,"x"in o&&"y"in o&&(o.y+=i.y,o.x+=i.x),o.right=o.left+o.width,o.bottom=o.top+o.height,o}},e.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},t.prototype=CKEDITOR.tools.prototypedCopy(e.prototype),t.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},t.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=e,CKEDITOR.tools.buffers.throttle=t,CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var n=CKEDITOR.tools.clone(e),o=1;o<arguments.length;o++){t=arguments[o];for(var i in t)delete n[i]}return n},n={},o={},i={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},a={command:1,link:1,meta:1,noscript:1,script:1,style:1},r={},s={"#":1},l={center:1,dir:1,noframes:1};return e(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},s,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(o,i,n,l),t={a:t(n,{a:1,button:1}),abbr:n,address:o,area:r,article:o,aside:o,audio:e({source:1,track:1},o),b:n,base:r,bdi:n,bdo:n,blockquote:o,body:o,br:r,button:t(n,{a:1,button:1}),canvas:n,caption:o,cite:n,code:n,col:r,colgroup:{col:1},command:r,datalist:e({option:1},n),dd:o,del:n,details:e({summary:1},o),dfn:n,div:o,dl:{dt:1,dd:1},dt:o,em:n,embed:r,fieldset:e({legend:1},o),figcaption:o,figure:e({figcaption:1},o),footer:o,form:o,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:e({title:1,base:1},a),header:o,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:r,html:e({head:1,body:1},o,a),i:n,iframe:s,img:r,input:r,ins:n,kbd:n,keygen:r,label:n,legend:n,li:o,link:r,main:o,map:o,mark:n,menu:e({li:1},o),meta:r,meter:t(n,{meter:1}),nav:o,noscript:e({link:1,meta:1,style:1},n),object:e({param:1},n),ol:{li:1},optgroup:{option:1},option:s,output:n,p:n,param:r,pre:n,progress:t(n,{progress:1}),q:n,rp:n,rt:n,ruby:e({rp:1,rt:1},n),s:n,samp:n,script:s,section:o,select:{optgroup:1,option:1},small:n,source:r,span:n,strong:n,style:s,sub:n,summary:e({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},n),sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:o,textarea:s,tfoot:{tr:1},th:o,thead:{tr:1},time:t(n,{time:1}),title:s,tr:{th:1,td:1},track:r,u:n,ul:{li:1},var:n,video:e({source:1,track:1},o),wbr:r,acronym:n,applet:e({param:1},o),basefont:r,big:n,center:o,dialog:r,dir:{li:1},font:n,isindex:r,noframes:o,strike:n,tt:n},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},i,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(n){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(n))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var n=this.getCustomData("_cke_nativeListeners");return n||(n={},this.setCustomData("_cke_nativeListeners",n)),n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,n)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var n=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,n):this.$.removeEventListener&&this.$.removeEventListener(e,n,!1),delete t[e]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",function(){t={}}),e.equals=function(e){try{return e&&e.$===this.$}catch(e){return!1}},e.setCustomData=function(e,n){var o=this.getUniqueId();return(t[o]||(t[o]={}))[e]=n,this},e.getCustomData=function(e){var n=this.$["data-cke-expando"];return(n=n&&t[n])&&e in n?n[e]:null},e.removeCustomData=function(e){var n,o,i=this.$["data-cke-expando"],i=i&&t[i];return i&&(n=i[e],o=e in i,delete i[e]),o?n:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){function n(o){if(o["data-cke-expando"]&&(o["data-cke-expando"]=!1),(o.nodeType==CKEDITOR.NODE_ELEMENT||o.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(t||o.nodeType!=CKEDITOR.NODE_ELEMENT||o.removeAttribute("id",!1),e)){o=o.childNodes;for(var i=0;i<o.length;i++)n(o[i])}}function o(t){if(t.type==CKEDITOR.NODE_ELEMENT||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.getName();":"==n[0]&&t.renameNode(n.substring(1))}if(e)for(n=0;n<t.getChildCount();n++)o(t.getChild(n))}}var i=this.$.cloneNode(e);return n(i),i=new CKEDITOR.dom.node(i),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&o(i),i},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,o=this.$;o&&o!=n;){var i=o.parentNode;i&&t.unshift(this.getIndex.call({$:o},e)),o=i}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,o){var i=o?e.nextSibling:e.previousSibling;return i&&i.nodeType==CKEDITOR.NODE_TEXT?n(i)?t(i,o):i:null}function n(e){return!e.nodeValue||e.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var o,i=this.$,a=-1;if(!this.$.parentNode||e&&i.nodeType==CKEDITOR.NODE_TEXT&&n(i)&&!t(i)&&!t(i,!0))return-1;do{e&&i!=this.$&&i.nodeType==CKEDITOR.NODE_TEXT&&(o||n(i))||(a++,o=i.nodeType==CKEDITOR.NODE_TEXT)}while(i=i.previousSibling);return a},getNextSourceNode:function(e,t,n){if(n&&!n.call){var o=n;n=function(e){return!e.equals(o)}}e=!e&&this.getFirst&&this.getFirst();var i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getNext()}for(;!e&&(i=(i||this).getParent());){if(n&&!1===n(i,!0))return null;e=i.getNext()}return!e||n&&!1===n(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call){var o=n;n=function(e){return!e.equals(o)}}e=!e&&this.getLast&&this.getLast();var i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getPrevious()}for(;!e&&(i=(i||this).getParent());){if(n&&!1===n(i,!0))return null;e=i.getPrevious()}return!e||n&&!1===n(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t,n=this.$;do{t=(n=n.previousSibling)&&10!=n.nodeType&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getNext:function(e){var t,n=this.$;do{t=(n=n.nextSibling)&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do{n[e?"push":"unshift"](t)}while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do{if(t.contains(e))return t}while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return 0>t.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}t=this.getAddress(),e=e.getAddress();for(var n=Math.min(t.length,e.length),o=0;o<n;o++)if(t[o]!=e[o])return t[o]<e[o]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n,o,i=this.$;t||(i=i.parentNode),"function"==typeof e?(o=!0,n=e):(o=!1,n=function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});for(;i;){if(n(o?new CKEDITOR.dom.node(i):i))return new CKEDITOR.dom.node(i);try{i=i.parentNode}catch(e){i=null}}return null},hasAscendant:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent()),CKEDITOR.env.edge&&t&&t.is("textarea","input")&&(e=!0),!e&&t&&void 0!==t.$.isContentEditable)return!(t.$.isContentEditable||t.data("cke-editable"));for(;t;){if(t.data("cke-editable"))return!1;if(t.hasAttribute("contenteditable"))return"false"==t.getAttribute("contenteditable");t=t.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,o=0;n&&o<e.length;o++){var i=e[o];if(t)for(var a=-1,r=0;r<n.childNodes.length;r++){var s=n.childNodes[r];if((!0!==t||3!=s.nodeType||!s.previousSibling||3!=s.previousSibling.nodeType)&&++a==i){n=s;break}}else n=n.childNodes[i]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return CKEDITOR.env.ie&&8>=document.documentMode||!t||(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(e){return new CKEDITOR.dom.node(e)})}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,o){var i=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),a=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[i]=t,a[n]=1,t.setCustomData(n,o)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var o,i=t.getCustomData("list_marker_names"),a=t.getCustomData("list_marker_id");for(o in i)t.removeCustomData(o);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[a])},function(){function e(e,t){return-1<(" "+e+" ").replace(a," ").indexOf(" "+t+" ")}function t(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function n(e,t){var n=CKEDITOR.tools.escapeCss(e.$.id);return"#"+n+" "+t.split(/,\s*/).join(", #"+n+" ")}function o(e){for(var t=0,n=0,o=r[e].length;n<o;n++)t+=parseFloat(this.getComputedStyle(r[e][n])||0,10)||0;return t}var i=document.createElement("_").classList,i=void 0!==i&&null!==String(i.add).match(/\[Native code\]/gi),a=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:i?function(e){return this.$.classList.add(e),this}:function(t){var n=this.$.className;return n&&(e(n,t)||(n+=" "+t)),this.$.className=n||t,this},removeClass:i?function(e){var t=this.$;return t.classList.remove(e),t.className||t.removeAttribute("class"),this}:function(t){var n=this.getAttribute("class");return n&&e(n,t)&&((n=n.replace(new RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(t){return e(this.$.className,t)},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e,t){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(e);var o,i=n.extractContents(!1,t||!1);if(n.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element("div");o=i.getFirst();)o.$.style.backgroundColor&&(o.$.style.backgroundColor=o.$.style.backgroundColor),n.append(o);n.insertAfter(this),n.remove(!0)}else i.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(16&this.$.compareDocumentPosition(e.$))}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(e){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!t.width&&(t.width=t.right-t.left),!t.height&&(t.height=t.bottom-t.top),e?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),t):t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(n){for(this.$.innerHTML="",t=new CKEDITOR.dom.element("body",this.getDocument()),t.$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return e=this.$.getAttribute(e,2),0!==e&&0===this.$.tabIndex&&(e=null),e;case"checked":return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:e}(),getAttributes:function(e){var t,n={},o=this.$.attributes;for(e=CKEDITOR.tools.isArray(e)?e:[],t=0;t<o.length;t++)-1===CKEDITOR.tools.indexOf(e,o[t].name)&&(n[o[t].name]=o[t].value);return n},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return 0!==e||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?e:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if("object"==typeof arguments[0])return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===e||!(!(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span)||!e["#"]))},isIdentical:function(e){var t=this.clone(0,1);if(e=e.clone(0,1),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e,t,n=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return n&&CKEDITOR.env.webkit&&(e=this.getWindow(),!e.equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(n=new CKEDITOR.dom.element(t).isVisible())),!!n},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var o=e.getItem(t);if((o.type!=CKEDITOR.NODE_ELEMENT||!o.data("cke-bookmark"))&&(o.type==CKEDITOR.NODE_ELEMENT&&!o.isEmptyInlineRemoveable()||o.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(o.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!n[e[0].nodeName]||2==t&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if("input"==this.getName())switch(e){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return e=this.getAttribute("type"),"checkbox"==e||"radio"==e?"on"!=this.$.value:!!this.$.value}return!!t&&t.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n=this.$;if(e=e.$,n!=e){var o;if(t)for(;o=n.lastChild;)e.insertBefore(n.removeChild(o),e.firstChild);else for(;o=n.firstChild;)e.appendChild(n.removeChild(o))}},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var o=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(o.push(t),!(t=n?t.getNext():t.getPrevious())||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var i=n?e.getLast():e.getFirst();o.length;)o.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),i&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings()}}}return function(t){(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,n){return"class"==t?this.$.className=n:"style"==t?this.$.style.cssText=n:"tabindex"==t?this.$.tabIndex=n:"checked"==t?this.$.checked=n:"contenteditable"==t?e.call(this,"contentEditable",n):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if("src"==t&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(e){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e=e||this.getAttributes())e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(t.removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var n,o=["top","left","right","bottom"];"border"==e&&(n=["color","style","width"]);for(var t=[],i=0;i<o.length;i++)if(n)for(var a=0;a<n.length;a++)t.push([e,o[i],n[a]].join("-"));else t.push([e,o[i]].join("-"));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(e=Math.round(100*e),this.setStyle("filter",100<=e?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e,t=this.getElementsByTag("*"),n=0,o=t.count();n<o;n++)e=t.getItem(n),e.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,o=this.getDocument(),i=o.getBody(),a="BackCompat"==o.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var r=this.$.getBoundingClientRect(),s=o.$.documentElement,l=s.clientTop||i.$.clientTop||0,c=s.clientLeft||i.$.clientLeft||0,u=!0;CKEDITOR.env.ie&&(u=o.getDocumentElement().contains(this),o=o.getBody().contains(this),u=a&&o||!a&&u),u&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(t=i.$.scrollLeft||s.scrollLeft,n=i.$.scrollTop||s.scrollTop):(n=a?i.$:s,t=n.scrollLeft,n=n.scrollTop),t=r.left+t-c,n=r.top+n-l)}else for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(t+=l.$.offsetLeft-l.$.scrollLeft,n+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(t+=l.$.clientLeft||0,n+=l.$.clientTop||0);c&&!c.equals(l);)t-=c.$.scrollLeft,n-=c.$.scrollTop,c=c.getParent();c=l,l=(r=l.$.offsetParent)?new CKEDITOR.dom.element(r):null}return e&&(r=this.getWindow(),l=e.getWindow(),!r.equals(l)&&r.$.frameElement&&(e=new CKEDITOR.dom.element(r.$.frameElement).getDocumentPosition(e),t+=e.x,n+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||a||(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var t=this.getParent();if(t)do{if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var n=t.getWindow();try{var o=n.$.frameElement;o&&(t=new CKEDITOR.dom.element(o))}catch(e){}}}while(t=t.getParent())},scrollIntoParent:function(e,t,n){function o(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft+=t,e.$.scrollTop+=n)}function i(e,t){var n={x:0,y:0};if(!e.is(u?"body":"html")){var o=e.$.getBoundingClientRect();n.x=o.left,n.y=o.top}return o=e.getWindow(),o.equals(t)||(o=i(CKEDITOR.dom.element.get(o.$.frameElement),t),n.x+=o.x,n.y+=o.y),n}function a(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}var r,s,l,c;!e&&(e=this.getWindow()),l=e.getDocument();var u="BackCompat"==l.$.compatMode;e instanceof CKEDITOR.dom.window&&(e=u?l.getBody():l.getDocumentElement()),CKEDITOR.env.webkit&&(l=this.getEditor(!1))&&(l._.previousScrollTop=null),l=e.getWindow(),s=i(this,l);var d=i(e,l),f=this.$.offsetHeight;r=this.$.offsetWidth;var p=e.$.clientHeight,h=e.$.clientWidth;l=s.x-a(this,"left")-d.x||0,c=s.y-a(this,"top")-d.y||0,r=s.x+r+a(this,"right")-(d.x+h)||0,s=s.y+f+a(this,"bottom")-(d.y+p)||0,(0>c||0<s)&&o(0,!0===t?c:!1===t?s:0>c?c:s),n&&(0>l||0<r)&&o(0>l?l:r,0)},setState:function(e,t,n){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){var n=this.$.attributes;t=t||{};for(var o=0;o<n.length;o++){var i,a=n[o],r=a.nodeName.toLowerCase();r in t||("checked"==r&&(i=this.getAttribute(r))?e.setAttribute(r,i):CKEDITOR.env.ie&&!this.hasAttribute(r)||(i=this.getAttribute(r),null===i&&(i=a.nodeValue),e.setAttribute(r,i)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t),this.copyAttributes(e),this.moveChildren(e),this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(0<=t&&t<n.length)return n[t]}return function(t){var n=this.$;if(t.slice)for(t=t.slice();0<t.length&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()})},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(e){var t,n,o,i=CKEDITOR.instances;e=e||void 0===e;for(t in i)if(n=i[t],n.element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!e&&(o=n.editable())&&(o.equals(this)||o.contains(this)))return n;return null},find:function(e){var o=t(this);return e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(n(this,e))),o(),e},findOne:function(e){var o=t(this);return e=this.$.querySelector(n(this,e)),o(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var o=e(this);if(!1!==o){n=this.getChildren();for(var i=0;i<n.count();i++)o=n.getItem(i),o.type==CKEDITOR.NODE_ELEMENT?o.forEach(e,t):t&&o.type!=t||e(o)}}});var r={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=o.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=o.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,n.collapsed)return this.end(),null;n.optimize()}var o,i=n.startContainer;o=n.endContainer;var a,r=n.startOffset,s=n.endOffset,l=this.guard,c=this.type,u=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var d=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),f=o.type==CKEDITOR.NODE_ELEMENT?o.getChild(s):o.getNext();this._.guardLTR=function(e,t){return!(t&&d.equals(e)||f&&e.equals(f)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}if(e&&!this._.guardRTL){var p=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),h=i.type==CKEDITOR.NODE_ELEMENT?r?i.getChild(r-1):null:i.getPrevious();this._.guardRTL=function(e,t){return!(t&&p.equals(e)||h&&e.equals(h)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}var m=e?this._.guardRTL:this._.guardLTR;for(a=l?function(e,t){return!1!==m(e,t)&&l(e,t)}:m,this.current?o=this.current[u](!1,c,a):(e?o.type==CKEDITOR.NODE_ELEMENT&&(o=0<s?o.getChild(s-1):!1===a(o,!0)?null:o.getPreviousSourceNode(!0,c,a)):(o=i,o.type==CKEDITOR.NODE_ELEMENT&&((o=o.getChild(r))||(o=!1===a(i,!0)?null:i.getNextSourceNode(!0,c,a)))),o&&!1===a(o)&&(o=null));o&&!this._.end;){if(this.current=o,this.evaluator&&!1===this.evaluator(o)){if(t&&this.evaluator)return!1}else if(!t)return o;o=o[u](!1,c,a)}return this.end(),this.current=null}function t(t){for(var n,o=null;n=e.call(this,t);)o=n;return o}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in o||!n[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e))},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(o){var i,a;return i=o&&o.type!=CKEDITOR.NODE_ELEMENT&&(a=o.getParent())&&n(a),i=e?i:i||n(o),!!(t^i)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;return t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(e^n)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(o){return t(o)?o=1:(o.type==CKEDITOR.NODE_TEXT&&(o=o.getParent()),o=o.$.offsetWidth<=n),!!(e^o)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!a(e)&&!r(e)}return function(n){var o=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&i.test(n.getText());return o&&(o=n.getParent(),n=n.getNext(t),o=o.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(e^o)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,a=CKEDITOR.dom.walker.whitespaces(),r=CKEDITOR.dom.walker.bookmark(),s=CKEDITOR.dom.walker.temp(),l=function(e){return r(e)||a(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=a(t)||r(t)||s(t),!!(e^t)}};var c=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var n=0,o=t.getChildCount();n<o;++n)if(!c(t.getChild(n)))return!!e;return!e}};var u=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var t,n={};for(t in e)CKEDITOR.dtd[t]["#"]&&(n[t]=1);return n}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return t=!c(t)&&!!(t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(d)&&u(t))),!!(e^t)}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do{e=e.getPreviousSourceNode()}while(l(e));return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&i.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function t(e,t,n,o,i){function a(e,t,n,o){var a=n?e.getPrevious():e.getNext();return o&&r?a:(l||o?t.append(e.clone(!0,i),n):(e.remove(),s&&t.append(e,n)),a)}e.optimizeBookmark();var r=0===t,s=1==t,l=2==t;t=l||s;var c,u,d,f,p,h,m=e.startContainer,g=e.endContainer,E=e.startOffset,T=e.endOffset;if(l&&g.type==CKEDITOR.NODE_TEXT&&(m.equals(g)||m.type===CKEDITOR.NODE_ELEMENT&&m.getFirst().equals(g)))n.append(e.document.createText(g.substring(E,T)));else{g.type==CKEDITOR.NODE_TEXT?l?h=!0:g=g.split(T):0<g.getChildCount()?T>=g.getChildCount()?(g=g.getChild(T-1),u=!0):g=g.getChild(T):f=u=!0,m.type==CKEDITOR.NODE_TEXT?l?p=!0:m.split(E):0<m.getChildCount()?0===E?(m=m.getChild(E),c=!0):m=m.getChild(E-1):d=c=!0;for(var v,y,C,b=m.getParents(),O=g.getParents(),I=function(){var e,t,n,o=Math.min(b.length,O.length);for(e=0;e<o;e++)if(t=b[e],n=O[e],!t.equals(n))return e;return e-1}(),D=b.length-1,R=O.length-1,_=n,k=-1,K=I;K<=D;K++){for(y=b[K],C=y.getNext(),K!=D||y.equals(O[K])&&D<R?t&&(v=_.append(y.clone(0,i))):c?a(y,_,!1,d):p&&_.append(e.document.createText(y.substring(E)));C;){if(C.equals(O[K])){k=K;break}C=a(C,_)}_=v}for(_=n,K=I;K<=R;K++)if(n=O[K],C=n.getPrevious(),n.equals(b[K]))t&&(_=_.getChild(0));else{if(K!=R||n.equals(b[K])&&R<D?t&&(v=_.append(n.clone(0,i))):u?a(n,_,!1,f):h&&_.append(e.document.createText(n.substring(0,T))),K>k)for(;C;)C=a(C,_,!0);_=v}l||function(){var t=I-1,n=d&&f&&!m.equals(g);t<D-1||t<R-1||n?(n?e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START):R==t+1&&u?e.moveToPosition(O[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(O[t+1],CKEDITOR.POSITION_BEFORE_START),o&&(t=b[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&(n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document),n.insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:n}))):e.collapse(!0)}()}}function n(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),o=CKEDITOR.dom.walker.bogus();return function(i){return!(!n(i)&&!t(i))||(o(i)&&!e?e=!0:!(i.type==CKEDITOR.NODE_TEXT&&(i.hasAscendant("pre")||CKEDITOR.tools.trim(i.getText()).length)||i.type==CKEDITOR.NODE_ELEMENT&&!i.is(a)))}}function o(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(o){return!(!n(o)&&!t(o))||(!e&&r(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$removeEmpty))}}function i(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(e){return!t&&c(e)&&(t=e),l(e)&&!(r(e)&&e.equals(t))})}}var a={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},r=CKEDITOR.dom.walker.bogus(),s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,l=CKEDITOR.dom.walker.editable(),c=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,n,!1,void 0===e||e),n},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,n){var o=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,o,e,void 0===n||n),o},createBookmark:function(e){var t,n,o,i,a=this.collapsed;return t=this.document.createElement("span"),t.data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(o="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",o+(a?"C":"S"))),a||(n=t.clone(),n.setHtml("&nbsp;"),e&&n.setAttribute("id",o+"E"),i=this.clone(),i.collapse(),i.insertNode(n)),i=this.clone(),i.collapse(!0),i.insertNode(t),n?(this.setStartAfter(t),this.setEndBefore(n)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?o+(a?"C":"S"):t,endNode:e?o+"E":n,serializable:e,collapsed:a}},createBookmark2:function(){function e(e){var t,o=e.container,i=e.offset;t=o;var a=i;if(t=t.type!=CKEDITOR.NODE_ELEMENT||0===a||a==t.getChildCount()?0:t.getChild(a-1).type==CKEDITOR.NODE_TEXT&&t.getChild(a).type==CKEDITOR.NODE_TEXT,t&&(o=o.getChild(i-1),i=o.getLength()),o.type==CKEDITOR.NODE_ELEMENT&&0<i){e:{for(t=o;i--;)if(0<=(a=t.getChild(i).getIndex(!0))){i=a;break e}i=-1}i+=1}if(o.type==CKEDITOR.NODE_TEXT){for(t=o,a=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)a+=t.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;t=a,o.getText()?i+=t:(a=o.getPrevious(n),t?(i=t,o=a?a.getNext():o.getParent().getFirst()):(o=o.getParent(),i=a?a.getIndex(!0)+1:0))}e.container=o,e.offset=i}function t(e,t){var n=t.getCustomData("cke-fillingChar");if(n){var o=e.container;n.equals(o)&&(e.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=e.offset&&(e.offset=o.getIndex(),e.container=o.getParent()))}}var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(n){var o=this.collapsed,i={container:this.startContainer,offset:this.startOffset},a={container:this.endContainer,offset:this.endOffset};return n&&(e(i),t(i,this.root),o||(e(a),t(a,this.root))),{start:i.container.getAddress(n),end:o?null:a.container.getAddress(n),startOffset:i.offset,endOffset:a.offset,normalized:n,collapsed:o,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,o=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(t,n),o?this.setEnd(o,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,n=this.endContainer,o=this.startOffset,i=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if((e=t.getChildCount())>o)t=t.getChild(o);else if(1>e)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t),t=t.getNextSourceNode()||t}if(n.type==CKEDITOR.NODE_ELEMENT)if((e=n.getChildCount())>i)n=n.getChild(i).getPreviousSourceNode(!0);else if(1>e)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return t.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(t=n),{startNode:t,endNode:n}},getCommonAncestor:function(e,t){var n=this.startContainer,o=this.endContainer,n=n.equals(o)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(o);return t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,o=this.startOffset,i=this.collapsed;if((!e||i)&&n&&n.type==CKEDITOR.NODE_TEXT){if(o)if(o>=n.getLength())o=n.getIndex()+1,n=n.getParent();else{var a=n.split(o),o=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(a,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}else o=n.getIndex(),n=n.getParent();if(this.setStart(n,o),i)return void this.collapse(!0)}n=this.endContainer,o=this.endOffset,t||i||!n||n.type!=CKEDITOR.NODE_TEXT||(o?(o>=n.getLength()||n.split(o),o=n.getIndex()+1):o=n.getIndex(),n=n.getParent(),this.setEnd(n,o))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var o=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var i=1;case CKEDITOR.ENLARGE_ELEMENT:var a=function(e,t){var n=new CKEDITOR.dom.range(h);n.setStart(e,t),n.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);var i,n=new CKEDITOR.dom.walker(n);for(n.guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};i=n.next();){if(i.type!=CKEDITOR.NODE_TEXT)return!1;if(f=i!=e?i.getText():i.substring(t),o.test(f))return!1}return!0};if(this.collapsed)break;var r,s,l,c,u,d,f,p=this.getCommonAncestor(),h=this.root,m=!1;d=this.startContainer;var g=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(g&&(d=!CKEDITOR.tools.trim(d.substring(0,g)).length&&d,m=!!d),d&&((c=d.getPrevious())||(l=d.getParent()))):(g&&(c=d.getChild(g-1)||d.getLast()),c||(l=d)),l=n(l);l||c;){if(l&&!c){if(!u&&l.equals(p)&&(u=!0),i?l.isBlockBoundary():!h.contains(l))break;m&&"inline"==l.getComputedStyle("display")||(m=!1,u?r=l:this.setStartBefore(l)),c=l.getPrevious()}for(;c;)if(d=!1,c.type==CKEDITOR.NODE_COMMENT)c=c.getPrevious();else{if(c.type==CKEDITOR.NODE_TEXT)f=c.getText(),o.test(f)&&(c=null),d=/[\s\ufeff]$/.test(f);else if((c.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&c.is("br"))&&!c.data("cke-bookmark"))if(m&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(f=c.getText(),o.test(f))c=null;else for(var E,g=c.$.getElementsByTagName("*"),T=0;E=g[T++];)if(!CKEDITOR.dtd.$removeEmpty[E.nodeName.toLowerCase()]){c=null;break}c&&(d=!!f.length)}else c=null;if(d&&(m?u?r=l:l&&this.setStartBefore(l):m=!0),c){if(d=c.getPrevious(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=n(l.getParent()))}for(d=this.endContainer,g=this.endOffset,l=c=null,u=m=!1,d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(g)).length?m=!0:(m=!d.getLength(),g==d.getLength()?(c=d.getNext())||(l=d.getParent()):a(d,g)&&(l=d.getParent())):(c=d.getChild(g))||(l=d);l||c;){if(l&&!c){if(!u&&l.equals(p)&&(u=!0),i?l.isBlockBoundary():!h.contains(l))break;m&&"inline"==l.getComputedStyle("display")||(m=!1,u?s=l:l&&this.setEndAfter(l)),c=l.getNext()}for(;c;){if(d=!1,c.type==CKEDITOR.NODE_TEXT)f=c.getText(),a(c,0)||(c=null),d=/^[\s\ufeff]/.test(f);else if(c.type==CKEDITOR.NODE_ELEMENT){if((0<c.$.offsetWidth||t&&c.is("br"))&&!c.data("cke-bookmark"))if(m&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(f=c.getText(),o.test(f))c=null;else for(g=c.$.getElementsByTagName("*"),T=0;E=g[T++];)if(!CKEDITOR.dtd.$removeEmpty[E.nodeName.toLowerCase()]){c=null;break}c&&(d=!!f.length)}else c=null}else d=1;if(d&&m&&(u?s=l:this.setEndAfter(l)),c){if(d=c.getNext(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=n(l.getParent()))}r&&s&&(p=r.contains(s)?s:r,this.setStartBefore(p),this.setEndAfter(p));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:l=new CKEDITOR.dom.range(this.root),h=this.root,l.setStartAt(h,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var v,y,C=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),b=null,O=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(b){if(b.equals(e))return void(b=null)}else b=e;else if(b)return;var t=C(e);return t||(v=e),t},i=function(e){var t=O(e);return!t&&e.is&&e.is("br")&&(y=e),t};if(l.guard=O,l=l.lastBackward(),v=v||h,this.setStartAt(v,!v.is("br")&&(!l&&this.checkStartOfBlock()||l&&v.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var I=CKEDITOR.dom.walker.whitespaces(),D=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(e){return!I(e)&&!D(e)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}l=this.clone(),l.collapse(),l.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),l=new CKEDITOR.dom.walker(l),l.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?i:O,v=b=y=null,l=l.lastForward(),v=v||h,this.setEndAt(v,!l&&this.checkEndOfBlock()||l&&v.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),y&&this.setEndAfter(y)}},shrink:function(e,t,n){var o="boolean"==typeof n?n:!n||"boolean"!=typeof n.shrinkOnBlockBoundary||n.shrinkOnBlockBoundary,i=n&&n.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var a=this.clone(),r=this.startContainer,s=this.endContainer,l=this.startOffset,c=this.endOffset,u=n=1;r&&r.type==CKEDITOR.NODE_TEXT&&(l?l>=r.getLength()?a.setStartAfter(r):(a.setStartBefore(r),n=0):a.setStartBefore(r)),s&&s.type==CKEDITOR.NODE_TEXT&&(c?c>=s.getLength()?a.setEndAfter(s):(a.setEndAfter(s),u=0):a.setEndBefore(s));var a=new CKEDITOR.dom.walker(a),d=CKEDITOR.dom.walker.bookmark(),f=CKEDITOR.dom.walker.bogus();a.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var p;return a.guard=function(t,n){return!!(i&&f(t)||d(t))||!(e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||n&&t.equals(p)||!1===o&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))&&(n||t.type!=CKEDITOR.NODE_ELEMENT||(p=t),!0)},n&&(r=a[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(r,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),u&&(a.reset(),(a=a[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(a,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!n&&!u)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=n,this.endContainer||(this._setEndContainer(t),this.endOffset=n),e(this)},setEnd:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=n,this.startContainer||(this._setStartContainer(t),this.startOffset=n),e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(e,t){var n=this.createBookmark(),o=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(o),o.trim(),this.insertNode(o);var i=o.getBogus();return i&&i.remove(),o.appendBogus(),this.moveToBookmark(n),o},splitBlock:function(e,t){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),o=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=n.block,a=o.block,r=null;return n.blockLimit.equals(o.blockLimit)?("br"!=e&&(i||(i=this.fixBlock(!0,e),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),a||(a=this.fixBlock(!1,e))),n=i&&this.checkStartOfBlock(),o=a&&this.checkEndOfBlock(),this.deleteContents(),i&&i.equals(a)&&(o?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),a=null):n?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i=null):(a=this.splitElement(i,t||!1),i.is("ul","ol")||i.appendBogus())),{previousBlock:i,nextBlock:a,wasStartOfBlock:n,wasEndOfBlock:o,elementPath:r}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,t||!1),o=e.clone(!1,t||!1);return n.appendTo(o),o.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),o},removeEmptyBlocksAtEnd:function(){function e(e){return function(o){return!(t(o)||n(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.isEmptyInlineRemoveable()||e.is("table")&&o.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var n,o=this.createBookmark(),i=this[t?"endPath":"startPath"](),a=i.block||i.blockLimit;a&&!a.equals(i.root)&&!a.getFirst(e(a));)n=a.getParent(),this[t?"setEndAt":"setStartAt"](a,CKEDITOR.POSITION_AFTER_END),a.remove(1),a=n;this.moveToBookmark(o)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var n=t==CKEDITOR.START,i=this.clone();return i.collapse(n),i[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(i),i.evaluator=o(n),i[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),s.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),t=this.clone(),t.collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(t),e.evaluator=n(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),s.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),t=this.clone(),t.collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(t),e.evaluator=n(),e.checkForward()},getPreviousNode:function(e,t,n){var o=this.clone();return o.collapse(1),o.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),n=new CKEDITOR.dom.walker(o),n.evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var o=this.clone();return o.collapse(),o.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),n=new CKEDITOR.dom.walker(o),n.evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,n=this.endContainer;return!(e(t,n)&&e(n,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&s.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var o=e,i=n,a=void 0;o.type==CKEDITOR.NODE_ELEMENT&&o.isEditable(!1)&&(a=o[t?"getLast":"getFirst"](c)),i||a||(a=o[t?"getPrevious":"getNext"](c)),e=a}return!!n},moveToClosestEditablePosition:function(e,t){var n,o,i,a=0,r=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(n=new CKEDITOR.dom.range(this.root),n.moveToPosition(e,r[t?0:1])):n=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?a=1:(o=n[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(a=1,(i=o.type==CKEDITOR.NODE_ELEMENT)&&o.is(CKEDITOR.dtd.$block)&&"false"==o.getAttribute("contenteditable")?(n.setStartAt(o,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(o,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&i&&o.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(o,0),n.collapse()):n.moveToPosition(o,r[t?1:0])),a&&this.moveToRange(n),!!a},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();if(e.optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var o=e.next();return e.reset(),o&&o.equals(e.previous())?o:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:i(),getPreviousEditableNode:i(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.startContainer,n=this.endContainer,o=t.getAscendant("table",!0),i=n.getAscendant("table",!0);return o&&!this.root.contains(o)?null:CKEDITOR.env.safari&&o&&n.equals(this.root)?t.getAscendant(e,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):o&&i&&(o.equals(i)||o.contains(i)||i.contains(o))?t.getAscendant(e,!0):null},scrollIntoView:function(){var e,t,n,o=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),i=this.clone();i.optimize(),(n=i.startContainer.type==CKEDITOR.NODE_TEXT)?(t=i.startContainer.getText(),e=i.startContainer.split(i.startOffset),o.insertAfter(i.startContainer)):i.insertNode(o),o.scrollIntoView(),n&&(i.startContainer.setText(t),e.remove()),o.remove()},getClientRects:function(){function e(e,t){var n,o,i,a=CKEDITOR.tools.array.map(e,function(e){return e}),r=new CKEDITOR.dom.range(t.root);if(t.startContainer instanceof CKEDITOR.dom.element&&(o=0===t.startOffset&&t.startContainer.hasAttribute("data-widget")),t.endContainer instanceof CKEDITOR.dom.element&&(i=(i=t.endOffset===(t.endContainer.getChildCount?t.endContainer.getChildCount():t.endContainer.length))&&t.endContainer.hasAttribute("data-widget")),o&&r.setStart(t.startContainer.getParent(),t.startContainer.getIndex()),i&&r.setEnd(t.endContainer.getParent(),t.endContainer.getIndex()+1),(o||i)&&(t=r),r=t.cloneContents(),r=CKEDITOR.dom.document.prototype.find.call(r,"[data-cke-widget-id]").toArray(),r=CKEDITOR.tools.array.map(r,function(e){var n=t.root.editor;return e=e.getAttribute("data-cke-widget-id"),n.widgets.instances[e].element}))return r=CKEDITOR.tools.array.map(r,function(e){var t;return t=e.getParent().hasClass("cke_widget_wrapper")?e.getParent():e,n=this.root.getDocument().$.createRange(),n.setStart(t.getParent().$,t.getIndex()),n.setEnd(t.getParent().$,t.getIndex()+1),t=n.getClientRects(),t.widgetRect=e.getClientRect(),t},t),CKEDITOR.tools.array.forEach(r,function(e){function t(o){CKEDITOR.tools.array.forEach(a,function(t,i){var r=CKEDITOR.tools.objectCompare(e[o],t);r||(r=CKEDITOR.tools.objectCompare(e.widgetRect,t)),r&&(Array.prototype.splice.call(a,i,e.length-o,e.widgetRect),n=!0)}),n||(o<a.length-1?t(o+1):a.push(e.widgetRect))}var n;t(0)}),a}function t(e,t,n){var i;return t.collapsed?n.startContainer instanceof CKEDITOR.dom.element?(e=n.checkStartOfBlock(),i=new CKEDITOR.dom.text(""),e?n.startContainer.append(i,!0):0===n.startOffset?i.insertBefore(n.startContainer.getFirst()):(n=n.startContainer.getChildren().getItem(n.startOffset-1),i.insertAfter(n)),t.setStart(i.$,0),t.setEnd(i.$,0),e=t.getClientRects(),i.remove()):n.startContainer instanceof CKEDITOR.dom.text&&(""===n.startContainer.getText()?(n.startContainer.setText(""),e=t.getClientRects(),n.startContainer.setText("")):e=[o(n.createBookmark())]):e=[o(n.createBookmark())],e}function n(e,t,n){return e=CKEDITOR.tools.extend({},e),t&&(e=CKEDITOR.tools.getAbsoluteRectPosition(n.document.getWindow(),e)),!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e}function o(e){var t=e.startNode;e=e.endNode;var n;return t.setText(""),t.removeStyle("display"),e?(e.setText(""),e.removeStyle("display"),n=[t.getClientRect(),e.getClientRect()],e.remove()):n=[t.getClientRect(),t.getClientRect()],t.remove(),{right:Math.max(n[0].right,n[1].right),bottom:Math.max(n[0].bottom,n[1].bottom),left:Math.min(n[0].left,n[1].left),top:Math.min(n[0].top,n[1].top),width:Math.abs(n[0].left-n[1].left),height:Math.max(n[0].bottom,n[1].bottom)-Math.min(n[0].top,n[1].top)}}return void 0!==this.document.getSelection?function(o){var i,a=this.root.getDocument().$.createRange();return a.setStart(this.startContainer.$,this.startOffset),a.setEnd(this.endContainer.$,this.endOffset),i=a.getClientRects(),i=e(i,this),i.length||(i=t(i,a,this)),CKEDITOR.tools.array.map(i,function(e){return n(e,o,this)},this)}:function(e){return[n(o(this.createBookmark()),e,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var n,o,i,a,r=this.getCommonAncestor(),s=this.getBoundaryNodes(),l=[];if(r&&r.find)for(o=r.find(e),n=0;n<o.count();n++)r=o.getItem(n),(t||!r.isReadOnly())&&(i=r.getPosition(s.startNode)&CKEDITOR.POSITION_FOLLOWING||s.startNode.equals(r),a=r.getPosition(s.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||s.endNode.equals(r),i&&a&&l.push(r));return l}},CKEDITOR.dom.range.mergeRanges=function(e){return CKEDITOR.tools.array.reduce(e,function(e,t){var n=e[e.length-1],o=!1;if(t=t.clone(),t.enlarge(CKEDITOR.ENLARGE_ELEMENT),n){var i=new CKEDITOR.dom.range(t.root),o=new CKEDITOR.dom.walker(i),a=CKEDITOR.dom.walker.whitespaces();for(i.setStart(n.endContainer,n.endOffset),i.setEnd(t.startContainer,t.startOffset),i=o.next();a(i)||t.endContainer.equals(i);)i=o.next();o=!i}return o?n.setEnd(t.endContainer,t.endOffset):e.push(t),e},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){1>arguments.length||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e){var t=[];return e.forEach(function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function n(e,o,i,a){e:{null==a&&(a=t(i));for(var r;r=a.shift();)if(r.getDtd().p){a={element:r,remaining:a};break e}a=null}return a?(r=CKEDITOR.filter.instances[a.element.data("cke-filter")])&&!r.check(o)?n(e,o,i,a.remaining):(o=new CKEDITOR.dom.range(a.element),o.selectNodeContents(a.element),o=o.createIterator(),o.enlargeBr=e.enlargeBr,o.enforceRealBlocks=e.enforceRealBlocks,o.activeFilter=o.filter=r,e._.nestedEditable={element:a.element,container:i,remaining:a.remaining,iterator:o},1):0}function o(e,t,n){return!!t&&(e=e.clone(),e.collapse(!n),e.checkBoundaryOfElement(t,n?CKEDITOR.START:CKEDITOR.END))}var i=/^[\r\n\t ]+$/,a=CKEDITOR.dom.walker.bookmark(!1,!0),r=CKEDITOR.dom.walker.whitespaces(!0),s=function(e){return a(e)&&r(e)},l={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var t,r,c,u,d;if(e=e||"p",this._.nestedEditable){if(t=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,t;if(this.activeFilter=this.filter,n(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var f=this.range.clone();r=f.startPath();var p=f.endPath(),h=!f.collapsed&&o(f,r.block),m=!f.collapsed&&o(f,p.block,1);f.shrink(CKEDITOR.SHRINK_ELEMENT,!0),h&&f.setStartAt(r.block,CKEDITOR.POSITION_BEFORE_END),m&&f.setEndAt(p.block,CKEDITOR.POSITION_AFTER_START),r=f.endContainer.hasAscendant("pre",!0)||f.startContainer.hasAscendant("pre",!0),f.enlarge(this.forceBrBreak&&!r||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),f.collapsed||(r=new CKEDITOR.dom.walker(f.clone()),p=CKEDITOR.dom.walker.bookmark(!0,!0),r.evaluator=p,this._.nextNode=r.next(),r=new CKEDITOR.dom.walker(f.clone()),r.evaluator=p,r=r.previous(),this._.lastNode=r.getNextSourceNode(!0,null,f.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(p=this.range.clone(),p.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),p.checkEndOfBlock()&&(p=new CKEDITOR.dom.elementPath(p.endContainer,p.root),this._.lastNode=(p.block||p.blockLimit).getNextSourceNode(!0))),this._.lastNode&&f.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=f.document.createText(""),this._.lastNode.insertAfter(r)),f=null),this._.started=1,r=f}for(p=this._.nextNode,f=this._.lastNode,this._.nextNode=null;p;){var h=0,m=p.hasAscendant("pre"),g=p.type!=CKEDITOR.NODE_ELEMENT,E=0;if(g)p.type==CKEDITOR.NODE_TEXT&&i.test(p.getText())&&(g=0);else{var T=p.getName();if(CKEDITOR.dtd.$block[T]&&"false"==p.getAttribute("contenteditable")){t=p,n(this,e,t);break}if(p.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){if("br"==T)g=1;else if(!r&&!p.getChildCount()&&"hr"!=T){t=p,c=p.equals(f);break}r&&(r.setEndAt(p,CKEDITOR.POSITION_BEFORE_START),"br"!=T&&(this._.nextNode=p)),h=1}else{if(p.getFirst()){r||(r=this.range.clone(),r.setStartAt(p,CKEDITOR.POSITION_BEFORE_START)),p=p.getFirst();continue}g=1}}if(g&&!r&&(r=this.range.clone(),r.setStartAt(p,CKEDITOR.POSITION_BEFORE_START)),c=(!h||g)&&p.equals(f),r&&!h)for(;!p.getNext(s)&&!c;){if(T=p.getParent(),T.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){h=1,g=0,c||T.equals(f),r.setEndAt(T,CKEDITOR.POSITION_BEFORE_END);break}p=T,g=1,c=p.equals(f),E=1}if(g&&r.setEndAt(p,CKEDITOR.POSITION_AFTER_END),p=this._getNextSourceNode(p,E,f),(c=!p)||h&&r)break}if(!t){if(!r)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;t=new CKEDITOR.dom.elementPath(r.startContainer,r.root),p=t.blockLimit,h={div:1,th:1,td:1},t=t.block,!t&&p&&!this.enforceRealBlocks&&h[p.getName()]&&r.checkStartOfBlock()&&r.checkEndOfBlock()&&!p.equals(r.root)?t=p:!t||this.enforceRealBlocks&&t.is(l)?(t=this.range.document.createElement(e),r.extractContents().appendTo(t),t.trim(),r.insertNode(t),u=d=!0):"li"!=t.getName()?r.checkStartOfBlock()&&r.checkEndOfBlock()||(t=t.clone(!1),r.extractContents().appendTo(t),t.trim(),d=r.splitBlock(),u=!d.wasStartOfBlock,d=!d.wasEndOfBlock,r.insertNode(t)):c||(this._.nextNode=t.equals(f)?null:this._getNextSourceNode(r.getBoundaryNodes().endNode,1,f))}return u&&(u=t.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&("br"==u.getName()?u.remove():u.getLast()&&"br"==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove()),d&&(u=t.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(a)||u.getNext(a))&&u.remove(),this._.nextNode||(this._.nextNode=c||t.equals(f)||!f?null:this._getNextSourceNode(t,1,f)),t},_getNextSourceNode:function(e,t,n){function o(e){return!(e.equals(n)||e.equals(i))}var i=this.range.root;for(e=e.getNextSourceNode(t,null,o);!a(e);)e=e.getNextSourceNode(t,null,o);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){this.uiItems=[],this.exec=function(n){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==t.exec.call(this,e,n))},this.refresh=function(e,n){return!(this.readOnly||!e.readOnly)||(this.context&&!n.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),!1===this.fire("refresh",{editor:e,path:n})||t.refresh&&!1!==t.refresh.apply(this,arguments)))};var n;this.checkAllowed=function(t){return t||"boolean"!=typeof n?n=e.activeFilter.checkFeature(this):n},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,n,o,i){var a,s;e=[];for(a in t){s=t[a],s="boolean"==typeof s?{}:"function"==typeof s?{match:s}:_(s),"$"!=a.charAt(0)&&(s.elements=a),n&&(s.featureName=n.toLowerCase());var l=s;l.elements=r(l.elements,/\s+/)||null,l.propertiesOnly=l.propertiesOnly||!0===l.elements;var c=/\s*,\s*/,u=void 0;for(u in w){l[u]=r(l[u],c)||null;var d=l,f=x[u],p=r(l[x[u]],c),h=l[u],m=[],g=!0,T=void 0;p?g=!1:p={};for(T in h)"!"==T.charAt(0)&&(T=T.slice(1),m.push(T),p[T]=!0,g=!1);for(;T=m.pop();)h[T]=h["!"+T],delete h["!"+T];d[f]=!g&&p||null}l.match=l.match||null,o.push(s),e.push(s)}t=i.elements,i=i.generic;var v;for(n=0,o=e.length;n<o;++n){a=_(e[n]),s=!0===a.classes||!0===a.styles||!0===a.attributes,l=a,u=f=c=void 0;for(c in w)l[c]=E(l[c]);d=!0;for(u in x){c=x[u],f=l[c],p=[],h=void 0;for(h in f)-1<h.indexOf("*")?p.push(new RegExp("^"+h.replace(/\*/g,".*")+"$")):p.push(h);f=p,f.length&&(l[c]=f,d=!1)}if(l.nothingRequired=d,l.noProperties=!(l.attributes||l.classes||l.styles),!0===a.elements||null===a.elements)i[s?"unshift":"push"](a);else for(v in l=a.elements,delete a.elements,l)t[v]?t[v][s?"unshift":"push"](a):t[v]=[a]}}function t(e,t,o,i){if((!e.match||e.match(t))&&(i||s(e,t))&&(e.propertiesOnly||(o.valid=!0),o.allAttributes||(o.allAttributes=n(e.attributes,t.attributes,o.validAttributes)),o.allStyles||(o.allStyles=n(e.styles,t.styles,o.validStyles)),!o.allClasses)){if(e=e.classes,t=t.classes,i=o.validClasses,e)if(!0===e)e=!0;else{for(var a,r=0,l=t.length;r<l;++r)a=t[r],i[a]||(i[a]=e(a));e=!1}else e=!1;o.allClasses=e}}function n(e,t,n){if(!e)return!1;if(!0===e)return!0;for(var o in t)n[o]||(n[o]=e(o));return!1}function o(e,t,n){if(!e.match||e.match(t)){if(e.noProperties)return!1;if(n.hadInvalidAttribute=i(e.attributes,t.attributes)||n.hadInvalidAttribute,n.hadInvalidStyle=i(e.styles,t.styles)||n.hadInvalidStyle,e=e.classes,t=t.classes,e){for(var o=!1,a=!0===e,r=t.length;r--;)(a||e(t[r]))&&(t.splice(r,1),o=!0);e=o}else e=!1;n.hadInvalidClass=e||n.hadInvalidClass}}function i(e,t){if(!e)return!1;var n,o=!1,i=!0===e;for(n in t)(i||e(n))&&(delete t[n],o=!0);return o}function a(e,t,n){return!(e.disabled||e.customConfig&&!n||!t)&&(e._.cachedChecks={},!0)}function r(e,t){if(!e)return!1;if(!0===e)return e;if("string"==typeof e)return"*"==(e=k(e))||CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return!!e.length&&CKEDITOR.tools.convertArrayToObject(e);var n,o={},i=0;for(n in e)o[n]=e[n],i++;return!!i&&o}function s(e,t){if(e.nothingRequired)return!0;var n,o,i,a;if(i=e.requiredClasses)for(a=t.classes,n=0;n<i.length;++n)if("string"==typeof(o=i[n])){if(-1==CKEDITOR.tools.indexOf(a,o))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(a,o))return!1;return l(t.styles,e.requiredStyles)&&l(t.attributes,e.requiredAttributes)}function l(e,t){if(!t)return!0;for(var n,o=0;o<t.length;++o)if("string"==typeof(n=t[o])){if(!(n in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,n))return!1;return!0}function c(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]="cke-test";return t}function u(e){var t,n,o,i,a={},r=1;for(e=k(e);t=e.match(N);)(n=t[2])?(o=d(n,"styles"),i=d(n,"attrs"),n=d(n,"classes")):o=i=n=null,a["$"+r++]={elements:t[1],classes:n,styles:o,attributes:i},e=e.slice(t[0].length);return a}function d(e,t){var n=e.match(A[t]);return n?k(n[1]):null}function f(e){var t=e.styleBackup=e.attributes.style,n=e.classBackup=e.attributes.class;e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=n?n.split(/\s+/):[])}function p(e,n,i,a){var r,s=0;if(a.toHtml&&(n.name=n.name.replace(P,"$1")),a.doCallbacks&&e.elementCallbacks){e:{r=e.elementCallbacks;for(var l,c=0,u=r.length;c<u;++c)if(l=r[c](n)){r=l;break e}r=void 0}if(r)return r}if(a.doTransform&&(r=e._.transformations[n.name])){for(f(n),c=0;c<r.length;++c)C(e,n,r[c]);m(n)}if(a.doFilter){e:{c=n.name,u=e._,e=u.allowedRules.elements[c],r=u.allowedRules.generic,c=u.disallowedRules.elements[c],u=u.disallowedRules.generic,l=a.skipRequired;var d,p,h={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(e||r){if(f(n),c)for(d=0,p=c.length;d<p;++d)if(!1===o(c[d],n,h)){e=null;break e}if(u)for(d=0,p=u.length;d<p;++d)o(u[d],n,h);if(e)for(d=0,p=e.length;d<p;++d)t(e[d],n,h,l);if(r)for(d=0,p=r.length;d<p;++d)t(r[d],n,h,l);e=h}else e=null}if(!e||!e.valid)return i.push(n),1;p=e.validAttributes;var E=e.validStyles;r=e.validClasses;var c=n.attributes,T=n.styles,u=n.classes;l=n.classBackup;var v,y,b=n.styleBackup,O=[],h=[],I=/^data-cke-/;if(d=!1,delete c.style,delete c.class,delete n.classBackup,delete n.styleBackup,!e.allAttributes)for(v in c)p[v]||(I.test(v)?v==(y=v.replace(/^data-cke-saved-/,""))||p[y]||(delete c[v],d=!0):(delete c[v],d=!0));if(!e.allStyles||e.hadInvalidStyle){for(v in T)e.allStyles||E[v]?O.push(v+":"+T[v]):d=!0;O.length&&(c.style=O.sort().join("; "))}else b&&(c.style=b);if(!e.allClasses||e.hadInvalidClass){for(v=0;v<u.length;++v)(e.allClasses||r[u[v]])&&h.push(u[v]);h.length&&(c.class=h.sort().join(" ")),l&&h.length<l.split(/\s+/).length&&(d=!0)}else l&&(c.class=l);if(d&&(s=1),!a.skipFinalValidation&&!g(n))return i.push(n),1}return a.toHtml&&(n.name=n.name.replace(L,"cke:$1")),s}function h(e){var t,n=[];for(t in e)-1<t.indexOf("*")&&n.push(t.replace(/\*/g,".*"));return n.length?new RegExp("^(?:"+n.join("|")+")$"):null}function m(e){var t,n=e.attributes;delete n.style,delete n.class,(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(n.style=t),e.classes.length&&(n.class=e.classes.sort().join(" "))}function g(e){switch(e.name){case"a":if(!(e.children.length||e.attributes.name||e.attributes.id))return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function E(e){if(!e)return!1;if(!0===e)return!0;var t=h(e);return function(n){return n in e||t&&n.match(t)}}function T(){return new CKEDITOR.htmlParser.element("br")}function v(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||R.$block[e.name])}function y(e,t,n){var o=e.name;if(R.$empty[o]||!e.children.length)"hr"==o&&"br"==t?e.replaceWith(T()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(R.$block[o]||"tr"==o)if("br"==t)e.previous&&!v(e.previous)&&(t=T(),t.insertBefore(e)),e.next&&!v(e.next)&&(t=T(),t.insertAfter(e)),e.replaceWithChildren();else{var i,o=e.children;e:{i=R[t];for(var a,r=0,s=o.length;r<s;++r)if(a=o[r],a.type==CKEDITOR.NODE_ELEMENT&&!i[a.name]){i=!1;break e}i=!0}if(i)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{i=e.parent;for(var l,c,r=i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==i.name,s=o.length;0<s;)a=o[--s],r&&(a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&R.$inline[a.name])?(l||(l=new CKEDITOR.htmlParser.element(t),l.insertAfter(e),n.push({check:"parent-down",el:l})),l.add(a,0)):(l=null,c=R[i.name]||R.span,a.insertAfter(e),i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a.type!=CKEDITOR.NODE_ELEMENT||c[a.name]||n.push({check:"el-up",el:a}));e.remove()}}else o in{style:1,script:1}?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function C(e,t,n){var o,i;for(o=0;o<n.length;++o)if(i=n[o],!(i.check&&!e.check(i.check,!1)||i.left&&!i.left(t))){i.right(t,S);break}}function b(e,t){var n,o,i,a,r=t.getDefinition(),s=r.attributes,l=r.styles;if(e.name!=r.element)return!1;for(n in s)if("class"==n){for(r=s[n].split(/\s+/),i=e.classes.join("|");a=r.pop();)if(-1==i.indexOf(a))return!1}else if(e.attributes[n]!=s[n])return!1;for(o in l)if(e.styles[o]!=l[o])return!1;return!0}function O(e,t){var n,o;return"string"==typeof e?n=e:e instanceof CKEDITOR.style?o=e:(n=e[0],o=e[1]),[{element:n,left:o,right:function(e,n){n.transform(e,t)}}]}function I(e){return function(t){return b(t,e)}}function D(e){return function(t,n){n[e](t)}}var R=CKEDITOR.dtd,_=CKEDITOR.tools.copy,k=CKEDITOR.tools.trim,K=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e,t){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var n=this.editor=e instanceof CKEDITOR.editor?e:null;if(n&&!t){this.customConfig=!0;var o=n.config.allowedContent;!0===o?this.disabled=!0:(o||(this.customConfig=!1),this.allow(o,"config",1),this.allow(n.config.extraAllowedContent,"extra",1),this.allow(K[n.enterMode]+" "+K[n.shiftEnterMode],"default",1),this.disallow(n.config.disallowedContent))}else this.customConfig=!1,this.allow(t||e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,n,o){if(!a(this,t,o))return!1;var i,r;if("string"==typeof t)t=u(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),n,o);i=t.getDefinition(),t={},o=i.attributes,t[i.element]=i={styles:i.styles,requiredStyles:i.styles&&CKEDITOR.tools.objectKeys(i.styles)},o&&(o=_(o),i.classes=o.class?o.class.split(/\s+/):null,i.requiredClasses=i.classes,delete o.class,i.attributes=o,i.requiredAttributes=o&&CKEDITOR.tools.objectKeys(o))}else if(CKEDITOR.tools.isArray(t)){for(i=0;i<t.length;++i)r=this.allow(t[i],n,o);return r}return e(this,t,n,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,n,o){if(this.disabled)return!1;var i,a=this,r=[],s=this.editor&&this.editor.config.protectedSource,l=!1,c={doFilter:!n,doTransform:!0,doCallbacks:!0,toHtml:t};e.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;if(!t||"span"!=e.name||!~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-"))if(1&(i=p(a,e,r,c)))l=!0;else if(2&i)return!1}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var o=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));n=[];var u,d,f;if(s)for(d=0;d<s.length;++d)if((f=o.match(s[d]))&&f[0].length==o.length){n=!0;break e}o=CKEDITOR.htmlParser.fragment.fromHtml(o),1==o.children.length&&(u=o.children[0]).type==CKEDITOR.NODE_ELEMENT&&p(a,u,n,c),n=!n.length}n||r.push(e)}},null,!0),r.length&&(l=!0);var u;e=[],o=K[o||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var d;n=r.pop();)n.type==CKEDITOR.NODE_ELEMENT?y(n,o,e):n.remove();for(;u=e.pop();)if(n=u.el,n.parent)switch(d=R[n.parent.name]||R.span,u.check){case"it":R.$removeEmpty[n.name]&&!n.children.length?y(n,o,e):g(n)||y(n,o,e);break;case"el-up":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||d[n.name]||y(n,o,e);break;case"parent-down":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||d[n.name]||y(n.parent,o,e)}return l},checkFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return!!a(this,t,!0)&&("string"==typeof t&&(t=u(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(e){if(!this.disabled&&e){var t,n,o,i=[];for(t=0;t<e.length&&!o;++t)("string"==typeof(n=e[t])||n instanceof CKEDITOR.style)&&this.check(n)&&(o=n);if(o){for(t=0;t<e.length;++t)i.push(O(e[t],o));this.addTransformations(i)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),!e.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(e.requiredContent))},addTransformations:function(e){var t,n;if(!this.disabled&&e){var o,i=this._.transformations;for(o=0;o<e.length;++o){t=e[o];var a=void 0,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0;for(n=[],r=0;r<t.length;++r)s=t[r],"string"==typeof s?(s=s.split(/\s*:\s*/),l=s[0],c=null,u=s[1]):(l=s.check,c=s.left,u=s.right),a||(a=s,a=a.element?a.element:l?l.match(/^([a-z0-9]+)/i)[0]:a.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=I(c)),n.push({check:l==a?null:l,left:c,right:"string"==typeof u?D(u):u});t=a,i[t]||(i[t]=[]),i[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var o=e.length;o--;)if(this.check(e[o],t,n))return!0;return!1}var i,a;if("string"==typeof e){if((a=e+"<"+(!1===t?"0":"1")+(n?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[a];i=u(e).$1;var r=i.styles,o=i.classes;i.name=i.elements,i.classes=o=o?o.split(/\s*,\s*/):[],i.styles=c(r),i.attributes=c(i.attributes),i.children=[],o.length&&(i.attributes.class=o.join(" ")),r&&(i.attributes.style=CKEDITOR.tools.writeCssText(i.styles))}else i=e.getDefinition(),r=i.styles,o=i.attributes||{},r&&!CKEDITOR.tools.isEmpty(r)?(r=_(r),o.style=CKEDITOR.tools.writeCssText(r,!0)):r={},i={name:i.element,attributes:o,classes:o.class?o.class.split(/\s+/):[],styles:r,children:[]};var s,r=CKEDITOR.tools.clone(i),l=[];if(!1!==t&&(s=this._.transformations[i.name])){for(o=0;o<s.length;++o)C(this,i,s[o]);m(i)}return p(this,r,l,{doFilter:!0,doTransform:!1!==t,skipRequired:!n,skipFinalValidation:!n}),0<l.length?n=!1:((t=i.attributes.class)&&(i.attributes.class=i.attributes.class.split(" ").sort().join(" ")),n=CKEDITOR.tools.objectCompare(i.attributes,r.attributes,!0),t&&(i.attributes.class=t)),"string"==typeof e&&(this._.cachedChecks[a]=n),n},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,o){var i,a=e.slice();if(this.check(K[n]))return n;for(o||(a=a.reverse());i=a.pop();)if(this.check(i))return t[i];return CKEDITOR.ENTER_BR}}(),clone:function(){var e=new CKEDITOR.filter,t=CKEDITOR.tools.clone;return e.allowedContent=t(this.allowedContent),e._.allowedRules=t(this._.allowedRules),e.disallowedContent=t(this.disallowedContent),e._.disallowedRules=t(this._.disallowedRules),e._.transformations=t(this._.transformations),e.disabled=this.disabled,e.editor=this.editor,e},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var S,w={styles:1,attributes:1,classes:1},x={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},N=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,A={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},P=/^cke:(object|embed|param)$/,L=/^(object|embed|param)$/;S=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){if(!((n=n||t)in e.styles)){var o=e.attributes[t];o&&(/^\d+$/.test(o)&&(o+="px"),e.styles[n]=o)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){if(!((n=n||t)in e.attributes)){var o=e.styles[t],i=o&&o.match(/^(\d+)(?:\.\d*)?px$/);i?e.attributes[n]=i[1]:"cke-test"==o&&(e.attributes[n]="cke-test")}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;"left"!=t&&"right"!=t||(e.styles.float=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles.float;"left"!=t&&"right"!=t||(e.attributes.align=t)}delete e.styles.float},splitBorderShorthand:function(e){if(e.styles.border){var t=CKEDITOR.tools.style.parse.border(e.styles.border);t.color&&(e.styles["border-color"]=t.color),t.style&&(e.styles["border-style"]=t.style),t.width&&(e.styles["border-width"]=t.width),delete e.styles.border}},listTypeToStyle:function(e){if(e.attributes.type)switch(e.attributes.type){case"a":e.styles["list-style-type"]="lower-alpha";break;case"A":e.styles["list-style-type"]="upper-alpha";break;case"i":e.styles["list-style-type"]="lower-roman";break;case"I":e.styles["list-style-type"]="upper-roman";break;case"1":e.styles["list-style-type"]="decimal";break;default:e.styles["list-style-type"]=e.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=n[t[0]],e.styles["margin-right"]=n[t[1]],e.styles["margin-bottom"]=n[t[2]],e.styles["margin-left"]=n[t[3]]}if(e.styles.margin){var n=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:b,transform:function(e,t){if("string"==typeof t)e.name=t;else{var n,o,i,a,r=t.getDefinition(),s=r.styles,l=r.attributes;e.name=r.element;for(n in l)if("class"==n)for(r=e.classes.join("|"),i=l[n].split(/\s+/);a=i.pop();)-1==r.indexOf(a)&&e.classes.push(a);else e.attributes[n]=l[n];for(o in s)e.styles[o]=s[o]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,t.call(this)},n,this)}},add:function(e,t){var n=e.getCustomData("focusmanager");if(!n||n!=this){n&&n.remove(e);var n="focus",o="blur";t&&(CKEDITOR.env.ie?(n="focusin",o="focusout"):CKEDITOR.event.useCapture=1);var i={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,i.focus,this),e.on(o,i.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",i)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){t=t.data;var n=t.getKeystroke(),o=this.keystrokes[n],i=this._.editor;return e=!1===i.fire("key",{keyCode:n,domEvent:t}),e||(o&&(e=!1!==i.execCommand(o,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[n])),e&&t.preventDefault(!0),!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",n,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var o=this;t=function(){o[e].dir=o.rtl[e]?"rtl":"ltr",n(e,o[e])},this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var n=this.languages;t=t||navigator.userLanguage||navigator.language||e;var o=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),i=o[1],o=o[2];return n[i+"-"+o]?i=i+"-"+o:n[i]||(i=null),CKEDITOR.lang.detect=i?function(){return i}:function(e){return e},i||e}}}(),CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(n,o,i,a){var r="string"==typeof n;r&&(n=[n]),i||(i=CKEDITOR);var s=n.length,l=[],c=[],u=function(e){o&&(r?o.call(i,e):o.call(i,l,c))};if(0===s)u(!0);else{var d=function(e,t){(t?l:c).push(e),0>=--s&&(a&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),u(t))},f=function(n,o){e[n]=1;var i=t[n];delete t[n];for(var a=0;a<i.length;a++)i[a](n,o)};a&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var p=0;p<s;p++)!function(n){if(e[n])d(n,!0);else{var i=t[n]||(t[n]=[]);if(i.push(d),!(1<i.length)){var a=new CKEDITOR.dom.element("script");a.setAttributes({type:"text/javascript",src:n}),o&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?a.$.onreadystatechange=function(){"loaded"!=a.$.readyState&&"complete"!=a.$.readyState||(a.$.onreadystatechange=null,f(n,!0))}:(a.$.onload=function(){setTimeout(function(){f(n,!0)},0)},a.$.onerror=function(){f(n,!1)})),a.appendTo(CKEDITOR.document.getHead())}}}(n[p])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(n,o){var i=this;t.push({scriptUrl:n,callback:function(){o&&o.apply(this,arguments),t.shift(),e.call(i)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){e=e.split(",");for(var o=0;o<e.length;o++){var i=e[o];n||(t=t.replace(/[^\/]+$/,function(e){return n=e,""})),this.externals[i]={dir:t,file:n||this.fileName+".js"}}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var o=this.loaded,i=this.registered,a=[],r={},s={},l=0;l<e.length;l++){var c=e[l];if(c)if(o[c]||i[c])s[c]=this.get(c);else{var u=this.getFilePath(c);a.push(u),u in r||(r[u]=[]),r[u].push(c)}}CKEDITOR.scriptLoader.load(a,function(e,i){if(i.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+r[i[0]].join(",")+'" was not found at "'+i[0]+'".');for(var a=0;a<e.length;a++)for(var l=r[e[a]],c=0;c<l.length;c++){var u=l[c];s[u]=this.get(u),o[u]=1}t.call(n,s)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var t={};return function(n,o,i){var a={},r=function(n){e.call(this,n,function(e){CKEDITOR.tools.extend(a,e);var n,s=[];for(n in e){var l=e[n],c=l&&l.requires;if(!t[n]){if(l.icons)for(var u=l.icons.split(","),d=u.length;d--;)CKEDITOR.skin.addIcon(u[d],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+u[d]+".png");t[n]=1}if(c)for(c.split&&(c=c.split(",")),l=0;l<c.length;l++)a[c[l]]||s.push(c[l])}if(s.length)r.call(this,s);else{for(n in a)l=a[n],l.onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete a[n],l.onLoad._called=1);o&&o.call(i||window,a)}},this)};r.call(this,n)}}),CKEDITOR.plugins.setLang=function(e,t,n){var o=this.get(e);e=o.langEntries||(o.langEntries={}),o=o.lang||(o.lang=[]),o.split&&(o=o.split(",")),-1==CKEDITOR.tools.indexOf(o,t)&&o.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var o=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(o,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],o=t&&t.command&&this.editor.getCommand(t.command),n=n&&n.create.apply(this,t.args);return this.instances[e]=n,o&&o.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,i,r){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==i){if(!(i instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!r)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!n(i,r))throw Error('The specified element mode is not supported on element: "'+i.getName()+'".');this.element=i,this.elementMode=r,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(i.getId()||i.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||t(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",o),this.on("selectionChange",function(e){a(this,e.data.path)}),this.on("activeFilterChange",function(){a(this,this.elementPath(),!0)}),this.on("mode",o),this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var e=this.createRange();e.selectNodeContents(this.editable()),e.shrink(CKEDITOR.SHRINK_ELEMENT,!0),e.collapse(),this.getSelection().selectRanges([e])}this.focus()}}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?s(this,e):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function t(){do{var e="editor"+ ++h}while(CKEDITOR.instances[e]);return e}function n(e,t){return t==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is("textarea"):t==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1}function o(){var e,t=this.commands;for(e in t)i(this,t[e])}function i(e,t){t[t.startDisabled?"disable":e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function a(e,t,n){if(t){var o,i,a=e.commands;for(i in a)o=a[i],(n||o.contextSensitive)&&o.refresh(e,t)}}function r(e){var t=e.config.customConfig;if(!t)return!1;var t=CKEDITOR.getUrl(t),n=m[t]||(m[t]={});return n.fn?(n.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=t&&r(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},r(e)}),!0}function s(e,t){e.on("customConfigLoaded",function(){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}n=e.config,e.readOnly=!!n.readOnly||(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p),e.tabIndex=n.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:n.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),l(e)}),t&&null!=t.customConfig&&(e.config.customConfig=t.customConfig),r(e)||e.fireOnce("customConfigLoaded")}function l(e){CKEDITOR.skin.loadPart("editor",function(){c(e)})}function c(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,function(t,n){var o=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(n),e.title="string"==typeof o||!1===o?o:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),u(e)})}function u(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})},null,null,1),d(e)})}function d(e){function t(e){return e?(CKEDITOR.tools.isArray(e)&&(e=e.join(",")),e.replace(/\s/g,"")):""}var n=e.config,o=t(n.plugins),i=t(n.extraPlugins),a=t(n.removePlugins);if(i)var r=new RegExp("(?:^|,)(?:"+i.replace(/,/g,"|")+")(?=,|$)","g"),o=o.replace(r,""),o=o+","+i;if(a)var s=new RegExp("(?:^|,)(?:"+a.replace(/,/g,"|")+")(?=,|$)","g"),o=o.replace(s,"");CKEDITOR.env.air&&(o+=",adobeair"),CKEDITOR.plugins.load(o.split(","),function(t){var o=[],i=[],a=[];e.plugins=CKEDITOR.tools.extend({},e.plugins,t);for(var r in t){var l,c=t[r],u=c.lang,d=null,f=c.requires;if(CKEDITOR.tools.isArray(f)&&(f=f.join(",")),f&&(l=f.match(s)))for(;f=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:f.replace(",",""),requiredBy:r});u&&!e.lang[r]&&(u.split&&(u=u.split(",")),0<=CKEDITOR.tools.indexOf(u,e.langCode)?d=e.langCode:(d=e.langCode.replace(/-.*/,""),d=d!=e.langCode&&0<=CKEDITOR.tools.indexOf(u,d)?d:0<=CKEDITOR.tools.indexOf(u,"en")?"en":u[0]),c.langEntries&&c.langEntries[d]?(e.lang[r]=c.langEntries[d],d=null):a.push(CKEDITOR.getUrl(c.path+"lang/"+d+".js"))),i.push(d),o.push(c)}CKEDITOR.scriptLoader.load(a,function(){for(var t=["beforeInit","init","afterInit"],a=0;a<t.length;a++)for(var r=0;r<o.length;r++){var s=o[r];0===a&&i[r]&&s.lang&&s.langEntries&&(e.lang[s.name]=s.langEntries[i[r]]),s[t[a]]&&s[t[a]](e)}for(e.fireOnce("pluginsLoaded"),n.keystrokes&&e.setKeystroke(e.config.keystrokes),r=0;r<e.config.blockedKeystrokes.length;r++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[r]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)})})}function f(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}function p(e,t){for(var n,o,i,a=new CKEDITOR.dom.documentFragment,r=0;r<e.length;r++){var s=e[r],l=s.startContainer.getAscendant("tr",!0);!function(e){var t=e.startContainer,n=e.endContainer;return!(!t.is||!(t.is("tr")||t.is("td")&&t.equals(n)&&e.endOffset===t.getChildCount()))}(s)?a.append(s.cloneContents()):(n||(n=l.getAscendant("table").clone(),n.append(l.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),a.append(n),n=n.findOne("thead, tbody, tfoot")),o&&o.equals(l)||(o=l,i=l.clone(),n.append(i)),i.append(function(e){var t=e.startContainer;return t.is("tr")?e.cloneContents():t.clone(!0)}(s)))}return n?a:t.getHtmlFromRange(e[0])}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var h=0,m={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(this[o])return CKEDITOR.warn("editor-plugin-conflict",{plugin:e,replacedWith:o}),!0}return!1}},addCommand:function(e,t){t.name=e.toLowerCase();var n=t instanceof CKEDITOR.command?t:new CKEDITOR.command(this,t);return this.mode&&i(this,n),this.commands[e]=n},_attachToForm:function(){function e(e){t.updateElement(),t._.required&&!n.getValue()&&!1===t.fire("required")&&e.data.preventDefault()}var t=this,n=t.element,o=new CKEDITOR.dom.element(n.$.form);n.is("textarea")&&o&&(o.on("submit",e),function(e){return!!(e&&e.call&&e.apply)}(o.$.submit)&&(o.$.submit=CKEDITOR.tools.override(o.$.submit,function(t){return function(){e(),t.apply?t.apply(this):t()}})),t.on("destroy",function(){o.removeListener("submit",e)}))},destroy:function(e){var t=CKEDITOR.filter.instances,n=this;this.fire("beforeDestroy"),!e&&f.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(t),function(e){e=t[e],n===e.editor&&e.destroy()}),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(!(e=this.getSelection()))return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),o={name:e,commandData:t||{},command:n};return!(!n||n.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",o)||(o.returnValue=n.exec(o.commandData),n.async||!1===this.fire("afterCommandExec",o)))&&o.returnValue},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,n){var o=!0,i=t;t&&"object"==typeof t&&(n=t.internal,i=t.callback,o=!t.noSnapshot),!n&&o&&this.fire("saveSnapshot"),!i&&n||this.once("dataReady",function(e){!n&&o&&this.fire("saveSnapshot"),i&&i.call(e.editor)}),e={dataValue:e},!n&&this.fire("setData",e),this._.data=e.dataValue,!n&&this.fire("afterSetData",e)},setReadOnly:function(e){e=null==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t,n){this.fire("insertHtml",{dataValue:e,mode:t,range:n})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},getSelectedHtml:function(e){var t=this.editable(),n=this.getSelection(),n=n&&n.getRanges();return t&&n&&0!==n.length?(t=p(n,t),e?t.getHtml():t):null},extractSelectedHtml:function(e,t){var n,o=this.editable(),i=this.getSelection().getRanges(),a=new CKEDITOR.dom.documentFragment;if(!o||0===i.length)return null;for(n=0;n<i.length;n++)a.append(o.extractHtmlFromRange(i[n],t));return t||this.getSelection().selectRanges([i[0]]),e?a.getHtml():a},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return f.call(this)},setKeystroke:function(){for(var e,t,n=this.keystrokeHandler.keystrokes,o=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],i=o.length;i--;)e=o[i],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?n[e]=t:delete n[e]},getCommandKeystroke:function(e,t){var n="string"==typeof e?this.getCommand(e):e,o=[];if(n){var i=CKEDITOR.tools.object.findKey(this.commands,n),a=this.keystrokeHandler.keystrokes;if(n.fakeKeystroke)o.push(n.fakeKeystroke);else for(var r in a)a[r]===i&&o.push(r)}return t?o:o[0]||null},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,this.activeEnterMode==e&&this.activeShiftEnterMode==t||(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))},showNotification:function(e){alert(e)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var o,i,a,r=0;o=this._.htmlPartsRegex.exec(n);)if(i=o.index,i>r&&(r=n.substring(r,i),a?a.push(r):this.onText(r)),r=this._.htmlPartsRegex.lastIndex,!(i=o[1])||(i=i.toLowerCase(),a&&CKEDITOR.dtd.$cdata[i]&&(this.onCDATA(a.join("")),a=null),a))if(a)a.push(o[0]);else if(i=o[3]){if(i=i.toLowerCase(),!/="/.test(i)){var s,l={},c=o[4];if(o=!!o[5],c)for(;s=e.exec(c);){var u=s[1].toLowerCase();s=s[2]||s[3]||s[4]||"",l[u]=!s&&t[u]?u:CKEDITOR.tools.htmlDecodeAttr(s)}this.onTagOpen(i,l,o),!a&&CKEDITOR.dtd.$cdata[i]&&(a=[])}}else(i=o[2])&&this.onComment(i);else this.onTagClose(i);n.length>r&&this.onText(n.substring(r,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("\x3c!--",e,"--\x3e")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,o=this.next;n&&(n.next=o),o&&(o.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),o=e.previous=this.previous,i=e.next=this.next;o&&(o.next=e),i&&(i.previous=e),t[n]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),o=e.next;t.splice(n+1,0,this),this.next=e.next,this.previous=e,e.next=this,o&&(o.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t=("function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e}),n=this.parent;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?"string"!=typeof n?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return!e.attributes["data-cke-survive"]&&("a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name])}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},o=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),i={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(a,r,s){function l(e){var t;if(0<g.length)for(var n=0;n<g.length;n++){var o=g[n],i=o.name,a=CKEDITOR.dtd[i],r=T.name&&CKEDITOR.dtd[T.name];r&&!r[i]||e&&a&&!a[e]&&CKEDITOR.dtd[e]?i==T.name&&(d(T,T.parent,1),n--):(t||(c(),t=1),o=o.clone(),o.parent=T,T=o,g.splice(n,1),n--)}}function c(){for(;E.length;)d(E.shift(),T)}function u(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,n=e.children.length,o=e.children[n-1];o&&o.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(o.value))?o.value=t:e.children.length=n-1)}}function d(t,n,o){n=n||T||m;var i=T;void 0===t.previous&&(f(n,t)&&(T=n,h.onTagOpen(s,{}),t.returnPoint=n=T),u(t),e(t)&&!t.children.length||n.add(t),"pre"==t.name&&(y=!1),"textarea"==t.name&&(v=!1)),t.returnPoint?(T=t.returnPoint,delete t.returnPoint):T=o?n:i}function f(e,t){if((e==m||"body"==e.name)&&s&&(!e.name||CKEDITOR.dtd[e.name][s])){var n,o;return(n=t.attributes&&(o=t.attributes["data-cke-real-element-type"])?o:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}}function p(e,t){return(e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent)&&(e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t)}var h=new CKEDITOR.htmlParser,m=r instanceof CKEDITOR.htmlParser.element?r:"string"==typeof r?new CKEDITOR.htmlParser.element(r):new CKEDITOR.htmlParser.fragment,g=[],E=[],T=m,v="textarea"==m.name,y="pre"==m.name;h.onTagOpen=function(i,a,r,s){if(a=new CKEDITOR.htmlParser.element(i,a),a.isUnknown&&r&&(a.isEmpty=!0),a.isOptionalClose=s,e(a))g.push(a);else{if("pre"==i)y=!0;else{if("br"==i&&y)return void T.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==i&&(v=!0)}if("br"==i)E.push(a);else{for(;s=(r=T.name)?CKEDITOR.dtd[r]||(T._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):o,!(a.isUnknown||T.isUnknown||s[i]);)if(T.isOptionalClose)h.onTagClose(r);else if(i in n&&r in n)r=T.children,(r=r[r.length-1])&&"li"==r.name||d(r=new CKEDITOR.htmlParser.element("li"),T),!a.returnPoint&&(a.returnPoint=T),T=r;else if(i in CKEDITOR.dtd.$listItem&&!p(i,r))h.onTagOpen("li"==i?"ul":"dl",{},0,1);else if(r in t&&!p(i,r))!a.returnPoint&&(a.returnPoint=T),T=T.parent;else{if(r in CKEDITOR.dtd.$inline&&g.unshift(T),!T.parent){a.isOrphan=1;break}d(T,T.parent,1)}l(i),c(),a.parent=T,a.isEmpty?d(a):T=a}}},h.onTagClose=function(e){for(var t=g.length-1;0<=t;t--)if(e==g[t].name)return void g.splice(t,1);for(var n=[],o=[],i=T;i!=m&&i.name!=e;)i._.isBlockLike||o.unshift(i),n.push(i),i=i.returnPoint||i.parent;if(i!=m){for(t=0;t<n.length;t++){var a=n[t];d(a,a.parent)}T=i,i._.isBlockLike&&c(),d(i,i.parent),i==T&&(T=T.parent),g=g.concat(o)}"body"==e&&(s=!1)},h.onText=function(e){if(T._.hasInlineStarted&&!E.length||y||v||(e=CKEDITOR.tools.ltrim(e),0!==e.length)){var n=T.name,a=n?CKEDITOR.dtd[n]||(T._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):o;!v&&!a["#"]&&n in t?(h.onTagOpen(i[n]||""),h.onText(e)):(c(),l(),y||v||(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),f(T,e)&&this.onTagOpen(s,{},0,1),T.add(e))}},h.onCDATA=function(e){T.add(new CKEDITOR.htmlParser.cdata(e))},h.onComment=function(e){c(),l(),T.add(new CKEDITOR.htmlParser.comment(e))},h.parse(a);for(c();T!=m;)d(T,T.parent,1);return u(m),m},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=0<t?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length))return this.children.pop(),void this.add(e);n.next=e}e.previous=n,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id)for(n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)!1===this.children[t].filter(e,n)&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var o=this.getFilterContext();for(n&&!this.parent&&t&&t.onRoot(o,this),t&&this.filterChildren(t,!1,o),t=0,n=this.children,o=n.length;t<o;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var o=e(this);if(!1!==o){n=this.children;for(var i=0;i<n.length;i++)o=n[i],o.type==CKEDITOR.NODE_ELEMENT?o.forEach(e,t):t&&o.type!=t||e(o)}},getFilterContext:function(e){return e||{}}}}(),function(){function e(){this.rules=[]}function t(t,n,o,i){var a,r;for(a in n)(r=t[a])||(r=t[a]=new e),r.add(n[a],o,i)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,n){var o;"number"==typeof n?o=n:n&&"priority"in n&&(o=n.priority),"number"!=typeof o&&(o=10),"object"!=typeof n&&(n={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,o,n),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,o,n),e.elements&&t(this.elementsRules,e.elements,o,n),e.attributes&&t(this.attributesRules,e.attributes,o,n),e.text&&this.textRules.add(e.text,o,n),e.comment&&this.commentRules.add(e.comment,o,n),e.root&&this.rootRules.add(e.root,o,n)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n,o=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],i=0;3>i;i++)if(n=o[i]){if(!1===(n=n.exec(e,t,this)))return null;if(n&&n!=t)return this.onNode(e,n);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,o){return(n=this.attributesRules[n])?n.exec(e,o,t,this):o}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var o=[this.findIndex(t),0],i=0,a=e.length;i<a;i++)o.push({value:e[i],priority:t,options:n});this.rules.splice.apply(this.rules,o)},findIndex:function(e){for(var t=this.rules,n=t.length-1;0<=n&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n,o,i,a,r=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,s=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(a=0;a<c;a++)if(r&&(n=t.type,o=t.name),i=l[a],!(e.nonEditable&&!i.options.applyToAll||e.nestedEditable&&i.options.excludeNestedEditable)){if(!1===(i=i.value.apply(null,s))||r&&i&&(i.name!=o||i.type!=n))return i;null!=i&&(s[0]=t=i)}return t},execOnName:function(e,t){for(var n,o=0,i=this.rules,a=i.length;t&&o<a;o++)n=i[o],e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable||(t=t.replace(n.value[0],n.value[1]));return t}}}(),function(){function e(e,t){function s(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(i){if(i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var r,l,u=[],d=n(i);if(d)for(c(d,1)&&u.push(d);d;)a(d)&&(r=o(d))&&c(r)&&((l=o(r))&&!a(l)?u.push(r):(s(f).insertAfter(r),r.remove())),d=d.previous;for(d=0;d<u.length;d++)u[d].remove();(u=!e||!1!==("function"==typeof t?t(i):t))&&((f||CKEDITOR.env.needsBrFiller||i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(f||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||i.name in CKEDITOR.dtd.tr||i.name in CKEDITOR.dtd.$listItem))?(u=n(i),u=!u||"form"==i.name&&"input"==u.name):u=!1),u&&i.add(s(e))}}}function c(e,t){if((!f||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.name&&!e.attributes["data-cke-eol"])return!0;var n;return!!(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(T))&&(n.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,n.index)).insertBefore(e),e.value=n[0]),!CKEDITOR.env.needsBrFiller&&f&&(!t||e.parent.name in p)||!f&&((n=e.previous)&&"br"==n.name||!n||a(n))))}var u,d={elements:{}},f="html"==t,p=CKEDITOR.tools.extend({},b);for(u in p)"#"in y[u]||delete p[u];for(u in p)d.elements[u]=l(f,e.config.fillEmptyBlocks);return d.root=l(f,!1),d.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.attributes;if("data-cke-bogus"in n||"data-cke-eol"in n)delete n["data-cke-bogus"];else{for(n=t.next;n&&i(n);)n=n.next;var l=o(t);!n&&a(t.parent)?r(t.parent,s(e)):a(n)&&l&&!a(l)&&s(e).insertBefore(n)}}}}(f),d}function t(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function n(e){for(e=e.children[e.children.length-1];e&&i(e);)e=e.previous;return e}function o(e){for(e=e.previous;e&&i(e);)e=e.previous;return e}function i(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function a(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in b||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function r(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&(n.next=t,t.previous=n)}function s(e){e=e.attributes,"false"!=e.contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function l(e){switch(e=e.attributes,e["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function c(e){return e.replace(_,function(e,t,n){return"<"+t+n.replace(k,function(e,t){return K.test(t)&&-1==n.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e})+">"})}function u(e,t){return e.replace(t,function(e,t,n){return 0===e.indexOf("<textarea")&&(e=t+m(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function d(e){return e.replace(x,function(e,t){return decodeURIComponent(t)})}function f(e){return e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(e){return"\x3c!--"+v+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"--\x3e"})}function p(e){return CKEDITOR.tools.array.reduce(e.split(""),function(e,t){var n=t.toLowerCase(),o=t.toUpperCase(),i=h(n);return n!==o&&(i+="|"+h(o)),e+"("+i+")"},"")}function h(e){var t;t=e.charCodeAt(0),t={htmlCode:"&#"+t+";?",hex:"&#x0*"+t.toString(16)+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[e]};for(var n in t)t[n]&&(e+="|"+t[n]);return e}function m(e){return e.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(e,t){return decodeURIComponent(t)})}function g(e,t){var n=t._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return n&&n[t]||""})}function E(e,t){var n=[],o=t.config.protectedSource,i=t._.dataStore||(t._.dataStore={id:1}),a=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,o=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(o);e=e.replace(/\x3c!--[\s\S]*?--\x3e/g,function(e){return"\x3c!--{cke_tempcomment}"+(n.push(e)-1)+"--\x3e"});for(var r=0;r<o.length;r++)e=e.replace(o[r],function(e){return e=e.replace(a,function(e,t,o){return n[o]}),/cke_temp(comment)?/.test(e)?e:"\x3c!--{cke_temp}"+(n.push(e)-1)+"--\x3e"});return e=e.replace(a,function(e,t,o){return"\x3c!--"+v+(t?"{C}":"")+encodeURIComponent(n[o]).replace(/--/g,"%2D%2D")+"--\x3e"}),e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(e){return e.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(e,t){return i[i.id]=decodeURIComponent(t),"{cke_protected_"+i.id+++"}"})}),e=e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(e,n,o,i){return"<"+n+o+">"+g(m(i),t)+"</"+n+">"})}CKEDITOR.htmlDataProcessor=function(n){var o,i,a=this;this.editor=n,this.dataFilter=o=new CKEDITOR.htmlParser.filter,this.htmlFilter=i=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,o.addRules(O),o.addRules(I,{applyToAll:!0}),o.addRules(e(n,"data"),{applyToAll:!0}),i.addRules(D),i.addRules(R,{applyToAll:!0}),i.addRules(e(n,"html"),{applyToAll:!0}),n.on("toHtml",function(e){e=e.data;var o,i=e.dataValue,i=i.replace(N,""),i=E(i,n),i=u(i,w),i=c(i),i=u(i,S),i=i.replace(A,"$1cke:$2"),i=i.replace(L,"<cke:$1$2></cke:$1>"),i=i.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),i=i.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");o=e.context||n.editable().getName();var a;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==o&&(o="div",i="<pre>"+i+"</pre>",a=1),o=n.document.createElement(o),o.setHtml("a"+i),i=o.getHtml().substr(1),i=i.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),a&&(i=i.replace(/^<pre>|<\/pre>$/gi,"")),i=i.replace(P,"$1$2"),i=d(i),i=m(i),o=!1!==e.fixForBody&&t(e.enterMode,n.config.autoParagraph),i=CKEDITOR.htmlParser.fragment.fromHtml(i,e.context,o),o&&(a=i,!a.children.length&&CKEDITOR.dtd[a.name][o]&&(o=new CKEDITOR.htmlParser.element(o),a.add(o))),e.dataValue=i},null,null,5),n.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&n.fire("dataFiltered")},null,null,6),n.on("toHtml",function(e){e.data.dataValue.filterChildren(a.dataFilter,!0)},null,null,10),n.on("toHtml",function(e){e=e.data;var t=e.dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=f(t)},null,null,15),n.on("toDataFormat",function(e){var o=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(o=o.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(o,e.data.context,t(e.data.enterMode,n.config.autoParagraph))},null,null,5),n.on("toDataFormat",function(e){e.data.dataValue.filterChildren(a.htmlFilter,!0)},null,null,10),n.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),n.on("toDataFormat",function(e){var t=e.data.dataValue,o=a.writer;o.reset(),t.writeChildrenHtml(o),t=o.getHtml(!0),t=m(t),t=g(t,n),e.data.dataValue=t},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,o){var i,a,r,s,l=this.editor;return t&&"object"==typeof t?(i=t.context,n=t.fixForBody,o=t.dontFilter,a=t.filter,r=t.enterMode,s=t.protectedWhitespaces):i=t,i||null===i||(i=l.editable().getName()),l.fire("toHtml",{dataValue:e,context:i,fixForBody:n,dontFilter:o,filter:a||l.filter,enterMode:r||l.enterMode,protectedWhitespaces:s}).dataValue},toDataFormat:function(e,t){var n,o,i;return t&&(n=t.context,o=t.filter,i=t.enterMode),n||null===n||(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:o||this.editor.filter,context:n,enterMode:i||this.editor.enterMode}).dataValue}};var T=/(?:&nbsp;|\xa0)$/,v="{cke_protected}",y=CKEDITOR.dtd,C="caption colgroup col thead tfoot tbody".split(" "),b=CKEDITOR.tools.extend({},y.$blockLimit,y.$block),O={elements:{input:s,textarea:s}},I={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(e){if(e.attributes&&e.attributes.src){var t=e.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==t.indexOf("javascript")&&0!==t.indexOf("data")||(e.attributes["data-cke-pa-src"]=e.attributes.src,delete e.attributes.src)}}}},D={elements:{embed:function(e){var t=e.parent;if(t&&"object"==t.name){var n=t.attributes.width,t=t.attributes.height;n&&(e.attributes.width=n),t&&(e.attributes.height=t)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes["data-cke-saved-name"]))return!1}}},R={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n=["name","href","src"],o=0;o<n.length;o++)"data-cke-saved-"+n[o]in t&&delete t[n[o]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var n,o;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(C,e.name),o=CKEDITOR.tools.indexOf(C,t.name)),-1<n&&-1<o&&n!=o||(n=e.parent?e.getIndex():-1,o=t.parent?t.getIndex():-1),n>o?1:-1})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes.class&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes.class},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&r(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{class:function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(R.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var _=/<(a|area|img|input|source)\b([^>]*)>/gi,k=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/^(href|src|name)$/i,S=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,w=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,x=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,N=new RegExp("("+p("<cke:encoded>")+"(.*?)"+p("</cke:encoded>")+")|("+p("<")+p("/")+"?"+p("cke:encoded>")+")","gi"),A=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,P=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,L=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",o=n.match(/^cke:(.*)/);o&&(n=o[1]),n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,o){"font-family"==n&&(o=o.replace(/["']/g,"")),t[n.toLowerCase()]=o}),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,n=[];for(e in t)t[e]&&n.push(e,":",t[e],";");return n.join("")}}},function(){function e(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}var t=function(e,t){return e=e[0],t=t[0],e<t?-1:e>t?1:0},n=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:n.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n,o,i=this;for(t=i.getFilterContext(t),i.parent||e.onRoot(t,i);;){if(n=i.name,!(o=e.onElementName(t,n)))return this.remove(),!1;if(i.name=o,!(i=e.onElement(t,i)))return this.remove(),!1;if(i!==this)return this.replaceWith(i),!1;if(i.name==n)break;if(i.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(i),!1;if(!i.name)return this.replaceWithChildren(),!1}n=i.attributes;var a,r;for(a in n){for(o=n[a];;){if(!(r=e.onAttributeName(t,a))){delete n[a];break}if(r==a)break;delete n[a],a=r}r&&(!1===(o=e.onAttribute(t,i,r,o))?delete n[r]:n[r]=o)}return i.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:n.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var o,i,a=this.name,r=[],s=this.attributes;e.openTag(a,s);for(o in s)r.push([o,s[o]]);for(e.sortAttributes&&r.sort(t),o=0,i=r.length;o<i;o++)s=r[o],e.attribute(s[0],s[1]);e.openTagClose(a,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(a)},writeChildrenHtml:n.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:n.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=e(t));for(var n=0,o=this.children.length;n<o;++n)if(t(this.children[n]))return this.children[n];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children;for(var t=0,n=e.length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),o=0;o<t.length;++o)t[o].parent=n;return n.children=t,t[0]&&(t[0].previous=null),0<e&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},find:function(e,t){void 0===t&&(t=!1);var n,o=[];for(n=0;n<this.children.length;n++){var i=this.children[n];"function"==typeof e&&e(i)?o.push(i):"string"==typeof e&&i.name===e&&o.push(i),t&&i.find&&(o=o.concat(i.find(e,t)))}return o},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes.class||"";this.attributes.class=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes.class;t&&((t=CKEDITOR.tools.trim(t.replace(new RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes.class=t:delete this.attributes.class)},hasClass:function(e){var t=this.attributes.class;return!!t&&new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t)},getFilterContext:function(e){var t=[];if(e||(e={nonEditable:!1,nestedEditable:!1}),e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length){e=CKEDITOR.tools.copy(e);for(var n=0;n<t.length;n+=2)e[t[n]]=t[n+1]}return e}},!0)}(),function(){var e=/{([^}]+)}/g;CKEDITOR.template=function(e){this.source=String(e)},CKEDITOR.template.prototype.output=function(t,n){var o=this.source.replace(e,function(e,n){return void 0!==t[n]?t[n]:e});return n?n.push(o):o}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,n){var o=e[t];return o||(o={name:t,source:n},CKEDITOR.fire("template",o),e[t]=new CKEDITOR.template(o.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),o=e.is("textarea")?e:null;return o?(n.setData(o.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+o.getValue()+"</div>",CKEDITOR.document),e.insertAfter(o),o.hide(),o.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0),n.on("loaded",function(){n.fire("uiReady"),n.editable(e),n.container=e,n.ui.contentsElement=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)},null,null,1e4),n.on("destroy",function(){o&&(n.container.clearCustomData(),n.container.remove(),o.show()),n.element.clearCustomData(),delete n.element}),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var o=CKEDITOR.document.getElementsByTag(n),i=0,a=o.count();i<a;i++)e=o.getItem(i),"true"==e.getAttribute("contenteditable")&&(t={element:e,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function e(e,o,i,a){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var r=new CKEDITOR.editor(o,e,a);return a==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),r._.required=e.hasAttribute("required"),e.removeAttribute("required")),i&&r.setData(i,null,!0),r.on("loaded",function(){n(r),a==CKEDITOR.ELEMENT_MODE_REPLACE&&r.config.autoUpdateElement&&e.$.form&&r._attachToForm(),r.setMode(r.config.startupMode,function(){r.resetDirty(),r.status="ready",r.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,r)})}),r.on("destroy",t),r}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}function n(e){var t=e.name,n=e.element,o=e.elementMode,i=e.fire("uiSpace",{space:"top",html:""}).html,a=e.fire("uiSpace",{space:"bottom",html:""}).html,r=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),t=CKEDITOR.dom.element.createFromHtml(r.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:i?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+i+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:a?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+a+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));o==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,e.ui.contentsElement=e.ui.space("contents"),i&&e.ui.space("top").unselectable(),a&&e.ui.space("bottom").unselectable(),n=e.config.width,o=e.config.height,n&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),o&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(o)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",function(){e.focus()}),e.fireOnce("uiReady")}CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,n,o){return e(t,n,o,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,o=e[t];if(o.name||o.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(o.className))continue}else if("function"==typeof arguments[0]&&(n={},!1===arguments[0](o,n)))continue;this.replace(o,n)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,o=this._.modes;if(e!=n.mode&&o&&o[e]){if(n.fire("beforeSetMode",e),n.mode){var i,a=n.checkDirty(),o=n._.previousModeData,r=0;n.fire("beforeModeUnload"),n.editable(0),n._.previousMode=n.mode,n._.previousModeData=i=n.getData(1),"source"==n.mode&&o==i&&(n.fire("lockSnapshot",{forceUpdate:!0}),r=1),n.ui.space("contents").setHtml(""),n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[e](function(){n.mode=e,void 0!==a&&!a&&n.resetDirty(),r?n.fire("unlockSnapshot"):"wysiwyg"==e&&n.fire("saveSnapshot"),setTimeout(function(){n.fire("mode"),t&&t.call(n)},0)})}},CKEDITOR.editor.prototype.resize=function(e,t,n,o){var i=this.container,a=this.ui.space("contents"),r=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;o=o?this.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}):i,o.setSize("width",e,!0),r&&(r.style.width="1%");var s=(o.$.offsetHeight||0)-(a.$.clientHeight||0),i=Math.max(t-(n?0:s),0);t=n?t+s:t,a.setStyle("height",i+"px"),r&&(r.style.width="100%"),this.fire("resize",{outerHeight:t,contentsHeight:i,outerWidth:e||o.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var n,i=e.editor,a=e.data.path,s=a.blockLimit,l=e.data.selection,c=l.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(l=t(l,a))&&(l.appendBogus(),n=CKEDITOR.env.ie),r(i,a.block,s)&&c.collapsed&&!c.getCommonAncestor().isReadOnly()&&(a=c.clone(),a.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),s=new CKEDITOR.dom.walker(a),s.guard=function(e){return!o(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},!s.checkForward()||a.checkStartOfBlock()&&a.checkEndOfBlock())&&(i=c.fixBlock(!0,i.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(i=i.getFirst(o))&&i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText()).match(/^(?:&nbsp;|\xa0)$/)&&i.remove(),n=1,e.cancel()),n&&c.select()}function t(e,t){if(e.isFake)return 0;var n=t.block||t.blockLimit,i=n&&n.getLast(o);return!n||!n.isBlockBoundary()||i&&i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()||n.is("pre")||n.getBogus()?void 0:n}function n(e){var t=e.data.getTarget();t.is("input")&&("submit"!=(t=t.getAttribute("type"))&&"reset"!=t||e.data.preventDefault())}function o(e){return u(e)&&d(e)}function i(e,t){return function(n){var o=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget;(o=o&&o.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(o):null)&&(t.equals(o)||t.contains(o))||e.call(this,n)}}function a(e){function t(e){return function(t,i){if(i&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(a)&&(n=t),!(i||!o(t)||e&&p(t)))return!1}}var n,i=e.getRanges()[0];e=e.root;var a={table:1,ul:1,ol:1,dl:1};if(i.startPath().contains(a)){var r=i.clone();if(r.collapse(1),r.setStartAt(e,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(r),e.guard=t(),e.checkBackward(),n)return r=i.clone(),r.collapse(),r.setEndAt(n,CKEDITOR.POSITION_AFTER_END),e=new CKEDITOR.dom.walker(r),e.guard=t(!0),n=!1,e.checkForward(),n}return null}function r(e,t,n){return!1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(n)&&!t||t&&"true"==t.getAttribute("contenteditable"))}function s(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==e.config.autoParagraph&&(e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function l(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout(function(){t.fire("saveSnapshot")},0)}function c(e,t,n){var o=e.getCommonAncestor(t);for(t=e=n?t:e;(e=e.getParent())&&!o.equals(e)&&1==e.getChildCount();)t=e;t.remove()}var u,d,f,p,h,m,g,E,T,v;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))return void e.focus();CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var t=this.$.scrollTop;this.$.focus(),this.$.scrollTop=t}else this.$.focus();else this.$.setActive()}catch(e){if(!CKEDITOR.env.ie)throw e}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=i(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1),t=e.on.apply(e,t);return this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(e){}},restoreAttrs:function(){var e,t,n=this._.attrChanges;for(t in n)n.hasOwnProperty(t)&&(e=n[t],null!==e?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertText:function(e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(e),"text")},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,n){var o=this.editor;o.focus(),o.fire("saveSnapshot"),n||(n=o.getSelection().getRanges()[0]),m(this,t||"html",e,n),n.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,t,n){m(this,n||"html",e,t),this.editor.fire("afterInsertHtml",{intoRange:t})},insertElement:function(e,t){var n=this.editor;n.focus(),n.fire("saveSnapshot");var i=n.activeEnterMode,n=n.getSelection(),a=e.getName(),a=CKEDITOR.dtd.$block[a];t||(t=n.getRanges()[0]),this.insertElementIntoRange(e,t)&&(t.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),a&&((a=e.getNext(function(e){return o(e)&&!p(e)}))&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$block)?a.getDtd()["#"]?t.moveToElementEditStart(a):t.moveToElementEditEnd(e):a||i==CKEDITOR.ENTER_BR||(a=t.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),t.moveToElementEditStart(a)))),n.selectRanges([t]),l(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var n=this.editor,o=n.config.enterMode,i=e.getName(),a=CKEDITOR.dtd.$block[i];if(t.checkReadOnly())return!1;t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&(t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?g(t):t.startContainer.is(CKEDITOR.dtd.$list)&&E(t));var r,s;if(a)for(;(r=t.getCommonAncestor(0,1))&&(s=CKEDITOR.dtd[r.getName()])&&(!s||!s[i]);)r.getName()in CKEDITOR.dtd.span?t.splitElement(r):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(r),t.collapse(!0),r.remove()):t.splitBlock(o==CKEDITOR.ENTER_DIV?"div":"p",n.editable());return t.insertNode(e),!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e,n=t.getDocument().$,o=n.getSelection();e:if(o.anchorNode&&o.anchorNode==t.$)e=!0;else{if(CKEDITOR.env.webkit&&(e=t.getDocument().getActive())&&e.equals(t)&&!o.anchorNode){e=!0;break e}e=void 0}e&&(e=new CKEDITOR.dom.range(t),e.moveToElementEditStart(t),n=n.createRange(),n.setStart(e.startContainer.$,e.startOffset),n.collapse(!0),o.removeAllRanges(),o.addRange(n))}var t=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var e=t.getDocument().$,n=e.selection,o=t.getDocument().getActive();"None"==n.type&&o.equals(t)&&(n=new CKEDITOR.dom.range(t),e=e.body.createTextRange(),n.moveToElementEditStart(t),n=n.startContainer,n.type!=CKEDITOR.NODE_ELEMENT&&(n=n.getParent()),e.moveToElementText(n.$),e.collapse(!0),e.select())}()):this.hasFocus?(this.focus(),e()):this.once("focus",function(){e()},null,null,-999)},getHtmlFromRange:function(e){return e.collapsed?new CKEDITOR.dom.documentFragment(e.document):(e={doc:this.getDocument(),range:e.clone()},T.eol.detect(e,this),T.bogus.exclude(e),T.cell.shrink(e),e.fragment=e.range.cloneContents(),T.tree.rebuild(e,this),T.eol.fix(e,this),new CKEDITOR.dom.documentFragment(e.fragment.$))},extractHtmlFromRange:function(e,t){var n=v,o={range:e,doc:e.document},i=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),i;e.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.table.detectPurge(o),o.bookmark=e.createBookmark(),delete o.range;var a=this.editor.createRange();if(a.moveToPosition(o.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),o.targetBookmark=a.createBookmark(),n.list.detectMerge(o,this),n.table.detectRanges(o,this),n.block.detectMerge(o,this),o.tableContentsRanges?(n.table.deleteRanges(o),e.moveToBookmark(o.bookmark),o.range=e):(e.moveToBookmark(o.bookmark),o.range=e,e.extractContents(n.detectExtractMerge(o))),e.moveToBookmark(o.targetBookmark),e.optimize(),n.fixUneditableRangePosition(e),n.list.merge(o,this),n.table.purge(o,this),n.block.merge(o,this),t){if(n=e.startPath(),o=e.checkStartOfBlock()&&e.checkEndOfBlock()&&n.block&&!e.root.equals(n.block)){e:{var r,o=n.block.getElementsByTag("span"),a=0;if(o)for(;r=o.getItem(a++);)if(!d(r)){o=!0;break e}o=!1}o=!o}o&&(e.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,e),f(e.startContainer)&&e.startContainer.appendBogus();return e.startContainer.mergeSiblings(),i},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",function(){var t=this.getData();this.is("textarea")||!1!==e.config.ignoreEmptyParagraph&&(t=t.replace(h,function(e,t){return t})),e.setData(t,null,1)},this),this.attachListener(e,"getSnapshot",function(e){e.data=this.getData(1)},this),this.attachListener(e,"afterSetData",function(){this.setData(e.getData(1))},this),this.attachListener(e,"loadSnapshot",function(e){this.setData(e.data,1)},this),this.attachListener(e,"beforeFocus",function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()},this),this.attachListener(e,"insertHtml",function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)},this),this.attachListener(e,"insertElement",function(e){this.insertElement(e.data)},this),this.attachListener(e,"insertText",function(e){this.insertText(e.data)},this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):e.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){e._.previousScrollTop=e.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var t=function(){var n=e.editable();null!=e._.previousScrollTop&&n.getDocument().equals(CKEDITOR.document)&&(n.$.scrollTop=e._.previousScrollTop,e._.previousScrollTop=null,this.removeListener("scroll",t))};this.on("scroll",t)}if(e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",function(){e.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var i=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var r=e.config.contentsLangDirection;this.getDirection(1)!=r&&this.changeAttr("dir",r);var s=CKEDITOR.getCss();if(s){var r=i.getHead(),l=r.getCustomData("stylesheet");l?s!=l.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?l.$.styleSheet.cssText=s:l.setText(s)):(s=i.appendStyleText(s),s=new CKEDITOR.dom.element(s.ownerNode||s.owningElement),r.setCustomData("stylesheet",s),s.data("cke-temp",1))}r=i.getCustomData("stylesheet_ref")||0,i.setCustomData("stylesheet_ref",r+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",function(e){e=e.data;var t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()});var d={8:1,46:1};this.attachListener(e,"key",function(t){if(e.readOnly)return!0;var n,o=t.data.domEvent.getKey();if(t=e.getSelection(),0!==t.getRanges().length){if(o in d){var i,r,s,l,c=t.getRanges()[0],f=c.startPath(),o=8==o;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(i=t.getSelectedElement())||(i=a(t))?(e.fire("saveSnapshot"),c.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove(),c.select(),e.fire("saveSnapshot"),n=1):c.collapsed&&((r=f.block)&&(l=r[o?"getPrevious":"getNext"](u))&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table")&&c[o?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),c[o?"checkEndOfBlock":"checkStartOfBlock"]()&&r.remove(),c["moveToElementEdit"+(o?"End":"Start")](l),c.select(),e.fire("saveSnapshot"),n=1):f.blockLimit&&f.blockLimit.is("td")&&(s=f.blockLimit.getAscendant("table"))&&c.checkBoundaryOfElement(s,o?CKEDITOR.START:CKEDITOR.END)&&(l=s[o?"getPrevious":"getNext"](u))?(e.fire("saveSnapshot"),c["moveToElementEdit"+(o?"End":"Start")](l),c.checkStartOfBlock()&&c.checkEndOfBlock()?l.remove():c.select(),e.fire("saveSnapshot"),n=1):(s=f.contains(["td","th","caption"]))&&c.checkBoundaryOfElement(s,o?CKEDITOR.START:CKEDITOR.END)&&(n=1))}return!n}}),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in d&&!this.getFirst(o)&&(this.appendBogus(),t=e.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())}),this.attachListener(this,"dblclick",function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)}),CKEDITOR.env.ie&&this.attachListener(this,"click",n),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(t){var n=t.data.getTarget();n.is("img","hr","input","textarea","select")&&!n.isReadOnly()&&(e.getSelection().selectElement(n),n.is("input","textarea","select")&&t.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(t){(t=t.data.getTarget())&&t.is("img")&&!t.isReadOnly()&&e.getSelection().selectElement(t)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(2==t.data.$.button&&(t=t.data.getTarget(),!t.getAscendant("table")&&!t.getOuterHtml().replace(h,""))){var n=e.createRange();n.moveToElementEditStart(t),n.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()}),this.attachListener(this,"mouseup",function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(e,"key",function(t){if(e.readOnly)return!0;var n=t.data.domEvent.getKey();if(n in d&&(t=e.getSelection(),0!==t.getRanges().length)){var n=8==n,o=t.getRanges()[0];if(t=o.startPath(),o.collapsed)e:{var i=t.block;if(i&&o[n?"checkStartOfBlock":"checkEndOfBlock"]()&&o.moveToClosestEditablePosition(i,!n)&&o.collapsed){if(o.startContainer.type==CKEDITOR.NODE_ELEMENT){var a=o.startContainer.getChild(o.startOffset-(n?1:0));if(a&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("hr")){e.fire("saveSnapshot"),a.remove(),t=!0;break e}}if(!(o=o.startPath().block)||o&&o.contains(i))t=void 0;else{e.fire("saveSnapshot");var r;(r=(n?o:i).getBogus())&&r.remove(),r=e.getSelection(),a=r.createBookmarks(),(n?i:o).moveChildren(n?o:i,!1),t.lastElement.mergeSiblings(),c(i,o,!n),r.selectBookmarks(a),t=!0}}else t=!1}else n=o,r=t.block,o=n.endPath().block,r&&o&&!r.equals(o)?(e.fire("saveSnapshot"),(i=r.getBogus())&&i.remove(),n.enlarge(CKEDITOR.ENLARGE_INLINE),n.deleteContents(),o.getParent()&&(o.moveChildren(r,!1),t.lastElement.mergeSiblings(),c(r,o,!0)),n=e.getSelection().getRanges()[0],n.collapse(1),n.optimize(),""===n.startContainer.getHtml()&&n.startContainer.appendBogus(),n.select(),t=!0):t=!1;if(!t)return;return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var e;if(e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){e=this.getDocument();var t=e.getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)},CKEDITOR.on("instanceLoaded",function(t){var n=t.editor;n.on("insertElement",function(e){e=e.data,e.type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))}),n.on("selectionChange",function(t){if(!n.readOnly){var o=n.getSelection();o&&!o.isLocked&&(o=n.checkDirty(),n.fire("lockSnapshot"),e(t),n.fire("unlockSnapshot"),!o&&n.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(e){var t=e.editor;t.on("mode",function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;e.changeAttr("role","textbox"),e.changeAttr("aria-multiline","true"),e.changeAttr("aria-label",n),n&&e.changeAttr("title",n);var o=t.fire("ariaEditorHelpLabel",{}).label;if(o&&(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var i=CKEDITOR.tools.getNextId(),o=CKEDITOR.dom.element.createFromHtml('<span id="'+i+'" class="cke_voice_label">'+o+"</span>");n.append(o),e.changeAttr("aria-describedby",i)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),u=CKEDITOR.dom.walker.whitespaces(!0),d=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.empty(),p=CKEDITOR.dom.walker.bogus(),h=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,m=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(n,o){var i,a,r,s,l=[],c=o.range.startContainer;i=o.range.startPath();for(var c=u[c.getName()],d=0,f=n.getChildren(),p=f.count(),h=-1,m=-1,g=0,E=i.contains(u.$list);d<p;++d)i=f.getItem(d),e(i)?(r=i.getName(),E&&r in CKEDITOR.dtd.$list?l=l.concat(t(i,o)):(s=!!c[r],"br"!=r||!i.data("cke-eol")||d&&d!=p-1||(g=(a=d?l[d-1].node:f.getItem(d+1))&&(!e(a)||!a.is("br")),a=a&&e(a)&&u.$block[a.getName()]),-1!=h||s||(h=d),s||(m=d),l.push({isElement:1,isLineBreak:g,isBlock:i.isBlockBoundary(),hasBlockSibling:a,node:i,name:r,allowed:s}),a=g=0)):l.push({isElement:0,node:i,allowed:1});return-1<h&&(l[h].firstNotAllowed=1),-1<m&&(l[m].lastNotAllowed=1),l}function n(t,o){var i,a=[],r=t.getChildren(),s=r.count(),l=0,c=u[o],d=!t.is(u.$inline)||t.is("br");for(d&&a.push(" ");l<s;l++)i=r.getItem(l),e(i)&&!i.is(c)?a=a.concat(n(i,o)):a.push(i);return d&&a.push(" "),a}function i(t){return e(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function a(t){return t&&e(t)&&(t.is(u.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function l(t,n,o,i){var a,r,s=t.clone();s.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(a=new CKEDITOR.dom.walker(s).next())&&e(a)&&d[a.getName()]&&(r=a.getPrevious())&&e(r)&&!r.getParent().equals(t.startContainer)&&o.contains(r)&&i.contains(a)&&a.isIdentical(r)&&(a.moveChildren(r),a.remove(),l(t,n,o,i))}function c(t,n){function o(t,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var i=n.endContainer.getChild(n.endOffset),a=n.endContainer.getChild(n.endOffset-1);i&&o(i,t[t.length-1]),a&&o(a,t[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}var u=CKEDITOR.dtd,d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},f={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},p=CKEDITOR.tools.extend({},u.$inline);return delete p.br,function(d,h,m,g){var E=d.editor,T=!1;if("unfiltered_html"==h&&(h="html",T=!0),!g.checkReadOnly()){var v=new CKEDITOR.dom.elementPath(g.startContainer,g.root).blockLimit||g.root;d={type:h,dontFilter:T,editable:d,editor:E,range:g,blockLimit:v,mergeCandidates:[],zombies:[]},h=d.range,g=d.mergeCandidates;var y,C;if("text"==d.type&&h.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(y=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",h.document),h.insertNode(y),h.setStartAfter(y)),T=new CKEDITOR.dom.elementPath(h.startContainer),d.endPath=v=new CKEDITOR.dom.elementPath(h.endContainer),!h.collapsed){var E=v.block||v.blockLimit,b=h.getCommonAncestor();E&&!E.equals(b)&&!E.contains(b)&&h.checkEndOfBlock()&&d.zombies.push(E),h.deleteContents()}for(;(C=i(h))&&e(C)&&C.isBlockBoundary()&&T.contains(C);)h.moveToPosition(C,CKEDITOR.POSITION_BEFORE_END);for(l(h,d.blockLimit,T,v),y&&(h.setEndBefore(y),h.collapse(),y.remove()),y=h.startPath(),(E=y.contains(a,!1,1))&&(h.splitElement(E),d.inlineStylesRoot=E,d.inlineStylesPeak=y.lastElement),y=h.createBookmark(),(E=y.startNode.getPrevious(o))&&e(E)&&a(E)&&g.push(E),(E=y.startNode.getNext(o))&&e(E)&&a(E)&&g.push(E),E=y.startNode;(E=E.getParent())&&a(E);)g.push(E);if(h.moveToBookmark(y),y=m){if(y=d.range,"text"==d.type&&d.inlineStylesRoot){for(C=d.inlineStylesPeak,h=C.getDocument().createText("{cke-peak}"),g=d.inlineStylesRoot.getParent();!C.equals(g);)h=h.appendTo(C.clone()),C=C.getParent();m=h.getOuterHtml().split("{cke-peak}").join(m)}if(C=d.blockLimit.getName(),/^\s+|\s+$/.test(m)&&"span"in CKEDITOR.dtd[C]){var O='<span data-cke-marker="1">&nbsp;</span>';m=O+m+O}if(m=d.editor.dataProcessor.toHtml(m,{context:null,fixForBody:!1,protectedWhitespaces:!!O,dontFilter:d.dontFilter,filter:d.editor.activeFilter,enterMode:d.editor.activeEnterMode}),C=y.document.createElement("body"),C.setHtml(m),O&&(C.getFirst().remove(),C.getLast().remove()),(O=y.startPath().block)&&(1!=O.getChildCount()||!O.getBogus()))e:{var I;if(1==C.getChildCount()&&e(I=C.getFirst())&&I.is(f)&&!I.hasAttribute("contenteditable")){for(O=I.getElementsByTag("*"),y=0,g=O.count();y<g;y++)if(h=O.getItem(y),!h.is(p))break e;I.moveChildren(I.getParent(1)),I.remove()}}d.dataWrapper=C,y=m}if(y){I=d.range,y=I.document;var D;C=d.blockLimit,g=0;var R,_,k,O=[];m=E=0;var K,S;h=I.startContainer;var w,T=d.endPath.elements[0],v=T.getPosition(h),b=!(!T.getCommonAncestor(h)||v==CKEDITOR.POSITION_IDENTICAL||v&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);for(h=t(d.dataWrapper,d),c(h,I);g<h.length;g++){if(v=h[g],D=v.isLineBreak){D=I,K=C;var x=void 0,N=void 0;v.hasBlockSibling?D=1:(x=D.startContainer.getAscendant(u.$block,1))&&x.is({div:1,p:1})?(N=x.getPosition(K),N==CKEDITOR.POSITION_IDENTICAL||N==CKEDITOR.POSITION_CONTAINS?D=0:(K=D.splitElement(x),D.moveToPosition(K,CKEDITOR.POSITION_AFTER_START),D=1)):D=0}if(D)m=0<g;else{if(D=I.startPath(),!v.isBlock&&r(d.editor,D.block,D.blockLimit)&&(k=s(d.editor))&&(k=y.createElement(k),k.appendBogus(),I.insertNode(k),CKEDITOR.env.needsBrFiller&&(R=k.getBogus())&&R.remove(),I.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END)),(D=I.startPath().block)&&!D.equals(_)&&((R=D.getBogus())&&(R.remove(),O.push(D)),_=D),v.firstNotAllowed&&(E=1),E&&v.isElement){for(D=I.startContainer,K=null;D&&!u[D.getName()][v.name];){if(D.equals(C)){D=null;break}K=D,D=D.getParent()}if(D)K&&(S=I.splitElement(K),d.zombies.push(S),d.zombies.push(K));else{K=C.getName(),w=!g,D=g==h.length-1,K=n(v.node,K);for(var x=[],N=K.length,A=0,P=void 0,L=0,F=-1;A<N;A++)P=K[A]," "==P?(L||w&&!A||(x.push(new CKEDITOR.dom.text(" ")),F=x.length),L=1):(x.push(P),L=0);D&&F==x.length&&x.pop(),w=x}}if(w){for(;D=w.pop();)I.insertNode(D);w=0}else I.insertNode(v.node);v.lastNotAllowed&&g<h.length-1&&((S=b?T:S)&&I.setEndAt(S,CKEDITOR.POSITION_AFTER_START),E=0),I.collapse()}}1!=h.length?R=!1:(R=h[0],R=R.isElement&&"false"==R.node.getAttribute("contenteditable")),R&&(m=!0,D=h[0].node,I.setStartAt(D,CKEDITOR.POSITION_BEFORE_START),I.setEndAt(D,CKEDITOR.POSITION_AFTER_END)),d.dontMoveCaret=m,d.bogusNeededBlocks=O}R=d.range;var M;for(S=d.bogusNeededBlocks,w=R.createBookmark();_=d.zombies.pop();)_.getParent()&&(k=R.clone(),k.moveToElementEditStart(_),k.removeEmptyBlocksAtEnd());if(S)for(;_=S.pop();)CKEDITOR.env.needsBrFiller?_.appendBogus():_.append(R.document.createText(""));for(;_=d.mergeCandidates.pop();)_.mergeSiblings();if(R.moveToBookmark(w),!d.dontMoveCaret){for(_=i(R);_&&e(_)&&!_.is(u.$empty);){if(_.isBlockBoundary())R.moveToPosition(_,CKEDITOR.POSITION_BEFORE_END);else{if(a(_)&&_.getHtml().match(/(\s|&nbsp;)$/g)){M=null;break}M=R.clone(),M.moveToPosition(_,CKEDITOR.POSITION_BEFORE_END)}_=_.getLast(o)}M&&R.moveToRange(M)}}}}(),g=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function n(e){var t,n=e.count();for(n;0<n--;)t=e.getItem(n),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&t.getChildCount()&&t.getFirst().remove())}return function(o){var i=o.startContainer,a=i.getAscendant("table",1),r=!1;n(a.getElementsByTag("td")),n(a.getElementsByTag("th")),a=o.clone(),a.setStart(i,0),a=e(a).lastBackward(),a||(a=o.clone(),a.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),a=e(a).lastForward(),r=!0),a||(a=i),a.is("table")?(o.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),o.collapse(!0),a.remove()):(a.is({tbody:1,thead:1,tfoot:1})&&(a=t(a,"tr",r)),a.is("tr")&&(a=t(a,a.getParent().is("thead")?"th":"td",r)),(i=a.getBogus())&&i.remove(),o.moveToPosition(a,r?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),E=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$list)||e.is(CKEDITOR.dtd.$listItem):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$listItem)},e}return function(t){var n,o=t.startContainer,i=!1;n=t.clone(),n.setStart(o,0),n=e(n).lastBackward(),n||(n=t.clone(),n.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),n=e(n).lastForward(),i=!0),n||(n=o),n.is(CKEDITOR.dtd.$list)?(t.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),n.remove()):((o=n.getBogus())&&o.remove(),t.moveToPosition(n,i?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())}}(),T={eol:{detect:function(e,t){var n=e.range,o=n.clone(),i=n.clone(),a=new CKEDITOR.dom.elementPath(n.startContainer,t),r=new CKEDITOR.dom.elementPath(n.endContainer,t);o.collapse(1),i.collapse(),a.block&&o.checkBoundaryOfElement(a.block,CKEDITOR.END)&&(n.setStartAfter(a.block),e.prependEolBr=1),r.block&&i.checkBoundaryOfElement(r.block,CKEDITOR.START)&&(n.setEndBefore(r.block),e.appendEolBr=1)},fix:function(e,t){var n,o=t.getDocument();e.appendEolBr&&(n=this.createEolBr(o),e.fragment.append(n)),!e.prependEolBr||n&&!n.getPrevious()||e.fragment.append(this.createEolBr(o),1)},createEolBr:function(e){return e.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(e){var t=e.range.getBoundaryNodes(),n=t.startNode,t=t.endNode;!t||!p(t)||n&&n.equals(t)||e.range.setEndBefore(t)}},tree:{rebuild:function(e,t){var n,o=e.range,i=o.getCommonAncestor(),a=new CKEDITOR.dom.elementPath(i,t),r=new CKEDITOR.dom.elementPath(o.startContainer,t),o=new CKEDITOR.dom.elementPath(o.endContainer,t);if(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),a.blockLimit.is({tr:1,table:1})){var s=a.contains("table").getParent();n=function(e){return!e.equals(s)}}else if(a.block&&a.block.is(CKEDITOR.dtd.$listItem)&&(r=r.contains(CKEDITOR.dtd.$list),o=o.contains(CKEDITOR.dtd.$list),!r.equals(o))){var l=a.contains(CKEDITOR.dtd.$list).getParent();n=function(e){return!e.equals(l)}}n||(n=function(e){return!e.equals(a.block)&&!e.equals(a.blockLimit)}),this.rebuildFragment(e,t,i,n)},rebuildFragment:function(e,t,n,o){for(var i;n&&!n.equals(t)&&o(n);)i=n.clone(0,1),e.fragment.appendTo(i),e.fragment=i,n=n.getParent()}},cell:{shrink:function(e){e=e.range;var t=e.startContainer,n=e.endContainer,o=e.startOffset,i=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(n)&&t.is("tr")&&++o==i&&e.shrink(CKEDITOR.SHRINK_TEXT)}}},v=function(){function e(e,t){var n=e.getParent();n.is(CKEDITOR.dtd.$inline)&&e[t?"insertBefore":"insertAfter"](n)}function t(t,n,o){e(n),e(o,1);for(var i;i=o.getNext();)i.insertAfter(n),n=i;f(t)&&t.remove()}function n(e,t){var n=new CKEDITOR.dom.range(e);return n.setStartAfter(t.startNode),n.setEndBefore(t.endNode),n}return{list:{detectMerge:function(e,t){var o=n(t,e.bookmark),i=o.startPath(),a=o.endPath(),r=i.contains(CKEDITOR.dtd.$list),s=a.contains(CKEDITOR.dtd.$list);e.mergeList=r&&s&&r.getParent().equals(s.getParent())&&!r.equals(s),e.mergeListItems=i.block&&a.block&&i.block.is(CKEDITOR.dtd.$listItem)&&a.block.is(CKEDITOR.dtd.$listItem),(e.mergeList||e.mergeListItems)&&(o=o.clone(),o.setStartBefore(e.bookmark.startNode),o.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=o.createBookmark())},merge:function(e,n){if(e.mergeListBookmark){var o=e.mergeListBookmark.startNode,i=e.mergeListBookmark.endNode,a=new CKEDITOR.dom.elementPath(o,n),r=new CKEDITOR.dom.elementPath(i,n);if(e.mergeList){var s=a.contains(CKEDITOR.dtd.$list),l=r.contains(CKEDITOR.dtd.$list);s.equals(l)||(l.moveChildren(s),l.remove())}e.mergeListItems&&(a=a.contains(CKEDITOR.dtd.$listItem),r=r.contains(CKEDITOR.dtd.$listItem),a.equals(r)||t(r,o,i)),o.remove(),i.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var n=new CKEDITOR.dom.range(t);n.setStartBefore(e.bookmark.startNode),n.setEndAfter(e.bookmark.endNode),e.mergeBlockBookmark=n.createBookmark()}},merge:function(e,n){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var o=e.mergeBlockBookmark.startNode,i=e.mergeBlockBookmark.endNode,a=new CKEDITOR.dom.elementPath(o,n),r=new CKEDITOR.dom.elementPath(i,n),a=a.block,r=r.block;a&&r&&!a.equals(r)&&t(r,o,i),o.remove(),i.remove()}}},table:function(){function e(e){var n,i=[],a=new CKEDITOR.dom.walker(e),r=e.startPath().contains(o),s=e.endPath().contains(o),l={};return a.guard=function(a,c){if(a.type==CKEDITOR.NODE_ELEMENT){var u="visited_"+(c?"out":"in");if(a.getCustomData(u))return;CKEDITOR.dom.element.setMarker(l,a,u,1)}if(c&&r&&a.equals(r))n=e.clone(),n.setEndAt(r,CKEDITOR.POSITION_BEFORE_END),i.push(n);else if(!c&&s&&a.equals(s))n=e.clone(),n.setStartAt(s,CKEDITOR.POSITION_AFTER_START),i.push(n);else{if((u=!c)&&(u=a.type==CKEDITOR.NODE_ELEMENT&&a.is(o)&&(!r||t(a,r))&&(!s||t(a,s))),!u&&(u=c))if(a.is(o))var u=r&&r.getAscendant("table",!0),d=s&&s.getAscendant("table",!0),f=a.getAscendant("table",!0),u=u&&u.contains(f)||d&&d.contains(f);else u=void 0;u&&(n=e.clone(),n.selectNodeContents(a),i.push(n))}},a.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),i}function t(e,t){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,o=e.getPosition(t);return o!==CKEDITOR.POSITION_IDENTICAL&&0==(o&n)}var o={td:1,th:1,caption:1};return{detectPurge:function(e){var t=e.range,n=t.clone();n.enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=new CKEDITOR.dom.walker(n),i=0;if(n.evaluator=function(e){e.type==CKEDITOR.NODE_ELEMENT&&e.is(o)&&++i},n.checkForward(),1<i){var n=t.startPath().contains("table"),a=t.endPath().contains("table");n&&a&&t.checkBoundaryOfElement(n,CKEDITOR.START)&&t.checkBoundaryOfElement(a,CKEDITOR.END)&&(t=e.range.clone(),t.setStartBefore(n),t.setEndAfter(a),e.purgeTableBookmark=t.createBookmark())}},detectRanges:function(i,a){var r,s,l=n(a,i.bookmark),c=l.clone(),u=l.getCommonAncestor();u.is(CKEDITOR.dtd.$tableContent)&&!u.is(o)&&(u=u.getAscendant("table",!0)),s=u,u=new CKEDITOR.dom.elementPath(l.startContainer,s),s=new CKEDITOR.dom.elementPath(l.endContainer,s),u=u.contains("table"),s=s.contains("table"),(u||s)&&(u&&s&&t(u,s)?(i.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),c.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),c=l.clone(),c.setEndAt(u,CKEDITOR.POSITION_AFTER_END),r=l.clone(),r.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),r=e(c).concat(e(r))):u?s||(i.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),l.setEndAt(u,CKEDITOR.POSITION_AFTER_END)):(i.tableSurroundingRange=c,c.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(s,CKEDITOR.POSITION_AFTER_START)),i.tableContentsRanges=r||e(l))},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),f(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,n=e.range.clone(),t=t.createElement("p");t.insertBefore(e.purgeTableBookmark.startNode),n.moveToBookmark(e.purgeTableBookmark),n.deleteContents(),e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!(e.range.startPath().contains(CKEDITOR.dtd.$listItem)&&e.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(e){e.startContainer.getDtd()["#"]||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var n,o=t.startPath();r(e,o.block,o.blockLimit)&&(n=s(e))&&(n=t.document.createElement(n),n.appendBogus(),t.insertNode(n),t.moveToPosition(n,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(t,n){if(0===t.length||e(t[0].getEnclosedNode()))return!1;var o,i;if((o=!n&&1===t.length)&&!(o=t[0].collapsed)){var a=t[0];o=a.startContainer.getAscendant({td:1,th:1},!0);var r=a.endContainer.getAscendant({td:1,th:1},!0);i=CKEDITOR.tools.trim,o&&o.equals(r)&&!o.findOne("td, th, tr, tbody, table")?(a=a.cloneContents(),o=!a.getFirst()||i(a.getFirst().getText())!==i(o.getText())):o=!1}if(o)return!1;for(i=0;i<t.length;i++)if(!(o=t[i]._getTableElement()))return!1;return!0}function n(e){var t,n,o=[];for(n=0;n<e.length;n++)t=e[n]._getTableElement(),t.is&&t.is({td:1,th:1})?o.push(t):o=o.concat(function(e){e=e.find("td, th");var t,n=[];for(t=0;t<e.count();t++)n.push(e.getItem(t));return n}(t));return o}function o(e){e=n(e);var t,o,i="",a=[];for(o=0;o<e.length;o++)t&&!t.equals(e[o].getAscendant("tr"))?(i+=a.join("\t")+"\n",t=e[o].getAscendant("tr"),a=[]):0===o&&(t=e[o].getAscendant("tr")),a.push(e[o].getText());return i+=a.join("\t")}function i(e){var t=this.root.editor,n=t.getSelection(1);this.reset(),g=!0,n.root.once("selectionchange",function(e){e.cancel()},null,null,0),n.selectRanges([e[0]]),n=this._.cache,n.ranges=new CKEDITOR.dom.rangeList(e),n.type=CKEDITOR.SELECTION_TEXT,n.selectedElement=e[0]._getTableElement(),n.selectedText=o(e),n.nativeSel=null,this.isFake=1,this.rev=y++,t._.fakeSelection=this,g=!1,this.root.fire("selectionchange")}function a(){var n,o=this._.fakeSelection;if(o){n=this.getSelection(1);var i;if(!(i=!n)&&(i=!n.isHidden())){i=o;var a=n.getRanges(),r=i.getRanges(),s=a.length&&a[0]._getTableElement()&&a[0]._getTableElement().getAscendant("table",!0),l=r.length&&r[0]._getTableElement()&&r[0]._getTableElement().getAscendant("table",!0),c=1===a.length&&a[0]._getTableElement()&&a[0]._getTableElement().is("table"),u=1===r.length&&r[0]._getTableElement()&&r[0]._getTableElement().is("table");if(e(i.getSelectedElement()))i=!1;else{var d=1===a.length&&a[0].collapsed,r=t(a,!!CKEDITOR.env.webkit)&&t(r);s=!(!s||!l)&&(s.equals(l)||l.contains(s)),s&&(d||r)?(c&&!u&&i.selectRanges(a),i=!0):i=!1}i=!i}i&&(o.reset(),o=0)}(o||(o=n||this.getSelection(1))&&o.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",o),n=this.elementPath(),n.compare(this._.selectionPreviousPath)||(i=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(n.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||i||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=n,this.fire("selectionChange",{selection:o,path:n})))}function r(){T=!0,E||(s.call(this),E=CKEDITOR.tools.setTimeout(s,200,this))}function s(){E=null,T&&(CKEDITOR.tools.setTimeout(a,0,this),T=!1)}function l(e){return!(!O(e)&&(e.type!=CKEDITOR.NODE_ELEMENT||e.is(CKEDITOR.dtd.$empty)))}function c(e){function t(t,n){return!(!t||t.type==CKEDITOR.NODE_TEXT)&&e.clone()["moveToElementEdit"+(n?"End":"Start")](t)}if(!(e.root instanceof CKEDITOR.editable))return!1;var n=e.startContainer,o=e.getPreviousNode(l,null,n),i=e.getNextNode(l,null,n);return!(!t(o)&&!t(i,1)&&(o||i||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()&&n.getBogus()))}function u(e){d(e,!1);var t=e.getDocument().createText(C);return e.setCustomData("cke-fillingChar",t),t}function d(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(!1!==t){var o=e.getDocument().getSelection().getNative(),i=o&&"None"!=o.type&&o.getRangeAt(0),a=C.length;if(n.getLength()>a&&i&&i.intersectsNode(n.$)){var r=[{node:o.anchorNode,offset:o.anchorOffset},{node:o.focusNode,offset:o.focusOffset}];o.anchorNode==n.$&&o.anchorOffset>a&&(r[0].offset-=a),o.focusNode==n.$&&o.focusOffset>a&&(r[1].offset-=a)}}n.setText(f(n.getText(),1)),r&&(n=e.getDocument().$,o=n.getSelection(),n=n.createRange(),n.setStart(r[0].node,r[0].offset),n.collapse(!0),o.removeAllRanges(),o.addRange(n),o.extend(r[1].node,r[1].offset))}}function f(e,t){return t?e.replace(b,function(e,t){return t?"":""}):e.replace(C,"")}function p(e,t){var n=t&&CKEDITOR.tools.htmlEncode(t)||"&nbsp;",n=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+n+"</div>",e.document);e.fire("lockSnapshot"),e.editable().append(n);var o=e.getSelection(1),i=e.createRange(),a=o.root.on("selectionchange",function(e){e.cancel()},null,null,0);i.setStartAt(n,CKEDITOR.POSITION_AFTER_START),i.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),o.selectRanges([i]),a.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=n}function h(e){var t={37:1,39:1,8:1,46:1};return function(n){var o=n.data.getKeystroke();if(t[o]){var i=e.getSelection().getRanges(),a=i[0];1==i.length&&a.collapsed&&(o=a[38>o?"getPreviousEditableNode":"getNextEditableNode"]())&&o.type==CKEDITOR.NODE_ELEMENT&&"false"==o.getAttribute("contenteditable")&&(e.getSelection().fake(o),n.data.preventDefault(),n.cancel())}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.getCommonAncestor().isReadOnly()&&e.splice(t,1),!n.collapsed){if(n.startContainer.isReadOnly())for(var o,i=n.startContainer;i&&!((o=i.type==CKEDITOR.NODE_ELEMENT)&&i.is("body")||!i.isReadOnly());)o&&"false"==i.getAttribute("contentEditable")&&n.setStartAfter(i),i=i.getParent();i=n.startContainer,o=n.endContainer;var a=n.startOffset,r=n.endOffset,s=n.clone();i&&i.type==CKEDITOR.NODE_TEXT&&(a>=i.getLength()?s.setStartAfter(i):s.setStartBefore(i)),o&&o.type==CKEDITOR.NODE_TEXT&&(r?s.setEndAfter(o):s.setEndBefore(o)),i=new CKEDITOR.dom.walker(s),i.evaluator=function(o){if(o.type==CKEDITOR.NODE_ELEMENT&&o.isReadOnly()){var i=n.clone();return n.setEndBefore(o),n.collapsed&&e.splice(t--,1),o.getPosition(s.endContainer)&CKEDITOR.POSITION_CONTAINS||(i.setStartAfter(o),i.collapsed||e.splice(t+1,0,i)),!0}return!1},i.next()}}return e}var g,E,T,v="function"!=typeof window.getSelection,y=1,C=CKEDITOR.tools.repeat("",7),b=new RegExp(C+"( )?","g"),O=CKEDITOR.dom.walker.invisible(1),I=function(){function e(e){return function(t){var n=t.editor.createRange();return n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]),!1}}function t(e){return function(t){var n,o=t.editor,i=o.createRange();if(!o.readOnly)return(n=i.moveToClosestEditablePosition(t.selected,e))||(n=i.moveToClosestEditablePosition(t.selected,!e)),n&&o.getSelection().selectRanges([i]),o.fire("saveSnapshot"),t.selected.remove(),n||(i.moveToElementEditablePosition(o.editable()),o.getSelection().selectRanges([i])),o.fire("saveSnapshot"),!1}}var n=e(),o=e(1);return{37:n,38:n,39:o,40:o,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",function(e){function t(){var e=n.getSelection();e&&e.removeAllRanges()}var n=e.editor;n.on("contentDom",function(){function e(){s=new CKEDITOR.dom.selection(n.getSelection()),s.lock()}function t(){c.removeListener("mouseup",t),p.removeListener("mouseup",t);var e=CKEDITOR.document.$.selection,n=e.createRange();"None"!=e.type&&n.parentElement()&&n.parentElement().ownerDocument==l.$&&n.select()}function o(e){return e=e.getRanges()[0],e&&(e=e.startContainer.getAscendant(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")},!0))&&"false"===e.getAttribute("contenteditable")?e:null}var i,s,l=n.document,c=CKEDITOR.document,u=n.editable(),f=l.getBody(),p=l.getDocumentElement(),m=u.isInline();if(CKEDITOR.env.gecko&&u.attachListener(u,"focus",function(e){e.removeListener(),0!==i&&(e=n.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==u.$&&(e=n.createRange(),e.moveToElementEditStart(u),e.select())},null,null,-2),u.attachListener(u,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){if(i&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){i=n._.previousActive&&n._.previousActive.equals(l.getActive());var e=null!=n._.previousScrollTop&&n._.previousScrollTop!=u.$.scrollTop;CKEDITOR.env.webkit&&i&&e&&(u.$.scrollTop=n._.previousScrollTop)}n.unlockSelection(i),i=0},null,null,-1),u.attachListener(u,"mousedown",function(){i=0}),(CKEDITOR.env.ie||m)&&(v?u.attachListener(u,"beforedeactivate",e,null,null,-1):u.attachListener(n,"selectionCheck",e,null,null,-1),u.attachListener(u,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){n.lockSelection(s),i=1},null,null,-1),u.attachListener(u,"mousedown",function(){i=0})),CKEDITOR.env.ie&&!m){var g;if(u.attachListener(u,"mousedown",function(e){2==e.data.$.button&&((e=n.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(g=n.window.getScrollPosition()))}),u.attachListener(u,"mouseup",function(e){2==e.data.$.button&&g&&(n.document.$.documentElement.scrollLeft=g.x,n.document.$.documentElement.scrollTop=g.y),g=null}),"BackCompat"!=l.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var E,T;p.on("mousedown",function(e){function t(e){if(e=e.data.$,E){var t=f.$.createTextRange();try{t.moveToPoint(e.clientX,e.clientY)}catch(e){}E.setEndPoint(0>T.compareEndPoints("StartToStart",t)?"EndToEnd":"StartToStart",t),E.select()}}function n(){p.removeListener("mousemove",t),c.removeListener("mouseup",n),p.removeListener("mouseup",n),E.select()}if(e=e.data,e.getTarget().is("html")&&e.$.y<p.$.clientHeight&&e.$.x<p.$.clientWidth){E=f.$.createTextRange();try{E.moveToPoint(e.$.clientX,e.$.clientY)}catch(e){}T=E.duplicate(),p.on("mousemove",t),c.on("mouseup",n),p.on("mouseup",n)}})}7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&p.on("mousedown",function(e){e.data.getTarget().is("html")&&(c.on("mouseup",t),p.on("mouseup",t))})}}if(u.attachListener(u,"selectionchange",a,n),u.attachListener(u,"keyup",r,n),u.attachListener(u,"touchstart",r,n),u.attachListener(u,"touchend",r,n),CKEDITOR.env.ie&&u.attachListener(u,"keydown",function(e){var t=this.getSelection(1),n=o(t);n&&!n.equals(u)&&(t.selectElement(n),e.data.preventDefault())},n),u.attachListener(u,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){n.forceNextSelectionCheck(),n.selectionChange(1)}),m&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var y;u.attachListener(u,"mousedown",function(){y=1}),u.attachListener(l.getDocumentElement(),"mouseup",function(){y&&r.call(n),y=0})}else u.attachListener(CKEDITOR.env.ie?u:l.getDocumentElement(),"mouseup",r,n);CKEDITOR.env.webkit&&u.attachListener(l,"keydown",function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:u.hasFocus&&d(u)}},null,null,-1),u.attachListener(u,"keydown",h(n),null,null,-1)}),n.on("setData",function(){n.unlockSelection(),CKEDITOR.env.webkit&&t()}),n.on("contentDomUnload",function(){n.unlockSelection()}),CKEDITOR.env.ie9Compat&&n.on("beforeDestroy",t,null,null,9),n.on("dataReady",function(){delete n._.fakeSelection,delete n._.hiddenSelectionContainer,n.selectionChange(1)}),n.on("loadSnapshot",function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=n.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=n.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())},null,null,100),n.on("key",function(e){if("wysiwyg"==n.mode){var t=n.getSelection();if(t.isFake){var o=I[e.data.keyCode];if(o)return o({editor:n,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(e){var t=e.editor;t.on("selectionChange",function(){var e=t.editable(),n=e.getCustomData("cke-fillingChar");n&&(n.getCustomData("ready")?(d(e),e.editor.fire("selectionCheck")):n.setCustomData("ready",1))},null,null,-1),t.on("beforeSetMode",function(){d(t.editable())},null,null,-1),t.on("getSnapshot",function(e){e.data&&(e.data=f(e.data))},t,null,20),t.on("toDataFormat",function(e){e.data.dataValue=f(e.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(e){(e?a:r).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return e=e||this.getSelection(1),e.getType()!=CKEDITOR.SELECTION_NONE&&(!e.isLocked&&e.lock(),this._.savedSelection=e,!0)},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return!!t&&(t.unlock(e),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var t=e;e=e.root}var n=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:y++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=n?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;e=this.getNative();var o,i;if(e)if(e.getRangeAt)o=(i=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=e.createRange()}catch(e){}o=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}return(!o||o.type!=CKEDITOR.NODE_ELEMENT&&o.type!=CKEDITOR.NODE_TEXT||!this.root.equals(o)&&!this.root.contains(o))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var D={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:f,_createFillingCharSequenceNode:u,FILLING_CHAR_SEQUENCE:C}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=v?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:v?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),o=n.type;"Text"==o&&(t=CKEDITOR.SELECTION_TEXT),"Control"==o&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(e){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT,n=this.getNative();if(n&&n.rangeCount){if(1==n.rangeCount){var n=n.getRangeAt(0),o=n.startContainer;o==n.endContainer&&1==o.nodeType&&1==n.endOffset-n.startOffset&&D[o.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=v?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,n){t=t.duplicate(),t.collapse(n);var o=t.parentElement();if(!o.hasChildNodes())return{container:o,offset:0};for(var i,a,r,s,l=o.children,c=t.duplicate(),u=0,d=l.length-1,f=-1;u<=d;)if(f=Math.floor((u+d)/2),i=l[f],c.moveToElementText(i),0<(r=c.compareEndPoints("StartToStart",t)))d=f-1;else{if(!(0>r))return{container:o,offset:e(i)};u=f+1}if(-1==f||f==l.length-1&&0>r){if(c.moveToElementText(o),c.setEndPoint("StartToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,l=o.childNodes,!c)return i=l[l.length-1],i.nodeType!=CKEDITOR.NODE_TEXT?{container:o,offset:l.length}:{container:i,offset:i.nodeValue.length};for(o=l.length;0<c&&0<o;)a=l[--o],a.nodeType==CKEDITOR.NODE_TEXT&&(s=a,c-=a.nodeValue.length);return{container:s,offset:-c}}if(c.collapse(0<r),c.setEndPoint(0<r?"StartToStart":"EndToStart",t),!(c=c.text.replace(/(\r\n|\r)/g,"\n").length))return{container:o,offset:e(i)+(0<r?0:1)};for(;0<c;)try{a=i[0<r?"previousSibling":"nextSibling"],a.nodeType==CKEDITOR.NODE_TEXT&&(c-=a.nodeValue.length,s=a),i=a}catch(t){return{container:o,offset:e(i)}}return{container:s,offset:0<r?-c:s.nodeValue.length+c}};return function(){var e=this.getNative(),n=e&&e.createRange(),o=this.getType();if(!e)return[];if(o==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),o=t(n,!0),e.setStart(new CKEDITOR.dom.node(o.container),o.offset),o=t(n),e.setEnd(new CKEDITOR.dom.node(o.container),o.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(o==CKEDITOR.SELECTION_ELEMENT){for(var o=[],i=0;i<n.length;i++){for(var a=n.item(i),r=a.parentNode,s=0,e=new CKEDITOR.dom.range(this.root);s<r.childNodes.length&&r.childNodes[s]!=a;s++);e.setStart(new CKEDITOR.dom.node(r),s),e.setEnd(new CKEDITOR.dom.node(r),s+1),o.push(e)}return o}return[]}}():function(){var e,t=[],n=this.getNative();if(!n)return t;for(var o=0;o<n.rangeCount;o++){var i=n.getRangeAt(o);e=new CKEDITOR.dom.range(this.root),e.setStart(new CKEDITOR.dom.node(i.startContainer),i.startOffset),e.setEnd(new CKEDITOR.dom.node(i.endContainer),i.endOffset),t.push(e)}return t};return function(t){var n=this._.cache,o=n.ranges;return o||(n.ranges=o=new CKEDITOR.dom.rangeList(e.call(this))),t?m(new CKEDITOR.dom.rangeList(o.slice())):o}}(),getStartElement:function(){var e=this._.cache;if(void 0!==e.startElement)return e.startElement;var t;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)t=n.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(n.optimize();t=n.startContainer,n.startOffset==(t.getChildCount?t.getChildCount():t.getLength())&&!t.isBlockBoundary();)n.setStartAfter(t);if(t=n.startContainer,t.type!=CKEDITOR.NODE_ELEMENT)return t.getParent();if((t=t.getChild(n.startOffset))&&t.type==CKEDITOR.NODE_ELEMENT)for(n=t.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)t=n,n=n.getFirst();else t=n.startContainer}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)},function(){for(var e,n,o=t.getRanges()[0].clone(),i=2;i&&!((e=o.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&D[e.getName()]&&(n=e));i--)o.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$});return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative(),t=v?"Control"==t.type?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var n=this.getSelectedElement(),o=this.getRanges(),a=this.isFake;this.isLocked=0,this.reset(),e&&(e=n||o[0]&&o[0].getCommonAncestor())&&e.getAscendant("body",1)&&(t(o)?i.call(this,o):a?this.fake(n):n?this.selectElement(n):this.selectRanges(o))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection)if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var n=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!n&&e.resetDirty()}delete e._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=y++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var n=this.root.editor,o=n&&n._.hiddenSelectionContainer;if(this.reset(),o)for(var a,o=this.root,r=0;r<e.length;++r)a=e[r],a.endContainer.equals(o)&&(a.endOffset=Math.min(a.endOffset,o.getChildCount()));if(e.length)if(this.isLocked){var s=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),s&&!s.equals(this.root)&&s.focus()}else{var l,f,p;if(1==e.length&&!(p=e[0]).collapsed&&(l=p.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&(p=p.clone(),p.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(f=p.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&(l=f),"false"==l.getAttribute("contenteditable"))||(l=void 0),l)this.fake(l);else if(n&&n.plugins.tableselection&&CKEDITOR.plugins.tableselection.isSupportedEnvironment&&t(e)&&!g)i.call(this,e);else{if(v){f=CKEDITOR.dom.walker.whitespaces(!0),l=/\ufeff|\u00a0/,p={table:1,tbody:1,tr:1},1<e.length&&(n=e[e.length-1],e[0].setEnd(n.endContainer,n.endOffset)),n=e[0],e=n.collapsed;var h,m,E;if((o=n.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in D&&(!o.is("a")||!o.getText()))try{return E=o.$.createControlRange(),E.addElement(o.$),void E.select()}catch(e){}(n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in p||n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in p)&&(n.shrink(CKEDITOR.NODE_ELEMENT,!0),e=n.collapsed),E=n.createBookmark(),p=E.startNode,e||(s=E.endNode),E=n.document.$.body.createTextRange(),E.moveToElementText(p.$),E.moveStart("character",1),s?(l=n.document.$.body.createTextRange(),l.moveToElementText(s.$),E.setEndPoint("EndToEnd",l),E.moveEnd("character",-1)):(h=p.getNext(f),m=p.hasAscendant("pre"),h=!(h&&h.getText&&h.getText().match(l))&&(m||!p.hasPrevious()||p.getPrevious().is&&p.getPrevious().is("br")),m=n.document.createElement("span"),m.setHtml("&#65279;"),m.insertBefore(p),h&&n.document.createText("\ufeff").insertBefore(p)),n.setStartBefore(p),p.remove(),e?(h?(E.moveStart("character",-1),E.select(),n.document.$.selection.clear()):E.select(),n.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START),m.remove()):(n.setEndBefore(s),s.remove(),E.select())}else{if(!(s=this.getNative()))return;for(this.removeAllRanges(),E=0;E<e.length;E++)if(E<e.length-1&&(h=e[E],m=e[E+1],l=h.clone(),l.setStart(h.endContainer,h.endOffset),l.setEnd(m.startContainer,m.startOffset),!l.collapsed&&(l.shrink(CKEDITOR.NODE_ELEMENT,!0),n=l.getCommonAncestor(),l=l.getEnclosedNode(),n.isReadOnly()||l&&l.isReadOnly())))m.setStart(h.startContainer,h.startOffset),e.splice(E--,1);else{n=e[E],m=this.document.$.createRange(),n.collapsed&&CKEDITOR.env.webkit&&c(n)&&(l=u(this.root),n.insertNode(l),(h=l.getNext())&&!l.getPrevious()&&h.type==CKEDITOR.NODE_ELEMENT&&"br"==h.getName()?(d(this.root),n.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START)):n.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)),m.setStart(n.startContainer.$,n.startOffset);try{m.setEnd(n.endContainer.$,n.endOffset)}catch(e){if(!(0<=e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw e;n.collapse(1),m.setEnd(n.endContainer.$,n.endOffset)}s.addRange(m)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e,t){var n=this.root.editor;void 0===t&&e.hasAttribute("aria-label")&&(t=e.getAttribute("aria-label")),this.reset(),p(n,t);var o=this._.cache,i=new CKEDITOR.dom.range(this.root);i.setStartBefore(e),i.setEndAfter(e),o.ranges=new CKEDITOR.dom.rangeList(i),o.selectedElement=o.startElement=e,o.type=CKEDITOR.SELECTION_ELEMENT,o.selectedText=o.nativeSel=null,this.isFake=1,this.rev=y++,n._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},isInTable:function(e){return t(this.getRanges(),e)},isCollapsed:function(){var e=this.getRanges();return 1===e.length&&e[0].collapsed},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var n,o=[],i=0;i<e.length;i++){var a=new CKEDITOR.dom.range(this.root);a.moveToBookmark(e[i]),o.push(a)}return e.isFake&&((n=t(o)?o[0]._getTableElement():o[0].getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),e.isFake=0)),e.isFake&&!t(o)?this.fake(n):this.selectRanges(o),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[v?"empty":"removeAllRanges"]()}catch(e){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var n,o;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))n=e;else if(!o){var i=e.getAttribute("contentEditable");"false"==i?n=e:"true"==i&&(o=1)}return n}function t(e,t,n,o){return(e.getPosition(t)|o)==o&&(!n.childRule||n.childRule(e))}function n(o){var a=o.document;if(o.collapsed)a=E(this,a),o.insertNode(a),o.moveToPosition(a,CKEDITOR.POSITION_BEFORE_END);else{var r,s=this.element,l=this._.definition,c=l.ignoreReadonly,u=c||l.includeReadonly;null==u&&(u=o.root.getCustomData("cke_includeReadonly"));var d=CKEDITOR.dtd[s];d||(r=!0,d=CKEDITOR.dtd.span),o.enlarge(CKEDITOR.ENLARGE_INLINE,1),o.trim();var f,p=o.createBookmark(),m=p.startNode,g=p.endNode,T=m;if(!c){var v=o.getCommonAncestor(),c=e(m,v),v=e(g,v);c&&(T=c.getNextSourceNode(!0)),v&&(g=v)}for(T.getPosition(g)==CKEDITOR.POSITION_FOLLOWING&&(T=0);T;){if(c=!1,T.equals(g))T=null,c=!0;else{var y=T.type==CKEDITOR.NODE_ELEMENT?T.getName():null,v=y&&"false"==T.getAttribute("contentEditable"),C=y&&T.getAttribute("data-nostyle");if(y&&T.data("cke-bookmark")||T.type===CKEDITOR.NODE_COMMENT){T=T.getNextSourceNode(!0);continue}if(v&&u&&CKEDITOR.dtd.$block[y])for(var b=T,O=i(b),I=void 0,D=O.length,R=0,b=D&&new CKEDITOR.dom.range(b.getDocument());R<D;++R){var I=O[R],_=CKEDITOR.filter.instances[I.data("cke-filter")];(_?_.check(this):1)&&(b.selectNodeContents(I),n.call(this,b))}if(O=y?!d[y]||C?0:v&&!u?0:t(T,g,l,S):1){if(I=T.getParent(),O=l,D=s,R=r,!I||!(I.getDtd()||CKEDITOR.dtd.span)[D]&&!R||O.parentRule&&!O.parentRule(I))c=!0;else if(f||y&&CKEDITOR.dtd.$removeEmpty[y]&&(T.getPosition(g)|S)!=S||(f=o.clone(),f.setStartBefore(T)),(y=T.type)==CKEDITOR.NODE_TEXT||v||y==CKEDITOR.NODE_ELEMENT&&!T.getChildCount()){for(var K,y=T;(c=!y.getNext(k))&&(K=y.getParent(),d[K.getName()])&&t(K,m,l,w);)y=K;f.setEndAfter(y)}}else c=!0;T=T.getNextSourceNode(C||v)}if(c&&f&&!f.collapsed){for(var x,N,A,c=E(this,a),v=c.hasAttributes(),C=f.getCommonAncestor(),y={},O={},I={},D={};c&&C;){if(C.getName()==s){for(x in l.attributes)!D[x]&&(A=C.getAttribute(N))&&(c.getAttribute(x)==A?O[x]=1:D[x]=1);for(N in l.styles)!I[N]&&(A=C.getStyle(N))&&(c.getStyle(N)==A?y[N]=1:I[N]=1)}C=C.getParent()}for(x in O)c.removeAttribute(x);for(N in y)c.removeStyle(N);v&&!c.hasAttributes()&&(c=null),c?(f.extractContents().appendTo(c),f.insertNode(c),h.call(this,c),c.mergeSiblings(),CKEDITOR.env.ie||c.$.normalize()):(c=new CKEDITOR.dom.element("span"),f.extractContents().appendTo(c),f.insertNode(c),h.call(this,c),c.remove(!0)),f=null}}o.moveToBookmark(p),o.shrink(CKEDITOR.SHRINK_TEXT),o.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function o(e){function t(){for(var e=new CKEDITOR.dom.elementPath(o.getParent()),t=new CKEDITOR.dom.elementPath(u.getParent()),n=null,i=null,a=0;a<e.elements.length;a++){var r=e.elements[a];if(r==e.block||r==e.blockLimit)break;d.checkElementRemovable(r,!0)&&(n=r)}for(a=0;a<t.elements.length&&((r=t.elements[a])!=t.block&&r!=t.blockLimit);a++)d.checkElementRemovable(r,!0)&&(i=r);i&&u.breakParent(i),n&&o.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),o=n.startNode,i=this._.definition.alwaysRemoveElement;if(e.collapsed){for(var a,r,s=new CKEDITOR.dom.elementPath(o.getParent(),e.root),l=0;l<s.elements.length&&(r=s.elements[l])&&r!=s.block&&r!=s.blockLimit;l++)if(this.checkElementRemovable(r)){var c;!i&&e.collapsed&&(e.checkBoundaryOfElement(r,CKEDITOR.END)||(c=e.checkBoundaryOfElement(r,CKEDITOR.START)))?(a=r,a.match=c?"start":"end"):(r.mergeSiblings(),r.is(this.element)?p.call(this,r):m(r,y(this)[r.getName()]))}if(a){for(i=o,l=0;r=s.elements[l],!r.equals(a);l++)r.match||(r=r.clone(),r.append(i),i=r);i["start"==a.match?"insertBefore":"insertAfter"](a)}}else{var u=n.endNode,d=this;for(t(),s=o;!s.equals(u);)a=s.getNextSourceNode(),s.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(s)&&(s.getName()==this.element?p.call(this,s):m(s,y(this)[s.getName()]),a.type==CKEDITOR.NODE_ELEMENT&&a.contains(o)&&(t(),a=o.getNext())),s=a}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function i(e){var t=[];return e.forEach(function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function a(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&T(e,this)}function r(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var t=this._.definition,n=t.attributes;if(n)for(var o in n)e.removeAttribute(o,n[o]);if(t.styles)for(var i in t.styles)t.styles.hasOwnProperty(i)&&e.removeStyle(i)}}function s(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var o,i,a=e.document;o=n.getNextParagraph();)!o.isReadOnly()&&(n.activeFilter?n.activeFilter.check(this):1)&&(i=E(this,a,o),c(o,i));e.moveToBookmark(t)}function l(e){var t=e.createBookmark(1),n=e.createIterator();n.enforceRealBlocks=!0,n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var o,i;o=n.getNextParagraph();)this.checkElementRemovable(o)&&(o.is("pre")?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&o.copyAttributes(i),c(o,i)):p.call(this,o));e.moveToBookmark(t)}function c(e,t){var n=!t;n&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var o=t&&t.is("pre"),i=e.is("pre"),a=!o&&i;if(o&&!i){if(i=t,(a=e.getBogus())&&a.remove(),a=e.getHtml(),a=d(a,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),a=a.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),a=a.replace(/([ \t\n\r]+|&nbsp;)/g," "),a=a.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var r=e.getDocument().createElement("div");r.append(i),i.$.outerHTML="<pre>"+a+"</pre>",i.copyAttributes(r.getFirst()),i=r.getFirst().remove()}else i.setHtml(a);t=i}else a?t=f(n?[e.getHtml()]:u(e),t):e.moveChildren(t);if(t.replace(e),o){var s,n=t;(s=n.getPrevious(K))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("pre")&&(o=d(s.getHtml(),/\n$/,"")+"\n\n"+d(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+o+"</pre>":n.setHtml(o),s.remove())}else n&&g(t)}function u(e){var t=[];return d(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,n){return t+"</pre>"+n+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,n){t.push(n)}),t}function d(e,t,n){var o="",i="";return e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,n){return t&&(o=t),n&&(i=n),""}),o+e.replace(t,n)+i}function f(e,t){var n;1<e.length&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var o=0;o<e.length;o++){var i=e[o],i=i.replace(/(\r\n|\r)/g,"\n"),i=d(i,/^[ \t]*\n/,""),i=d(i,/\n$/,""),i=d(i,/^[ \t]+|[ \t]+$/g,function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}),i=i.replace(/\n/g,"<br>"),i=i.replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "});if(n){var a=t.clone();a.setHtml(i),n.append(a)}else t.setHtml(i)}return n||t}function p(e,t){var n,o=this._.definition,i=o.attributes,o=o.styles,a=y(this)[e.getName()],r=CKEDITOR.tools.isEmpty(i)&&CKEDITOR.tools.isEmpty(o);for(n in i)("class"!=n&&!this._.definition.fullMatch||e.getAttribute(n)==C(n,i[n]))&&(t&&"data-"==n.slice(0,5)||(r=e.hasAttribute(n),e.removeAttribute(n)));for(var s in o)this._.definition.fullMatch&&e.getStyle(s)!=C(s,o[s],!0)||(r=r||!!e.getStyle(s),e.removeStyle(s));m(e,a,I[e.getName()]),r&&(this._.definition.alwaysRemoveElement?g(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?g(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function h(e){for(var t,n=y(this),o=e.getElementsByTag(this.element),i=o.count();0<=--i;)t=o.getItem(i),t.isReadOnly()||p.call(this,t,!0);for(var a in n)if(a!=this.element)for(o=e.getElementsByTag(a),i=o.count()-1;0<=i;i--)t=o.getItem(i),t.isReadOnly()||m(t,n[a])}function m(e,t,n){if(t=t&&t.attributes)for(var o=0;o<t.length;o++){var i,a=t[o][0];if(i=e.getAttribute(a)){var r=t[o][1];(null===r||r.test&&r.test(i)||"string"==typeof r&&i==r)&&e.removeAttribute(a)}}n||g(e)}function g(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(K),o=e.getNext(K);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||e.append("br",1),!o||o.type!=CKEDITOR.NODE_TEXT&&o.isBlockBoundary({br:1})||e.append("br"),e.remove(!0)}else n=e.getFirst(),o=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),o&&!n.equals(o)&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings())}function E(e,t,n){var o;return o=e.element,"*"==o&&(o="span"),o=new CKEDITOR.dom.element(o,t),n&&n.copyAttributes(o),o=T(o,e),t.getCustomData("doc_processing_style")&&o.hasAttribute("id")?o.removeAttribute("id"):t.setCustomData("doc_processing_style",1),o}function T(e,t){var n=t._.definition,o=n.attributes,n=CKEDITOR.style.getStyleText(n);if(o)for(var i in o)e.setAttribute(i,o[i]);return n&&e.setAttribute("style",n),e.getDocument().removeCustomData("doc_processing_style"),e}function v(e,t){for(var n in e)e[n]=e[n].replace(_,function(e,n){return t[n]})}function y(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i,a,r=n[o];if("string"==typeof r?i=r.toLowerCase():(i=r.element?r.element.toLowerCase():e.element,a=r.attributes),r=t[i]||(t[i]={}),a){var s,r=r.attributes=r.attributes||[];for(s in a)r.push([s.toLowerCase(),a[s]])}}}return t}function C(e,t,n){var o=new CKEDITOR.dom.element("span");return o[n?"setStyle":"setAttribute"](e,t),o[n?"getStyle":"getAttribute"](e)}function b(e,t){function n(e,t){return"font-family"==t.toLowerCase()?e.replace(/["']/g,""):e}"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e)),"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t,!0));for(var o in e)if(!(o in t)||n(t[o],o)!=n(e[o],o)&&"inherit"!=e[o]&&"inherit"!=t[o])return!1;return!0}function O(e,t,n){var o=e.getRanges();t=t?this.removeFromRange:this.applyToRange;var i,a;if(e.isFake&&e.isInTable())for(i=[],a=0;a<o.length;a++)i.push(o[a].clone());for(var r=o.createIterator();a=r.getNextRange();)t.call(this,a,n);e.selectRanges(i||o)}var I={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},D={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},R=/\s*(?:;\s*|$)/,_=/#\((.+?)\)/g,k=CKEDITOR.dom.walker.bookmark(0,1),K=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if("string"==typeof e.type)return new CKEDITOR.style.customHandlers[e.type](e);var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),t&&(e=CKEDITOR.tools.clone(e),v(e.attributes,t),v(e.styles,t)),n=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(I[n]?CKEDITOR.STYLE_BLOCK:D[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return O.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),O.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return O.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),O.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?s:this.type==CKEDITOR.STYLE_OBJECT?a:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?o:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?r:null,this.removeFromRange(e)},applyToObject:function(e){T(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n,o=e.elements,i=0;i<o.length;i++)if(n=o[i],this.type!=CKEDITOR.STYLE_INLINE||n!=e.block&&n!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var a=n.getName();if(!("string"==typeof this.element?a==this.element:a in this.element))continue}if(this.checkElementRemovable(n,!0,t))return!0}}return!1},checkApplicable:function(e,t,n){if(t&&t instanceof CKEDITOR.filter&&(n=t),n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var o=e.getName();if("string"==typeof this.element?o==this.element:o in this.element){if(!t&&!e.hasAttributes())return!0;if(o=n._AC)n=o;else{var o={},i=0,a=n.attributes;if(a)for(var r in a)i++,o[r]=a[r];(r=CKEDITOR.style.getStyleText(n))&&(o.style||i++,o.style=r),o._length=i,n=n._AC=o}if(!n._length)return!0;for(var s in n)if("_length"!=s)if(o=e.getAttribute(s)||"","style"==s?b(n[s],o):n[s]==o){if(!t)return!0}else if(t)return!1;if(t)return!0}return!1},checkElementRemovable:function(e,t,n){if(this.checkElementMatch(e,t,n))return!0;if(t=y(this)[e.getName()]){var o;if(!(t=t.attributes))return!0;for(n=0;n<t.length;n++)if(o=t[n][0],o=e.getAttribute(o)){var i=t[n][1];if(null===i)return!0;if("string"==typeof i){if(o==i)return!0}else if(i.test(o))return!0}}return!1},buildPreview:function(e){var t=this._.definition,n=[],o=t.element;"bdo"==o&&(o="span");var n=["<",o],i=t.attributes;if(i)for(var a in i)n.push(" ",a,'="',i[a],'"');return(i=CKEDITOR.style.getStyleText(t))&&n.push(' style="',i,'"'),n.push(">",e||t.name,"</",o,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){var t=e._ST;if(t)return t;var t=e.styles,n=e.attributes&&e.attributes.style||"",o="";n.length&&(n=n.replace(R,";"));for(var i in t){var a=t[i],r=(i+":"+a).replace(R,";");"inherit"==a?o+=r:n+=r}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+o},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var S=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,w=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(e){for(var t=0;t<n.length;t++){var o=n[t],i=o.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;o.fn.call(this,i)}})),n.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this,n=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(!1===n)e(null);else if(n instanceof Array)t._.stylesDefinitions=n,e(n);else{n||(n="default");var n=n.split(":"),o=n[0];CKEDITOR.stylesSet.addExternal(o,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(o,function(n){t._.stylesDefinitions=n[o],e(t._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var e,t={},n={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(n[e]=1);CKEDITOR.dom.elementPath=function(e,o){var i,a=null,r=null,s=[],l=e;o=o||e.getDocument().getBody(),l||(l=o);do{if(l.type==CKEDITOR.NODE_ELEMENT){if(s.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(o))break;if(!r&&(i=l.getName(),"true"==l.getAttribute("contenteditable")?r=l:!a&&n[i]&&(a=l),t[i])){if(i=!a&&"div"==i){e:{i=l.getChildren();for(var c=0,u=i.count();c<u;c++){var d=i.getItem(c);if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[d.getName()]){i=!0;break e}}i=!1}i=!i}i?a=l:r=l}}}while(l=l.getParent());r||(r=o),this.block=a,this.blockLimit=r,this.root=o,this.elements=s}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements;if(!(e=e&&e.elements)||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(e,t,n){var o,i=0;"string"==typeof e&&(o=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?o=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?o=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:"function"==typeof e?o=e:"object"==typeof e&&(o=function(t){return t.getName()in e});var a=this.elements,r=a.length;for(t&&(n?i+=1:--r),n&&(a=Array.prototype.slice.call(a,0),a.reverse());i<r;i++)if(o(a[i]))return a[i];return null},isContextFor:function(e){var t;return!(e in CKEDITOR.dtd.$block)||(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e])},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,o=this.getLength(),i=this.getDocument(),a=new CKEDITOR.dom.text(this.$.splitText(e),i);return t.childNodes.length==n&&(e>=o?(a=i.createText(""),a.insertAfter(this)):(e=i.createText(""),e.insertAfter(a),e.remove())),a},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,n){var o=e.serializable,i=t[n?"endContainer":"startContainer"],a=n?"endOffset":"startOffset",r=o?t.document.getById(e.startNode):e.startNode;return e=o?t.document.getById(e.endNode):e.endNode,i.equals(r.getPrevious())?(t.startOffset=t.startOffset-i.getLength()-e.getPrevious().getLength(),i=e.getNext()):i.equals(e.getPrevious())&&(t.startOffset-=i.getLength(),i=e.getNext()),i.equals(r.getParent())&&t[a]++,i.equals(e.getParent())&&t[a]++,t[n?"endContainer":"startContainer"]=i,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,n=CKEDITOR.dom.walker.bookmark(),o=[];return{getNextRange:function(i){e=void 0===e?0:e+1;var a=t[e];if(a&&1<t.length){if(!e)for(var r=t.length-1;0<=r;r--)o.unshift(t[r].createBookmark(!0));if(i)for(var s=0;t[e+s+1];){var l=a.document;for(i=0,r=l.getById(o[s].endNode),l=l.getById(o[s+1].startNode);;){if(r=r.getNextSourceNode(!1),l.equals(r))i=1;else if(n(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary())continue;break}if(!i)break;s++}for(a.moveToBookmark(o.shift());s--;)r=t[++e],r.moveToBookmark(o.shift()),a.setEnd(r.endContainer,r.endOffset)}return a}}},createBookmarks:function(t){for(var n,o=[],i=0;i<this.length;i++){o.push(n=this[i].createBookmark(t,!0));for(var a=i+1;a<this.length;a++)this[a]=e(n,this[a]),this[a]=e(n,this[a],!0)}return o},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var n=CKEDITOR.skin["ua_"+t],o=CKEDITOR.env;if(n)for(var i,n=n.split(",").sort(function(e,t){return e>t?-1:1}),a=0;a<n.length;a++)if(i=n[a],o.ie&&(i.replace(/^ie/,"")==o.version||o.quirks&&"iequirks"==i)&&(i="ie"),o[i]){t+="_"+n[a];break}return CKEDITOR.getUrl(e()+t+".css")}function n(e,n){a[e]||(CKEDITOR.document.appendStyleSheet(t(e)),a[e]=1),n&&n()}function o(e){var t=e.getById(r);return t||(t=e.getHead().append("style"),t.setAttribute("id",r),t.setAttribute("type","text/css")),t}function i(e,t,n){var o,i,a;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),i=0;i<t.length;i++)t[i]=t[i].split("{");for(var r=0;r<e.length;r++)if(CKEDITOR.env.webkit)for(i=0;i<t.length;i++){for(a=t[i][1],o=0;o<n.length;o++)a=a.replace(n[o][0],n[o][1]);e[r].$.sheet.addRule(t[i][0],a)}else{for(a=t,o=0;o<n.length;o++)a=a.replace(n[o][0],n[o][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?e[r].$.styleSheet.cssText+=a:e[r].$.innerHTML+=a}}var a={};CKEDITOR.skin={path:e,loadPart:function(t,o){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){n(t,o)}):n(t,o)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,n,o){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:o||"16px"})},getIconStyle:function(e,t,n,o,i){var a;return e&&(e=e.toLowerCase(),t&&(a=this.icons[e+"-rtl"]),a||(a=this.icons[e])),e=n||a&&a.path||"",o=o||a&&a.offset,i=i||a&&a.bgsize||"16px",e&&(e=e.replace(/'/g,"\\'")),e&&"background-image:url('"+CKEDITOR.getUrl(e)+"');background-position:0 "+o+"px;background-size:"+i+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=o(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var n=CKEDITOR.skin.chameleon,o="",a="";"function"==typeof n&&(o=n(this,"editor"),a=n(this,"panel")),e=[[l,e]],i([t],o,e),i(s,a,e)}).call(this,e)}});var r="cke_ui_color",s=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor;e=function(e){if(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!e.getById("cke_ui_color")){e=o(e),s.push(e);var n=t.getUiColor();n&&i([e],CKEDITOR.skin.chameleon(t,"panel"),[[l,n]])}},t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=n)}catch(e){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var n=e.match(/[^#]./g),o=0;3>o;o++){var i,a=o;i=parseInt(n[o],16),i=("0"+(0>t?0|i*(1+t):0|i+(255-i)*t).toString(16)).slice(-2),n[a]=i}return"#"+n.join("")}}(),t={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(n,o){var i=e(n.uiColor,.4),i={id:"."+n.id,defaultBorder:e(i,-.2),toolbarElementsBorder:e(i,-.25),defaultBackground:i,lightBackground:e(i,.8),darkBackground:e(i,-.15),ckeButtonOn:e(i,.4),ckeResizer:e(i,-.4),ckeColorauto:e(i,.8),dialogBody:e(i,.7),dialogTab:e(i,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:e(i,-.6),menubuttonHover:e(i,.1),menubuttonIcon:e(i,.5),menubuttonIconHover:e(i,.3)};return t[o].output(i).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._.default=this._.initValue=e.default||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},n={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},o={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},i=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",function(){this.getInputElement().on("change",function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),a=/^on([A-Z]\w+)/,r=function(e){for(var t in e)(a.test(t)||"title"==t||"type"==t)&&delete e[t];return e},s=function(e){e=e.data.getKeystroke(),e==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,o,i){if(!(4>arguments.length)){var a=e.call(this,n);a.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var r={role:n.role||"presentation"};n.includeLabel&&(r["aria-labelledby"]=a.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,n,o,"div",null,r,function(){var e=[],o=n.required?" cke_required":"";return"horizontal"!=n.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+o+'" ',' id="'+a.labelId+'"',a.inputId?' for="'+a.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',i.call(this,t,n),"</div>"):(o={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+o+'" id="'+a.labelId+'" for="'+a.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+i.call(this,t,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,o,e)),e.join("")})}},textInput:function(t,n,o){if(!(3>arguments.length)){e.call(this,n);var i=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",a={class:"cke_dialog_ui_input_"+n.type,id:i,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(a.maxlength=n.maxLength),n.size&&(a.size=n.size),n.inputStyle&&(a.style=n.inputStyle);var r=this,l=!1;t.on("load",function(){r.getInputElement().on("keydown",function(e){13==e.data.getKeystroke()&&(l=!0)}),r.getInputElement().on("keyup",function(e){13==e.data.getKeystroke()&&l&&(t.getButton("ok")&&setTimeout(function(){t.getButton("ok").click()},0),l=!1),r.bidi&&s.call(r,e)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),a["aria-labelledby"]=this._.labelId,this._.required&&(a["aria-required"]=this._.required);for(var t in a)e.push(t+'="'+a[t]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(t,n,o){if(!(3>arguments.length)){e.call(this,n);var i=this,a=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",r={};n.validate&&(this.validate=n.validate),r.rows=n.rows||5,r.cols=n.cols||20,r.class="cke_dialog_ui_input_textarea "+(n.class||""),void 0!==n.inputStyle&&(r.style=n.inputStyle),n.dir&&(r.dir=n.dir),i.bidi&&t.on("load",function(){i.getInputElement().on("keyup",s)},i),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',a,'" '];for(e in r)t.push(e+'="'+CKEDITOR.tools.htmlEncode(r[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(i._.default),"</textarea></div>"),t.join("")})}},checkbox:function(t,n,o){if(!(3>arguments.length)){var i=e.call(this,n,{default:!!n.default});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,n,o,"span",null,null,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),o=[],a=CKEDITOR.tools.getNextId()+"_label",s={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":a};return r(e),n.default&&(s.checked="checked"),void 0!==e.inputStyle&&(e.style=e.inputStyle),i.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,o,"input",null,s),o.push(' <label id="',a,'" for="',s.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),o.join("")})}},radio:function(t,n,o){if(!(3>arguments.length)){e.call(this,n),this._.default||(this._.default=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var i=[],a=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){for(var e=[],o=[],s=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<n.items.length;l++){var c=n.items[l],u=void 0!==c[2]?c[2]:c[0],d=void 0!==c[1]?c[1]:c[0],f=CKEDITOR.tools.getNextId()+"_radio_input",p=f+"_label",f=CKEDITOR.tools.extend({},n,{id:f,title:null,type:null},!0),u=CKEDITOR.tools.extend({},f,{title:u},!0),h={type:"radio",class:"cke_dialog_ui_radio_input",name:s,value:d,"aria-labelledby":p},m=[];a._.default==d&&(h.checked="checked"),r(f),r(u),void 0!==f.inputStyle&&(f.style=f.inputStyle),f.keyboardFocusable=!0,i.push(new CKEDITOR.ui.dialog.uiElement(t,f,m,"input",null,h)),m.push(" "),new CKEDITOR.ui.dialog.uiElement(t,u,m,"label",null,{id:p,for:h.id},c[0]),e.push(m.join(""))}return new CKEDITOR.ui.dialog.hbox(t,i,e,o),o.join("")}),this._.children=i}},button:function(t,n,o){if(arguments.length){"function"==typeof n&&(n=n(t.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var i=this;t.on("load",function(){var e=this.getElement();!function(){e.on("click",function(e){i.click(),e.data.preventDefault()}),e.on("keydown",function(e){e.data.getKeystroke()in{32:1}&&(i.click(),e.data.preventDefault())})}(),e.unselectable()},this);var a=CKEDITOR.tools.extend({},n);delete a.style;var r=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,a,o,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true",class:n.class,role:"button","aria-labelledby":r},'<span id="'+r+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(t,n,o){if(!(3>arguments.length)){var i=e.call(this,n);n.validate&&(this.validate=n.validate),i.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),o=[],a=[],s={id:i.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};o.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&o.push('style="width:'+n.width+'" '),o.push(">"),void 0!==n.size&&(s.size=n.size),void 0!==n.multiple&&(s.multiple=n.multiple),r(e);for(var l,c=0;c<n.items.length&&(l=n.items[c]);c++)a.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return void 0!==e.inputStyle&&(e.style=e.inputStyle),i.select=new CKEDITOR.ui.dialog.uiElement(t,e,o,"select",null,s,a.join("")),o.push("</div>"),o.join("")})}},file:function(t,n,o){if(!(3>arguments.length)){void 0===n.default&&(n.default="");var i=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",function(){CKEDITOR.document.getById(i.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){i.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',i.frameId,'" title="',n.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")})}},fileButton:function(t,n,o){var i=this;if(!(3>arguments.length)){e.call(this,n),n.validate&&(this.validate=n.validate);var a=CKEDITOR.tools.extend({},n),r=a.onClick;a.className=(a.className?a.className+" ":"")+"cke_dialog_ui_button",a.onClick=function(e){var o=n.for;!1!==(e=!!r&&r.call(this,e))&&("xhr"!==e&&t.getContentElement(o[0],o[1]).submit(),this.disable())},t.on("load",function(){t.getContentElement(n.for[0],n.for[1])._.buttons.push(i)}),CKEDITOR.ui.dialog.button.call(this,t,a,o)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(o,i,a){if(!(3>arguments.length)){var r=[],s=i.html;"<"!=s.charAt(0)&&(s="<span>"+s+"</span>");var l=i.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")},i.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,o,i,r,"span",null,null,""),r=r.join("").match(e),s=s.match(t)||["","",""],n.test(s[1])&&(s[1]=s[1].slice(0,-1),s[2]="/"+s[2]),a.push([s[1]," ",r[1]||"",s[2]].join(""))}}}(),fieldset:function(e,t,n,o,i){var a=i.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,i,o,"fieldset",null,null,function(){var e=[];a&&e.push("<legend"+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+a+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return 1>t.getChildCount()?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?"":e.getChild(0).getText()},eventProcessors:i},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t=""==t?"ltr":""==t?"rtl":null)&&(e=e.slice(1)),this.setDirectionMarker(t)}return e||(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=("ltr"==t?"":"")+e)}return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,"data-cke-dir-marker":e}):this.getDirectionMarker()&&t.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},o,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var o=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),i=this.getInputElement().$;return o.$.text=e,o.$.value=void 0===t||null===t?e:t,void 0===n||null===n?CKEDITOR.env.ie?i.add(o.$):i.add(o.$,null):i.add(o.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},o,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?i.onChange.apply(this,arguments):(e.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){t=t.data.$,"checked"==t.propertyName&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",t),null)}},keyboardFocusable:!0},o,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n,o=this._.children,i=0;i<o.length&&(n=o[i]);i++)n.getElement().$.checked=n.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?i.onChange.apply(this,arguments):(e.on("load",function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",function(e){e=e.data.$,"checked"==e.propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null)}}},o,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,o,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,n,o=/^on([A-Z]\w+)/;for(n in e)(t=n.match(o))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):function(e,t,n,o){e.on("formLoaded",function(){e.getInputElement().on(n,o,e)})}(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},reset:function(){function e(){n.$.open();var e="";o.size&&(e=o.size-(CKEDITOR.env.ie?7:0));var c=t.frameId+"_input";for(n.$.write(['<html dir="'+s+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+s+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(o.action),'"><label id="',t.labelId,'" for="',c,'" style="display:none">',CKEDITOR.tools.htmlEncode(o.label),'</label><input style="width:100%" id="',c,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(o.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+a+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+r+")}","<\/script>"].join("")),n.$.close(),e=0;e<i.length;e++)i[e].enable()}var t=this._,n=CKEDITOR.document.getById(t.frameId).getFrameDocument(),o=t.definition,i=t.buttons,a=this.formLoadedNumber,r=this.formUnloadNumber,s=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;a||(a=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),r=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(a),CKEDITOR.tools.removeFunction(r)})),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("tel",t),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var o,i=t.children,a=[],r=[],s=0;s<i.length&&(o=i[s]);s++){var l=[];a.push(l),r.push(CKEDITOR.dialog._.uiElementBuilders[o.type].build(e,o,l))}return new CKEDITOR.ui.dialog[t.type](e,r,a,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;n>t-e;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function n(e,t){for(var n=e.$.getElementsByTagName("input"),o=0,i=n.length;o<i;o++){var a=new CKEDITOR.dom.element(n[o]);"text"==a.getAttribute("type").toLowerCase()&&(t?(a.setAttribute("value",a.getCustomData("fake_value")||""),a.removeCustomData("fake_value")):(a.setCustomData("fake_value",a.getAttribute("value")),a.setAttribute("value","")))}}function o(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function i(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function a(e){var t=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",m).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=t.getChild([0,0,0,0,0]),o=n.getChild(0),i=n.getChild(1);return e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(n.getParent())),o.unselectable(),i.unselectable(),{element:t,parts:{dialog:t.getChild(0),title:o,close:i,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}function r(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),t.on("focus",function(){this.fire("mouseover")}),t.on("blur",function(){this.fire("mouseout")})}function s(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",function(){n.removeListener("resize",t)})}function l(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function c(e){function t(t){var n=e.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),c=t.data.$.screenX,u=t.data.$.screenY,d=c-o.x,f=u-o.y;o={x:c,y:u},i.x+=d,i.y+=f,e.move(i.x+s[3]<r?-s[3]:i.x-s[1]>l.width-n.width-r?l.width-n.width+("rtl"==a.lang.dir?0:s[1]):i.x,i.y+s[0]<r?-s[0]:i.y-s[2]>l.height-n.height-r?l.height-n.height+s[2]:i.y,1),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.env.ie6Compat){var e=b.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",n)}}var o=null,i=null,a=e.getParentEditor(),r=a.config.dialog_magnetDistance,s=CKEDITOR.skin.margins||[0,0,0,0];void 0===r&&(r=20),e.parts.title.on("mousedown",function(a){if(o={x:a.data.$.screenX,y:a.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),i=e.getPosition(),CKEDITOR.env.ie6Compat){var r=b.getChild(0).getFrameDocument();r.on("mousemove",t),r.on("mouseup",n)}a.data.preventDefault()},e)}function u(e){function t(t){var n="rtl"==d.lang.dir,u=c.width,f=c.height,p=u+(t.data.$.screenX-l.x)*(n?-1:1)*(e._.moved?1:2),h=f+(t.data.$.screenY-l.y)*(e._.moved?1:2),m=e._.element.getFirst(),m=n&&m.getComputedStyle("right"),g=e.getPosition();g.y+h>s.height&&(h=s.height-g.y),(n?m:g.x)+p>s.width&&(p=s.width-(n?m:g.x)),i!=CKEDITOR.DIALOG_RESIZE_WIDTH&&i!=CKEDITOR.DIALOG_RESIZE_BOTH||(u=Math.max(o.minWidth||0,p-a)),i!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&i!=CKEDITOR.DIALOG_RESIZE_BOTH||(f=Math.max(o.minHeight||0,h-r)),e.resize(u,f),e._.moved||e.layout(),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.document.removeListener("mousemove",t),u&&(u.remove(),u=null),CKEDITOR.env.ie6Compat){var e=b.getChild(0).getFrameDocument();e.removeListener("mouseup",n),e.removeListener("mousemove",t)}}var o=e.definition,i=o.resizable;if(i!=CKEDITOR.DIALOG_RESIZE_NONE){var a,r,s,l,c,u,d=e.getParentEditor(),f=CKEDITOR.tools.addFunction(function(o){c=e.getSize();var i=e.parts.contents;i.$.getElementsByTagName("iframe").length&&(u=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),i.append(u)),r=c.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),a=c.width-e.parts.contents.getSize("width",1),l={x:o.screenX,y:o.screenY},s=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),CKEDITOR.env.ie6Compat&&(i=b.getChild(0).getFrameDocument(),i.on("mousemove",t),i.on("mouseup",n)),o.preventDefault&&o.preventDefault()});e.on("load",function(){var t="";i==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":i==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+d.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(d.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+f+', event )">'+("ltr"==d.lang.dir?"":"")+"</div>"),e.parts.footer.append(t,1)}),d.on("destroy",function(){CKEDITOR.tools.removeFunction(f)})}}function d(e){e.data.preventDefault(1)}function f(e){var t=CKEDITOR.document.getWindow(),n=e.config,o=CKEDITOR.skinName||e.config.skin,i=n.dialog_backgroundCoverColor||("moono-lisa"==o?"black":"white"),o=n.dialog_backgroundCoverOpacity,a=n.baseFloatZIndex,n=CKEDITOR.tools.genKey(i,o,a),r=O[n];r?r.show():(a=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",a,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+i,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(i="<html><body style=\\'background-color:"+i+";\\'></body></html>",a.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),a.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+i+"' );document.close();")+"})())"),a.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),a.push("</div>"),r=CKEDITOR.dom.element.createFromHtml(a.join("")),r.setOpacity(void 0!==o?o:.5),r.on("keydown",d),r.on("keypress",d),r.on("keyup",d),r.appendTo(CKEDITOR.document.getBody()),O[n]=r),e.focusManager.add(r),b=r,e=function(){var e=t.getViewPaneSize();r.setStyles({width:e.width+"px",height:e.height+"px"})};var s=function(){var e=t.getScrollPosition(),n=CKEDITOR.dialog._.currentTop;if(r.setStyles({left:e.x+"px",top:e.y+"px"}),n)do{e=n.getPosition(),n.move(e.x,e.y)}while(n=n._.parentDialog)};if(C=e,t.on("resize",e),e(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||r.focus(),CKEDITOR.env.ie6Compat){var l=function(){s(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout(function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l},0),s()}}function p(e){b&&(e.focusManager.remove(b),e=CKEDITOR.document.getWindow(),b.hide(),e.removeListener("resize",C),CKEDITOR.env.ie6Compat&&e.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),C=null)}var h=CKEDITOR.tools.cssLength,m='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(n,r){function s(){var e=O._.focusList;e.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}function l(e){var t=O._.focusList;if(e=e||0,!(1>t.length)){var n=O._.currentFocusIndex;O._.tabBarMode&&0>e&&(n=0);try{t[n].getInputElement().$.blur()}catch(e){}var o=n,i=1<O._.pageCount;do{if(o+=e,i&&!O._.tabBarMode&&(o==t.length||-1==o))return O._.tabBarMode=!0,O._.tabs[O._.currentTabId][0].focus(),void(O._.currentFocusIndex=-1);if((o=(o+t.length)%t.length)==n)break}while(e&&!t[o].isFocusable());t[o].focus(),"text"==t[o].type&&t[o].select()}}function d(o){if(O==CKEDITOR.dialog._.currentTop){var i=o.data.getKeystroke(),a="rtl"==n.lang.dir,r=[37,38,39,40];if(p=h=0,9==i||i==CKEDITOR.SHIFT+9)l(i==CKEDITOR.SHIFT+9?-1:1),p=1;else if(i==CKEDITOR.ALT+121&&!O._.tabBarMode&&1<O.getPageCount())O._.tabBarMode=!0,O._.tabs[O._.currentTabId][0].focus(),O._.currentFocusIndex=-1,p=1;else if(-1!=CKEDITOR.tools.indexOf(r,i)&&O._.tabBarMode)i=-1!=CKEDITOR.tools.indexOf([a?39:37,38],i)?e.call(O):t.call(O),O.selectPage(i),O._.tabs[i][0].focus(),p=1;else if(13!=i&&32!=i||!O._.tabBarMode)if(13==i)i=o.data.getTarget(),i.is("a","button","select","textarea")||i.is("input")&&"button"==i.$.type||((i=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(i.click,0,i),p=1),h=1;else{if(27!=i)return;(i=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(i.click,0,i):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),h=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),p=1;f(o)}}function f(e){p?e.data.preventDefault(1):h&&e.data.stopPropagation()}var p,h,m=CKEDITOR.dialog._.dialogDefinitions[r],E=CKEDITOR.tools.clone(g),T=n.config.dialog_buttonsOrder||"OS",v=n.lang.dir,C={};if(("OS"==T&&CKEDITOR.env.mac||"rtl"==T&&"ltr"==v||"ltr"==T&&"rtl"==v)&&E.buttons.reverse(),m=CKEDITOR.tools.extend(m(n),E),m=CKEDITOR.tools.clone(m),m=new y(this,m),E=a(n),this._={editor:n,element:E.element,name:r,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=E.parts,CKEDITOR.tools.setTimeout(function(){n.fire("ariaWidget",this.parts.contents)},0,this),E={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},E["rtl"==v?"right":"left"]=0,this.parts.dialog.setStyles(E),CKEDITOR.event.call(this),this.definition=m=CKEDITOR.fire("dialogDefinition",{name:r,definition:m},n).definition,!("removeDialogTabs"in n._)&&n.config.removeDialogTabs){for(E=n.config.removeDialogTabs.split(";"),v=0;v<E.length;v++)if(T=E[v].split(":"),2==T.length){var b=T[0];C[b]||(C[b]=[]),C[b].push(T[1])}n._.removeDialogTabs=C}if(n._.removeDialogTabs&&(C=n._.removeDialogTabs[r]))for(v=0;v<C.length;v++)m.removeContents(C[v]);m.onLoad&&this.on("load",m.onLoad),m.onShow&&this.on("show",m.onShow),m.onHide&&this.on("hide",m.onHide),m.onOk&&this.on("ok",function(e){n.fire("saveSnapshot"),setTimeout(function(){n.fire("saveSnapshot")},0),!1===m.onOk.call(this,e)&&(e.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,m.onCancel&&this.on("cancel",function(e){!1===m.onCancel.call(this,e)&&(e.data.hide=!1)});var O=this,I=function(e){var t,n=O._.contents;for(t in n)for(var o in n[t])if(e.call(this,n[t][o]))return};this.on("ok",function(e){I(function(t){if(t.validate){var n=t.validate(this),i="string"==typeof n||!1===n;return i&&(e.data.hide=!1,e.stop()),o.call(t,!i,"string"==typeof n?n:void 0),i}})},this,null,0),this.on("cancel",function(e){I(function(t){if(t.isChanged())return n.config.dialog_noConfirmCancel||confirm(n.lang.common.confirmCancel)||(e.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()},this),this.changeFocus=l;var D=this._.element;for(n.focusManager.add(D,1),this.on("show",function(){D.on("keydown",d,this),CKEDITOR.env.gecko&&D.on("keypress",f,this)}),this.on("hide",function(){D.removeListener("keydown",d),CKEDITOR.env.gecko&&D.removeListener("keypress",f),I(function(e){i.apply(e)})}),this.on("iframeAdded",function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",d,this,null,0)}),this.on("show",function(){s();var e=1<O._.pageCount;n.config.dialog_startupFocusTab&&e?(O._.tabBarMode=!0,O._.tabs[O._.currentTabId][0].focus(),O._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,m.onFocus?(e=m.onFocus.call(this))&&e.focus():l(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)},this),c(this),u(this),new CKEDITOR.dom.text(m.title,CKEDITOR.document).appendTo(this.parts.title),v=0;v<m.contents.length;v++)(C=m.contents[v])&&this.addPage(C);for(this.parts.tabs.on("click",function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1)),e.data.preventDefault())},this),v=[],C=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:m.buttons},v).getChild(),this.parts.footer.setHtml(v.join("")),v=0;v<C.length;v++)this._.buttons[C[v].id]=C[v]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t})}}(),getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var o=this._.element.getFirst(),i="rtl"==this._.editor.lang.dir,a="fixed"==o.getComputedStyle("position");CKEDITOR.env.ie&&o.setStyle("zoom","100%"),a&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},a||(a=CKEDITOR.document.getWindow().getScrollPosition(),e+=a.x,t+=a.y),i&&(a=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-a.width-e),t={top:(0<t?t:0)+"px"},t[i?"right":"left"]=(0<e?e:0)+"px",o.setStyles(t),n&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display","block"):e.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,f(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",D),e.on("keyup",R),this._.hasFocus=!1;for(var n in t.contents)if(t.contents[n]){var e=t.contents[n],o=this._.tabs[e.id],i=e.requiredContent,a=0;if(o){for(var r in this._.contents[e.id]){var l=this._.contents[e.id][r];"hbox"!=l.type&&"vbox"!=l.type&&l.getInputElement()&&(l.requiredContent&&!this._.editor.activeFilter.check(l.requiredContent)?l.disable():(l.enable(),a++))}!a||i&&!this._.editor.activeFilter.check(i)?o[0].addClass("cke_dialog_tab_disabled"):o[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),s(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(e){e.setInitValue&&e.setInitValue()})},100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),o=(n.width-t.width)/2,i=(n.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(0<i?i:0)>n.height||t.width+(0<o?o:0)>n.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:o,this._.moved?this._.position.y:i)},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),k(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",D),e.removeListener("keyup",R);var n=this._.editor;n.focus(),setTimeout(function(){n.focusManager.unlock(),CKEDITOR.env.iOS&&n.window.focus()},0)}delete this._.parentDialog,this.foreach(function(e){e.resetInitValue&&e.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",o=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),i=this._.contents[e.id]={},a=o.getChild(),r=0;o=a.shift();)o.notAllowed||"hbox"==o.type||"vbox"==o.type||r++,i[o.id]=o,"function"==typeof o.getChild&&a.push.apply(a,o.getChild());r||(e.hidden=!0),t=CKEDITOR.dom.element.createFromHtml(t.join("")),t.setAttribute("role","tabpanel"),o=CKEDITOR.env,i="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',i,'"',o.gecko&&!o.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",i),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(_(this,this,"CTRL+"+e.accessKey,S,K),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var o=this._.tabs[t][0],i=this._.tabs[t][1];t!=e&&(o.removeClass("cke_dialog_tab_selected"),i.hide()),i.setAttribute("aria-hidden",t!=e)}var a=this._.tabs[e];a[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(n(a[1]),a[1].show(),setTimeout(function(){n(a[1],1)},0)):a[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var n=this._.tabs[t]&&this._.tabs[t][0];n&&1!=this._.pageCount&&n.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if(void 0===t)t=this._.focusList.length,this._.focusList.push(new r(this,e,t));else{this._.focusList.splice(t,0,new r(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(e){if(this.state!=e){if(this.state=e,e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,n={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==t?"right":"left"}};n.styles["margin-"+("rtl"==t?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",n),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",e)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return!((e=e.config.removeDialogTabs)&&e.match(new RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(e){e=e.data.dialog,!1!==e.fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(e){e=e.data.dialog,!1!==e.fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var g={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},E=function(e,t,n){for(var o,i=0;o=e[i];i++)if(o.id==t||n&&o[n]&&(o=E(o[n],t,n)))return o;return null},T=function(e,t,n,o,i){if(n){for(var a,r=0;a=e[r];r++){if(a.id==n)return e.splice(r,0,t),t;if(o&&a[o]&&(a=T(a[o],t,n,o,!0)))return a}if(i)return null}return e.push(t),t},v=function(e,t,n){for(var o,i=0;o=e[i];i++){if(o.id==t)return e.splice(i,1);if(n&&o[n]&&(o=v(o[n],t,n)))return o}return null},y=function(e,t){this.dialog=e;for(var n,o=t.contents,i=0;n=o[i];i++)o[i]=n&&new l(e,n);CKEDITOR.tools.extend(this,t)};y.prototype={getContents:function(e){return E(this.contents,e)},getButton:function(e){return E(this.buttons,e)},addContents:function(e,t){return T(this.contents,e,t)},addButton:function(e,t){return T(this.buttons,e,t)},removeContents:function(e){v(this.contents,e)},removeButton:function(e){v(this.buttons,e)}},l.prototype={get:function(e){return E(this.elements,e,"children")},add:function(e,t){return T(this.elements,e,t,"children")},remove:function(e){v(this.elements,e,"children")}};var C,b,O={},I={},D=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,o=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode);(t=I[(t?"CTRL+":"")+(n?"ALT+":"")+(o?"SHIFT+":"")+i])&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},R=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,o=e.data.$.shiftKey,i=String.fromCharCode(e.data.$.keyCode);(t=I[(t?"CTRL+":"")+(n?"ALT+":"")+(o?"SHIFT+":"")+i])&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))},_=function(e,t,n,o,i){(I[n]||(I[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:i||e.accessKeyUp,keydown:o||e.accessKeyDown})},k=function(e){for(var t in I){for(var n=I[t],o=n.length-1;0<=o;o--)n[o].dialog!=e&&n[o].uiElement!=e||n.splice(o,1);0===n.length&&delete I[t]}},K=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},S=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(e,t,n,o,i,a,r){if(!(4>arguments.length)){var s=(o.call?o(t):o)||"div",l=["<",s," "],c=(i&&i.call?i(t):i)||{},u=(a&&a.call?a(t):a)||{},d=(r&&r.call?r.call(this,e,t):r)||"",f=this.domId=u.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(c.display="none",this.notAllowed=!0),u.id=f;var p={};t.type&&(p["cke_dialog_ui_"+t.type]=1),t.className&&(p[t.className]=1),t.disabled&&(p.cke_disabled=1);for(var h=u.class&&u.class.split?u.class.split(" "):[],f=0;f<h.length;f++)h[f]&&(p[h[f]]=1);h=[];for(f in p)h.push(f);u.class=h.join(" "),t.title&&(u.title=t.title),p=(t.style||"").split(";"),t.align&&(h=t.align,c["margin-left"]="left"==h?0:"auto",c["margin-right"]="right"==h?0:"auto");for(f in c)p.push(f+":"+c[f]);for(t.hidden&&p.push("display:none"),f=p.length-1;0<=f;f--)""===p[f]&&p.splice(f,1);0<p.length&&(u.style=(u.style?u.style+"; ":"")+p.join("; "));for(f in u)l.push(f+'="'+CKEDITOR.tools.htmlEncode(u[f])+'" ');l.push(">",d,"</",s,">"),n.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(n){e.call(this,t.setValue.call(this,n))}})),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return t.getValue.call(this,e.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&_(this,e,"CTRL+"+t.accessKey);var m=this;e.on("load",function(){var t=m.getInputElement();if(t){var n=m.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";t.on("focus",function(){e._.tabBarMode=!1,e._.hasFocus=!0,m.fire("focus"),n&&this.addClass(n)}),t.on("blur",function(){m.fire("blur"),n&&this.removeClass(n)})}}),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",function(){e._.currentFocusIndex=m.focusIndex}))}},hbox:function(e,t,n,o,i){if(!(4>arguments.length)){this._||(this._={});var a,r=this._.children=t,s=i&&i.widths||null,l=i&&i.height||null,c={role:"presentation"};i&&i.align&&(c.align=i.align),CKEDITOR.ui.dialog.uiElement.call(this,e,i||{type:"hbox"},o,"table",{},c,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(a=0;a<n.length;a++){var t="cke_dialog_ui_hbox_child",o=[];0===a&&(t="cke_dialog_ui_hbox_first"),a==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),s?s[a]&&o.push("width:"+h(s[a])):o.push("width:"+Math.floor(100/n.length)+"%"),l&&o.push("height:"+h(l)),i&&void 0!==i.padding&&o.push("padding:"+h(i.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[a].align&&o.push("text-align:"+r[a].align),0<o.length&&e.push('style="'+o.join("; ")+'" '),e.push(">",n[a],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(e,t,n,o,i){if(!(3>arguments.length)){this._||(this._={});var a=this._.children=t,r=i&&i.width||null,s=i&&i.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,i||{type:"vbox"},o,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),i&&i.expand&&t.push("height:100%;"),t.push("width:"+h(r||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(i&&i.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var o=0;o<n.length;o++){var l=[];t.push('<tr><td role="presentation" '),r&&l.push("width:"+h(r||"100%")),s?l.push("height:"+h(s[o])):i&&i.expand&&l.push("height:"+Math.floor(100/n.length)+"%"),i&&void 0!==i.padding&&l.push("padding:"+h(i.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a[o].align&&l.push("text-align:"+a[o].align),0<l.length&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[o],"</td></tr>")}return t.push("</tbody></table>"),t.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,n,o=/^on([A-Z]\w+)/;for(n in e)(t=n.match(o))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):function(e,t,n,o){t.on("load",function(){e.getInputElement().on(n,o,e)})}(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return 1>arguments.length?this._.children.concat():(e.splice||(e=[e]),2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,n){for(var o,i=t.children,a=[],r=[],s=0;s<i.length&&(o=i[s]);s++){var l=[];a.push(l),r.push(CKEDITOR.dialog._.uiElementBuilders[o.type].build(e,o,l))}return new CKEDITOR.ui.dialog[t.type](e,r,a,n,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){var t=this.tabId;e.openDialog(this.dialogName,function(e){t&&e.selectPage(t)})},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,o=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,a=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,n,o=this&&this.getValue?this.getValue():e[0],i=CKEDITOR.VALIDATE_AND,a=[];for(n=0;n<e.length&&"function"==typeof e[n];n++)a.push(e[n]);n<e.length&&"string"==typeof e[n]&&(t=e[n],n++),n<e.length&&"number"==typeof e[n]&&(i=e[n]);var r=i==CKEDITOR.VALIDATE_AND;for(n=0;n<a.length;n++)r=i==CKEDITOR.VALIDATE_AND?r&&a[n](o):r||a[n](o);return!!r||t}},regex:function(e,t){return function(n){return n=this&&this.getValue?this.getValue():n,!!e.test(n)||t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions(function(e){return i.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return o.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return a.test(CKEDITOR.tools.trim(e))},e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},CKEDITOR.on("instanceDestroyed",function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in O)O[n].remove();O={}}e=e.editor._.storedDialogs;for(var o in e)e[o].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var n=null,o=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&f(this),"function"==typeof o)n=this._.storedDialogs||(this._.storedDialogs={}),n=n[e]||(n[e]=new CKEDITOR.dialog(this,e)),t&&t.call(n,n),n.show();else{if("failed"==o)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof o&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(o),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),n}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),function(){e.lang.a11yhelp=t.langEntries[n],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",function(t){t.data.label=e.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,n=function(n,i,a,r){if(r){r=new CKEDITOR.style(r);var s=o[a];s.unshift(r),e.attachStyleStateChange(r,function(t){!e.readOnly&&e.getCommand(a).setState(t)}),e.addCommand(a,new CKEDITOR.styleCommand(r,{contentForms:s})),e.ui.addButton&&e.ui.addButton(n,{label:i,command:a,toolbar:"basicstyles,"+(t+=10)})}},o={bold:["strong","b",["span",function(e){return"bold"==(e=e.styles["font-weight"])||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},i=e.config,a=e.lang.basicstyles;n("Bold",a.bold,"bold",i.coreStyles_bold),n("Italic",a.italic,"italic",i.coreStyles_italic),n("Underline",a.underline,"underline",i.coreStyles_underline),n("Strike",a.strike,"strike",i.coreStyles_strike),n("Subscript",a.subscript,"subscript",i.coreStyles_subscript),n("Superscript",a.superscript,"superscript",i.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),o=n&&n.getRanges()[0];if(o){var i=n.createBookmarks();if(CKEDITOR.env.ie){var a,r=i[0].startNode,s=i[0].endNode;if(r&&"blockquote"==r.getParent().getName())for(a=r;a=a.getNext();)if(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary()){r.move(a,!0);break}if(s&&"blockquote"==s.getParent().getName())for(a=s;a=a.getPrevious();)if(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary()){s.move(a);break}}var l=o.createIterator();if(l.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(r=[];t=l.getNextParagraph();)r.push(t);for(1>r.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),s=i.shift(),o.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),o.moveToBookmark(s),o.selectNodeContents(t),o.collapse(!0),s=o.createBookmark(),r.push(t),i.unshift(s)),a=r[0].getParent(),o=[],s=0;s<r.length;s++)t=r[s],a=a.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[a.getName()];)a=a.getParent();for(s=null;0<r.length;){for(t=r.shift();!t.getParent().equals(a);)t=t.getParent();t.equals(s)||o.push(t),s=t}for(;0<o.length;)if(t=o.shift(),"blockquote"==t.getName()){for(s=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)s.append(t.getFirst().remove()),r.push(s.getLast());s.replace(t)}else r.push(t);for(o=e.document.createElement("blockquote"),o.insertBefore(r[0]);0<r.length;)t=r.shift(),o.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(s=[],a={};t=l.getNextParagraph();){for(r=o=null;t.getParent();){if("blockquote"==t.getParent().getName()){o=t.getParent(),r=t;break}t=t.getParent()}o&&r&&!r.getCustomData("blockquote_moveout")&&(s.push(r),CKEDITOR.dom.element.setMarker(a,r,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(a),t=[],r=[],a={};0<s.length;)l=s.shift(),o=l.getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),r.push(l.getNext())):l.remove().insertAfter(o):l.remove().insertBefore(o),o.getCustomData("blockquote_processed")||(r.push(o),CKEDITOR.dom.element.setMarker(a,o,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(a),s=r.length-1;0<=s;s--){o=r[s];e:{a=o;for(var l=0,c=a.getChildCount(),u=void 0;l<c&&(u=a.getChild(l));l++)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){a=!1;break e}a=!0}a&&o.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(o=!0;t.length;)if(l=t.shift(),"div"==l.getName()){for(s=new CKEDITOR.dom.documentFragment(e.document),!o||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||s.append(e.document.createElement("br")),o=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(s);o&&s.append(e.document.createElement("br")),s.replace(l),o=!1}}n.selectBookmarks(i),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function e(e,t){CKEDITOR.tools.extend(this,t,{editor:e,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:e._.notificationArea}),t.type||(this.type="info"),this.element=this._createElement(),e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function t(e){var t=this;this.editor=e,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),e.on("destroy",function(){t._removeListeners(),t.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(e){function n(e){var t=new CKEDITOR.dom.element("div");t.setStyles({position:"fixed","margin-left":"-9999px"}),t.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),t.setText(e),CKEDITOR.document.getBody().append(t),setTimeout(function(){t.remove()},100)}e._.notificationArea=new t(e),e.showNotification=function(t,n,o){var i,a;return"progress"==n?i=o:a=o,t=new CKEDITOR.plugins.notification(e,{message:t,type:n,progress:i,duration:a}),t.show(),t},e.on("key",function(t){if(27==t.data.keyCode){var o=e._.notificationArea.notifications;o.length&&(n(e.lang.notification.closed),o[o.length-1].hide(),t.cancel())}})}}),e.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(e){var t=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:e})&&(t=!1);var n=this.element,o=n.findOne(".cke_notification_message"),i=n.findOne(".cke_notification_progress"),a=e.type;n.removeAttribute("role"),e.progress&&"progress"!=this.type&&(a="progress"),a&&(n.removeClass(this._getClass()),n.removeAttribute("aria-label"),this.type=a,n.addClass(this._getClass()),n.setAttribute("aria-label",this.type),"progress"!=this.type||i?"progress"!=this.type&&i&&i.remove():(i=this._createProgressElement(),i.insertBefore(o))),void 0!==e.message&&(this.message=e.message,o.setHtml(this.message)),void 0!==e.progress&&(this.progress=e.progress,i&&i.setStyle("width",this._getPercentageProgress())),t&&e.important&&(n.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=e.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e,t,n=this,o=this.editor.lang.common.close;return e=new CKEDITOR.dom.element("div"),e.addClass("cke_notification"),e.addClass(this._getClass()),e.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&e.append(this._createProgressElement()),t=new CKEDITOR.dom.element("p"),t.addClass("cke_notification_message"),t.setHtml(this.message),e.append(t),t=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+o+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),e.append(t),t.on("click",function(){n.editor.focus(),n.hide()}),e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var e=new CKEDITOR.dom.element("span");return e.addClass("cke_notification_progress"),e.setStyle("width",this._getPercentageProgress()),e},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var e,t=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?e=this.duration:"info"!=this.type&&"success"!=this.type||(e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),e&&(t._hideTimeoutId=setTimeout(function(){t.hide()},e))}},t.prototype={add:function(e){this.notifications.push(e),this.element.append(e.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(e){var t=CKEDITOR.tools.indexOf(this.notifications,e);0>t||(this.notifications.splice(t,1),e.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var e=this.editor,t=e.config,n=new CKEDITOR.dom.element("div");return n.addClass("cke_notifications_area"),n.setAttribute("id","cke_notifications_area_"+e.name),n.setStyle("z-index",t.baseFloatZIndex-2),n},_attachListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.on("scroll",this._uiBuffer.input),e.on("resize",this._uiBuffer.input),t.on("change",this._changeBuffer.input),t.on("floatingSpaceLayout",this._layout,this,null,20),t.on("blur",this._layout,this,null,20)},_removeListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.removeListener("scroll",this._uiBuffer.input),e.removeListener("resize",this._uiBuffer.input),t.removeListener("change",this._changeBuffer.input),t.removeListener("floatingSpaceLayout",this._layout),t.removeListener("blur",this._layout)},_layout:function(){function e(){i.setStyle("left",m(g+r.width-c-u))}var t,n,o,i=this.element,a=this.editor,r=a.ui.contentsElement.getClientRect(),s=a.ui.contentsElement.getDocumentPosition(),l=i.getClientRect(),c=this._notificationWidth,u=this._notificationMargin;o=CKEDITOR.document.getWindow();var d=o.getScrollPosition(),f=o.getViewPaneSize(),p=CKEDITOR.document.getBody(),h=p.getDocumentPosition(),m=CKEDITOR.tools.cssLength;c&&u||(o=this.element.getChild(0),c=this._notificationWidth=o.getClientRect().width,u=this._notificationMargin=parseInt(o.getComputedStyle("margin-left"),10)+parseInt(o.getComputedStyle("margin-right"),10)),a.toolbar&&(t=a.ui.space("top"),n=t.getClientRect()),t&&t.isVisible()&&n.bottom>r.top&&n.bottom<r.bottom-l.height?i.setStyles({position:"fixed",top:m(n.bottom)}):0<r.top?i.setStyles({position:"absolute",top:m(s.y)}):s.y+r.height-l.height>d.y?i.setStyles({position:"fixed",top:0}):i.setStyles({position:"absolute",top:m(s.y+r.height-l.height)});var g="fixed"==i.getStyle("position")?r.left:"static"!=p.getComputedStyle("position")?s.x-h.x:s.x;r.width<c+u?s.x+c+u>d.x+f.width?e():i.setStyle("left",m(g)):s.x+c+u>d.x+f.width?i.setStyle("left",m(g)):s.x+r.width/2+c/2+u>d.x+f.width?i.setStyle("left",m(g-s.x+d.x+f.width-c-u)):0>r.left+r.width-c-u?e():0>r.left+r.width/2-c/2?i.setStyle("left",m(g-s.x+d.x)):i.setStyle("left",m(g+r.width/2-c/2-u/2))}},CKEDITOR.plugins.notification=e}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var t="";CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&');var e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>',n=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),o=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,t){function i(){var t=e.mode;t&&(t=this.modes[t]?void 0!==l[t]?l[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var a,r,s,l=null,c=CKEDITOR.env,u=this._.id=CKEDITOR.tools.getNextId(),d="",f=this.command;this._.editor=e;var p={id:u,button:this,editor:e,focus:function(){CKEDITOR.document.getById(u).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},h=CKEDITOR.tools.addFunction(function(e){if(p.onkey)return e=new CKEDITOR.dom.event(e),!1!==p.onkey(p,e.getKeystroke())}),m=CKEDITOR.tools.addFunction(function(e){var t;return p.onfocus&&(t=!1!==p.onfocus(p,new CKEDITOR.dom.event(e))),t}),g=0;p.clickFn=a=CKEDITOR.tools.addFunction(function(){g&&(e.unlockSelection(1),g=0),p.execute(),c.iOS&&e.focus()}),this.modes?(l={},e.on("beforeModeUnload",function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[e.mode]=this._.state)},this),e.on("activeFilterChange",i,this),e.on("mode",i,this),!this.readOnly&&e.on("readOnly",i,this)):f&&(f=e.getCommand(f))&&(f.on("state",function(){this.setState(f.state)},this),d+=f.state==CKEDITOR.TRISTATE_ON?"on":f.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");var E;this.directional&&e.on("contentDirChanged",function(t){var n=CKEDITOR.document.getById(this._.id),o=n.getFirst();t=t.data,t!=e.lang.dir?n.addClass("cke_"+t):n.removeClass("cke_ltr").removeClass("cke_rtl"),o.setAttribute("style",CKEDITOR.skin.getIconStyle(E,"rtl"==t,this.icon,this.iconOffset))},this),f?(r=e.getCommandKeystroke(f))&&(s=CKEDITOR.tools.keystrokeToString(e.lang.common.keyboard,r)):d+="off",r=this.name||this.command;var T=null,v=this.icon;return E=r,this.icon&&!/\./.test(this.icon)?(E=this.icon,v=null):(this.icon&&(T=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(T=this.iconHiDpi)),T?(CKEDITOR.skin.addIcon(T,T),v=null):T=E,d={id:u,name:r,iconName:E,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:d,ariaDisabled:"disabled"==d?"true":"false",title:this.title+(s?" ("+s.display+")":""),ariaShortcut:s?e.lang.common.keyboardShortcut+" "+s.aria:"",titleJs:c.gecko&&!c.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:h,focusFn:m,clickFn:a,style:CKEDITOR.skin.getIconStyle(T,"rtl"==e.lang.dir,v,this.iconOffset),arrowHtml:this.hasArrow?n.output():""},o.output(d,t),this.onRender&&this.onRender(),p},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return!!t&&(t.setState(e,"cke_button"),t.setAttribute("aria-disabled",e==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?t.setAttribute("aria-expanded",e==CKEDITOR.TRISTATE_ON):e===CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return this.allowedContent||this.requiredContent||!this.command||(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),function(){function e(e){function n(){var t,n,o,i={};for(t in e.ui.items)n=e.ui.items[t],o=n.toolbar||"others",o=o.split(","),n=o[0],o=parseInt(o[1]||-1,10),i[n]||(i[n]=[]),i[n].push({name:t,order:o});for(n in i)i[n]=i[n].sort(function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1});return i}function o(t,n){if(n.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var o;o=n.shift();)o="string"==typeof o?o:o.name,i&&-1!=CKEDITOR.tools.indexOf(i,o)||(o=e.ui.create(o))&&e.addFeature(o)&&t.items.push(o)}}var i=e.config.removeButtons,i=i&&i.split(","),a=e.config.toolbar;return"string"==typeof a&&(a=e.config["toolbar_"+a]),e.toolbar=a?function(e){var t,n,i,a=[];for(t=0;t<e.length;++t)n=e[t],i={},"/"==n?a.push(n):CKEDITOR.tools.isArray(n)?(o(i,CKEDITOR.tools.clone(n)),a.push(i)):n.items&&(o(i,CKEDITOR.tools.clone(n.items)),i.name=n.name,a.push(i));return a}(a):function(){for(var i=n(),a=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),r=0;r<a.length;r++){var s=a[r];if("/"!=s){"string"==typeof s&&(s=a[r]={name:s});var l,c=s.groups;if(c)for(var u=0;u<c.length;u++)l=c[u],(l=i[l])&&o(s,l);(l=i[s.name])&&o(s,l)}}return a}()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var n,o=0;n=e.items[o++];)if(n.focus)return void n.focus()};var o={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var i,a=function(e,n){var o,r="rtl"==t.lang.dir,s=t.config.toolbarGroupCycling,l=r?37:39,r=r?39:37,s=void 0===s||s;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!o||!o.items.length;)if(o=9==n?(o?o.next:e.toolbar.next)||t.toolbox.toolbars[0]:(o?o.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1],o.items.length)for(e=o.items[i?o.items.length-1:0];e&&!e.focus;)(e=i?e.previous:e.next)||(o=0);return e&&e.focus(),!1;case l:o=e;do{!(o=o.next)&&s&&(o=e.toolbar.items[0])}while(o&&!o.focus);return o?o.focus():a(e,9),!1;case 40:return e.button&&e.button.hasArrow?e.execute():a(e,40==n?l:r),!1;case r:case 38:o=e;do{!(o=o.previous)&&s&&(o=e.toolbar.items[e.toolbar.items.length-1])}while(o&&!o.focus);return o?o.focus():(i=1,a(e,CKEDITOR.SHIFT+9),i=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",function(o){if(o.data.space==t.config.toolbarLocation){o.removeListener(),t.toolbox=new n;var i,r,s=CKEDITOR.tools.getNextId(),l=['<span id="',s,'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',s,'" onmousedown="return false;">'],s=!1!==t.config.toolbarStartupExpanded;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(s?">":' style="display:none">'));for(var c=t.toolbox.toolbars,u=e(t),d=u.length,f=0;f<d;f++){var p,h,m,g=0,E=u[f],T="/"!==E&&("/"===u[f+1]||f==d-1);if(E)if(i&&(l.push("</span>"),r=i=0),"/"===E)l.push('<span class="cke_toolbar_break"></span>');else{m=E.items||E;for(var v=0;v<m.length;v++){var y,C=m[v];if(C){var b=function(e){e=e.render(t,l),O=g.items.push(e)-1,0<O&&(e.previous=g.items[O-1],e.previous.next=e),e.toolbar=g,e.onkey=a,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}};if(C.type==CKEDITOR.UI_SEPARATOR)r=i&&C;else{if(y=!1!==C.canGroup,!g){p=CKEDITOR.tools.getNextId(),g={id:p,items:[]},h=E.name&&(t.lang.toolbar.toolbarGroups[E.name]||E.name),l.push('<span id="',p,'" class="cke_toolbar'+(T?' cke_toolbar_last"':'"'),h?' aria-labelledby="'+p+'_label"':"",' role="toolbar">'),h&&l.push('<span id="',p,'_label" class="cke_voice_label">',h,"</span>"),l.push('<span class="cke_toolbar_start"></span>');var O=c.push(g)-1;0<O&&(g.previous=c[O-1],g.previous.next=g)}y?i||(l.push('<span class="cke_toolgroup" role="presentation">'),i=1):i&&(l.push("</span>"),i=0),r&&(b(r),r=0),b(C)}}}i&&(l.push("</span>"),r=i=0),g&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&l.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var I=CKEDITOR.tools.addFunction(function(){t.execCommand("toolbarCollapse")});t.on("destroy",function(){CKEDITOR.tools.removeFunction(I)}),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),o=e.ui.space("contents"),i=n.getParent(),a=parseInt(o.$.style.height,10),r=i.$.offsetHeight,s=t.hasClass("cke_toolbox_collapser_min");s?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(s?"":""),o.setStyle("height",a-(i.$.offsetHeight-r)+"px"),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:o.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(s?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),s||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+I+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}l.push("</span>"),o.data.html+=l.join("")}}),t.on("destroy",function(){if(this.toolbox){var e,t,n,o,i=0;for(e=this.toolbox.toolbars;i<e.length;i++)for(n=e[i].items,t=0;t<n.length;t++)o=n[t],o.clickFn&&CKEDITOR.tools.removeFunction(o.clickFn),o.keyDownFn&&CKEDITOR.tools.removeFunction(o.keyDownFn)}}),t.on("uiReady",function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)}),t.addCommand("toolbarFocus",o),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,o){var i=t(this.editor),a=0===n,r={name:e};if(o){if(o=CKEDITOR.tools.search(i,function(e){return e.name==o}))return!o.groups&&(o.groups=[]),n&&0<=(n=CKEDITOR.tools.indexOf(o.groups,n))?void o.groups.splice(n+1,0,e):void(a?o.groups.splice(0,0,e):o.groups.push(e));n=null}n&&(n=CKEDITOR.tools.indexOf(i,function(e){return e.name==n})),a?i.splice(0,0,e):"number"==typeof n?i.splice(n+1,0,r):i.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e,t,n){return t.type||(t.type="auto"),!(n&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",function(){e.toolbox.focus()}),e.fire("paste",t))}function t(t){function n(){var e=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var n=function(e){t.getSelection().isCollapsed()||(t.readOnly&&"cut"==e.name||m.initPasteDataTransfer(e,t),e.data.preventDefault())};e.on("copy",n),e.on("cut",n),e.on("cut",function(){t.readOnly||t.extractSelectedHtml()},null,null,999)}e.on(m.mainPasteEvent,function(e){"beforepaste"==m.mainPasteEvent&&g||f(e)}),"beforepaste"==m.mainPasteEvent&&(e.on("paste",function(e){E||(a(),e.data.preventDefault(),f(e),s("paste"))}),e.on("contextmenu",r,null,null,0),e.on("beforepaste",function(e){!e.data||e.data.$.ctrlKey||e.data.$.shiftKey||r()},null,null,0)),e.on("beforecut",function(){!g&&l()});var o;e.attachListener(CKEDITOR.env.ie?e:t.document.getDocumentElement(),"mouseup",function(){o=setTimeout(function(){p()},0)}),t.on("destroy",function(){clearTimeout(o)}),e.on("keyup",p)}function o(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,fakeKeystroke:"cut"==e?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&l();var e,n=this.type;if(CKEDITOR.env.ie)e=s(n);else try{e=t.document.$.execCommand(n,!1,null)}catch(t){e=!1}return e||t.showNotification(t.lang.clipboard[this.type+"Error"]),e}}}function i(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(t,n){function o(n,o){o=void 0===o||o,n?(n.method="paste",n.dataTransfer||(n.dataTransfer=m.initPasteDataTransfer()),e(t,n,o)):a&&!t._.forcePasteDialog&&t.showNotification(l,"info",t.config.clipboard_notificationDuration),t._.forcePasteDialog=!1,t.fire("afterCommandExec",{name:"paste",command:i,returnValue:!!n})}n=void 0!==n&&null!==n?n:{};var i=this,a=void 0===n.notification||n.notification,r=n.type,s=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,t.getCommandKeystroke(this)),l="string"==typeof a?a:t.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+s.aria+'">'+s.display+"</kbd>"),s="string"==typeof n?n:n.dataValue;r&&!0!==t.config.forcePasteAsPlainText&&"allow-word"!==t.config.forcePasteAsPlainText?t._.nextPasteType=r:delete t._.nextPasteType,"string"==typeof s?o({dataValue:s}):t.getClipboardData(o)}}}function a(){E=1,setTimeout(function(){E=0},100)}function r(){g=1,setTimeout(function(){g=0},10)}function s(e){var n=t.document,o=n.getBody(),i=!1,a=function(){i=!0};return o.on(e,a),7<CKEDITOR.env.version?n.$.execCommand(e):n.$.selection.createRange().execCommand(e),o.removeListener(e,a),i}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,n,o,i=t.getSelection();i.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=i.getSelectedElement())&&(n=i.getRanges()[0],o=t.document.createText(""),o.insertBefore(e),n.setStartBefore(o),n.setEndAfter(e),i.selectRanges([n]),setTimeout(function(){e.getParent()&&(o.remove(),i.selectElement(e))},0))}}function c(e,n){var o,i=t.document,a=t.editable(),r=function(e){e.cancel()};if(!i.getById("cke_pastebin")){var s=t.getSelection(),l=s.createBookmarks();CKEDITOR.env.ie&&s.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!a.is("body")||CKEDITOR.env.ie?"div":"body",i);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var u=0,i=i.getWindow();CKEDITOR.env.webkit?(a.append(c),c.addClass("cke_editable"),a.is("body")||(u="static"!=a.getComputedStyle("position")?a:CKEDITOR.dom.element.get(a.$.offsetParent),u=u.getDocumentPosition().y)):a.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:i.getScrollPosition().y-u+10+"px",width:"1px",height:Math.max(1,i.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(u=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-10000px"),t.on("selectionChange",r,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(o=a.once("blur",r,null,null,-100)),u&&c.focus(),u=new CKEDITOR.dom.range(c),u.selectNodeContents(c);var d=u.select();CKEDITOR.env.ie&&(o=a.once("blur",function(){t.lockSelection(d)}));var f=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=f),o&&o.removeListener(),CKEDITOR.env.ie&&a.focus(),s.selectBookmarks(l),c.remove();var e;CKEDITOR.env.webkit&&(e=c.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(c=e),t.removeListener("selectionChange",r),n(c.getHtml())},0)}}function u(){if("paste"==m.mainPasteEvent)return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),a();var e=t.focusManager;return e.lock(),t.editable().fire(m.mainPasteEvent)&&!s("paste")?(e.unlock(),!1):(e.unlock(),!0)}function d(e){if("wysiwyg"==t.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=t.editable(),a(),"paste"==m.mainPasteEvent&&e.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout(function(){t.fire("saveSnapshot")},50)}}function f(n){var o={type:"auto",method:"paste",dataTransfer:m.initPasteDataTransfer(n)};o.dataTransfer.cacheData();var i=!1!==t.fire("beforePaste",o);i&&m.canClipboardApiBeTrusted(o.dataTransfer,t)?(n.data.preventDefault(),setTimeout(function(){e(t,o)},0)):c(n,function(n){o.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),i&&e(t,o)})}function p(){if("wysiwyg"==t.mode){var e=h("paste");t.getCommand("cut").setState(h("cut")),t.getCommand("copy").setState(h("copy")),t.getCommand("paste").setState(e),t.fire("pasteState",e)}}function h(e){if(T&&e in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==e)return CKEDITOR.TRISTATE_OFF;e=t.getSelection();var n=e.getRanges();return e.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var m=CKEDITOR.plugins.clipboard,g=0,E=0,T=0;!function(){if(t.on("key",d),t.on("contentDom",n),t.on("selectionChange",function(e){T=e.data.selection.getRanges()[0].checkReadOnly(),p()}),t.contextMenu){t.contextMenu.addListener(function(e,t){return T=t.getRanges()[0].checkReadOnly(),{cut:h("cut"),copy:h("copy"),paste:h("paste")}});var e=null;t.on("menuShow",function(){e&&(e.removeListener(),e=null);var n=t.contextMenu.findItemByCommandName("paste");n&&n.element&&(e=n.element.on("touchend",function(){t._.forcePasteDialog=!0}))})}t.ui.addButton&&t.once("instanceReady",function(){t._.pasteButtons&&CKEDITOR.tools.array.forEach(t._.pasteButtons,function(e){(e=t.ui.get(e))&&(e=CKEDITOR.document.getById(e._.id))&&e.on("touchend",function(){t._.forcePasteDialog=!0})})})}(),function(){function e(e,n,o,i,a){var r=t.lang.clipboard[n];t.addCommand(n,o),t.ui.addButton&&t.ui.addButton(e,{label:r,command:n,toolbar:"clipboard,"+i}),t.addMenuItems&&t.addMenuItem(n,{label:r,command:n,group:"clipboard",order:a})}e("Cut","cut",o("cut"),10,1),e("Copy","copy",o("copy"),20,4),e("Paste","paste",i(),30,8),t._.pasteButtons||(t._.pasteButtons=[]),t._.pasteButtons.push("Paste")}(),t.getClipboardData=function(e,n){function o(e){e.removeListener(),e.cancel(),n(e.data)}function i(e){e.removeListener(),e.cancel(),n({type:r,dataValue:e.data.dataValue,dataTransfer:e.data.dataTransfer,method:"paste"})}var a=!1,r="auto";n||(n=e,e=null),t.on("beforePaste",function(e){e.removeListener(),a=!0,r=e.data.type},null,null,1e3),t.on("paste",o,null,null,0),!1===u()&&(t.removeListener("paste",o),t._.forcePasteDialog&&a&&t.fire("pasteDialog")?(t.on("pasteDialogCommit",i),t.on("dialogHide",function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",i),e.data._.committed||n(null)})):n(null))}}function n(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function o(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),t=t.replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()}),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),t.match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return n(e.split("</div><div>").length+1)})+"</p>"),t=t.replace(/<\/div><div>/g,"<br>"),t=t.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,function(e){return n(e.length/4)})+"</p>")),r(e,t))}function i(e){function t(){var e,t={};for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}var n={};return{get:function(o){return"plain-text"==o?n.plainText||(n.plainText=new CKEDITOR.filter(e,"br")):"semantic-content"==o?((o=n.semanticContent)||(o=new CKEDITOR.filter(e,{}),o.allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),o=n.semanticContent=o),o):o?new CKEDITOR.filter(e,o):null}}}function a(e,t,n){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var o=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(o),o.getHtml()}function r(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}function s(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}function l(t){var n=CKEDITOR.plugins.clipboard;t.on("contentDom",function(){function o(n,o,i){o.select(),e(t,{dataTransfer:i,method:"drop"},1),i.sourceEditor.fire("saveSnapshot"),i.sourceEditor.editable().extractHtmlFromRange(n),i.sourceEditor.getSelection().selectRanges([n]),i.sourceEditor.fire("saveSnapshot")}function i(o,i){o.select(),e(t,{dataTransfer:i,method:"drop"},1),n.resetDragDataTransfer()}function a(e,n,o){var i={$:e.data.$,target:e.data.getTarget()};n&&(i.dragRange=n),o&&(i.dropRange=o),!1===t.fire(e.name,i)&&e.data.preventDefault()}function r(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e.getChildCount()}var s=t.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(t),c=t.ui.space("top"),u=t.ui.space("bottom");n.preventDefaultDropOnElement(c),n.preventDefaultDropOnElement(u),s.attachListener(l,"dragstart",a),s.attachListener(t,"dragstart",n.resetDragDataTransfer,n,null,1),s.attachListener(t,"dragstart",function(e){n.initDragDataTransfer(e,t)},null,null,2),s.attachListener(t,"dragstart",function(){var e=n.dragRange=t.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=e?r(e.startContainer):null,n.dragEndContainerChildCount=e?r(e.endContainer):null)},null,null,100),s.attachListener(l,"dragend",a),s.attachListener(t,"dragend",n.initDragDataTransfer,n,null,1),s.attachListener(t,"dragend",n.resetDragDataTransfer,n,null,100),s.attachListener(l,"dragover",function(e){if(CKEDITOR.env.edge)e.data.preventDefault();else{var t=e.data.getTarget();t&&t.is&&t.is("html")?e.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains("Files")&&e.data.preventDefault()}}),s.attachListener(l,"drop",function(e){if(!e.data.$.defaultPrevented){e.data.preventDefault();var o=e.data.getTarget();if(!o.isReadOnly()||o.type==CKEDITOR.NODE_ELEMENT&&o.is("html")){var o=n.getRangeAtDropPosition(e,t),i=n.dragRange;o&&a(e,i,o)}}},null,null,9999),s.attachListener(t,"drop",n.initDragDataTransfer,n,null,1),s.attachListener(t,"drop",function(e){if(e=e.data){var a=e.dropRange,r=e.dragRange,s=e.dataTransfer;s.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){n.internalDrop(r,a,s,t)},0):s.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?o(r,a,s):i(a,s)}},null,null,9999)})}var c;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(e){var r,s=i(e);if(e.config.forcePasteAsPlainText?r="plain-text":e.config.pasteFilter?r=e.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in e.config||(r="semantic-content"),e.pasteFilter=s.get(r),t(e),l(e),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var c,u=["image/png","image/jpeg","image/gif"];e.on("paste",function(t){var n=t.data,o=n.dataTransfer;if(!n.dataValue&&"paste"==n.method&&o&&1==o.getFilesCount()&&c!=o.id&&(o=o.getFile(0),-1!=CKEDITOR.tools.indexOf(u,o.type))){var i=new FileReader;i.addEventListener("load",function(){t.data.dataValue='<img src="'+i.result+'" />',e.fire("paste",t.data)},!1),i.addEventListener("abort",function(){e.fire("paste",t.data)},!1),i.addEventListener("error",function(){e.fire("paste",t.data)},!1),i.readAsDataURL(o),c=n.dataTransfer.id,t.stop()}},null,null,1)}e.on("paste",function(t){if(t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!t.data.dataValue){var n=t.data.dataTransfer,o=n.getData("text/html");o?(t.data.dataValue=o,t.data.type="html"):(o=n.getData("text/plain"))&&(t.data.dataValue=e.editable().transformPlainTextToHtml(o),t.data.type="text")}},null,null,1),e.on("paste",function(e){var t=e.data.dataValue,n=CKEDITOR.dtd.$block;if(-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var o,i,a=new CKEDITOR.dom.element("div");for(a.setHtml(t);1==a.getChildCount()&&(o=a.getFirst())&&o.type==CKEDITOR.NODE_ELEMENT&&(o.hasClass("cke_editable")||o.hasClass("cke_contents"));)a=i=o;i&&(t=i.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,o){return o.toLowerCase()in n?(e.data.preSniffing="html","<"+o):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,o){return o in n?(e.data.endsWithEOL=1,"</"+o+">"):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t},null,null,3),e.on("paste",function(t){t=t.data;var i,r=e._.nextPasteType||t.type,l=t.dataValue,c=e.config.clipboard_defaultContentType||"html",u=t.dataTransfer.getTransferType(e)==CKEDITOR.DATA_TRANSFER_EXTERNAL,d=!0===e.config.forcePasteAsPlainText;i="html"==r||"html"==t.preSniffing?"html":n(l),delete e._.nextPasteType,"htmlifiedtext"==i&&(l=o(e.config,l)),"text"==r&&"html"==i?l=a(e,l,s.get("plain-text")):(u&&e.pasteFilter&&!t.dontFilter||d)&&(l=a(e,l,e.pasteFilter)),t.startsWithEOL&&(l='<br data-cke-eol="1">'+l),t.endsWithEOL&&(l+='<br data-cke-eol="1">'),"auto"==r&&(r="html"==i||"html"==c?"html":"text"),t.type=r,t.dataValue=l,delete t.preSniffing,delete t.startsWithEOL,delete t.endsWithEOL},null,null,6),e.on("paste",function(t){t=t.data,t.dataValue&&(e.insertHtml(t.dataValue,t.type,t.range),setTimeout(function(){e.fire("afterPaste")},0))},null,null,1e3),e.on("pasteDialog",function(t){setTimeout(function(){e.openDialog("paste",t.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,t,n){e.ui.addButton&&(e.ui.addButton(t,n),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(e,t){return!!(e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,n,o){function i(e,n,o){var i=e;if(i.type==CKEDITOR.NODE_TEXT&&(i=e.getParent()),i.equals(n)&&o!=n.getChildCount())return e=t.startContainer.getChild(t.startOffset-1),n=t.startContainer.getChild(t.startOffset),e&&e.type==CKEDITOR.NODE_TEXT&&n&&n.type==CKEDITOR.NODE_TEXT&&(o=e.getLength(),e.setText(e.getText()+n.getText()),n.remove(),t.setStart(e,o),t.collapse(!0)),!0}var a=t.startContainer;"number"==typeof o&&"number"==typeof n&&a.type==CKEDITOR.NODE_ELEMENT&&(i(e.startContainer,a,n)||i(e.endContainer,a,o))},isDropRangeAffectedByDragRange:function(e,t){var n=t.startContainer,o=t.endOffset;return!!(e.endContainer.equals(n)&&e.endOffset<=o||e.startContainer.getParent().equals(n)&&e.startContainer.getIndex()<o||e.endContainer.getParent().equals(n)&&e.endContainer.getIndex()<o)},internalDrop:function(t,n,o,i){var a,r,s=CKEDITOR.plugins.clipboard,l=i.editable();i.fire("saveSnapshot"),i.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,n,s.dragStartContainerChildCount,s.dragEndContainerChildCount),(r=this.isDropRangeAffectedByDragRange(t,n))||(a=t.createBookmark(!1)),s=n.clone().createBookmark(!1),r&&(a=t.createBookmark(!1)),t=a.startNode,n=a.endNode,r=s.startNode,n&&t.getPosition(r)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(r)&CKEDITOR.POSITION_FOLLOWING&&r.insertBefore(t),t=i.createRange(),t.moveToBookmark(a),l.extractHtmlFromRange(t,1),n=i.createRange(),s.startNode.getCommonAncestor(l)||(s=i.getSelection().createBookmarks()[0]),n.moveToBookmark(s),e(i,{dataTransfer:o,method:"drop",range:n},1),i.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var n=e.data.$,o=n.clientX,i=n.clientY,a=t.getSelection(!0).getRanges()[0],r=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(o,i))n=t.document.$.caretRangeFromPoint(o,i),r.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),r.collapse(!0);else if(n.rangeParent)r.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),r.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&a&&t.editable().hasFocus)return a;if(!document.body.createTextRange)return null;t.focus(),n=t.document.getBody().$.createTextRange();try{for(var s=!1,l=0;20>l&&!s;l++){if(!s)try{n.moveToPoint(o,i-l),s=!0}catch(e){}if(!s)try{n.moveToPoint(o,i+l),s=!0}catch(e){}}if(s){var c="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+c+'"></span>');var u=t.document.getById(c);r.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()}else{var d,f=t.document.$.elementFromPoint(o,i),p=new CKEDITOR.dom.element(f);if(p.equals(t.editable())||"html"==p.getName())return a&&a.startContainer&&!a.startContainer.equals(t.editable())?a:null;d=p.getClientRect(),o<d.left?r.setStartAt(p,CKEDITOR.POSITION_AFTER_START):r.setStartAt(p,CKEDITOR.POSITION_BEFORE_END),r.collapse(!0)}}catch(e){return null}}return r},initDragDataTransfer:function(e,t){var n=e.data.$?e.data.$.dataTransfer:null,o=new this.dataTransfer(n,t);"dragstart"===e.name&&o.storeId(),n?this.dragData&&o.id==this.dragData.id?o=this.dragData:this.dragData=o:this.dragData?o=this.dragData:this.dragData=o,e.data.dataTransfer=o},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var n=e.data.$.clipboardData,o=new this.dataTransfer(n,t);return"copy"!==e.name&&"cut"!==e.name||o.storeId(),this.copyCutData&&o.id==this.copyCutData.id?(o=this.copyCutData,o.$=n):this.copyCutData=o,o}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",s)}},c=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(e){return e=e.toLowerCase(),"text"==e||"text/plain"==e?"Text":"url"==e?"URL":e}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(c),this.id||(this.id="Text"==c?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==c||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,t){e=this._.normalizeType(e);var n="text/html"==e&&t?this._.nativeHtmlCache:this._.data[e];if(void 0===n||null===n||""===n){if(this._.fallbackDataTransfer.isRequired())n=this._.fallbackDataTransfer.getData(e,t);else try{n=this.$.getData(e)||""}catch(e){n=""}"text/html"!=e||t||(n=this._stripHtml(n))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==n.substring(0,7)&&(n=""),"string"==typeof n)var o=n.indexOf("</html>"),n=-1!==o?n.substring(0,o+7):n;return n},setData:function(e,t){if(e=this._.normalizeType(e),"text/html"==e?(this._.data[e]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[e]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==c&&"Text"==e&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,t);else try{this.$.setData(e,t)}catch(e){}},storeId:function(){"Text"!==c&&this.setData(c,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(e){e=o._.normalizeType(e);var t=o.getData(e);"text/html"==e&&(o._.nativeHtmlCache=o.getData(e,!0),t=o._stripHtml(t)),t&&(o._.data[e]=t)}if(this.$){var t,n,o=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(t=0;t<this.$.types.length;t++)e(this.$.types[t])}else e("Text"),e("URL");if(n=this._getImageFromClipboard(),this.$&&this.$.files||n){if(this._.files=[],this.$.files&&this.$.files.length)for(t=0;t<this.$.files.length;t++)this._.files.push(this.$.files[t]);0===this._.files.length&&n&&this._.files.push(n)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var e,t={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(this._.data),function(e){t[e]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)t[this.$.types[n]]=1}else t.Text=1,t.URL=1;"Text"!=c&&(t[c]=0);for(e in t)if(t[e]&&""!==this.getData(e))return!1;return!0},_getImageFromClipboard:function(){var e;try{if(this.$&&this.$.items&&this.$.items[0]&&(e=this.$.items[0].getAsFile())&&e.type)return e}catch(e){}},_stripHtml:function(e){if(e&&e.length){e=e.replace(this._.metaRegExp,"");var t=this._.bodyRegExp.exec(e);t&&t.length&&(e=t[1],e=e.replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(e){this._dataTransfer=e,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!t)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch(e){}}return!e._isCustomMimeTypeSupported},getData:function(e,t){var n=this._getData(this._customDataFallbackType,!0);if(t)return n;var n=this._extractDataComment(n),o=null,o=e===this._customDataFallbackType?n.content:n.data&&n.data[e]?n.data[e]:this._getData(e,!0);return null!==o?o:""},setData:function(e,t){var n=e===this._customDataFallbackType;n&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var o=t,i=this._dataTransfer.$;try{i.setData(e,o),n&&(this._dataTransfer._.nativeHtmlCache=o)}catch(t){if(this._isUnsupportedMimeTypeError(t)){n=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(n._customTypes,e)&&n._customTypes.push(e);var n=this._getFallbackTypeContent(),a=this._getFallbackTypeData();a[e]=o;try{o=this._applyDataComment(n,a),i.setData(this._customDataFallbackType,o),this._dataTransfer._.nativeHtmlCache=o}catch(e){o=""}}}return o},_getData:function(e,t){var n=this._dataTransfer._.data;if(!t&&n[e])return n[e];try{return this._dataTransfer.$.getData(e)}catch(e){return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},n=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,function(e){void 0!==n[e]?t[e]=n[e]:void 0!==t[e]&&(t[e]=t[e])},this),t},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var t={data:null,content:e||""};if(e&&16<e.length){var n;(n=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&n[1]&&(t.data=JSON.parse(decodeURIComponent(n[1])),t.content=e.replace(n[0],""))}return t},_applyDataComment:function(e,t){var n="";return t&&CKEDITOR.tools.objectKeys(t).length&&(n="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),n+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(o,i){var a={editorId:o.id,id:this.id,langCode:o.langCode,dir:o.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":o.config.baseFloatZIndex+1};if(this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){var e=this.document.getById(this.id+"_frame"),t=e.getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},a))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("keydown",function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");("input"!==e.data.getTarget().getName()||37!==t&&39!==t)&&(this._.onKeyDown&&!1===this._.onKeyDown(t)?"input"===e.data.getTarget().getName()&&32===t||e.data.preventDefault():(27==t||t==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault())},this),e=e.getBody(),e.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e},this.isFramed){var r=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";a.frame=t.output({id:this.id+"_frame",src:r})}return r=e.output(a),i&&i.push(r),r},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this._.getItems().getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))},markFirstDisplayed:function(e){for(var t,n,o=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"none"==e.getStyle("display")},i=this._.getItems(),a=i.count()-1;0<=a;a--)if(t=i.getItem(a),t.getAscendant(o)||(n=t,this._.focusIndex=a),"true"==t.getAttribute("aria-selected")){n=t,this._.focusIndex=a;break}n&&(e&&e(),CKEDITOR.env.webkit&&n.getDocument().getWindow().focus(),n.focus(),this.onMark&&this.onMark(n))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(e,t){var n=this.keys[e];switch(n){case"next":for(var o,i=this._.focusIndex,n=this._.getItems();o=n.getItem(++i);)if(o.getAttribute("_cke_focus")&&o.$.offsetWidth){this._.focusIndex=i,o.focus(!0);break}return!o&&!t&&(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(i=this._.focusIndex,n=this._.getItems();0<i&&(o=n.getItem(--i));){if(o.getAttribute("_cke_focus")&&o.$.offsetWidth){this._.focusIndex=i,o.focus(!0);break}o=null}return!o&&!t&&(this._.focusIndex=n.count(),this.onKeyDown(e,1));case"click":case"mouseup":return i=this._.focusIndex,(o=0<=i&&this._.getItems().getItem(i))&&(o.$[n]?o.$[n]():o.$["on"+n]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,n,o,i,a){a=CKEDITOR.tools.genKey(n.getUniqueId(),o.getUniqueId(),e.lang.dir,e.uiColor||"",i.css||"",a||"");var r=t[a];return r||(r=t[a]=new CKEDITOR.ui.panel(n,i),r.element=o.append(CKEDITOR.dom.element.createFromHtml(r.render(e),n)),r.element.setStyles({display:"none",position:"absolute"})),r}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,n,o,i){function a(){c.hide()}o.forceIFrame=1,o.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById("cke_"+t.name));var r=n.getDocument();i=e(t,r,n,o,i||0);var s=i.element,l=s.getFirst(),c=this;s.disableContextMenu(),this.element=s,this._={editor:t,panel:i,parentElement:n,definition:o,document:r,iframe:l,children:[],dir:t.lang.dir,showBlockParams:null,markFirst:void 0===o.markFirst||o.markFirst},t.on("mode",a),t.on("resize",a),r.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,o,i,a){var r=this._.panel,s=r.showBlock(e);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var c=this.element,l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),u=c.getDocument(),d=this._.parentElement.getPositionedAncestor(),f=t.getDocumentPosition(u),u=d?d.getDocumentPosition(u):{x:0,y:0},p="rtl"==this._.dir,h=f.x+(o||0)-u.x,m=f.y+(i||0)-u.y;!p||1!=n&&4!=n?p||2!=n&&3!=n||(h+=t.$.offsetWidth-1):h+=t.$.offsetWidth,3!=n&&4!=n||(m+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),c.setStyles({top:m+"px",left:0,display:""}),c.setOpacity(0),c.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))},this),l.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(l.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),l.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),r.onEscape=CKEDITOR.tools.bind(function(e){if(this.onEscape&&!1===this.onEscape(e))return!1},this),CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){var e=c;if(e.removeStyle("width"),s.autoSize){var t=s.element.getDocument(),t=(CKEDITOR.env.webkit||CKEDITOR.env.edge?s.element:t.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(e.$.offsetWidth||0)-(e.$.clientWidth||0)+3),e.setStyle("width",t+10+"px"),t=s.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(e.$.offsetHeight||0)-(e.$.clientHeight||0)+3),e.setStyle("height",t+"px"),r._.currentBlock.element.setStyle("display","none").removeStyle("display")}else e.removeStyle("height");p&&(h-=c.$.offsetWidth),c.setStyle("left",h+"px");var t=r.element.getWindow(),e=c.$.getBoundingClientRect(),t=t.getViewPaneSize(),n=e.width||e.right-e.left,o=e.height||e.bottom-e.top,i=p?e.right:t.width-e.left,l=p?t.width-e.right:e.left;p?i<n&&(h=l>n?h+n:t.width>n?h-e.left:h-e.right+t.width):i<n&&(h=l>n?h-n:t.width>n?h-e.right+t.width:h-e.left),n=e.top,t.height-e.top<o&&(m=n>o?m-o:t.height>o?m-e.bottom+t.height:m-e.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&(t=e=new CKEDITOR.dom.element(c.$.offsetParent),"html"==t.getName()&&(t=t.getDocument().getBody()),"rtl"==t.getComputedStyle("direction")&&(h=CKEDITOR.env.ie8Compat?h-2*c.getDocument().getDocumentElement().$.scrollLeft:h-(e.$.scrollWidth-e.$.clientWidth)));var u,e=c.getFirst();(u=e.getCustomData("activePanel"))&&u.onHide&&u.onHide.call(this,1),e.setCustomData("activePanel",this),c.setStyles({top:m+"px",left:h+"px"}),c.setOpacity(1),a&&a()},this);r.isLoaded?e():r.onLoad=e,CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),s.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){s.markFirstDisplayed?s.markFirstDisplayed():s._.markFirstDisplayed()},0):s.markFirstDisplayed?s.markFirstDisplayed():s._.markFirstDisplayed()),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var e=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,e))},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,o,i,a){this._.activeChild==e&&e._.panel._.offsetParentId==n.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,o,i,a),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e,n=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in t){var o=t[e];n?o.destroy():o.element.hide()}n&&(t={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),n=e._.menuGroups={},o=e._.menuItems={},i=0;i<t.length;i++)n[t[i]]=i+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(o[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return o[e]},e.removeMenuItem=function(e){delete o[e]}}}),function(){function e(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})}var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"');var t=t+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">',n=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),o=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),i=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),o=n.block.attributes=n.attributes||{};!o.role&&(o.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),n=this.editor.elementPath(),o=this._.listeners;this.removeAll();for(var i=0;i<o.length;i++){var a=o[i](t,e,n);if(a)for(var r in a){var s=this.editor.getMenuItem(r);!s||s.command&&!this.editor.getCommand(s.command).state||(s.state=a[r],this.add(s))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var o in n){var i=this.editor.getMenuItem(o);i&&(i.state=n[o],t.add(i))}var a=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(e));setTimeout(function(){t.show(a,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(t,n,o,i){if(this.parent||(this._.onShow(),this.items.length)){n=n||("rtl"==this.editor.lang.dir?2:1);var a=this.items,r=this.editor,s=this._.panel,l=this._.element;if(!s){s=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),s.onEscape=CKEDITOR.tools.bind(function(e){if(!1===this._.onEscape(e))return!1},this),s.onShow=function(){s._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},s.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),l=s.addBlock(this.id,this._.panelDefinition.block),l.autoSize=!0;var c=l.keys;c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),l=this._.element=l.element,c=l.getDocument(),c.getBody().setStyle("overflow","hidden"),c.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[e])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)},this)}e(a);for(var c=r.elementPath(),c=['<div class="cke_menu'+(c&&c.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],u=a.length,d=u&&a[0].group,f=0;f<u;f++){var p=a[f];d!=p.group&&(c.push('<div class="cke_menuseparator" role="separator"></div>'),d=p.group),p.render(this,f,c)}c.push("</div>"),l.setHtml(c.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(s,this.id,t,n,o,i):s.showBlock(this.id,t,n,o,i),r.fire("menuShow",[s])}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)},findItemByCommandName:function(e){var t=CKEDITOR.tools.array.filter(this.items,function(t){return e===t.command});return t.length?(t=t[0],{item:t,element:this._.element.findOne("."+t.className)}):null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,a){var r,s,l=e.id+String(t),c=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,u="",d=this.editor,f=c==CKEDITOR.TRISTATE_ON?"on":c==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(u=' aria-checked="'+(c==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var p=this.getItems,h="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",m=this.name;this.icon&&!/\./.test(this.icon)&&(m=this.icon),this.command&&(r=d.getCommand(this.command),(r=d.getCommandKeystroke(r))&&(s=CKEDITOR.tools.keystrokeToString(d.lang.common.keyboard,r))),e={id:l,name:this.name,iconName:m,label:this.label,cls:this.className||"",state:f,hasPopup:p?"true":"false",disabled:c==CKEDITOR.TRISTATE_DISABLED,title:this.label+(s?" ("+s.display+")":""),ariaShortcut:s?d.lang.common.keyboardShortcut+" "+s.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(m,"rtl"==this.editor.lang.dir,m==this.icon?null:this.icon,this.iconOffset),shortcutHtml:s?i.output({shortcut:s.display}):"",arrowHtml:p?o.output({label:h}):"",role:this.role?this.role:"menuitem",ariaChecked:u},n.output(e,a)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{css:e.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){function n(){i=!1}var o,i;if(e.on("contextmenu",function(e){e=e.data;var n=CKEDITOR.env.webkit?o:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!(t&&n||(e.preventDefault(),i))){if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var n=this.editor,a=new CKEDITOR.dom.elementPath(e.getTarget(),n.editable()).contains(function(e){return e.hasAttribute("contenteditable")},!0);a&&"false"==a.getAttribute("contenteditable")&&n.getSelection().fake(a)}var a=e.getTarget().getDocument(),r=e.getTarget().getDocument().getDocumentElement(),n=!a.equals(CKEDITOR.document),a=a.getWindow().getScrollPosition(),s=n?e.$.clientX:e.$.pageX||a.x+e.$.clientX,l=n?e.$.clientY:e.$.pageY||a.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(r,null,s,l)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var a=function(){o=0};e.on("keydown",function(e){o=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey}),e.on("keyup",a),e.on("contextmenu",a)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(e.on("keydown",function(e){e.data.$.shiftKey&&121===e.data.$.keyCode&&(i=!0)},null,null,0),e.on("keyup",n),e.on("contextmenu",n))},open:function(e,t,n,o){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,n,o))}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)}),e.addCommand("contextMenu",{exec:function(e){var t=0,n=0,o=e.getSelection().getRanges(),o=o[o.length-1].getClientRects(e.editable().isInline());(o=o[o.length-1])&&(t=o["rtl"===e.lang.dir?"left":"right"],n=o.bottom),e.contextMenu.open(e.document.getBody().getParent(),null,t,n)}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function e(e,n){function i(t){t=l.list[t];var n;t.equals(e.editable())||"true"==t.getAttribute("contenteditable")?(n=e.createRange(),n.selectNodeContents(t),n=n.select()):(n=e.getSelection(),n.selectElement(t)),CKEDITOR.env.ie&&e.fire("selectionChange",{selection:n,path:new CKEDITOR.dom.elementPath(t)}),e.focus()}function a(){r&&r.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete l.list}var r,s=e.ui.spaceId("path"),l=e._.elementsPath,c=l.idBase;n.html+='<span id="'+s+'_label" class="cke_voice_label">'+e.lang.elementspath.eleLabel+'</span><span id="'+s+'" class="cke_path" role="group" aria-labelledby="'+s+'_label"><span class="cke_path_empty">&nbsp;</span></span>',e.on("uiReady",function(){var t=e.ui.space("path");t&&e.focusManager.add(t,1)}),l.onClick=i;var u=CKEDITOR.tools.addFunction(i),d=CKEDITOR.tools.addFunction(function(t,n){var o,a=l.idBase;switch(n=new CKEDITOR.dom.event(n),o="rtl"==e.lang.dir,n.getKeystroke()){case o?39:37:case 9:return(o=CKEDITOR.document.getById(a+(t+1)))||(o=CKEDITOR.document.getById(a+"0")),o.focus(),!1;case o?37:39:case CKEDITOR.SHIFT+9:return(o=CKEDITOR.document.getById(a+(t-1)))||(o=CKEDITOR.document.getById(a+(l.list.length-1))),o.focus(),!1;case 27:return e.focus(),!1;case 13:case 32:return i(t),!1}return!0});e.on("selectionChange",function(t){for(var n=[],i=l.list=[],a=[],f=l.filters,p=!0,h=t.data.path.elements,m=h.length;m--;){var g=h[m],E=0;t=g.data("cke-display-name")?g.data("cke-display-name"):g.data("cke-real-element-type")?g.data("cke-real-element-type"):g.getName(),(p=g.hasAttribute("contenteditable")?"true"==g.getAttribute("contenteditable"):p)||g.hasAttribute("contenteditable")||(E=1);for(var T=0;T<f.length;T++){var v=f[T](g,t);if(!1===v){E=1;break}t=v||t}E||(i.unshift(g),a.unshift(t))}for(i=i.length,f=0;f<i;f++)t=a[f],p=e.lang.elementspath.eleTitle.replace(/%1/,t),t=o.output({id:c+f,label:p,text:t,jsTitle:"javascript:void('"+t+"')",index:f,keyDownFn:d,clickFn:u}),n.unshift(t);r||(r=CKEDITOR.document.getById(s)),a=r,a.setHtml(n.join("")+'<span class="cke_path_empty">&nbsp;</span>'),e.fire("elementsPathUpdate",{space:a})}),e.on("readOnly",a),e.on("contentDomUnload",a),e.addCommand("elementsPathFocus",t.toolbarFocus),e.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var t={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},n="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(n+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(n+=' onblur="this.style.cssText = this.style.cssText;"');var o=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+n+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},t.on("uiSpace",function(n){"bottom"==n.data.space&&e(t,n.data)})}})}(),function(){function e(e,o){var i,a;o.on("refresh",function(e){var o,i=[t];for(o in e.data.states)i.push(e.data.states[o]);this.setState(CKEDITOR.tools.search(i,n)?n:t)},o,null,100),o.on("exec",function(t){i=e.getSelection(),a=i.createBookmarks(1),t.data||(t.data={}),t.data.done=!1},o,null,0),o.on("exec",function(){e.forceNextSelectionCheck(),i.selectBookmarks(a)},o,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var n=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new n(!0))),e(t,t.addCommand("outdent",new n)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",function(e){var n=t.createRange(),o=e.data.node;n.setStartBefore(o),n.setEndAfter(o);for(var i,a=new CKEDITOR.dom.walker(n);i=a.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(o)&&i.getDirection())n.setStartAfter(i),a=new CKEDITOR.dom.walker(n);else{var r=t.config.indentClasses;if(r)for(var s="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<r.length;l++)i.hasClass(r[l]+s[0])&&(i.removeClass(r[l]+s[0]),i.addClass(r[l]+s[1]));r=i.getStyle("margin-right"),s=i.getStyle("margin-left"),r?i.setStyle("margin-left",r):i.removeStyle("margin-left"),s?i.setStyle("margin-right",s):i.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",function(){for(var e in t)!function(e,t){var n,o=e.getCommand(t.relatedGlobal);for(n in t.jobs)o.on("exec",function(o){o.data.done||(e.fire("lockSnapshot"),t.execJob(e,n)&&(o.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))},this,null,n),o.on("refresh",function(o){o.data.states||(o.data.states={}),o.data.states[t.name+"@"+n]=t.refreshJob(e,n,o.data.path)},this,null,n);e.addFeature(t)}(this,t[e])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,n){var o=this.jobs[n];if(o.state!=t)return o.exec.call(this,e)},refreshJob:function(e,n,o){return n=this.jobs[n],e.activeFilter.checkFeature(this)?n.state=n.refresh.call(this,e,o):n.state=t,n.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e){for(var o,i=this,a=this.database,r=this.context,s=e.getSelection(),s=(s&&s.getRanges()).createIterator();o=s.getNextRange();){for(var l=o.getCommonAncestor();l&&(l.type!=CKEDITOR.NODE_ELEMENT||!r[l.getName()]);){if(e.editable().equals(l)){l=!1;break}l=l.getParent()}if(l||(l=o.startPath().contains(r))&&o.setEndAt(l,CKEDITOR.POSITION_BEFORE_END),!l){var c=o.getEnclosedNode();c&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in r&&(o.setStartAt(c,CKEDITOR.POSITION_AFTER_START),o.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),l=c)}if(l&&o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in r&&(c=new CKEDITOR.dom.walker(o),c.evaluator=t,o.startContainer=c.next()),l&&o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in r&&(c=new CKEDITOR.dom.walker(o),c.evaluator=t,o.endContainer=c.previous()),l)return function(t){for(var s=o.startContainer,l=o.endContainer;s&&!s.getParent().equals(t);)s=s.getParent();for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!s||!l)return!1;for(var c=[],u=!1;!u;)s.equals(l)&&(u=!0),c.push(s),s=s.getNext();if(1>c.length)return!1;for(s=t.getParents(!0),l=0;l<s.length;l++)if(s[l].getName&&r[s[l].getName()]){t=s[l];break}for(var s=i.isIndent?1:-1,l=c[0],c=c[c.length-1],u=CKEDITOR.plugins.list.listToArray(t,a),d=u[c.getCustomData("listarray_index")].indent,l=l.getCustomData("listarray_index");l<=c.getCustomData("listarray_index");l++)if(u[l].indent+=s,0<s){for(var f=u[l].parent,p=l-1;0<=p;p--)if(u[p].indent===s){f=u[p].parent;break}u[l].parent=new CKEDITOR.dom.element(f.getName(),f.getDocument())}for(l=c.getCustomData("listarray_index")+1;l<u.length&&u[l].indent>d;l++)u[l].indent+=s;if(s=CKEDITOR.plugins.list.arrayToList(u,a,null,e.config.enterMode,t.getDirection()),!i.isIndent){var h;if((h=t.getParent())&&h.is("li"))for(var m,c=s.listNode.getChildren(),g=[],l=c.count()-1;0<=l;l--)(m=c.getItem(l))&&m.is&&m.is("li")&&g.push(m)}if(s&&s.listNode.replace(t),g&&g.length)for(l=0;l<g.length;l++){for(m=t=g[l];(m=m.getNext())&&m.is&&m.getName()in r;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(n)&&t.append(o.document.createText("")),t.append(m);t.insertAfter(h)}return s&&e.fire("contentDomInvalidated"),!0}(l)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function n(e){return o(e)&&i(e)}var o=CKEDITOR.dom.walker.whitespaces(!0),i=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function n(t){o.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",function(e){var n=t.elementPath();if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey&&n){var o=this.getContext(n);!o||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,n,o)||(t.execCommand(this.relatedGlobal),e.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var n=this.getContext(t),o=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,n);return n&&this.isIndent&&!o?r:a}:function(e,t){return!this.getContext(t)||this.isIndent?a:r},exec:CKEDITOR.tools.bind(e,this)}}var o=CKEDITOR.plugins.indent;o.registerCommands(t,{indentlist:new n(t,"indentlist",!0),outdentlist:new n(t,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,o.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,n,o){var i=n.contains(t);return o||(o=n.contains(e)),o&&i&&i.equals(o.getFirst(t))}}(),function(){function e(e,t,n,o){for(var i=CKEDITOR.plugins.list.listToArray(t.root,n),a=[],r=0;r<t.contents.length;r++){var s=t.contents[r];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(a.push(s),CKEDITOR.dom.element.setMarker(n,s,"list_item_processed",!0))}for(var l,c,s=t.root.getDocument(),r=0;r<a.length;r++){var u=a[r].getCustomData("listarray_index");l=i[u].parent,l.is(this.type)||(c=s.createElement(this.type),l.copyAttributes(c,{start:1,type:1}),c.removeStyle("list-style-type"),i[u].parent=c)}n=CKEDITOR.plugins.list.arrayToList(i,n,null,e.config.enterMode);for(var d,i=n.listNode.getChildCount(),r=0;r<i&&(d=n.listNode.getChild(r));r++)d.getName()==this.type&&o.push(d);n.listNode.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t,n){var o=t.contents,i=t.root.getDocument(),a=[];if(1==o.length&&o[0].equals(t.root)){var r=i.createElement("div");o[0].moveChildren&&o[0].moveChildren(r),o[0].append(r),o[0]=r}for(t=t.contents[0].getParent(),r=0;r<o.length;r++)t=t.getCommonAncestor(o[r].getParent());e=e.config.useComputedState;var s,l;for(e=void 0===e||e,r=0;r<o.length;r++)for(var c,u=o[r];c=u.getParent();){if(c.equals(t)){a.push(u),!l&&u.getDirection()&&(l=1),u=u.getDirection(e),null!==s&&(s=s&&s!=u?null:u);break}u=c}if(!(1>a.length)){for(o=a[a.length-1].getNext(),r=i.createElement(this.type),n.push(r);a.length;)n=a.shift(),e=i.createElement("li"),u=n,u.is("pre")||h.test(u.getName())||"false"==u.getAttribute("contenteditable")?n.appendTo(e):(n.copyAttributes(e),s&&n.getDirection()&&(e.removeStyle("direction"),e.removeAttribute("dir")),n.moveChildren(e),n.remove()),e.appendTo(r);s&&l&&r.setAttribute("dir",s),o?r.insertBefore(o):r.appendTo(t)}}function n(e,t,n){function o(n){!(l=u[n?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=t.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||e.document.createElement("br")[n?"insertBefore":"insertAfter"](l)}for(var i=CKEDITOR.plugins.list.listToArray(t.root,n),a=[],r=0;r<t.contents.length;r++){var s=t.contents[r];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(a.push(s),CKEDITOR.dom.element.setMarker(n,s,"list_item_processed",!0))}for(s=null,r=0;r<a.length;r++)s=a[r].getCustomData("listarray_index"),i[s].indent=-1;for(r=s+1;r<i.length;r++)if(i[r].indent>i[r-1].indent+1){for(a=i[r-1].indent+1-i[r].indent,s=i[r].indent;i[r]&&i[r].indent>=s;)i[r].indent+=a,r++;r--}var l,c,u=CKEDITOR.plugins.list.arrayToList(i,n,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;o(!0),o(),u.replace(t.root),e.fire("contentDomInvalidated")}function o(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function i(e,t,n,o){for(var i,a;i=e[o?"getLast":"getFirst"](m);)(a=i.getDirection(1))!==t.getDirection(1)&&i.setAttribute("dir",a),i.remove(),n?i[o?"insertBefore":"insertAfter"](n):t.append(i,o),n=i}function a(e){function t(t){var n=e[t?"getPrevious":"getNext"](f);n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(i(e,n,null,!t),e.remove(),e=n)}t(),t(1)}function r(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function s(e,t,n){e.fire("saveSnapshot"),n.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var o=n.extractContents();t.trim(!1,!0);var r=t.createBookmark(),s=new CKEDITOR.dom.elementPath(t.startContainer),c=s.block,s=s.lastElement.getAscendant("li",1)||c,u=new CKEDITOR.dom.elementPath(n.startContainer),d=u.contains(CKEDITOR.dtd.$listItem),u=u.contains(CKEDITOR.dtd.$list);for(c?(c=c.getBogus())&&c.remove():u&&(c=u.getPrevious(f))&&p(c)&&c.remove(),(c=o.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("br")&&c.remove(),(c=t.startContainer.getChild(t.startOffset))?o.insertBefore(c):t.startContainer.append(o),d&&(o=l(d))&&(s.contains(d)?(i(o,d.getParent(),d),o.remove()):s.append(o));n.checkStartOfBlock()&&n.checkEndOfBlock()&&(u=n.startPath(),o=u.block);)o.is("li")&&(s=o.getParent(),o.equals(s.getLast(f))&&o.equals(s.getFirst(f))&&(o=s)),n.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove();n=n.clone(),o=e.editable(),n.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),n=new CKEDITOR.dom.walker(n),n.evaluator=function(e){return f(e)&&!p(e)},(n=n.next())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$list&&a(n),t.moveToBookmark(r),t.select(),e.fire("saveSnapshot")}function l(e){return(e=e.getLast(f))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in c?e:null}var c={ol:1,ul:1},u=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),f=function(e){return!(u(e)||d(e))},p=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,o,i){if(!c[e.getName()])return[];o||(o=0),n||(n=[]);for(var a=0,r=e.getChildCount();a<r;a++){var s=e.getChild(a);if(s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(s,t,n,o+1),"li"==s.$.nodeName.toLowerCase()){var l={parent:e,indent:o,element:s,contents:[]};i?l.grandparent=i:(l.grandparent=e.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,s,"listarray_index",n.length),n.push(l);for(var u,d=0,f=s.getChildCount();d<f;d++)u=s.getChild(d),u.type==CKEDITOR.NODE_ELEMENT&&c[u.getName()]?CKEDITOR.plugins.list.listToArray(u,t,n,o+1,l.grandparent):l.contents.push(u)}}return n},arrayToList:function(e,t,n,o,i){if(n||(n=0),!e||e.length<n+1)return null;for(var a,r,s,l=e[n].parent.getDocument(),u=new CKEDITOR.dom.documentFragment(l),p=null,h=n,m=Math.max(e[n].indent,0),g=null,E=o==CKEDITOR.ENTER_P?"p":"div";;){var T=e[h];if(a=T.grandparent,r=T.element.getDirection(1),T.indent==m){for(p&&e[h].parent.getName()==p.getName()||(p=e[h].parent.clone(!1,1),i&&p.setAttribute("dir",i),u.append(p)),g=p.append(T.element.clone(0,1)),r!=p.getDirection(1)&&g.setAttribute("dir",r),a=0;a<T.contents.length;a++)g.append(T.contents[a].clone(1,1));h++}else if(T.indent==Math.max(m,0)+1)T=e[h-1].element.getDirection(1),h=CKEDITOR.plugins.list.arrayToList(e,null,h,o,T!=r?r:null),!g.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=l.$.documentMode&&g.append(l.createText("")),g.append(h.listNode),h=h.nextIndex;else{if(-1!=T.indent||n||!a)return null;c[a.getName()]?(g=T.element.clone(!1,!0),r!=a.getDirection(1)&&g.setAttribute("dir",r)):g=new CKEDITOR.dom.documentFragment(l);var v,y,p=a.getDirection(1)!=r,C=T.element,b=C.getAttribute("class"),O=C.getAttribute("style"),I=g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(o!=CKEDITOR.ENTER_BR||p||O||b),D=T.contents.length;for(a=0;a<D;a++)if(v=T.contents[a],d(v)&&1<D)I?y=v.clone(1,1):g.append(v.clone(1,1));else if(v.type==CKEDITOR.NODE_ELEMENT&&v.isBlockBoundary()){p&&!v.getDirection()&&v.setAttribute("dir",r),s=v;var R=C.getAttribute("style");R&&s.setAttribute("style",R.replace(/([^;])$/,"$1;")+(s.getAttribute("style")||"")),b&&v.addClass(b),s=null,y&&(g.append(y),y=null),g.append(v.clone(1,1))}else I?(s||(s=l.createElement(E),g.append(s),p&&s.setAttribute("dir",r)),O&&s.setAttribute("style",O),b&&s.setAttribute("class",b),y&&(s.append(y),y=null),s.append(v.clone(1,1))):g.append(v.clone(1,1));y&&((s||g).append(y),y=null),g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&h!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(r=g.getLast())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("br")&&r.remove(),(r=g.getLast(f))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$block)||g.append(l.createElement("br"))),r=g.$.nodeName.toLowerCase(),"div"!=r&&"p"!=r||g.appendBogus(),u.append(g),p=null,h++}if(s=null,e.length<=h||Math.max(e[h].indent,0)<m)break}if(t)for(e=u.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(n=e,l=i=o=void 0,o=n.getDirection()))){for(i=n.getParent();i&&!(l=i.getDirection());)i=i.getParent();o==l&&n.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:u,nextIndex:h}}};var h=/^h[1-6]$/,m=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);o.prototype={exec:function(o){function i(e){return c[e.root.getName()]&&!r(e.root,[CKEDITOR.NODE_COMMENT])}function r(e,t){return CKEDITOR.tools.array.filter(e.getChildren().toArray(),function(e){return-1===CKEDITOR.tools.array.indexOf(t,e.type)}).length}this.refresh(o,o.elementPath());var s=o.config,l=o.getSelection(),u=l&&l.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var d=o.editable();if(d.getFirst(f)){var p=1==u.length&&u[0];(s=p&&p.getEnclosedNode())&&s.is&&this.type==s.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else s.enterMode==CKEDITOR.ENTER_BR?d.appendBogus():u[0].fixBlock(1,s.enterMode==CKEDITOR.ENTER_P?"p":"div"),l.selectRanges(u)}for(var s=l.createBookmarks(!0),d=[],h={},u=u.createIterator(),m=0;(p=u.getNextRange())&&++m;){var g=p.getBoundaryNodes(),E=g.startNode,T=g.endNode;for(E.type==CKEDITOR.NODE_ELEMENT&&"td"==E.getName()&&p.setStartAt(g.startNode,CKEDITOR.POSITION_AFTER_START),T.type==CKEDITOR.NODE_ELEMENT&&"td"==T.getName()&&p.setEndAt(g.endNode,CKEDITOR.POSITION_BEFORE_END),p=p.createIterator(),p.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;g=p.getNextParagraph();)if(!g.getCustomData("list_block")&&!function(e){var t=!0;return 0!==e.getChildCount()&&(e.forEach(function(e){if(e.type!==CKEDITOR.NODE_COMMENT)return t=!1},null,!0),t)}(g)){CKEDITOR.dom.element.setMarker(h,g,"list_block",1);for(var v,y=o.elementPath(g),E=y.elements,T=0,y=y.blockLimit,C=E.length-1;0<=C&&(v=E[C]);C--)if(c[v.getName()]&&y.contains(v)){y.removeCustomData("list_group_object_"+m),(E=v.getCustomData("list_group_object"))?E.contents.push(g):(E={root:v,contents:[g]},d.push(E),CKEDITOR.dom.element.setMarker(h,v,"list_group_object",E)),T=1;break}T||(T=y,T.getCustomData("list_group_object_"+m)?T.getCustomData("list_group_object_"+m).contents.push(g):(E={root:T,contents:[g]},CKEDITOR.dom.element.setMarker(h,T,"list_group_object_"+m,E),d.push(E)))}}for(v=[];0<d.length;)E=d.shift(),this.state==CKEDITOR.TRISTATE_OFF?i(E)||(c[E.root.getName()]?e.call(this,o,E,h,v):t.call(this,o,E,v)):this.state==CKEDITOR.TRISTATE_ON&&c[E.root.getName()]&&!i(E)&&n.call(this,o,E,h);for(C=0;C<v.length;C++)a(v[C]);CKEDITOR.dom.element.clearAllMarkers(h),l.selectBookmarks(s),o.focus()},refresh:function(e,t){var n=t.contains(c,1),o=t.blockLimit||t.root;n&&o.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new o("numberedlist","ol")),e.addCommand("bulletedlist",new o("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",function(t){var n,o=t.data.domEvent.getKey();if("wysiwyg"==e.mode&&o in{8:1,46:1}){var i=e.getSelection().getRanges()[0],a=i&&i.startPath();if(i&&i.collapsed){var u=8==o,d=e.editable(),h=new CKEDITOR.dom.walker(i.clone());if(h.evaluator=function(e){return f(e)&&!p(e)},h.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},o=i.clone(),u){var m;if((m=a.contains(c))&&i.checkBoundaryOfElement(m,CKEDITOR.START)&&(m=m.getParent())&&m.is("li")&&(m=l(m))?(n=m,m=m.getPrevious(f),o.moveToPosition(m&&p(m)?m:n,CKEDITOR.POSITION_BEFORE_START)):(h.range.setStartAt(d,CKEDITOR.POSITION_AFTER_START),h.range.setEnd(i.startContainer,i.startOffset),(m=h.previous())&&m.type==CKEDITOR.NODE_ELEMENT&&(m.getName()in c||m.is("li"))&&(m.is("li")||(h.range.selectNodeContents(m),h.reset(),h.evaluator=r,m=h.previous()),n=m,o.moveToElementEditEnd(n),o.moveToPosition(o.endPath().block,CKEDITOR.POSITION_BEFORE_END))),n)s(e,o,i),t.cancel();else{var g=a.contains(c);g&&i.checkBoundaryOfElement(g,CKEDITOR.START)&&(n=g.getFirst(f),i.checkBoundaryOfElement(n,CKEDITOR.START)&&(m=g.getPrevious(f),l(n)?m&&(i.moveToElementEditEnd(m),i.select()):e.execCommand("outdent"),t.cancel()))}}else if(n=a.contains("li")){if(h.range.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),u=(d=n.getLast(f))&&r(d)?d:n,a=0,(m=h.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.getName()in c&&m.equals(d)?(a=1,m=h.next()):i.checkBoundaryOfElement(u,CKEDITOR.END)&&(a=2),a&&m){if(i=i.clone(),i.moveToElementEditStart(m),1==a&&(o.optimize(),!o.startContainer.equals(n))){for(n=o.startContainer;n.is(CKEDITOR.dtd.$inline);)g=n,n=n.getParent();g&&o.moveToPosition(g,CKEDITOR.POSITION_AFTER_END)}2==a&&(o.moveToPosition(o.endPath().block,CKEDITOR.POSITION_BEFORE_END),i.endPath().block&&i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_AFTER_START)),s(e,o,i),t.cancel()}}else h.range.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),(m=h.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is(c)&&(m=m.getFirst(f),a.block&&i.checkStartOfBlock()&&i.checkEndOfBlock()?(a.block.remove(),i.moveToElementEditStart(m),i.select()):l(m)?(i.moveToElementEditStart(m),i.select()):(i=i.clone(),i.moveToElementEditStart(m),s(e,o,i)),t.cancel());setTimeout(function(){e.selectionChange(1)})}}}))}})}(),function(){function e(e,t,n){if(n=e.config.forceEnterMode||n,"wysiwyg"==e.mode){t||(t=e.activeEnterMode);var o=e.elementPath();o&&!o.isContextFor("p")&&(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?i(e,t,null,n):a(e,t,null,n),e.fire("saveSnapshot")}}function t(e){e=e.getSelection().getRanges(!0);for(var t=e.length-1;0<t;t--)e[t].deleteContents();return e[0]}function n(e){var t=e.startContainer.getAscendant(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")},!0);return e.root.equals(t)?e:(t=new CKEDITOR.dom.range(t),t.moveToRange(e),t)}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var o,i,a,r,s=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,o,a,c){if(a=a||t(e)){a=n(a);var u,d=a.document,f=a.checkStartOfBlock(),p=a.checkEndOfBlock(),h=e.elementPath(a.startContainer),m=h.block,g=o==CKEDITOR.ENTER_DIV?"div":"p";if(m&&f&&p){if(f=m.getParent(),f.is("li")&&1<f.getChildCount())return d=new CKEDITOR.dom.element("li"),u=e.createRange(),d.insertAfter(f),m.remove(),u.setStart(d,0),void e.getSelection().selectRanges([u]);if(m.is("li")||m.getParent().is("li")){m.is("li")||(m=m.getParent(),f=m.getParent()),u=f.getParent(),a=!m.hasPrevious();var E=!m.hasNext();c=e.getSelection();var g=c.createBookmarks(),T=m.getDirection(1),p=m.getAttribute("class"),v=m.getAttribute("style"),y=u.getDirection(1)!=T;if(e=e.enterMode!=CKEDITOR.ENTER_BR||y||v||p,u.is("li"))a||E?(a&&E&&f.remove(),m[E?"insertAfter":"insertBefore"](u)):m.breakParent(u);else{if(e)h.block.is("li")?(u=d.createElement(o==CKEDITOR.ENTER_P?"p":"div"),y&&u.setAttribute("dir",T),v&&u.setAttribute("style",v),p&&u.setAttribute("class",p),m.moveChildren(u)):u=h.block,a||E?u[a?"insertBefore":"insertAfter"](f):(m.breakParent(f),u.insertAfter(f));else if(m.appendBogus(!0),a||E)for(;d=m[a?"getFirst":"getLast"]();)d[a?"insertBefore":"insertAfter"](f);else for(m.breakParent(f);d=m.getLast();)d.insertAfter(f);m.remove()}return void c.selectBookmarks(g)}if(m&&m.getParent().is("blockquote"))return m.breakParent(m.getParent()),m.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getPrevious().remove(),m.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||m.getNext().remove(),a.moveToElementEditStart(m),void a.select()}else if(m&&m.is("pre")&&!p)return void i(e,o,a,c);if(v=a.splitBlock(g)){if(e=v.previousBlock,m=v.nextBlock,f=v.wasStartOfBlock,p=v.wasEndOfBlock,m?(E=m.getParent(),E.is("li")&&(m.breakParent(E),m.move(m.getNext(),1))):e&&(E=e.getParent())&&E.is("li")&&(e.breakParent(E),E=e.getNext(),a.moveToElementEditStart(E),e.move(e.getPrevious())),f||p)if(function(e){var t;return e!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],h.lastElement.getName())&&1===h.lastElement.getChildCount()&&(e=h.lastElement.getChild(0).clone(!0),(t=e.getBogus())&&t.remove(),!e.getText().length)}(o))a.moveToElementEditStart(a.getTouchedStartNode());else{if(e?(e.is("li")||!r.test(e.getName())&&!e.is("pre"))&&(u=e.clone()):m&&(u=m.clone()),u?c&&!u.is("li")&&u.renameNode(g):E&&E.is("li")?u=E:(u=d.createElement(g),e&&(T=e.getDirection())&&u.setAttribute("dir",T)),d=v.elementPath)for(o=0,c=d.elements.length;o<c&&(g=d.elements[o],!g.equals(d.block)&&!g.equals(d.blockLimit));o++)CKEDITOR.dtd.$removeEmpty[g.getName()]&&(g=g.clone(),u.moveChildren(g),u.append(g));u.appendBogus(),u.getParent()||a.insertNode(u),u.is("li")&&u.removeAttribute("value"),!CKEDITOR.env.ie||!f||p&&e.getChildCount()||(a.moveToElementEditStart(p?e:u),a.select()),a.moveToElementEditStart(f&&!p?m:u)}else m.is("li")&&(u=a.clone(),u.selectNodeContents(m),u=new CKEDITOR.dom.walker(u),u.evaluator=function(e){return!(l(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(E=u.next())&&E.type==CKEDITOR.NODE_ELEMENT&&E.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?d.createElement("br"):d.createText("")).insertBefore(E)),m&&a.moveToElementEditStart(m);a.select(),a.scrollIntoView()}}},enterBr:function(e,n,o,i){if(o=o||t(e)){var s=o.document,l=o.checkEndOfBlock(),c=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),u=c.block,d=u&&c.block.getName();i||"li"!=d?(!i&&l&&r.test(d)?(l=u.getDirection())?(s=s.createElement("div"),s.setAttribute("dir",l),s.insertAfter(u),o.setStart(s,0)):(s.createElement("br").insertAfter(u),CKEDITOR.env.gecko&&s.createText("").insertAfter(u),o.setStartAt(u.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?s.createText("\r"):s.createElement("br"),o.deleteContents(),o.insertNode(e),CKEDITOR.env.needsBrFiller?(s.createText("\ufeff").insertAfter(e),l&&(u||c.blockLimit).appendBogus(),e.getNext().$.nodeValue="",o.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):o.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),o.collapse(!0),o.select(),o.scrollIntoView()):a(e,n,o,i)}}},o=CKEDITOR.plugins.enterkey,i=o.enterBr,a=o.enterBlock,r=/^h[1-6]$/}(),function(){function e(e,t){var n={},o=[],i={nbsp:"",shy:"",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,a){var r=t?"&"+a+";":i[a];return n[r]=t?i[a]:"&"+a+";",o.push(r),""}),e=e.replace(/,$/,""),!t&&e){e=e.split(",");var a,r=document.createElement("div");for(r.innerHTML="&"+e.join(";&")+";",a=r.innerHTML,r=null,r=0;r<a.length;r++){var s=a.charAt(r);n[s]="&"+e[r]+";",o.push(s)}}return n.regex=o.join(t?"|":""),n}CKEDITOR.plugins.add("entities",{afterInit:function(t){function n(e){return l[e]}function o(e){return"force"!=i.entities_processNumerical&&r[e]?r[e]:"&#"+e.charCodeAt(0)+";"}var i=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var a=[];!1!==i.basicEntities&&a.push("nbsp,gt,lt,amp"),i.entities&&(a.length&&a.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),i.entities_latin&&a.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),i.entities_greek&&a.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),i.entities_additional&&a.push(i.entities_additional));var r=e(a.join(",")),s=r.regex?"["+r.regex+"]":"a^";delete r.regex,i.entities&&i.entities_processNumerical&&(s="[^ -~]|"+s);var s=new RegExp(s,"g"),l=e("nbsp,gt,lt,amp,shy",!0),c=new RegExp(l.regex,"g");t.addRules({text:function(e){return e.replace(c,n).replace(s,o)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,o){t=t||"80%",n=n||"70%","string"==typeof t&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),640>t&&(t=640),420>n&&(n=420);var i=parseInt((window.screen.height-n)/2,10),a=parseInt((window.screen.width-t)/2,10);o=(o||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+i+",left="+a;var r=window.open("",null,o,!0);if(!r)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(r.moveTo(a,i),r.resizeTo(t,n)),r.focus(),r.location.href=e}catch(t){window.open(e,null,o,!0)}return!0}}),function(){function e(e){this.editor=e,this.loaders=[]}function t(e,t,o){var i=e.config.fileTools_defaultFileName;this.editor=e,this.lang=e.lang,"string"==typeof t?(this.data=t,this.file=n(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=t,this.total=this.file.size,this.loaded=0),o?this.fileName=o:this.file.name?this.fileName=this.file.name:(e=this.file.type.split("/"),i&&(e[0]=i),this.fileName=e.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}function n(e){var t=e.match(o)[1];e=e.replace(o,""),e=atob(e);var n,i,a,r,s=[];for(n=0;n<e.length;n+=512){for(i=e.slice(n,n+512),a=Array(i.length),r=0;r<i.length;r++)a[r]=i.charCodeAt(r);i=new Uint8Array(a),s.push(i)}return new Blob(s,{type:t})}CKEDITOR.plugins.add("filetools",{beforeInit:function(t){t.uploadRepository=new e(t),t.on("fileUploadRequest",function(e){var t=e.data.fileLoader;t.xhr.open("POST",t.uploadUrl,!0),e.data.requestData.upload={file:t.file,name:t.fileName}},null,null,5),t.on("fileUploadRequest",function(e){var n=e.data.fileLoader,o=new FormData;e=e.data.requestData;var i,a,r=t.config.fileTools_requestHeaders;for(a in e){var s=e[a];"object"==typeof s&&s.file?o.append(a,s.file,s.name):o.append(a,s)}if(o.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),r)for(i in r)n.xhr.setRequestHeader(i,r[i]);n.xhr.send(o)},null,null,999),t.on("fileUploadResponse",function(e){var t=e.data.fileLoader,n=t.xhr,o=e.data;try{var i=JSON.parse(n.responseText);if(i.error&&i.error.message&&(o.message=i.error.message),i.uploaded)for(var a in i)o[a]=i[a];else e.cancel()}catch(i){o.message=t.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:n.responseText}),e.cancel()}},null,null,999)}}),e.prototype={create:function(e,n,o){o=o||t;var i=this.loaders.length;return e=new o(this.editor,e,n),e.id=i,this.loaders[i]=e,this.fire("instanceCreated",e),e},isFinished:function(){for(var e=0;e<this.loaders.length;++e)if(!this.loaders[e].isFinished())return!1;return!0}},t.prototype={loadAndUpload:function(e,t){var n=this;this.once("loaded",function(o){o.cancel(),n.once("update",function(e){e.cancel()},null,null,0),n.upload(e,t)},null,null,0),this.load()},load:function(){var e=this,t=this.reader=new FileReader;e.changeStatus("loading"),this.abort=function(){e.reader.abort()},t.onabort=function(){e.changeStatus("abort")},t.onerror=function(){e.message=e.lang.filetools.loadError,e.changeStatus("error")},t.onprogress=function(t){e.loaded=t.loaded,e.update()},t.onload=function(){e.loaded=e.total,e.data=t.result,e.changeStatus("loaded")},t.readAsDataURL(this.file)},upload:function(e,t){var n=t||{};e?(this.uploadUrl=e,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:n})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function e(){"error"!=n.status&&(n.message=n.lang.filetools.networkError,n.changeStatus("error"))}function t(){"abort"!=n.status&&n.changeStatus("abort")}var n=this,o=this.xhr;n.abort=function(){o.abort(),t()},o.onerror=e,o.onabort=t,o.upload?(o.upload.onprogress=function(e){e.lengthComputable&&(n.uploadTotal||(n.uploadTotal=e.total),n.uploaded=e.loaded,n.update())},o.upload.onerror=e,o.upload.onabort=t):(n.uploadTotal=n.total,n.update()),o.onload=function(){if(n.update(),"abort"!=n.status)if(n.uploaded=n.uploadTotal,200>o.status||299<o.status)n.message=n.lang.filetools["httpError"+o.status],n.message||(n.message=n.lang.filetools.httpError.replace("%1",o.status)),n.changeStatus("error");else{for(var e={fileLoader:n},t=["message","fileName","url"],i=n.editor.fire("fileUploadResponse",e),a=0;a<t.length;a++){var r=t[a];"string"==typeof e[r]&&(n[r]=e[r])}n.responseData=e,delete n.responseData.fileLoader,!1===i?n.changeStatus("error"):n.changeStatus("uploaded")}}},changeStatus:function(e){this.status=e,"error"!=e&&"abort"!=e&&"loaded"!=e&&"uploaded"!=e||(this.abort=function(){}),this.fire(e),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(e.prototype),CKEDITOR.event.implementOn(t.prototype);var o=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:e,fileLoader:t,getUploadUrl:function(e,t){var n=CKEDITOR.tools.capitalize;return t&&e[t+"UploadUrl"]?e[t+"UploadUrl"]:e.uploadUrl?e.uploadUrl:t&&e["filebrowser"+n(t,1)+"UploadUrl"]?e["filebrowser"+n(t,1)+"UploadUrl"]+"&responseType=json":e.filebrowserUploadUrl?e.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(e,t){return!!e.type.match(t)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function e(e,t){var n=[];if(!t)return e;for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));return e+(-1!=e.indexOf("?")?"&":"?")+n.join("&")}function t(t){return!t.match(/command=QuickUpload/)||t.match(/(\?|&)responseType=json/)?t:e(t,{responseType:"json"})}function n(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}function o(){var t=this.getDialog(),o=t.getParentEditor();o._.filebrowserSe=this;var i=o.config["filebrowser"+n(t.getName())+"WindowWidth"]||o.config.filebrowserWindowWidth||"80%",t=o.config["filebrowser"+n(t.getName())+"WindowHeight"]||o.config.filebrowserWindowHeight||"70%",a=this.filebrowser.params||{};a.CKEditor=o.name,a.CKEditorFuncNum=o._.filebrowserFn,a.langCode||(a.langCode=o.langCode),a=e(this.filebrowser.url,a),o.popup(a,i,t,o.config.filebrowserWindowFeatures||o.config.fileBrowserWindowFeatures)}function i(e){var t=new CKEDITOR.dom.element(e.$.form);t&&((e=t.$.elements.ckCsrfToken)?e=new CKEDITOR.dom.element(e):(e=new CKEDITOR.dom.element("input"),e.setAttributes({name:"ckCsrfToken",type:"hidden"}),t.append(e)),e.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function a(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!(!e.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!e.getContentElement(this.for[0],this.for[1]).getAction())}function r(t,n,o){var i=o.params||{};i.CKEditor=t.name,i.CKEditorFuncNum=t._.filebrowserFn,i.langCode||(i.langCode=t.langCode),n.action=e(o.url,i),n.filebrowser=o}function s(e,c,d,f){if(f&&f.length)for(var p,h=f.length;h--;)if(p=f[h],"hbox"!=p.type&&"vbox"!=p.type&&"fieldset"!=p.type||s(e,c,d,p.children),p.filebrowser)if("string"==typeof p.filebrowser&&(p.filebrowser={action:"fileButton"==p.type?"QuickUpload":"Browse",target:p.filebrowser}),"Browse"==p.filebrowser.action){var m=p.filebrowser.url;void 0===m&&void 0===(m=e.config["filebrowser"+n(c)+"BrowseUrl"])&&(m=e.config.filebrowserBrowseUrl),m&&(p.onClick=o,p.filebrowser.url=m,p.hidden=!1)}else if("QuickUpload"==p.filebrowser.action&&p.for&&(m=p.filebrowser.url,void 0===m&&void 0===(m=e.config["filebrowser"+n(c)+"UploadUrl"])&&(m=e.config.filebrowserUploadUrl),m)){var g=p.onClick;p.onClick=function(n){var o=n.sender,r=o.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),s=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!g||!1!==g.call(o,n))&&(!!a.call(o,n)&&("form"!==e.config.filebrowserUploadMethod&&s?(n=e.uploadRepository.create(r.$.files[0]),n.on("uploaded",function(e){var t=e.sender.responseData;u.call(e.sender.editor,t.url,t.message)}),n.on("error",l.bind(this)),n.on("abort",l.bind(this)),n.loadAndUpload(t(m)),"xhr"):(i(r),!0)))},p.filebrowser.url=m,p.hidden=!1,r(e,d.getContents(p.for[0]).get(p.for[1]),p.filebrowser)}}function l(e){var t={};try{t=JSON.parse(e.sender.xhr.response)||{}}catch(e){}this.enable(),alert(t.error?t.error.message:e.sender.message)}function c(e,t,n){if(-1!==n.indexOf(";")){n=n.split(";");for(var o=0;o<n.length;o++)if(c(e,t,n[o]))return!0;return!1}return(e=e.getContents(t).get(n).filebrowser)&&e.url}function u(e,t){var n=this._.filebrowserSe.getDialog(),o=this._.filebrowserSe.for,i=this._.filebrowserSe.filebrowser.onSelect;o&&n.getContentElement(o[0],o[1]).reset(),"function"==typeof t&&!1===t.call(this._.filebrowserSe)||i&&!1===i.call(this._.filebrowserSe,e,t)||("string"==typeof t&&t&&alert(t),e&&(o=this._.filebrowserSe,n=o.getDialog(),o=o.filebrowser.target||null)&&(o=o.split(":"),(i=n.getContentElement(o[0],o[1]))&&(i.setValue(e),n.selectPage(o[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(u,e),e.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(e){if(e.editor.plugins.filebrowser)for(var t,n=e.data.definition,o=0;o<n.contents.length;++o)(t=n.contents[o])&&(s(e.editor,e.data.name,n,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!c(n,t.id,t.filebrowser)))})}(),function(){function e(e){var o=e.config,i=e.fire("uiSpace",{space:"top",html:""}).html,a=function(){function i(e,t,o){s.setStyle(t,n(o)),s.setStyle("position",e)}function r(e){var t=c.getDocumentPosition();switch(e){case"top":i("absolute","top",t.y-p-g);break;case"pin":i("fixed","top",T);break;case"bottom":i("absolute","top",t.y+(d.height||d.bottom-d.top)+g)}l=e}var l,c,u,d,f,p,h,m=o.floatSpaceDockedOffsetX||0,g=o.floatSpaceDockedOffsetY||0,E=o.floatSpacePinnedOffsetX||0,T=o.floatSpacePinnedOffsetY||0;return function(i){if(c=e.editable()){var T=i&&"focus"==i.name;T&&s.show(),e.fire("floatingSpaceLayout",{show:T}),s.removeStyle("left"),s.removeStyle("right"),u=s.getClientRect(),d=c.getClientRect(),f=t.getViewPaneSize(),p=u.height,h="pageXOffset"in t.$?t.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l?(r(p+g<=d.top?"top":p+g>f.height-d.bottom?"pin":"bottom"),i=f.width/2,i=o.floatSpacePreferRight?"right":0<d.left&&d.right<f.width&&d.width>u.width?"rtl"==o.contentsLangDirection?"right":"left":i-d.left>d.right-i?"left":"right",u.width>f.width?(i="left",T=0):(T="left"==i?0<d.left?d.left:0:d.right<f.width?f.width-d.right:0)+u.width>f.width&&(i="left"==i?"right":"left",T=0),s.setStyle(i,n(("pin"==l?E:m)+T+("pin"==l?0:"left"==i?h:-h)))):(l="pin",r("pin"),a(i))}}}();if(i){var r=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),s=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(r.output({content:i,id:e.id,langDir:e.lang.dir,langCode:e.langCode,name:e.name,style:"display:none;z-index:"+(o.baseFloatZIndex-1),topId:e.ui.spaceId("top"),voiceLabel:e.title}))),l=CKEDITOR.tools.eventsBuffer(500,a),c=CKEDITOR.tools.eventsBuffer(100,a);s.unselectable(),s.on("mousedown",function(e){e=e.data,e.getTarget().hasAscendant("a",1)||e.preventDefault()}),e.on("focus",function(n){a(n),e.on("change",l.input),t.on("scroll",c.input),t.on("resize",c.input)}),e.on("blur",function(){s.hide(),e.removeListener("change",l.input),t.removeListener("scroll",c.input),t.removeListener("resize",c.input)}),e.on("destroy",function(){t.removeListener("scroll",c.input),t.removeListener("resize",c.input),s.clearCustomData(),s.remove()}),e.focusManager.hasFocus&&s.show(),e.focusManager.add(s,1)}}var t=CKEDITOR.document.getWindow(),n=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){e(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),o=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){t=t||{};var n=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),n=this.keys,n[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)},this)),this._.click}},proto:{add:function(e,n,i){var a=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=a;var r;r=CKEDITOR.tools.htmlEncodeAttr(e).replace(o,"\\'"),e={id:a,val:r,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(i||e),text:n||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,n=this._.groups,o=this.element.getDocument();for(e in t)o.getById(t[e]).setStyle("display","");for(var i in n)t=o.getById(n[i]),e=t.getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll(),e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},markFirstDisplayed:function(){var e=this;this._.markFirstDisplayed(function(){e.multiSelect||e.unmarkAll()})},unmark:function(e){var t=this.element.getDocument();e=this._.items[e];var n=t.getById(e);n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e,t=this._.items,n=this.element.getDocument();for(e in t){var o=t[e];n.getById(o).removeClass("cke_selected"),n.getById(o+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,n=this.element.getElementsByTag("a"),o=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=n.getItem(++o);)if(e.equals(t)){this._.focusIndex=o;break}}else this.element.focus();t&&setTimeout(function(){t.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>",t=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{},listeners:[]}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,n){function o(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var i=CKEDITOR.env,a="cke_"+this.id,r=CKEDITOR.tools.addFunction(function(t){d&&(e.unlockSelection(1),d=0),l.execute(t)},this),s=this,l={id:a,combo:this,focus:function(){CKEDITOR.document.getById(a).getChild(1).focus()},execute:function(t){var n=s._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(e),n.on)n.panel.hide();else{s.commit();var o=s.getValue();o?n.list.mark(o):n.list.unmarkAll(),n.panel.showBlock(s.id,new CKEDITOR.dom.element(t),4)}},clickFn:r};this._.listeners.push(e.on("activeFilterChange",o,this)),this._.listeners.push(e.on("mode",o,this)),this._.listeners.push(e.on("selectionChange",o,this)),!this.readOnly&&this._.listeners.push(e.on("readOnly",o,this));var c=CKEDITOR.tools.addFunction(function(e,t){e=new CKEDITOR.dom.event(e);var n=e.getKeystroke();switch(n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(r,t);break;default:l.onkey(l,n)}e.preventDefault()}),u=CKEDITOR.tools.addFunction(function(){l.onfocus&&l.onfocus()}),d=0;return l.keyDownFn=c,i={id:a,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:i.gecko&&!i.hc?"":(this.title||"").replace("'",""),keydownFn:c,focusFn:u,clickFn:r},t.output(i,n),this.onRender&&this.onRender(),l},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,n=this._.panelDefinition.block,o=t.parent||CKEDITOR.document.getBody(),i="cke_combopanel__"+this.name,a=new CKEDITOR.ui.floatPanel(e,o,t),t=a.addListBlock(this.id,n),r=this;a.onShow=function(){this.element.addClass(i),r.setState(CKEDITOR.TRISTATE_ON),r._.on=1,r.editorFocus&&!e.focusManager.hasFocus&&e.focus(),r.onOpen&&r.onOpen()},a.onHide=function(t){this.element.removeClass(i),r.setState(r.modes&&r.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),r._.on=0,!t&&r.onClose&&r.onClose()},a.onEscape=function(){a.hide(1)},t.onClick=function(e,t){r.onClick&&r.onClick.call(r,e,t),a.hide()},this._.panel=a,this._.list=t,a.getBlock(this.id).onHide=function(){r._.on=0,r.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(e||t?n.removeClass("cke_combo_inlinelabel"):(t=this.label,n.addClass("cke_combo_inlinelabel")),n.setText(void 0!==t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,function(e){e.removeListener()}),this._.listeners=[]}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,n=e.lang.format,o=t.format_tags.split(";"),i={},a=0,r=[],s=0;s<o.length;s++){var l=o[s],c=new CKEDITOR.style(t["format_"+l]);e.filter.customConfig&&!e.filter.check(c)||(a++,i[l]=c,i[l]._.enterMode=e.config.enterMode,r.push(c))}0!==a&&e.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var e in i){var t=n["tag_"+e];this.add(e,i[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=i[t];var n=e.elementPath();t.checkActive(n,e)||e.applyStyle(t),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(t){var n=this.getValue();t=t.data.path,this.refresh();for(var o in i)if(i[o].checkActive(t,e))return void(o!=n&&this.setValue(o,e.lang.format["tag_"+o]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in i)e.activeFilter.check(i[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var n in i)if(e.activeFilter.check(i[n]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"\t",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t),this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&"))),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("\x3c!--",e,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}}),function(){function e(e,t){if(t||(t=e.getSelection().getSelectedElement()),t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function t(e){var t=e.getStyle("float");return"inherit"!=t&&"none"!=t||(t=0),t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var n="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(n="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:n,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",function(e){var t=e.data.element;!t.is("img")||t.data("cke-realelement")||t.isReadOnly()||(e.data.dialog="image")}),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(e(t,n))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(n){function o(o){var i=n.getCommand("justify"+o);i&&("left"!=o&&"right"!=o||i.on("exec",function(i){var a,r=e(n);r&&(a=t(r),a==o?(r.removeStyle("float"),o==t(r)&&r.removeAttribute("align")):r.setStyle("float",o),i.cancel())}),i.on("refresh",function(i){var a=e(n);a&&(a=t(a),this.setState(a==o?CKEDITOR.TRISTATE_ON:"right"==o||"left"==o?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),i.cancel())}))}n.plugins.image2||(o("left"),o("right"),o("center"),o("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,t){var n=o.exec(e),i=o.exec(t);if(n){if(!n[2]&&"px"==i[2])return i[1];if("px"==n[2]&&!i[2])return i[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,n=CKEDITOR.tools.cssLength,o=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,i={elements:{$:function(n){var o=n.attributes;if((o=(o=(o=o&&o["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(o)))&&o.children[0])&&n.attributes["data-cke-resizable"]){var i=new t(n).rules;n=o.attributes;var a=i.width,i=i.height;a&&(n.width=e(n.width,a)),i&&(n.height=e(n.height,i))}return o}}};CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(i,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(e,o,i,a){var r=this.lang.fakeobjects,r=r[i]||r.unknown;return o={class:o,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:r,title:r,align:e.getAttribute("align")||""},CKEDITOR.env.hc||(o.src=CKEDITOR.tools.transparentImageData),i&&(o["data-cke-real-element-type"]=i),a&&(o["data-cke-resizable"]=a,i=new t,a=e.getAttribute("width"),e=e.getAttribute("height"),a&&(i.rules.width=n(a)),e&&(i.rules.height=n(e)),i.populate(o)),this.document.createElement("img",{attributes:o})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,o,i,a){var r,s=this.lang.fakeobjects,s=s[i]||s.unknown;return r=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(r),r=r.getHtml(),o={class:o,"data-cke-realelement":encodeURIComponent(r),"data-cke-real-node-type":e.type,alt:s,title:s,align:e.attributes.align||""},CKEDITOR.env.hc||(o.src=CKEDITOR.tools.transparentImageData),i&&(o["data-cke-real-element-type"]=i),a&&(o["data-cke-resizable"]=a,a=e.attributes,e=new t,i=a.width,a=a.height,void 0!==i&&(e.rules.width=n(i)),void 0!==a&&(e.rules.height=n(a)),e.populate(o)),new CKEDITOR.htmlParser.element("img",o)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var o=t.getStyle("width");t=t.getStyle("height"),o&&n.setAttribute("width",e(n.getAttribute("width"),o)),t&&n.setAttribute("height",e(n.getAttribute("height"),t))}return n}}(),function(){function e(e){return e.replace(/'/g,"\\$&")}function t(e){for(var t,n=e.length,o=[],i=0;i<n;i++)t=e.charCodeAt(i),o.push(t);return"String.fromCharCode("+o.join(",")+")"}function n(t,n){var o,i,a=t.plugins.link,r=a.compiledProtectionFunction.params;i=[a.compiledProtectionFunction.name,"("];for(var s=0;s<r.length;s++)a=r[s].toLowerCase(),o=n[a],0<s&&i.push(","),i.push("'",o?e(encodeURIComponent(n[a])):"","'");return i.push(")"),i.join("")}function o(e){e=e.config.emailProtection||"";var t;return e&&"encode"!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,function(e,n,o){t.name=n,t.params=[],o.replace(/[^,\s]+/g,function(e){t.params.push(e)})})),t}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return n.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.setKeystroke(CKEDITOR.CTRL+75,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",function(t){var n=t.data.element.getAscendant({a:1,img:1},!0);n&&!n.isReadOnly()&&(n.is("a")?(t.data.dialog=!n.getAttribute("name")||n.getAttribute("href")&&n.getChildCount()?"link":"anchor",t.data.link=n):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,n)&&(t.data.dialog="anchor"))},null,null,0),e.on("doubleclick",function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)},null,null,20),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;if(!(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var n={};return t.getAttribute("href")&&t.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF),n}),this.compiledProtectionFunction=o(e)},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push(function(t,n){if("a"==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"})}});var i=/^javascript:/,a=/^mailto:([^?]+)(?:\?(.+))?$/,r=/subject=([^;?:@&=$,\/]*)/i,s=/body=([^;?:@&=$,\/]*)/i,l=/^#(.*)$/,c=/^((?:http|https|ftp|news):\/\/)?(.*)$/,u=/^(_(?:self|top|parent|blank))$/,d=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,f=/^javascript:([^(]+)\(([^)]+)\)$/,p=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,h=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m=/^tel:(.*)$/,g={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(e,t){var n,o=e.getSelection(),i=o.getSelectedElement(),a=o.getRanges(),r=[];if(!t&&i&&i.is("a"))return i;for(i=0;i<a.length;i++)if(n=o.getRanges()[i],n.shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(n=e.elementPath(n.getCommonAncestor()).contains("a",1))&&t)r.push(n);else if(n)return n;return t?r:null},getEditorAnchors:function(e){for(var t,n=e.editable(),o=n.isInline()&&!e.plugins.divarea?e.document:n,n=o.getElementsByTag("a"),o=o.getElementsByTag("img"),i=[],a=0;t=n.getItem(a++);)(t.data("cke-saved-name")||t.hasAttribute("name"))&&i.push({name:t.data("cke-saved-name")||t.getAttribute("name"),id:t.getAttribute("id")});for(a=0;t=o.getItem(a++);)(t=this.tryRestoreFakeAnchor(e,t))&&i.push({name:t.getAttribute("name"),id:t.getAttribute("id")});return i},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var n=e.restoreRealElement(t);if(n.data("cke-saved-name"))return n}},parseLinkAttributes:function(e,t){var n,o=t&&(t.data("cke-saved-href")||t.getAttribute("href"))||"",E=e.plugins.link.compiledProtectionFunction,T=e.config.emailProtection,v={};if(o.match(i)&&("encode"==T?o=o.replace(d,function(e,t,n){return n=n||"","mailto:"+String.fromCharCode.apply(String,t.split(","))+n.replace(/\\'/g,"'")}):T&&o.replace(f,function(e,t,n){if(t==E.name){v.type="email",e=v.email={},t=/(^')|('$)/g,n=n.match(/[^,\s]+/g);for(var o,i,a=n.length,r=0;r<a;r++)o=decodeURIComponent,i=n[r].replace(t,"").replace(/\\'/g,"'"),i=o(i),o=E.params[r].toLowerCase(),e[o]=i;e.address=[e.name,e.domain].join("@")}})),!v.type)if(T=o.match(l))v.type="anchor",v.anchor={},v.anchor.name=v.anchor.id=T[1];else if(T=o.match(m))v.type="tel",v.tel=T[1];else if(T=o.match(a)){n=o.match(r),o=o.match(s),v.type="email";var y=v.email={};y.address=T[1],n&&(y.subject=decodeURIComponent(n[1])),o&&(y.body=decodeURIComponent(o[1]))}else o&&(n=o.match(c))&&(v.type="url",v.url={},v.url.protocol=n[1],v.url.url=n[2]);if(t){if(o=t.getAttribute("target"))v.target={type:o.match(u)?o:"frame",name:o};else if(o=(o=t.data("cke-pa-onclick")||t.getAttribute("onclick"))&&o.match(p))for(v.target={type:"popup",name:o[1]};T=h.exec(o[2]);)"yes"!=T[2]&&"1"!=T[2]||T[1]in{height:1,width:1,top:1,left:1}?isFinite(T[2])&&(v.target[T[1]]=T[2]):v.target[T[1]]=!0;null!==t.getAttribute("download")&&(v.download=!0);var C,o={};for(C in g)(T=t.getAttribute(C))&&(o[g[C]]=T);(C=t.data("cke-saved-name")||o.advName)&&(o.advName=C),CKEDITOR.tools.isEmpty(o)||(v.advanced=o)}return v},getLinkAttributes:function(o,i){var a=o.config.emailProtection||"",r={};switch(i.type){case"url":var a=i.url&&void 0!==i.url.protocol?i.url.protocol:"http://",s=i.url&&CKEDITOR.tools.trim(i.url.url)||"";r["data-cke-saved-href"]=0===s.indexOf("/")?s:a+s;break;case"anchor":a=i.anchor&&i.anchor.id,r["data-cke-saved-href"]="#"+(i.anchor&&i.anchor.name||a||"");break;case"email":var l=i.email,s=l.address;switch(a){case"":case"encode":var c=encodeURIComponent(l.subject||""),u=encodeURIComponent(l.body||""),l=[];c&&l.push("subject="+c),u&&l.push("body="+u),l=l.length?"?"+l.join("&"):"","encode"==a?(a=["javascript:void(location.href='mailto:'+",t(s)],l&&a.push("+'",e(l),"'"),a.push(")")):a=["mailto:",s,l];break;default:a=s.split("@",2),l.name=a[0],l.domain=a[1],a=["javascript:",n(o,l)]}r["data-cke-saved-href"]=a.join("");break;case"tel":r["data-cke-saved-href"]="tel:"+i.tel}if(i.target)if("popup"==i.target.type){for(var a=["window.open(this.href, '",i.target.name||"","', '"],d="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),s=d.length,c=function(e){i.target[e]&&d.push(e+"="+i.target[e])},l=0;l<s;l++)d[l]+=i.target[d[l]]?"=yes":"=no";c("width"),c("left"),c("height"),c("top"),a.push(d.join(","),"'); return false;"),r["data-cke-pa-onclick"]=a.join("")}else"notSet"!=i.target.type&&i.target.name&&(r.target=i.target.name);if(i.download&&(r.download=""),i.advanced){for(var f in g)(a=i.advanced[g[f]])&&(r[f]=a);r.name&&(r["data-cke-saved-name"]=r.name)}r["data-cke-saved-href"]&&(r.href=r["data-cke-saved-href"]),f={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},i.advanced&&CKEDITOR.tools.extend(f,g);for(var p in r)delete f[p];return{set:r,removed:CKEDITOR.tools.objectKeys(f)}},showDisplayTextForElement:function(e,t){var n={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1},o=t.getSelection();return!(t.widgets&&t.widgets.focused||o&&1<o.getRanges().length)&&(!e||!e.getName||!e.is(n))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){if(CKEDITOR.env.ie){var t,n=e.getSelection().getRanges()[0],o=n.getPreviousEditableNode()&&n.getPreviousEditableNode().getAscendant("a",!0)||n.getNextEditableNode()&&n.getNextEditableNode().getAscendant("a",!0);n.collapsed&&o&&(t=n.createBookmark(),n.selectNodeContents(o),n.select())}o=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),e.removeStyle(o),t&&(n.moveToBookmark(t),n.select())},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,n=e.getSelection(),o=n.createBookmarks();n&&(t=n.getSelectedElement())&&(t.getChildCount()?t.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),n.selectBookmarks(o)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function e(e,t,n){return d(t)&&d(n)&&n.equals(t.getNext(function(e){return!(G(e)||X(e)||f(e))}))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function n(e){var t=e.element;if(t&&d(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var n=r(t);if("true"==n.getAttribute("contenteditable"))return t;if(n.is(e.triggers))return n}return null}function o(e,t,n){return y(e,t),y(e,n),e=t.size.bottom,n=n.size.top,e&&n?0|(e+n)/2:e||n}function i(e,t,n){return t=t[n?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!G(t)||d(t)&&!f(t)&&!u(e,t)})}function a(e,t,n){return e>t&&e<n}function r(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function s(e){var t=e.doc,n=R('<span contenteditable="false" data-cke-magic-line="1" style="'+U+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),o=CKEDITOR.getUrl(this.path+"images/"+(_.hidpi?"hidpi/":"")+"icon"+(e.rtl?"-rtl":"")+".png");for(I(n,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[I(R('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:U+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+o+") center no-repeat "+e.boxColor+";cursor:pointer;"+(_.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(_.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),I(R(W,t),{base:z+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),I(R(W,t),{base:z+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){y(e,this);var t=e.holdDistance,n=this.size;return!!(n&&a(e.mouse.y,n.top-t,n.bottom+t)&&a(e.mouse.x,n.left-t,n.right+t))},place:function(){var t=e.view,n=e.editable,o=e.trigger,i=o.upper,r=o.lower,s=i||r,l=s.getParent(),c={};this.trigger=o,i&&y(e,i,!0),r&&y(e,r,!0),y(e,l,!0),e.inInlineMode&&C(e,!0),l.equals(n)?(c.left=t.scroll.x,c.right=-t.scroll.x,c.width=""):(c.left=s.size.left-s.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),c.width=s.size.outerWidth+s.size.margin.left+s.size.margin.right+t.scroll.x,c.right=""),i&&r?c.top=i.size.margin.bottom===r.size.margin.top?0|i.size.bottom+i.size.margin.bottom/2:i.size.margin.bottom<r.size.margin.top?i.size.bottom+i.size.margin.bottom:i.size.bottom+i.size.margin.bottom-r.size.margin.top:i?r||(c.top=i.size.bottom+i.size.margin.bottom):c.top=r.size.top-r.size.margin.top,o.is(P)||a(c.top,t.scroll.y-15,t.scroll.y+5)?(c.top=e.inInlineMode?0:t.scroll.y,this.look(P)):o.is(L)||a(c.top,t.pane.bottom-5,t.pane.bottom+15)?(c.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(L)):(e.inInlineMode&&(c.top-=t.editable.top+t.editable.border.top),this.look(F)),e.inInlineMode&&(c.top--,c.top+=t.editable.scroll.top,c.left+=t.editable.scroll.left);for(var u in c)c[u]=CKEDITOR.tools.cssLength(c[u]);this.setStyles(c)},look:function(e){if(this.oldLook!=e){for(var t,n=this.lineChildren.length;n--;)(t=this.lineChildren[n]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new D("span",e.doc)}),t=n.lineChildren.length;t--;)n.lineChildren[t].appendTo(n);n.look(F),n.appendTo(n.wrap),n.unselectable(),n.lineChildren[0].on("mouseup",function(t){n.detach(),l(e,function(t){var n=e.line.trigger;t[n.is(w)?"insertBefore":"insertAfter"](n.is(w)?n.lower:n.upper)},!0),e.editor.focus(),_.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),t.data.preventDefault(!0)}),n.on("mousedown",function(e){e.data.preventDefault(!0)}),e.line=n}function l(e,t,n){var o,i=new CKEDITOR.dom.range(e.doc),a=e.editor;_.ie&&e.enterMode==CKEDITOR.ENTER_BR?o=e.doc.createText(M):(o=(o=r(e.element,!0))&&o.data("cke-enter-mode")||e.enterMode,o=new D(S[o],e.doc),o.is("br")||e.doc.createText(M).appendTo(o)),n&&a.fire("saveSnapshot"),t(o),i.moveToPosition(o,CKEDITOR.POSITION_AFTER_START),a.getSelection().selectRanges([i]),e.hotNode=o,n&&a.fire("saveSnapshot")}function c(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function o(n){var o=_.ie&&9>_.version?" ":M,i=e.hotNode&&e.hotNode.getText()==o&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;l(e,function(o){i&&e.hotNode&&e.hotNode.remove(),o[t?"insertAfter":"insertBefore"](n),o.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t}),_.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),e.line.detach()}return function(a){a=a.getSelection().getStartElement();var s;if(a=a.getAscendant(H,1),!m(e,a)&&a&&!a.equals(e.editable)&&!a.contains(e.editable)){(s=r(a))&&"false"==s.getAttribute("contenteditable")&&(a=s),e.element=a,s=i(e,a,!t);var l;d(s)&&s.is(e.triggers)&&s.is(j)&&(!i(e,s,!t)||(l=i(e,s,!t))&&d(l)&&l.is(e.triggers))?o(s):(l=n(e,a),d(l)&&(i(e,l,!t)?(a=i(e,l,!t))&&d(a)&&a.is(e.triggers)&&o(l):o(l)))}}}()}}function u(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)}function d(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function f(e){if(!d(e))return!1;var t;return(t=p(e))||(d(e)?(t={left:1,right:1,center:1},t=!(!t[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])):t=!1),t}function p(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function h(e,t){return d(t)?t.is(e.triggers):null}function m(e,t){if(!t)return!1;for(var n=t.getParents(1),o=n.length;o--;)for(var i=e.tabuList.length;i--;)if(n[o].hasAttribute(e.tabuList[i]))return!0;return!1}function g(e,t,n){return!!(t=t[n?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is($)}))&&(y(e,t),n?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y)}function E(e){var n=e.editable,o=e.mouse,i=e.view,r=e.triggerOffset;C(e);var s=o.y>(e.inInlineMode?i.editable.top+i.editable.height/2:Math.min(i.editable.height,i.pane.height)/2),n=n[s?"getLast":"getFirst"](function(e){return!(G(e)||X(e))});return n?(u(e,n)&&(n=e.line.wrap[s?"getPrevious":"getNext"](function(e){return!(G(e)||X(e))})),d(n)&&!f(n)&&h(e,n)?(y(e,n),!s&&0<=n.size.top&&a(o.y,0,n.size.top+r)?(e=e.inInlineMode||0===i.scroll.y?P:F,new t([null,n,w,A,e])):s&&n.size.bottom<=i.pane.height&&a(o.y,n.size.bottom-r,i.pane.height)?(e=e.inInlineMode||a(n.size.bottom,i.pane.height-r,i.pane.height)?L:F,new t([n,null,x,A,e])):null):null):null}function T(e){var o=e.mouse,r=e.view,s=e.triggerOffset,l=n(e);if(!l)return null;y(e,l);var c,u,s=Math.min(s,0|l.size.outerHeight/2),p=[];if(a(o.y,l.size.top-1,l.size.top+s))u=!1;else{if(!a(o.y,l.size.bottom-s,l.size.bottom+1))return null;u=!0}if(f(l)||g(e,l,u)||l.getParent().is(B))return null;var m=i(e,l,!u);if(m){if(m&&m.type==CKEDITOR.NODE_TEXT)return null;if(d(m)){if(f(m)||!h(e,m)||m.getParent().is(B))return null;p=[m,l][u?"reverse":"concat"]().concat([N,A])}}else l.equals(e.editable[u?"getLast":"getFirst"](e.isRelevant))?(C(e),u&&a(o.y,l.size.bottom-s,r.pane.height)&&a(l.size.bottom,r.pane.height-s,r.pane.height)?c=L:a(o.y,0,l.size.top+s)&&(c=P)):c=F,p=[null,l][u?"reverse":"concat"]().concat([u?x:w,A,c,l.equals(e.editable[u?"getLast":"getFirst"](e.isRelevant))?u?L:P:F]);return 0 in p?new t(p):null}function v(e,t,n,o){for(var i=t.getDocumentPosition(),a={},r={},s={},l={},c=Z.length;c--;)a[Z[c]]=parseInt(t.getComputedStyle.call(t,"border-"+Z[c]+"-width"),10)||0,s[Z[c]]=parseInt(t.getComputedStyle.call(t,"padding-"+Z[c]),10)||0,r[Z[c]]=parseInt(t.getComputedStyle.call(t,"margin-"+Z[c]),10)||0;return n&&!o||b(e,o),l.top=i.y-(n?0:e.view.scroll.y),l.left=i.x-(n?0:e.view.scroll.x),l.outerWidth=t.$.offsetWidth,l.outerHeight=t.$.offsetHeight,l.height=l.outerHeight-(s.top+s.bottom+a.top+a.bottom),l.width=l.outerWidth-(s.left+s.right+a.left+a.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,e.inInlineMode&&(l.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),I({border:a,padding:s,margin:r,ignoreScroll:n},l,!0)}function y(e,t,n){if(!d(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==n&&t.size.date>new Date-q)return null}else t.size={};return I(t.size,v(e,t,n),{date:+new Date},!0)}function C(e,t){e.view.editable=v(e,e.editable,t,!0)}function b(e,t){e.view||(e.view={});var n=e.view;if(!(!t&&n&&n.date>new Date-q)){var o=e.win,n=o.getScrollPosition(),o=o.getViewPaneSize();I(e.view,{scroll:{x:n.x,y:n.y,width:e.doc.$.documentElement.scrollWidth-o.width,height:e.doc.$.documentElement.scrollHeight-o.height},pane:{width:o.width,height:o.height,bottom:o.height+n.y},date:+new Date},!0)}}function O(e,n,o,i){for(var a=i,r=i,s=0,l=!1,c=!1,u=e.view.pane.height,d=e.mouse;d.y+s<u&&0<d.y-s&&(l||(l=n(a,i)),c||(c=n(r,i)),!l&&0<d.y-s&&(a=o(e,{x:d.x,y:d.y-s})),!c&&d.y+s<u&&(r=o(e,{x:d.x,y:d.y+s})),!l||!c);)s+=2;return new t([a,r,null,null])}CKEDITOR.plugins.add("magicline",{init:function(e){var o,a,r,h=e.config,g=h.magicline_triggerOffset||30,y={editor:e,enterMode:h.enterMode,triggerOffset:g,holdDistance:0|g*(h.magicline_holdDistance||.5),boxColor:h.magicline_color||"#ff0000",rtl:"rtl"==h.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(h.magicline_tabuList||[]),triggers:h.magicline_everywhere?H:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};y.isRelevant=function(e){return d(e)&&!u(y,e)&&!f(e)},e.on("contentDom",function(){var d=e.editable(),f=e.document,g=e.window;I(y,{editable:d,inInlineMode:d.isInline(),doc:f,win:g,hotNode:null},!0),y.boundary=y.inInlineMode?y.editable:y.doc.getDocumentElement(),d.is(K.$inline)||(y.inInlineMode&&!p(d)&&d.setStyles({position:"relative",top:null,left:null}),s.call(this,y),b(y),d.attachListener(e,"beforeUndoImage",function(){y.line.detach()}),d.attachListener(e,"beforeGetData",function(){y.line.wrap.getParent()&&(y.line.detach(),e.once("getData",function(){y.line.attach()},null,null,1e3))},null,null,0),d.attachListener(y.inInlineMode?f:f.getWindow().getFrame(),"mouseout",function(t){if("wysiwyg"==e.mode)if(y.inInlineMode){var n=t.data.$.clientX;t=t.data.$.clientY,b(y),C(y,!0);var o=y.view.editable,i=y.view.scroll;n>o.left-i.x&&n<o.right-i.x&&t>o.top-i.y&&t<o.bottom-i.y||(clearTimeout(r),r=null,y.line.detach())}else clearTimeout(r),r=null,y.line.detach()}),d.attachListener(d,"keyup",function(){y.hiddenMode=0}),d.attachListener(d,"keydown",function(t){if("wysiwyg"==e.mode)switch(t.data.getKeystroke()){case 2228240:case 16:y.hiddenMode=1,y.line.detach()}}),d.attachListener(y.inInlineMode?d:f,"mousemove",function(t){if(a=!0,"wysiwyg"==e.mode&&!e.readOnly&&!r){var n={x:t.data.$.clientX,y:t.data.$.clientY};r=setTimeout(function(){y.mouse=n,r=y.trigger=null,b(y),a&&!y.hiddenMode&&e.focusManager.hasFocus&&!y.line.mouseNear()&&(y.element=V(y,!0))&&((y.trigger=E(y)||T(y)||Y(y))&&!m(y,y.trigger.upper||y.trigger.lower)?y.line.attach().place():(y.trigger=null,y.line.detach()),a=!1)},30)}}),d.attachListener(g,"scroll",function(){"wysiwyg"==e.mode&&(y.line.detach(),_.webkit&&(y.hiddenMode=1,clearTimeout(o),o=setTimeout(function(){y.mouseDown||(y.hiddenMode=0)},50)))}),d.attachListener(k?f:g,"mousedown",function(){"wysiwyg"==e.mode&&(y.line.detach(),y.hiddenMode=1,y.mouseDown=1)}),d.attachListener(k?f:g,"mouseup",function(){y.hiddenMode=0,y.mouseDown=0}),e.addCommand("accessPreviousSpace",c(y)),e.addCommand("accessNextSpace",c(y,!0)),e.setKeystroke([[h.magicline_keystrokePrevious,"accessPreviousSpace"],[h.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",function(){var t,n,o,i;for(i in{p:1,br:1,div:1})for(t=e.document.getElementsByTag(i),o=t.count();o--;)if((n=t.getItem(o)).data("cke-magicline-hot"))return y.hotNode=n,void(y.lastCmdDirection="true"===n.data("cke-magicline-dir"))}),this.backdoor={accessFocusSpace:l,boxTrigger:t,isLine:u,getAscendantTrigger:n,getNonEmptyNeighbour:i,getSize:v,that:y,triggerEdge:T,triggerEditable:E,triggerExpand:Y})},this)}});var I=CKEDITOR.tools.extend,D=CKEDITOR.dom.element,R=D.createFromHtml,_=CKEDITOR.env,k=CKEDITOR.env.ie&&9>CKEDITOR.env.version,K=CKEDITOR.dtd,S={},w=128,x=64,N=32,A=16,P=4,L=2,F=1,M="",B=K.$listItem,$=K.$tableContent,j=I({},K.$nonEditable,K.$empty),H=K.$block,q=100,U="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",z=U+"border-color:transparent;display:block;border-style:solid;",W="<span>"+M+"</span>";S[CKEDITOR.ENTER_BR]="br",S[CKEDITOR.ENTER_P]="p",S[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,n){return this.properties=e+t+(n||F),this},is:function(e){return(this.properties&e)==e}};var V=function(){function e(e,t){var n=e.$.elementFromPoint(t.x,t.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null}return function(t,n,o){if(!t.mouse)return null;var i=t.doc,a=t.line.wrap;o=o||t.mouse;var r=e(i,o);return n&&u(t,r)&&(a.hide(),r=e(i,o),a.show()),!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||_.ie&&9>_.version&&!t.boundary.equals(r)&&!t.boundary.contains(r)?null:r}}(),G=CKEDITOR.dom.walker.whitespaces(),X=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Y=function(){function t(t){var i,r,s,l=t.element;if(!d(l)||l.contains(t.editable)||l.isReadOnly())return null;if(s=O(t,function(e,t){return!t.equals(e)},function(e,t){return V(e,!0,t)},l),i=s.upper,r=s.lower,e(t,i,r))return s.set(N,8);if(i&&l.contains(i))for(;!i.getParent().equals(l);)i=i.getParent();else i=l.getFirst(function(e){return n(t,e)});if(r&&l.contains(r))for(;!r.getParent().equals(l);)r=r.getParent();else r=l.getLast(function(e){return n(t,e)});if(!i||!r)return null;if(y(t,i),y(t,r),!a(t.mouse.y,i.size.top,r.size.bottom))return null;for(var c,u,f,p,l=Number.MAX_VALUE;r&&!r.equals(i)&&(u=i.getNext(t.isRelevant));)c=Math.abs(o(t,i,u)-t.mouse.y),c<l&&(l=c,f=i,p=u),i=u,y(t,i);return f&&p&&a(t.mouse.y,f.size.top,p.size.bottom)?(s.upper=f,s.lower=p,s.set(N,8)):null}function n(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||X(t)||f(t)||u(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(n){var o,i=t(n);if(o=i){o=i.upper;var a=i.lower;o=!(!o||!a||f(a)||f(o)||a.equals(o)||o.equals(a)||a.contains(o)||o.contains(a))&&!!(h(n,o)&&h(n,a)&&e(n,o,a))}return o?i:null}}(),Z=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],n=["style","className"],o=0;o<n.length;o++){var i=e.$.elements.namedItem(n[o]);i&&(i=new CKEDITOR.dom.element(i),t.push([i,i.nextSibling]),i.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&0<t.length)for(var n=t.length-1;0<=n;n--){var o=t[n][0],i=t[n][1];i?o.insertBefore(i):o.appendTo(e)}}function n(n,o){var i=e(n),a={},r=n.$;return o||(a.class=r.className||"",r.className=""),a.inline=r.style.cssText||"",o||(r.style.cssText="position: static; overflow: visible"),t(i),a}function o(n,o){var i=e(n),a=n.$;"class"in o&&(a.className=o.class),"inline"in o&&(a.style.cssText=o.inline),t(i)}function i(e){if(!e.editable().isInline()){var t,n=CKEDITOR.instances;for(t in n){var o=n[t];"wysiwyg"!=o.mode||o.readOnly||(o=o.document.getBody(),o.setAttribute("contentEditable",!1),o.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=u.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var a,r,s,l=e.lang,c=CKEDITOR.document,u=c.getWindow(),d=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var f=e.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}),p=e.ui.space("contents");if("wysiwyg"==e.mode){var h=e.getSelection();a=h&&h.getRanges(),r=u.getScrollPosition()}else{var m=e.editable().$;a=!CKEDITOR.env.ie&&[m.selectionStart,m.selectionEnd],r=[m.scrollLeft,m.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(u.on("resize",t),s=u.getScrollPosition(),h=e.container;h=h.getParent();)h.setCustomData("maximize_saved_styles",n(h)),h.setStyle("z-index",e.config.baseFloatZIndex-5);p.setCustomData("maximize_saved_styles",n(p,!0)),f.setCustomData("maximize_saved_styles",n(f,!0)),p={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},c.getDocumentElement().setStyles(p),!CKEDITOR.env.gecko&&c.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||c.getBody().setStyles(p),CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(0,0)},0):u.$.scrollTo(0,0),f.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),f.$.offsetLeft,f.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),f.addClass("cke_maximized"),t(),p=f.getDocumentPosition(),f.setStyles({left:-1*p.x+"px",top:-1*p.y+"px"}),CKEDITOR.env.gecko&&i(e)}else if(this.state==CKEDITOR.TRISTATE_ON){u.removeListener("resize",t);for(var h=[p,f],g=0;g<h.length;g++)o(h[g],h[g].getCustomData("maximize_saved_styles")),h[g].removeCustomData("maximize_saved_styles");for(h=e.container;h=h.getParent();)o(h,h.getCustomData("maximize_saved_styles")),h.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(s.x,s.y)},0):u.$.scrollTo(s.x,s.y),f.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(f.setStyle("display","inline"),setTimeout(function(){f.setStyle("display","block")},0)),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:p.$.offsetHeight,outerWidth:e.container.$.offsetWidth})}this.toggleState(),(h=this.uiItems[0])&&(p=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,h=CKEDITOR.document.getById(h._.id),h.getChild(1).setHtml(p),h.setAttribute("title",p),h.setAttribute("href",'javascript:void("'+p+'");')),"wysiwyg"==e.mode?a?(CKEDITOR.env.gecko&&i(e),e.getSelection().selectRanges(a),(m=e.getSelection().getStartElement())&&m.scrollIntoView(!0)):u.$.scrollTo(r.x,r.y):(a&&(m.selectionStart=a[0],m.selectionEnd=a[1]),m.scrollLeft=r[0],m.scrollTop=r[1]),a=r=null,d=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:d)},null,null,100)}}})}(),function(){function e(e,t,n){var o=CKEDITOR.cleanWord;return o?n():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,n,null,!0)),!o}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(t){function n(e){var t,n=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,o=[];if(n&&e.editor.filter.check("img[src]")&&(t=n.extractTagsFromHtml(e.data.dataValue),0!==t.length&&(n=n.extractFromRtf(e.data.dataTransfer["text/rtf"]),0!==n.length&&(CKEDITOR.tools.array.forEach(n,function(e){o.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)},this),t.length===o.length))))for(n=0;n<t.length;n++)0===t[n].indexOf("file://")&&o[n]&&(e.data.dataValue=e.data.dataValue.replace(t[n],o[n]))}var o=0,i=this.path,a=void 0===t.config.pasteFromWord_inlineImages||t.config.pasteFromWord_inlineImages;t.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e,t){o=1,e.execCommand("paste",{type:"html",notification:!t||void 0===t.notification||t.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(t,"PasteFromWord",{label:t.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),t.on("paste",function(n){var a=n.data,r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?a.dataTransfer.getData("text/html",!0):null,s=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?a.dataTransfer.getData("text/rtf"):null,r=r||a.dataValue,l={dataValue:r,dataTransfer:{"text/rtf":s}},s=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,s=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(r)||s.test(r);if(r&&(o||s)&&(!1!==t.fire("pasteFromWord",l)||o)){a.dontFilter=!0;var c=e(t,i,function(){c?t.fire("paste",a):(!t.config.pasteFromWordPromptCleanup||o||confirm(t.lang.pastefromword.confirmCleanup))&&(l.dataValue=CKEDITOR.cleanWord(l.dataValue,t),t.fire("afterPasteFromWord",l),a.dataValue=l.dataValue,!0===t.config.forcePasteAsPlainText?a.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==t.config.forcePasteAsPlainText||(a.type="html")),o=0});c&&n.cancel()}},null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&a&&t.on("afterPasteFromWord",n)}})}(),function(){var e={canUndo:!1,async:!0,exec:function(e,t){var n=e.lang,o=CKEDITOR.tools.keystrokeToString(n.common.keyboard,e.getCommandKeystroke(CKEDITOR.env.ie?e.commands.paste:this)),i=t&&void 0!==t.notification?t.notification:!t||!t.from||"keystrokeHandler"===t.from&&CKEDITOR.env.ie,n=i&&"string"==typeof i?i:n.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+o.aria+'">'+o.display+"</kbd>");e.execCommand("paste",{type:"text",notification:!!i&&n})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){var n=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;t.addCommand("pastetext",e),t.setKeystroke(n,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(t,"PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",function(e){"html"!=e.data.type&&(e.data.type="text")}),t.on("pasteState",function(e){t.getCommand("pastetext").setState(e.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,n=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),o=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),i=CKEDITOR.plugins.removeformat.filter,a=e.getSelection().getRanges().createIterator(),r=function(e){return e.type==CKEDITOR.NODE_ELEMENT},s=[];t=a.getNextRange();){var l=t.createBookmark();t=e.createRange(),t.setStartBefore(l.startNode),l.endNode&&t.setEndAfter(l.endNode),t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=t.createBookmark(),u=c.startNode,d=c.endNode,f=function(t){for(var o,a=e.elementPath(t),r=a.elements,s=1;(o=r[s])&&!o.equals(a.block)&&!o.equals(a.blockLimit);s++)n.test(o.getName())&&i(e,o)&&t.breakParent(o)};if(f(u),d)for(f(d),u=u.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);u&&!u.equals(d);)if(u.isReadOnly()){if(u.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;u=u.getNext(r)}else f=u.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==u.getName()&&u.data("cke-realelement")||u.hasAttribute("data-cke-bookmark")||!i(e,u)||(n.test(u.getName())?u.remove(1):(u.removeAttributes(o),e.fire("removeFormatCleanup",u))),u=f;c.startNode.remove(),c.endNode&&c.endNode.remove(),t.moveToBookmark(l),s.push(t)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(s)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],o=0;o<n.length;o++)if(!1===n[o](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(e){function t(t){var n=s.width,i=s.height,l=n+(t.data.$.screenX-r.x)*("rtl"==a?-1:1);t=i+(t.data.$.screenY-r.y),c&&(n=Math.max(o.resize_minWidth,Math.min(l,o.resize_maxWidth))),u&&(i=Math.max(o.resize_minHeight,Math.min(t,o.resize_maxHeight))),e.resize(c?n:null,i)}function n(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),e.document&&(e.document.removeListener("mousemove",t),e.document.removeListener("mouseup",n))}var o=e.config,i=e.ui.spaceId("resizer"),a=e.element?e.element.getDirection(1):"ltr";if(!o.resize_dir&&(o.resize_dir="vertical"),void 0===o.resize_maxWidth&&(o.resize_maxWidth=3e3),void 0===o.resize_maxHeight&&(o.resize_maxHeight=3e3),void 0===o.resize_minWidth&&(o.resize_minWidth=750),void 0===o.resize_minHeight&&(o.resize_minHeight=250),!1!==o.resize_enabled){var r,s,l=null,c=("both"==o.resize_dir||"horizontal"==o.resize_dir)&&o.resize_minWidth!=o.resize_maxWidth,u=("both"==o.resize_dir||"vertical"==o.resize_dir)&&o.resize_minHeight!=o.resize_maxHeight,d=CKEDITOR.tools.addFunction(function(i){l||(l=e.getResizable()),s={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0},r={x:i.screenX,y:i.screenY},o.resize_minWidth>s.width&&(o.resize_minWidth=s.width),o.resize_minHeight>s.height&&(o.resize_minHeight=s.height),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),e.document&&(e.document.on("mousemove",t),e.document.on("mouseup",n)),i.preventDefault&&i.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(d)}),e.on("uiSpace",function(t){if("bottom"==t.data.space){var n="";c&&!u&&(n=" cke_resizer_horizontal"),!c&&u&&(n=" cke_resizer_vertical");var o='<span id="'+i+'" class="cke_resizer'+n+" cke_resizer_"+a+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+d+', event)">'+("ltr"==a?"":"")+"</span>";"ltr"==a&&"ltr"==n?t.data.html+=o:t.data.html=o+t.data.html}},e,null,100),e.on("maximize",function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,n=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&n?n.hide():(t.previousState=t.state,n||(n=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}}),n.onHide=CKEDITOR.tools.bind(function(){var n=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!n||n[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0},this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout(function(){n.show(CKEDITOR.document.getById(t.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow="menu",this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(e){CKEDITOR.plugins.scayt.onLoadTimestamp=(new Date).getTime(),"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css"),CKEDITOR.document.appendStyleSheet(this.path+"dialogs/dialog.css")},init:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var o=e.lang.scayt,i=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:o.text_title,title:e.plugins.wsc?e.lang.wsc.title:o.text_title,modes:{wysiwyg:!(i.ie&&(8>i.version||i.quirks))},toolbar:"spellchecker,20",refresh:function(){var t=e.ui.instances.Scayt.getState();e.scayt&&(t=n.state.scayt[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",t)},onRender:function(){var t=this;e.on("scaytButtonState",function(e){void 0!==typeof e.data&&t.setState(e.data)})},onMenu:function(){var t=e.scayt;e.getMenuItem("scaytToggle").label=e.lang.scayt[t&&n.state.scayt[e.name]?"btn_disable":"btn_enable"];var o={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return e.config.scayt_uiTabs[0]||delete o.scaytOptions,e.config.scayt_uiTabs[1]||delete o.scaytLangs,e.config.scayt_uiTabs[2]||delete o.scaytDict,t&&!CKEDITOR.plugins.scayt.isNewUdSupported(t)&&(delete o.scaytDict,e.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),o}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(n,o){var i,a,r=e.scayt;return r&&(a=r.getSelectionNode())&&(i=t.menuGenerator(e,a),r.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" ."))),i}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(t){return function(){var n=e.scayt;return n&&n.hideBanner(),t.apply(this)}}))},addMenuItems:function(e){var t=this,n=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");for(var o=e.config.scayt_contextMenuItemsOrder.split("|"),i=0;i<o.length;i++)o[i]="scayt_"+o[i];if((o=["grayt_description","grayt_suggest","grayt_control"].concat(o))&&o.length)for(i=0;i<o.length;i++)e.addMenuGroup(o[i],i-10);e.addCommand("scaytToggle",{exec:function(e){var t=e.scayt;n.state.scayt[e.name]=!n.state.scayt[e.name],!0===n.state.scayt[e.name]?t||n.createScayt(e):t&&n.destroy(e)}}),e.addCommand("scaytAbout",{exec:function(e){e.scayt.tabToOpen="about",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytOptions",{exec:function(e){e.scayt.tabToOpen="options",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytLangs",{exec:function(e){e.scayt.tabToOpen="langs",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytDict",{exec:function(e){e.scayt.tabToOpen="dictionaries",n.openDialog(t.dialogName,e)}}),o={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(o.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,n=e.scayt,o=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(o=o.replace(/\s/g,""))?(n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(o)},bindEvents:function(e){var t=CKEDITOR.plugins.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,o=function(){t.destroy(e)},i=function(){!t.state.scayt[e.name]||e.readOnly||e.scayt||t.createScayt(e)},a=function(){var t=e.editable();t.attachListener(t,"focus",function(t){CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(i,0),t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt;var o,a;if((n||t)&&e._.savedSelection){t=e._.savedSelection.getSelectedElement(),t=!t&&e._.savedSelection.getRanges();for(var r=0;r<t.length;r++)a=t[r],"string"==typeof a.startContainer.$.nodeValue&&((o=a.startContainer.getText().length)<a.startOffset||o<a.endOffset)&&e.unlockSelection(!1)}},this,null,-10)},r=function(){n?e.config.scayt_inlineModeImmediateMarkup?i():(e.on("blur",function(){setTimeout(o,0)}),e.on("focus",i),e.focusManager.hasFocus&&i()):i(),a();var t=e.editable();t.attachListener(t,"mousedown",function(t){t=t.data.getTarget();var n=e.widgets&&e.widgets.getByElement(t);n&&(n.wrapper=t.getAscendant(function(e){return e.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};e.on("contentDom",r),e.on("beforeCommandExec",function(n){var o=e.scayt,i=!1,a=!1,r=!0;n.data.name in t.options.disablingCommandExec&&"wysiwyg"==e.mode?o&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==n.data.name&&"italic"!==n.data.name&&"underline"!==n.data.name&&"strike"!==n.data.name&&"subscript"!==n.data.name&&"superscript"!==n.data.name&&"enter"!==n.data.name&&"cut"!==n.data.name&&"language"!==n.data.name||!o||("cut"===n.data.name&&(r=!1,a=!0),"language"===n.data.name&&(a=i=!0),e.fire("reloadMarkupScayt",{removeOptions:{removeInside:r,forceBookmark:a,language:i},timeout:0}))}),e.on("beforeSetMode",function(n){"source"==n.data&&((n=e.scayt)&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))}),e.on("afterCommandExec",function(n){"wysiwyg"!=e.mode||"undo"!=n.data.name&&"redo"!=n.data.name||setTimeout(function(){t.reloadMarkup(e.scayt)},250)}),e.on("readOnly",function(n){var o;n&&(o=e.scayt,!0===n.editor.readOnly?o&&o.fire("removeMarkupInDocument",{}):o?t.reloadMarkup(o):"wysiwyg"==n.editor.mode&&!0===t.state.scayt[n.editor.name]&&(t.createScayt(e),n.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),e.on("beforeDestroy",o),e.on("setData",function(){o(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&r()},this,null,50),e.on("reloadMarkupScayt",function(n){var o=n.data&&n.data.removeOptions,i=n.data&&n.data.timeout,a=n.data&&n.data.language,r=e.scayt;r&&setTimeout(function(){a&&(o.selectionNode=e.plugins.language.getCurrentLangElement(e),o.selectionNode=o.selectionNode&&o.selectionNode.$||null),r.removeMarkupInSelectionNode(o),t.reloadMarkup(r)},i||0)}),e.on("insertElement",function(){e.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50),e.on("insertHtml",function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")},this,null,50),e.on("insertText",function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")},this,null,50),e.on("scaytDialogShown",function(t){t.data.selectPage(e.scayt.tabToOpen)})},parseConfig:function(e){var t=CKEDITOR.plugins.scayt;if(t.replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),t.state.scayt[e.name]=e.config.scayt_autoStartup,"boolean"!=typeof e.config.grayt_autoStartup&&(e.config.grayt_autoStartup=!1),"boolean"!=typeof e.config.scayt_inlineModeImmediateMarkup&&(e.config.scayt_inlineModeImmediateMarkup=!1),t.state.grayt[e.name]=e.config.grayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)&&(e.config.scayt_maxSuggestions=3),(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)&&(e.config.scayt_minWordLength=3),void 0!==e.config.scayt_customDictionaryIds&&"string"==typeof e.config.scayt_customDictionaryIds||(e.config.scayt_customDictionaryIds=""),void 0!==e.config.scayt_userDictionaryName&&"string"==typeof e.config.scayt_userDictionaryName||(e.config.scayt_userDictionaryName=null),"string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var n=[],o=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,function(e){1===Number(e)||0===Number(e)?(o.push(!0),n.push(Number(e))):o.push(!1)}),null===CKEDITOR.tools.search(o,!1)?e.config.scayt_uiTabs=n:e.config.scayt_uiTabs=[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if("string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_customPunctuation&&(e.config.scayt_customPunctuation="-"),"string"!=typeof e.config.scayt_srcUrl&&(t=document.location.protocol,t=-1!=t.search(/https?:/)?t:"http:",e.config.scayt_srcUrl=t+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof e.config.scayt_multiLanguageMode&&(e.config.scayt_multiLanguageMode=!1),"object"!=typeof e.config.scayt_multiLanguageStyles&&(e.config.scayt_multiLanguageStyles={}),e.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof e.config.scayt_ignoreAllCapsWords&&(e.config.scayt_ignoreAllCapsWords=!1),e.config.scayt_ignoreDomainNames&&"boolean"!=typeof e.config.scayt_ignoreDomainNames&&(e.config.scayt_ignoreDomainNames=!1),e.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof e.config.scayt_ignoreWordsWithMixedCases&&(e.config.scayt_ignoreWordsWithMixedCases=!1),e.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof e.config.scayt_ignoreWordsWithNumbers&&(e.config.scayt_ignoreWordsWithNumbers=!1),e.config.scayt_disableOptionsStorage){var t=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,i="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),a=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],r=CKEDITOR.tools.search,s=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n],l=!!r(e,"options");if(!r(i,o)||l&&r(a,function(e){if("lang"===e)return!1}))return;if(r(a,o)&&a.splice(s(a,o),1),"all"===o||l&&r(e,"lang"))return[];"options"===o&&(a=["lang"])}return t=t.concat(a)}(t)}},addRule:function(e){var t=CKEDITOR.plugins.scayt,n=e.dataProcessor,o=n&&n.htmlFilter,i=e._.elementsPath&&e._.elementsPath.filters,n=n&&n.dataFilter,a=e.addRemoveFormatFilter,r=function(n){if(e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute)))return!1},s=function(n){var o=!0;return e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute))&&(o=!1),o};i&&i.push(r),n&&n.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],o=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(n||o)&&delete e.name,e}}}),o&&o.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],o=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(n||o)&&delete e.name,e}}}),a&&a.call(e,s)},scaytMenuDefinition:function(e){var t=this,n=CKEDITOR.plugins.scayt;return e=e.scayt,{scayt:{scayt_ignore:{label:e.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(e){var t=e.scayt;setTimeout(function(){t.addWordToUserDictionary()},10)}},scayt_option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(e){e.scayt.tabToOpen="options",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[0]}},scayt_language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(e){e.scayt.tabToOpen="langs",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[1]}},scayt_dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(e){e.scayt.tabToOpen="dictionaries",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[2]}},scayt_about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(e){e.scayt.tabToOpen="about",n.openDialog(t.dialogName,e)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(e){}},grayt_ignore:{label:e.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(e){e.scayt.ignorePhrase()}},grayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(e){e.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(e,t,n){var o={},i={},a=n?"word":"phrase",r=n?"startGrammarCheck":"startSpellCheck",s=e.scayt;if(0<t.length&&"no_any_suggestions"!==t[0])if(n)for(n=0;n<t.length;n++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_");e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],a,r)),n<e.config.scayt_maxSuggestions?(e.addMenuItem(l,{label:t[n],command:l,group:"scayt_suggest",order:n+1}),o[l]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(l,{label:t[n],command:l,group:"scayt_moresuggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:s.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return i}}),o.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(n=0;n<t.length;n++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_"),e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],a,r)),e.addMenuItem(l,{label:t[n],command:l,group:"grayt_suggest",order:n+1}),o[l]=CKEDITOR.TRISTATE_OFF;else o.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:s.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return o},menuGenerator:function(e,t){var n,o,i,a,r=e.scayt,s=this.scaytMenuDefinition(e),l={},c=e.config.scayt_contextCommands.split("|"),u=t.getAttribute(r.getLangAttribute())||r.getLang();if(o=r.isScaytNode(t),i=r.isGraytNode(t),o?(s=s.scayt,n=t.getAttribute(r.getScaytNodeAttributeName()),r.fire("getSuggestionsList",{lang:u,word:n}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,o)):i&&(s=s.grayt,l=t.getAttribute(r.getGraytNodeAttributeName()),r.getGraytNodeRuleAttributeName?(n=t.getAttribute(r.getGraytNodeRuleAttributeName()),r.getProblemDescriptionText(l,n,u)):r.getProblemDescriptionText(l,u),a=r.getProblemDescriptionText(l,n,u),s.grayt_problemdescription&&a&&(a=a.replace(/([.!?])\s/g,"$1<br>"),s.grayt_problemdescription.label=a),r.fire("getGrammarSuggestionsList",{lang:u,phrase:l,rule:n}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,o)),o&&"off"==e.config.scayt_contextCommands)return l;for(var d in s)o&&-1==CKEDITOR.tools.indexOf(c,d.replace("scayt_",""))&&"all"!=e.config.scayt_contextCommands||i&&"grayt_problemdescription"!==d&&-1==CKEDITOR.tools.indexOf(c,d.replace("grayt_",""))&&"all"!=e.config.scayt_contextCommands||(l[d]=void 0!==s[d].state?s[d].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof s[d].verification||s[d].verification(e)||delete l[d],e.addCommand(d,{exec:s[d].exec}),e.addMenuItem(d,{label:e.lang.scayt[s[d].label]||s[d].label,command:d,group:s[d].group,order:s[d].order}));return l},createCommand:function(e,t,n){return{exec:function(o){o=o.scayt;var i={};i[t]=e,o.replaceSelectionNode(i),"startGrammarCheck"===n&&o.removeMarkupInSelectionNode({grammarOnly:!0}),o.fire(n)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var e,t=CKEDITOR.version.match(/^\d(\.\d*)*/),t=t&&t[0];if(t){e="4.5.7";var n,t=t.replace(/\./g,"");e=e.replace(/\./g,""),n=t.length-e.length,n=0<=n?n:0,e=parseInt(t)>=parseInt(e)*Math.pow(10,n)}return e?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],onLoadTimestamp:"",state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(e,t){var n=t.scayt;n.isAllModulesReady&&!1===n.isAllModulesReady()||(t.lockSelection(),t.openDialog(e))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(e){return!!e.getUserDictionary},reloadMarkup:function(e){var t;e&&(t=e.getScaytLangList(),e.reloadMarkup?e.reloadMarkup():(this.alarmCompatibilityMessage(),t&&t.ltr&&t.rtl&&e.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.loadScaytLibrary(e,function(e){function o(e){return new SCAYT.CKSCAYT(e,function(){},function(){})}var i;if(e.window&&(i="BODY"==e.editable().$.nodeName?e.window.getFrame():e.editable()),i){i={lang:e.config.scayt_sLang,container:i.$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,customPunctuation:e.config.scayt_customPunctuation,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,problem_grammar_data_attribute:t.options.problem_grammar_data_attribute,problem_grammar_class:t.options.problem_grammar_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:e.config.grayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength,multiLanguageMode:e.config.scayt_multiLanguageMode,multiLanguageStyles:e.config.scayt_multiLanguageStyles,graytAutoStartup:e.config.grayt_autoStartup,charsToObserve:n.charsToObserve},e.config.scayt_serviceProtocol&&(i.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(i.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(i.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(i.service_path=e.config.scayt_servicePath),"boolean"==typeof e.config.scayt_ignoreAllCapsWords&&(i["ignore-all-caps-words"]=e.config.scayt_ignoreAllCapsWords),"boolean"==typeof e.config.scayt_ignoreDomainNames&&(i["ignore-domain-names"]=e.config.scayt_ignoreDomainNames),"boolean"==typeof e.config.scayt_ignoreWordsWithMixedCases&&(i["ignore-words-with-mixed-cases"]=e.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof e.config.scayt_ignoreWordsWithNumbers&&(i["ignore-words-with-numbers"]=e.config.scayt_ignoreWordsWithNumbers);var a;try{a=o(i)}catch(e){t.alarmCompatibilityMessage(),delete i.charsToObserve,a=o(i)}a.subscribe("suggestionListSend",function(e){for(var t={},n=[],o=0;o<e.suggestionList.length;o++)t["word_"+e.suggestionList[o]]||(t["word_"+e.suggestionList[o]]=e.suggestionList[o],n.push(e.suggestionList[o]));CKEDITOR.plugins.scayt.suggestions=n}),a.subscribe("selectionIsChanged",function(t){e.getSelection().isLocked&&"restoreSelection"!==t.action&&e.lockSelection(),"restoreSelection"===t.action&&e.selectionChange(!0)}),a.subscribe("graytStateChanged",function(t){n.state.grayt[e.name]=t.state}),a.addMarkupHandler&&a.addMarkupHandler(function(t){var n=e.editable(),o=n.getCustomData(t.charName);o&&(o.$=t.node,n.setCustomData(t.charName,o))}),e.scayt=a,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else n.state.scayt[e.name]=!1})},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var n,o=function(){CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof t&&t(e)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(n=e.config.scayt_srcUrl+"?"+this.onLoadTimestamp,CKEDITOR.scriptLoader.load(n,function(e){e&&o()})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&o()}},CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name;e=e.data.definition.dialog,"scaytDialog"!==t&&"checkspell"!==t&&(e.on("show",function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0)}),e.on("hide",function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1)})),"scaytDialog"===t&&e.on("cancel",function(e){return!1},this,null,-1),"checkspell"===t&&e.on("cancel",function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1),e.unlockSelection()},this,null,-2),"link"===t&&e.on("ok",function(e){var t=e.sender&&e.sender.getParentEditor();t&&setTimeout(function(){t.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)}),"replace"===t&&e.on("hide",function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;e&&setTimeout(function(){n&&(n.fire("removeMarkupInDocument",{}),t.reloadMarkup(n))},0)})}),CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var e=CKEDITOR.editor.prototype;e.checkDirty=CKEDITOR.tools.override(e.checkDirty,function(e){return function(){var t=null,n=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t="ready"==this.status)var o=n.removeMarkupFromString(this.getSnapshot()),n=n.removeMarkupFromString(this._.previousValue),t=t&&n!==o}else t=e.call(this);return t}}),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var e=CKEDITOR.plugins.undo.Image.prototype,t="function"==typeof e.equalsContent?"equalsContent":"equals";e[t]=CKEDITOR.tools.override(e[t],function(e){return function(t){var n=t.editor.scayt,o=this.contents,i=t.contents,a=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=n.removeMarkupFromString(o)||"",t.contents=n.removeMarkupFromString(i)||""),a=e.apply(this,arguments),this.contents=o,t.contents=i,a}})}}),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";e.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(e)},init:function(t){var n=t.addCommand("showborders",e);n.canUndo=!1,!1!==t.config.startupShowBorders&&n.setState(CKEDITOR.TRISTATE_ON),t.on("mode",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)},null,null,100),t.on("contentDom",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)}),t.on("removeFormatCleanup",function(e){e=e.data,t.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&e.is("table")&&(!e.hasAttribute("border")||0>=parseInt(e.getAttribute("border"),10))&&e.addClass("cke_show_border")})},afterInit:function(e){var t=e.dataProcessor;e=t&&t.dataFilter,t=t&&t.htmlFilter,e&&e.addRules({elements:{table:function(e){e=e.attributes;var t=e.class,n=parseInt(e.border,10);n&&!(0>=n)||t&&-1!=t.indexOf("cke_show_border")||(e.class=(t||"")+" cke_show_border")}}}),t&&t.addRules({elements:{table:function(e){e=e.attributes;var t=e.class;t&&(e.class=t.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name;"table"!=t&&"tableProperties"!=t||(e=e.data.definition,t=e.getContents("info").get("txtBorder"),t.commit=CKEDITOR.tools.override(t.commit,function(e){return function(t,n){e.apply(this,arguments);var o=parseInt(this.getValue(),10);n[!o||0>=o?"addClass":"removeClass"]("cke_show_border")}}),(e=(e=e.getContents("advanced"))&&e.get("advCSSClasses"))&&(e.setup=CKEDITOR.tools.override(e.setup,function(e){return function(){e.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),e.commit=CKEDITOR.tools.override(e.commit,function(e){return function(t,n){e.apply(this,arguments),parseInt(n.getAttribute("border"),10)||n.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function n(){var e=i&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),e&&this.focus()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var o=CKEDITOR.plugins.sourcearea;t.addMode("source",function(o){var i=t.ui.space("contents").getDocument().createElement("textarea");i.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),i.setAttribute("dir","ltr"),i.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),t.ui.space("contents").append(i),i=t.editable(new e(t,i)),i.setData(t.getData(1)),CKEDITOR.env.ie&&(i.attachListener(t,"resize",n,i),i.attachListener(CKEDITOR.document.getWindow(),"resize",n,i),CKEDITOR.tools.setTimeout(n,0,i)),t.fire("ariaWidget",this),o()}),t.addCommand("source",o.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var i=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[n]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,n=e.lang.stylescombo,o={},i=[],a=[];e.on("stylesSet",function(n){if(n=n.data.styles){for(var r,s,l,c=0,u=n.length;c<u;c++)r=n[c],e.blockless&&r.element in CKEDITOR.dtd.$block||"string"==typeof r.type&&!CKEDITOR.style.customHandlers[r.type]||(s=r.name,r=new CKEDITOR.style(r),e.filter.customConfig&&!e.filter.check(r))||(r._name=s,r._.enterMode=t.enterMode,r._.type=l=r.assignedTo||r.type,r._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),o[s]=r,i.push(r),a.push(r));i.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:a,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,o,a,r,s;for(r=0,s=i.length;r<s;r++)e=i[r],t=e._name,a=e._.type,a!=o&&(this.startGroup(n["panelTitle"+String(a)]),o=a),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=o[t];var n=e.elementPath();t.group&&t.removeStylesFromSameGroup(e)?e.applyStyle(t):e[t.checkActive(n,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(t){var n=this.getValue();t=t.data.path.elements;for(var i,a=0,r=t.length;a<r;a++){i=t[a];for(var s in o)if(o[s].checkElementRemovable(i,!0,e))return void(s!=n&&this.setValue(s))}this.setValue("")},this)},onOpen:function(){var t=e.getSelection(),t=t.getSelectedElement()||t.getStartElement()||e.editable(),t=e.elementPath(t),i=[0,0,0,0];this.showAll(),this.unmarkAll();for(var a in o){var r=o[a],s=r._.type;r.checkApplicable(t,e,e.activeFilter)?i[s]++:this.hideItem(a),r.checkActive(t,e)&&this.mark(a)}i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),i[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),i[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=e.elementPath();if(t){for(var n in o)if(o[n].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){o={},i=[]}})}})}(),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var n,o=t.getSelection();if(n=new CKEDITOR.dom.elementPath(o.getCommonAncestor(),o.root).contains({td:1,th:1},1)){var o=t.createRange(),i=CKEDITOR.tools.tryThese(function(){var t=n.getParent().$.cells[n.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t},function(){var t=n.getParent(),t=t.getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]});if(i||e){if(!i)return!0;i=new CKEDITOR.dom.element(i),o.moveToElementEditStart(i),o.checkStartOfBlock()&&o.checkEndOfBlock()||o.selectNodeContents(i)}else{for(var a=n.getAscendant("table").$,i=n.getParent().$.cells,a=new CKEDITOR.dom.element(a.insertRow(-1),t.document),r=0,s=i.length;r<s;r++)a.append(new CKEDITOR.dom.element(i[r],t.document).clone(!1,!1)).appendBogus();o.moveToElementEditStart(a)}return o.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},o={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(i){for(var a=!1!==i.config.enableTabKeyTools,r=i.config.tabSpaces||0,s="";r--;)s+="";s&&i.on("key",function(e){9==e.data.keyCode&&(i.insertText(s),e.cancel())}),a&&i.on("key",function(e){(9==e.data.keyCode&&i.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&i.execCommand("selectPreviousCell"))&&e.cancel()}),i.addCommand("blur",CKEDITOR.tools.extend(n,t)),i.addCommand("blurBack",CKEDITOR.tools.extend(o,t)),i.addCommand("selectNextCell",e()),i.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n,o,i,a,r,s,l=void 0===t?this.getTabIndex():t;if(0>=l)for(r=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);r;){if(r.isVisible()&&0===r.getTabIndex()){i=r;break}r=r.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(r=this.getDocument().getBody().getFirst();r=r.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!o&&r.equals(this)){if(o=!0,e){if(!(r=r.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else o&&!this.contains(r)&&(n=1);if(r.isVisible()&&!(0>(s=r.getTabIndex()))){if(n&&s==l){i=r;break}s>l&&(!i||!a||s<a)?(i=r,a=s):i||0!==s||(i=r,a=s)}}i&&i.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n,o,i,a,r=void 0===t?this.getTabIndex():t,s=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!o&&l.equals(this)){if(o=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else o&&!this.contains(l)&&(n=1);if(l.isVisible()&&!(0>(a=l.getTabIndex())))if(0>=r){if(n&&0===a){i=l;break}a>s&&(i=l,s=a)}else{if(n&&a==r){i=l;break}a<r&&(!i||a>s)&&(i=l,s=a)}}i&&i.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var n=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(e){if(e.styles){var t;if(e.styles.border)t=CKEDITOR.tools.style.parse.border(e.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var n=e.styles;n["border-left"]&&n["border-left"]===n["border-right"]&&n["border-right"]===n["border-top"]&&n["border-top"]===n["border-bottom"]&&(t=CKEDITOR.tools.style.parse.border(n["border-top"]))}t&&t.style&&"solid"===t.style&&t.width&&0!==parseFloat(t.width)&&(e.attributes.border=1),"collapse"==e.styles["border-collapse"]&&(e.attributes.cellspacing=0)}}}]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var n=t.getParent(),o=e.editable();1!=n.getChildCount()||n.is("td","th")||n.equals(o)||(t=n),e=e.createRange(),e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function e(e,t){function n(e){return!t||t.contains(e)&&e.getAscendant("table",!0).equals(t)}function o(e){0<i.length||e.type!=CKEDITOR.NODE_ELEMENT||!h.test(e.getName())||e.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(a,e,"selected_cell",!0),i.push(e))}var i=[],a={};if(!e)return i;for(var r=e.getRanges(),s=0;s<r.length;s++){var l=r[s];if(l.collapsed)(l=l.getCommonAncestor().getAscendant({td:1,th:1},!0))&&n(l)&&i.push(l);else{var c,l=new CKEDITOR.dom.walker(l);for(l.guard=o;c=l.next();)c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.table)||(c=c.getAscendant({td:1,th:1},!0))&&!c.getCustomData("selected_cell")&&n(c)&&(CKEDITOR.dom.element.setMarker(a,c,"selected_cell",!0),i.push(c))}}return CKEDITOR.dom.element.clearAllMarkers(a),i}function t(t,n){for(var o=m(t)?t:e(t),i=o[0],a=i.getAscendant("table"),i=i.getDocument(),r=o[0].getParent(),s=r.$.rowIndex,o=o[o.length-1],l=o.getParent().$.rowIndex+o.$.rowSpan-1,o=new CKEDITOR.dom.element(a.$.rows[l]),s=n?s:l,r=n?r:o,o=CKEDITOR.tools.buildTableMap(a),a=o[s],s=n?o[s-1]:o[s+1],o=o[0].length,i=i.createElement("tr"),l=0;a[l]&&l<o;l++){var c;1<a[l].rowSpan&&s&&a[l]==s[l]?(c=a[l],c.rowSpan+=1):(c=new CKEDITOR.dom.element(a[l]).clone(),c.removeAttribute("rowSpan"),c.appendBogus(),i.append(c),c=c.$),l+=c.colSpan-1}return n?i.insertBefore(r):i.insertAfter(r),i}function n(t){if(t instanceof CKEDITOR.dom.selection){var o=t.getRanges(),i=e(t),a=i[0].getAscendant("table"),r=CKEDITOR.tools.buildTableMap(a),s=i[0].getParent().$.rowIndex,i=i[i.length-1],l=i.getParent().$.rowIndex+i.$.rowSpan-1,i=[];for(t.reset(),t=s;t<=l;t++){for(var c=r[t],u=new CKEDITOR.dom.element(a.$.rows[t]),d=0;d<c.length;d++){var f=new CKEDITOR.dom.element(c[d]),p=f.getParent().$.rowIndex;1==f.$.rowSpan?f.remove():(--f.$.rowSpan,p==t&&(p=r[t+1],p[d-1]?f.insertAfter(new CKEDITOR.dom.element(p[d-1])):new CKEDITOR.dom.element(a.$.rows[t+1]).append(f,1))),d+=f.$.colSpan-1}i.push(u)}for(r=a.$.rows,o[0].moveToPosition(a,CKEDITOR.POSITION_BEFORE_START),s=new CKEDITOR.dom.element(r[l+1]||(0<s?r[s-1]:null)||a.$.parentNode),t=i.length;0<=t;t--)n(i[t]);return a.$.parentNode?s:(o[0].select(),null)}return t instanceof CKEDITOR.dom.element&&(a=t.getAscendant("table"),1==a.$.rows.length?a.remove():t.remove()),null}function o(e){for(var t=e.getParent().$.cells,n=0,o=0;o<t.length;o++){var i=t[o],n=n+i.colSpan;if(i==e.$)break}return n-1}function i(e,t){for(var n=t?1/0:0,i=0;i<e.length;i++){var a=o(e[i]);(t?a<n:a>n)&&(n=a)}return n}function a(t,n){for(var o=m(t)?t:e(t),a=o[0].getAscendant("table"),r=i(o,1),o=i(o),s=n?r:o,l=CKEDITOR.tools.buildTableMap(a),a=[],r=[],o=[],c=l.length,u=0;u<c;u++)a.push(l[u][s]),r.push(n?l[u][s-1]:l[u][s+1]);for(u=0;u<c;u++)a[u]&&(1<a[u].colSpan&&r[u]==a[u]?(l=a[u],l.colSpan+=1):(s=new CKEDITOR.dom.element(a[u]),l=s.clone(),l.removeAttribute("colSpan"),l.appendBogus(),l[n?"insertBefore":"insertAfter"].call(l,s),o.push(l),l=l.$),u+=l.rowSpan-1);return o}function r(t){CKEDITOR.env.webkit&&!t.isFake&&(t=function(e){var t,n,o;if(t=e.getRanges(),1!==t.length)return e;if(t=t[0],t.collapsed||0!==t.endOffset)return e;if(n=t.endContainer,"td"!==(o=n.getName().toLowerCase())&&"th"!==o)return e;for((o=n.getPrevious())||(o=n.getParent().getPrevious().getLast());o.type!==CKEDITOR.NODE_TEXT&&"br"!==o.getName().toLowerCase();)if(!(o=o.getLast()))return e;return t.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),t.select()}(t));var n,o,i=t.getRanges(),a=e(t),r=a[0],s=a[a.length-1],a=r.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),c=[];t.reset();var u=0;for(t=l.length;u<t;u++)for(var d=0,f=l[u].length;d<f;d++)void 0===n&&l[u][d]==r.$&&(n=d),l[u][d]==s.$&&(o=d);for(u=n;u<=o;u++)for(d=0;d<l.length;d++)s=l[d],r=new CKEDITOR.dom.element(a.$.rows[d]),s=new CKEDITOR.dom.element(s[u]),s.$&&(1==s.$.colSpan?s.remove():--s.$.colSpan,d+=s.$.rowSpan-1,r.$.cells.length||c.push(r));return n=l[0].length-1>o?new CKEDITOR.dom.element(l[0][o+1]):n&&-1!==l[0][n-1].cellIndex?new CKEDITOR.dom.element(l[0][n-1]):new CKEDITOR.dom.element(a.$.parentNode),c.length==t&&(i[0].moveToPosition(a,CKEDITOR.POSITION_AFTER_END),i[0].select(),a.remove()),n}function s(e,t){var n=e.getStartElement().getAscendant({td:1,th:1},!0);if(n){var o=n.clone();o.appendBogus(),t?o.insertBefore(n):o.insertAfter(n)}}function l(t){if(t instanceof CKEDITOR.dom.selection){var n,o=t.getRanges(),i=e(t),a=i[0]&&i[0].getAscendant("table");e:{var r=0;n=i.length-1;for(var s,u,d={};s=i[r++];)CKEDITOR.dom.element.setMarker(d,s,"delete_cell",!0);for(r=0;s=i[r++];)if((u=s.getPrevious())&&!u.getCustomData("delete_cell")||(u=s.getNext())&&!u.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(d),n=u;break e}CKEDITOR.dom.element.clearAllMarkers(d),r=i[0].getParent(),(r=r.getPrevious())?n=r.getLast():(r=i[n].getParent(),n=(r=r.getNext())?r.getChild(0):null)}for(t.reset(),t=i.length-1;0<=t;t--)l(i[t]);n?c(n,!0):a&&(o[0].moveToPosition(a,CKEDITOR.POSITION_BEFORE_START),o[0].select(),a.remove())}else t instanceof CKEDITOR.dom.element&&(o=t.getParent(),1==o.getChildCount()?o.remove():t.remove())}function c(e,t){var n=e.getDocument(),o=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(o.focus(),n.focus()),n=new CKEDITOR.dom.range(n),n["moveToElementEdit"+(t?"End":"Start")](e)||(n.selectNodeContents(e),n.collapse(!t)),n.select(!0)}function u(e,t,n){if(e=e[t],void 0===n)return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])}return n.is?-1:null}function d(t,n,o){var i,a=e(t);if((n?1!=a.length:2>a.length)||(i=t.getCommonAncestor())&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table"))return!1;var r;t=a[0],i=t.getAscendant("table");var s=CKEDITOR.tools.buildTableMap(i),l=s.length,c=s[0].length,d=t.getParent().$.rowIndex,f=u(s,d,t);if(n){var p;try{var h=parseInt(t.getAttribute("rowspan"),10)||1;r=parseInt(t.getAttribute("colspan"),10)||1,p=s["up"==n?d-h:"down"==n?d+h:d]["left"==n?f-r:"right"==n?f+r:f]}catch(e){return!1}if(!p||t.$==p)return!1;a["up"==n||"left"==n?"unshift":"push"](new CKEDITOR.dom.element(p))}n=t.getDocument();var m=d,h=p=0,g=!o&&new CKEDITOR.dom.documentFragment(n),E=0;for(n=0;n<a.length;n++){r=a[n];var T=r.getParent(),v=r.getFirst(),y=r.$.colSpan,C=r.$.rowSpan,T=T.$.rowIndex,b=u(s,T,r),E=E+y*C,h=Math.max(h,b-f+y);p=Math.max(p,T-d+C),o||(y=r,(C=y.getBogus())&&C.remove(),y.trim(),r.getChildren().count()&&(T==m||!v||v.isBlockBoundary&&v.isBlockBoundary({br:1})||!(m=g.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||m.is&&m.is("br")||g.append("br"),r.moveChildren(g)),n?r.remove():r.setHtml("")),m=T}if(o)return p*h==E;for(g.moveChildren(t),t.appendBogus(),h>=c?t.removeAttribute("rowSpan"):t.$.rowSpan=p,p>=l?t.removeAttribute("colSpan"):t.$.colSpan=h,o=new CKEDITOR.dom.nodeList(i.$.rows),a=o.count(),n=a-1;0<=n;n--)i=o.getItem(n),i.$.cells.length||(i.remove(),a++);return t}function f(t,n){var o=e(t);if(1<o.length)return!1;if(n)return!0;var i,o=o[0],a=o.getParent(),r=a.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(r),l=a.$.rowIndex,c=u(s,l,o),d=o.$.rowSpan;if(1<d){i=Math.ceil(d/2);for(var f,d=Math.floor(d/2),a=l+i,r=new CKEDITOR.dom.element(r.$.rows[a]),s=u(s,a),a=o.clone(),l=0;l<s.length;l++){if(f=s[l],f.parentNode==r.$&&l>c){a.insertBefore(new CKEDITOR.dom.element(f));break}f=null}f||r.append(a)}else for(d=i=1,r=a.clone(),r.insertAfter(a),r.append(a=o.clone()),f=u(s,l),c=0;c<f.length;c++)f[c].rowSpan++;return a.appendBogus(),o.$.rowSpan=i,a.$.rowSpan=d,1==i&&o.removeAttribute("rowSpan"),1==d&&a.removeAttribute("rowSpan"),a}function p(t,n){var o=e(t);if(1<o.length)return!1;if(n)return!0;var o=o[0],i=o.getParent(),a=i.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),r=u(a,i.$.rowIndex,o),s=o.$.colSpan;if(1<s)i=Math.ceil(s/2),s=Math.floor(s/2);else{for(var s=i=1,l=[],c=0;c<a.length;c++){var d=a[c];l.push(d[r]),1<d[r].rowSpan&&(c+=d[r].rowSpan-1)}for(a=0;a<l.length;a++)l[a].colSpan++}return a=o.clone(),a.insertAfter(o),a.appendBogus(),o.$.colSpan=i,a.$.colSpan=s,1==i&&o.removeAttribute("colSpan"),1==s&&a.removeAttribute("colSpan"),a}var h=/^(?:td|th)$/,m=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(o){function i(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function u(e,t){var n=o.addCommand(e,t);o.addFeature(n)}var h=o.lang.table,m=CKEDITOR.tools.style.parse,g="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");u("cellProperties",new CKEDITOR.dialogCommand("cellProperties",i({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:g,contentTransformations:[[{element:"td",left:function(e){return e.styles.background&&m.background(e.styles.background).color},right:function(e){e.styles["background-color"]=m.background(e.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(e){return e.attributes&&e.attributes.valign},right:function(e){e.styles["vertical-align"]=e.attributes.valign,delete e.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(e){return e.styles&&e.styles.height},right:function(e){CKEDITOR.tools.array.forEach(e.children,function(t){t.name in{td:1,th:1}&&(t.attributes["cke-row-height"]=e.styles.height)}),delete e.styles.height}}],[{element:"td",check:"td{height}",left:function(e){return(e=e.attributes)&&e["cke-row-height"]},right:function(e){e.styles.height=e.attributes["cke-row-height"],delete e.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),u("rowDelete",i({requiredContent:"table",exec:function(e){e=e.getSelection(),(e=n(e))&&c(e)}})),u("rowInsertBefore",i({requiredContent:"table",exec:function(n){n=n.getSelection(),n=e(n),t(n,!0)}})),u("rowInsertAfter",i({requiredContent:"table",exec:function(n){n=n.getSelection(),n=e(n),t(n)}})),u("columnDelete",i({requiredContent:"table",exec:function(e){e=e.getSelection(),(e=r(e))&&c(e,!0)}})),u("columnInsertBefore",i({requiredContent:"table",exec:function(t){t=t.getSelection(),t=e(t),a(t,!0)}})),u("columnInsertAfter",i({requiredContent:"table",exec:function(t){t=t.getSelection(),t=e(t),a(t)}})),u("cellDelete",i({requiredContent:"table",exec:function(e){e=e.getSelection(),l(e)}})),u("cellMerge",i({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e,t){t.cell=d(e.getSelection()),c(t.cell,!0)}})),u("cellMergeRight",i({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e,t){t.cell=d(e.getSelection(),"right"),c(t.cell,!0)}})),u("cellMergeDown",i({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e,t){t.cell=d(e.getSelection(),"down"),c(t.cell,!0)}})),u("cellVerticalSplit",i({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){c(p(e.getSelection()))}})),u("cellHorizontalSplit",i({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){c(f(e.getSelection()))}})),u("cellInsertBefore",i({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e,!0)}})),u("cellInsertAfter",i({requiredContent:"table",exec:function(e){e=e.getSelection(),s(e)}})),o.addMenuItems&&o.addMenuItems({tablecell:{label:h.cell.menu,group:"tablecell",order:1,getItems:function(){var t=o.getSelection(),n=e(t),t={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:d(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:d(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:d(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:p(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:f(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return o.filter.check(g)&&(t.tablecell_properties=0<n.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t}},tablecell_insertBefore:{label:h.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:h.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:h.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:h.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:h.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:h.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:h.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:h.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:h.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:h.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:h.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:h.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:h.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:h.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:h.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:h.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:h.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),o.contextMenu&&o.contextMenu.addListener(function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:o,insertRow:t,insertColumn:a,getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e,t,n,o,i){e=e.$.rows,n=n||0,o="number"==typeof o?o:e.length-1,i="number"==typeof i?i:-1;var a=-1,r=[];for(t=t||0;t<=o;t++){a++,!r[a]&&(r[a]=[]);for(var s=-1,l=n;l<=(-1===i?e[t].cells.length-1:i);l++){var c=e[t].cells[l];if(!c)break;for(s++;r[a][s];)s++;for(var u=isNaN(c.colSpan)?1:c.colSpan,c=isNaN(c.rowSpan)?1:c.rowSpan,d=0;d<c&&!(t+d>o);d++){r[a+d]||(r[a+d]=[]);for(var f=0;f<u;f++)r[a+d][s+f]=e[t].cells[l]}if(s+=u-1,-1!==i&&s>=i)break}}return r},function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(e,t){var n,o,i=e.getAscendant("table"),a=t.getAscendant("table"),r=CKEDITOR.tools.buildTableMap(i),s=c(e),l=c(t),u=[],d={};for(i.contains(a)&&(t=t.getAscendant({td:1,th:1}),l=c(t)),s>l&&(i=s,s=l,l=i,i=e,e=t,t=i),i=0;i<r[s].length;i++)if(e.$===r[s][i]){n=i;break}for(i=0;i<r[l].length;i++)if(t.$===r[l][i]){o=i;break}for(n>o&&(i=n,n=o,o=i),i=s;i<=l;i++)for(s=n;s<=o;s++)a=new CKEDITOR.dom.element(r[i][s]),a.$&&!a.getCustomData("selected_cell")&&(u.push(a),CKEDITOR.dom.element.setMarker(d,a,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(d),u}function n(e){if(e)return e=e.clone(),e.enlarge(CKEDITOR.ENLARGE_ELEMENT),(e=e.getEnclosedNode())&&e.is&&e.is(CKEDITOR.dtd.$tableContent)}function o(e){return(e=e.editable().findOne(".cke_table-faked-selection"))&&e.getAscendant("table")}function i(e,t){var n,o=e.editable().find(".cke_table-faked-selection");for(e.fire("lockSnapshot"),e.editable().removeClass("cke_table-faked-selection-editor"),n=0;n<o.count();n++)o.getItem(n).removeClass("cke_table-faked-selection");0<o.count()&&o.getItem(0).getAscendant("table").data("cke-table-faked-selection-table",!1),e.fire("unlockSnapshot"),t&&(C={active:!1},e.getSelection().isInTable()&&e.getSelection().reset())}function a(e,t){var n,o,i=[];for(o=0;o<t.length;o++)n=e.createRange(),n.setStartBefore(t[o]),n.setEndAfter(t[o]),i.push(n);e.getSelection().selectRanges(i)}function r(e){var n=e.editable().find(".cke_table-faked-selection");1>n.count()||(n=t(n.getItem(0),n.getItem(n.count()-1)),a(e,n))}function s(n,o,r){var s=E(n.getSelection(!0));o=o.is("table")?null:o;var l;if((l=C.active&&!C.first)&&!(l=o)&&(l=n.getSelection().getRanges(),l=!!(1<s.length||l[0]&&!l[0].collapsed)),l)C.first=o||s[0],C.dirty=!o&&1!==s.length;else if(C.active&&o&&C.first.getAscendant("table").equals(o.getAscendant("table"))){if(s=t(C.first,o),!C.dirty&&1===s.length&&!e(r.data.getTarget()))return i(n,"mouseup"===r.name);C.dirty=!0,C.last=o,a(n,s)}}function l(e){var t,n=(e=e.editor||e.sender.editor)&&e.getSelection(),o=n&&n.getRanges()||[];if(n&&(i(e),n.isInTable()&&n.isFake)){for(1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table")&&(t=o[0]._getTableElement()),t=E(n,t),e.fire("lockSnapshot"),n=0;n<t.length;n++)t[n].addClass("cke_table-faked-selection");0<t.length&&(e.editable().addClass("cke_table-faked-selection-editor"),t[0].getAscendant("table").data("cke-table-faked-selection-table","")),e.fire("unlockSnapshot")}}function c(e){return e.getAscendant("tr",!0).$.rowIndex}function u(t){function n(e){return!e.getAscendant("table",!0)&&e.getDocument().equals(a.document)}if(t.data.getTarget().getName&&("mouseup"===t.name||!e(t.data.getTarget()))){var a=t.editor||t.listenerData.editor,l=a.getSelection(1),c=o(a),d=t.data.getTarget(),f=d&&d.getAscendant({td:1,th:1},!0),d=d&&d.getAscendant("table",!0),p={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};(function(e,t,o,i){return!("mousedown"!==e.name||CKEDITOR.tools.getMouseButton(e)!==CKEDITOR.MOUSE_BUTTON_LEFT&&i)||((t=e.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!n(e.data.getTarget()))&&(e=e.data.getTarget().getAscendant({td:1,th:1},!0),t=!(e&&e.hasClass("cke_table-faked-selection"))),t)})(t,l,c,d)&&i(a,!0),!C.active&&"mousedown"===t.name&&CKEDITOR.tools.getMouseButton(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&d&&(C={active:!0},CKEDITOR.document.on("mouseup",u,null,{editor:a})),(f||d)&&s(a,f||d,t),"mouseup"===t.name&&(CKEDITOR.tools.getMouseButton(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&(n(t.data.getTarget())||function(e,t){return!(!e||!t)&&(e.equals(t)||e.contains(t)||t.contains(e)||e.getCommonAncestor(t).is(p))}(c,d))&&r(a),C={active:!1},CKEDITOR.document.removeListener("mouseup",u))}}function d(e){var t=e.data.getTarget().getAscendant({td:1,th:1},!0);t&&!t.hasClass("cke_table-faked-selection")&&(e.cancel(),e.data.preventDefault())}function f(e,t){function n(e){e.cancel()}var o,i,a,r,s=e.getSelection(),l=s.createBookmarks(),c=e.document,u=e.createRange(),d=c.getDocumentElement().$,f=CKEDITOR.env.ie&&9>CKEDITOR.env.version,p=e.blockless||CKEDITOR.env.ie?"span":"div";c.getById("cke_table_copybin")||(o=c.createElement(p),i=c.createElement(p),i.setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),o.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),o.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px"),o.setHtml(e.getSelectedHtml(!0)),e.fire("lockSnapshot"),i.append(o),e.editable().append(i),r=e.on("selectionChange",n,null,null,0),f&&(a=d.scrollTop),u.selectNodeContents(o),u.select(),f&&(d.scrollTop=a),setTimeout(function(){i.remove(),s.selectBookmarks(l),r.removeListener(),e.fire("unlockSnapshot"),t&&(e.extractSelectedHtml(),e.fire("saveSnapshot"))},100))}function p(e){var t=e.editor||e.sender.editor;t.getSelection().isInTable()&&f(t,"cut"===e.name)}function h(e){this._reset(),e&&this.setSelectedCells(e)}function m(e,t,n){e.on("beforeCommandExec",function(n){-1!==CKEDITOR.tools.array.indexOf(t,n.data.name)&&(n.data.selectedCells=E(e.getSelection()))}),e.on("afterCommandExec",function(o){-1!==CKEDITOR.tools.array.indexOf(t,o.data.name)&&n(e,o.data)})}var g,E,T,v,y,C={active:!1};h.prototype={},h.prototype._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},h.prototype.setSelectedCells=function(e){this._reset(),e=e.slice(0),this._arraySortByDOMOrder(e),this.cells.all=e,this.cells.first=e[0],this.cells.last=e[e.length-1],this.rows.first=e[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},h.prototype.getTableMap=function(){var e,t=T(this.cells.first);e:{e=this.cells.last;var n,o=e.getAscendant("table"),i=c(e),o=CKEDITOR.tools.buildTableMap(o);for(n=0;n<o[i].length;n++)if(new CKEDITOR.dom.element(o[i][n]).equals(e)){e=n;break e}e=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),c(this.rows.first),t,c(this.rows.last),e)},h.prototype._getTable=function(){return this.rows.first.getAscendant("table")},h.prototype.insertRow=function(e,t,n){if(void 0===e)e=1;else if(0>=e)return;for(var o,i=this.cells.first.$.cellIndex,a=this.cells.last.$.cellIndex,r=n?[]:this.cells.all,s=0;s<e;s++)o=v(n?this.cells.all:r,t),o=CKEDITOR.tools.array.filter(o.find("td, th").toArray(),function(e){return!!n||e.$.cellIndex>=i&&e.$.cellIndex<=a}),r=t?o.concat(r):r.concat(o);this.setSelectedCells(r)},h.prototype.insertColumn=function(e){function t(e){return(e=c(e))>=i&&e<=a}if(void 0===e)e=1;else if(0>=e)return;for(var n=this.cells,o=n.all,i=c(n.first),a=c(n.last),n=0;n<e;n++)o=o.concat(CKEDITOR.tools.array.filter(y(o),t));this.setSelectedCells(o)},h.prototype.emptyCells=function(e){e=e||this.cells.all;for(var t=0;t<e.length;t++)e[t].setHtml("")},h.prototype._arraySortByDOMOrder=function(e){e.sort(function(e,t){return e.getPosition(t)&CKEDITOR.POSITION_PRECEDING?-1:1})};var b={onPaste:function(e){function o(e){return Math.max.apply(null,CKEDITOR.tools.array.map(e,function(e){return e.length},0))}var i,r,s=e.editor,l=s.getSelection(),c=E(l),u=this.findTableInPastedContent(s,e.data.dataValue),d=l.isInTable(!0)&&this.isBoundarySelection(l);!c.length||1===c.length&&!n(l.getRanges()[0])&&!d||d&&!u||(c=c[0].getAscendant("table"),i=new h(E(l,c)),s.once("afterPaste",function(){var e;if(r){e=new CKEDITOR.dom.element(r[0][0]);var n=r[r.length-1];e=t(e,new CKEDITOR.dom.element(n[n.length-1]))}else e=i.cells.all;a(s,e)}),u?(e.stop(),d?(i.insertRow(1,1===d,!0),l.selectElement(i.rows.first)):(i.emptyCells(),a(s,i.cells.all)),e=i.getTableMap(),r=CKEDITOR.tools.buildTableMap(u),i.insertRow(r.length-e.length),i.insertColumn(o(r)-o(e)),e=i.getTableMap(),this.pasteTable(i,e,r),s.fire("saveSnapshot"),setTimeout(function(){s.fire("afterPaste")},0)):(function(e){var t=s.createRange();t.selectNodeContents(e),t.select()}(i.cells.first),s.once("afterPaste",function(){s.fire("lockSnapshot"),i.emptyCells(i.cells.all.slice(1)),a(s,i.cells.all),s.fire("unlockSnapshot")})))},isBoundarySelection:function(e){e=e.getRanges()[0];var t=e.endContainer.getAscendant("tr",!0);if(t&&e.collapsed){if(e.checkBoundaryOfElement(t,CKEDITOR.START))return 1;if(e.checkBoundaryOfElement(t,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(e,t){var n=e.dataProcessor,o=new CKEDITOR.dom.element("body");return n||(n=new CKEDITOR.htmlDataProcessor(e)),o.setHtml(n.toHtml(t),{fixForBody:!1}),1<o.getChildCount()?null:o.findOne("table")},pasteTable:function(e,t,n){var o,i,a,r,s,l=T(e.cells.first),c=e._getTable(),u={};for(r=0;r<n.length;r++)for(i=new CKEDITOR.dom.element(c.$.rows[e.rows.first.$.rowIndex+r]),s=0;s<n[r].length;s++)a=new CKEDITOR.dom.element(n[r][s]),o=t[r]&&t[r][s]?new CKEDITOR.dom.element(t[r][s]):null,a&&!a.getCustomData("processed")?(o&&o.getParent()?a.replace(o):(0===s||n[r][s-1])&&((o=0!==s?new CKEDITOR.dom.element(n[r][s-1]):null)&&i.equals(o.getParent())?a.insertAfter(o):0<l?i.$.cells[l]?a.insertAfter(new CKEDITOR.dom.element(i.$.cells[l])):i.append(a):i.append(a,!0)),CKEDITOR.dom.element.setMarker(u,a,"processed",!0)):a.getCustomData("processed")&&o&&o.remove();CKEDITOR.dom.element.clearAllMarkers(u)}};CKEDITOR.plugins.tableselection={getCellsBetween:t,keyboardIntegration:function(e){function t(e){var t=e.getEnclosedNode();t&&"function"==typeof t.is&&t.is({td:1,th:1})?t.setText(""):e.deleteContents(),CKEDITOR.tools.array.forEach(e._find("td"),function(e){e.appendBogus()})}var n=e.editable();n.attachListener(n,"keydown",function(e){function n(t,n){if(!n.length)return null;var o=e.createRange(),a=CKEDITOR.dom.range.mergeRanges(n);CKEDITOR.tools.array.forEach(a,function(e){e.enlarge(CKEDITOR.ENLARGE_ELEMENT)});var r=a[0].getBoundaryNodes(),s=r.startNode,r=r.endNode;if(s&&s.is&&s.is(i)){for(var l=s.getAscendant("table",!0),c=s.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l),u=!1;c&&!function(e){return!s.contains(e)&&e.is&&e.is("td","th")}(c);)c=c.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l);return!c&&r&&r.is&&!r.is("table")&&r.getNext()&&(c=r.getNext().findOne("td, th"),u=!0),c?o["moveToElementEdit"+(u?"Start":"End")](c):(o.setStartBefore(s.getAscendant("table",!0)),o.collapse(!0)),a[0].deleteContents(),[o]}return s?(o.moveToElementEditablePosition(s),[o]):void 0}var o={37:1,38:1,39:1,40:1,8:1,46:1,13:1},i=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete i.td,delete i.th,function(i){var a,r,s,l,c=i.data.getKey(),u=i.data.getKeystroke(),d=37===c||38==c;if(o[c]&&!e.readOnly&&(a=e.getSelection())&&a.isInTable()&&a.isFake)if(r=a.getRanges(),s=r[0]._getTableElement(),l=r[r.length-1]._getTableElement(),(13!==c||e.plugins.enterkey)&&(i.data.preventDefault(),i.cancel()),36<c&&41>c)r[0].moveToElementEditablePosition(d?s:l,!d),a.selectRanges([r[0]]);else if(13!==c||13===u||u===CKEDITOR.SHIFT+13){for(i=0;i<r.length;i++)t(r[i]);(i=n(s,r))?r=i:r[0].moveToElementEditablePosition(s),a.selectRanges(r),13===c&&e.plugins.enterkey?(e.fire("lockSnapshot"),13===u?e.execCommand("enter"):e.execCommand("shiftEnter"),e.fire("unlockSnapshot"),e.fire("saveSnapshot")):13!==c&&e.fire("saveSnapshot")}}}(e),null,null,-1),n.attachListener(n,"keypress",function(n){var o,i=e.getSelection(),a=n.data.$.charCode||13===n.data.getKey();if(!e.readOnly&&i&&i.isInTable()&&i.isFake&&a&&!(n.data.getKeystroke()&CKEDITOR.CTRL)){for(n=i.getRanges(),a=n[0].getEnclosedNode().getAscendant({td:1,th:1},!0),o=0;o<n.length;o++)t(n[o]);a&&(n[0].moveToElementEditablePosition(a),i.selectRanges([n[0]]))}},null,null,-1)},isSupportedEnvironment:!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",onLoad:function(){g=CKEDITOR.plugins.tabletools,E=g.getSelectedCells,T=g.getCellColIndex,v=g.insertRow,y=g.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(e){CKEDITOR.plugins.tableselection.isSupportedEnvironment&&(e.addContentsCss&&e.addContentsCss(this.path+"styles/tableselection.css"),e.on("contentDom",function(){var t=e.editable(),n=t.isInline()?t:e.document,o={editor:e};t.attachListener(n,"mousedown",u,null,o),t.attachListener(n,"mousemove",u,null,o),t.attachListener(n,"mouseup",u,null,o),t.attachListener(t,"dragstart",d),t.attachListener(e,"selectionCheck",l),CKEDITOR.plugins.tableselection.keyboardIntegration(e),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(t.attachListener(t,"cut",p),t.attachListener(t,"copy",p))}),e.on("paste",b.onPaste,b),m(e,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),function(e,t){a(e,t.selectedCells)}),m(e,["cellMerge","cellMergeRight","cellMergeDown"],function(e,t){a(e,[t.commandData.cell])}),m(e,["cellDelete"],function(e){i(e,!0)}))}})}(),function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function o(e){r.enabled&&!1!==e.data.command.canUndo&&r.save()}function i(){r.enabled=!t.readOnly&&"wysiwyg"==t.mode,r.onChange()}var r=t.undoManager=new n(t),s=r.editingHandler=new a(r),l=t.addCommand("undo",{exec:function(){r.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),c=t.addCommand("redo",{exec:function(){r.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),r.onChange=function(){l.setState(r.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.setState(r.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",o),t.on("afterCommandExec",o),t.on("saveSnapshot",function(e){r.save(e.data&&e.data.contentOnly)}),t.on("contentDom",s.attachListeners,s),t.on("instanceReady",function(){t.fire("saveSnapshot")}),t.on("beforeModeUnload",function(){"wysiwyg"==t.mode&&r.save(!0)}),t.on("mode",i),t.on("readOnly",i),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){r.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",function(){r.currentImage&&r.update()}),t.on("lockSnapshot",function(e){e=e.data,r.lock(e&&e.dontUpdate,e&&e.forceUpdate)}),t.on("unlockSnapshot",r.unlock,r)}}),CKEDITOR.plugins.undo={};var n=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this.editor=e,this.reset()};n.prototype={type:function(e,t){var o=n.getKeyGroup(e),i=this.strokesRecorded[o]+1;t=t||i>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(i=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[o]=i,this.previousKeyGroup=o},keyGroupChanged:function(e){return n.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,n){var i=this.editor;if(this.locked||"ready"!=i.status||"wysiwyg"!=i.mode)return!1;var a=i.editable();if(!a||"ready"!=a.status)return!1;if(a=this.snapshots,t||(t=new o(i)),!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else!1!==n&&i.fire("change");return a.splice(this.index+1,a.length-this.index-1),a.length==this.limit&&a.shift(),this.index=a.push(t)-1,this.currentImage=t,!1!==n&&this.refreshState(),!0},restoreImage:function(e){var t,n=this.editor;e.bookmarks&&(n.focus(),t=n.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(t=this.editor.document.getBody().$.createTextRange(),t.collapse(!0),t.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),n.fire("change")},getNextImage:function(e){var t,n=this.snapshots,o=this.currentImage;if(o)if(e){for(t=this.index-1;0<=t;t--)if(e=n[t],!o.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<n.length;t++)if(e=n[t],!o.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new o(this.editor));for(var t=this.index,n=this.snapshots;0<t&&this.currentImage.equalsContent(n[t-1]);)--t;n.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,n=t[t.length-1];return!(!n.equalsContent(e)||n.equalsSelection(e))&&(this.currentImage=t[t.length-1]=e,!0)},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var n=null;if(t)n=!0;else{var i=new o(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(i)&&(n=i)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;if(this.locked=null,!0===e)this.update();else if(e){var t=new o(this.editor,!0);e.equalsContent(t)||this.update()}}}},n.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},n.keyGroups={PRINTABLE:0,FUNCTIONAL:1},n.isNavigationKey=function(e){return!!n.navigationKeyCodes[e]},n.getKeyGroup=function(e){var o=n.keyGroups;return t[e]?o.FUNCTIONAL:o.PRINTABLE},n.getOppositeKeyGroup=function(e){var t=n.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},n.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&n.getKeyGroup(e)==n.keyGroups.FUNCTIONAL};var o=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var n=e.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},i=/\b(?:href|src|name)="[^"]*?"/gi;o.prototype={equalsContent:function(e){var t=this.contents;return e=e.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(i,""),e=e.replace(i,"")),t==e},equalsSelection:function(e){var t=this.bookmarks;if(e=e.bookmarks,t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var o=t[n],i=e[n];if(o.startOffset!=i.startOffset||o.endOffset!=i.endOffset||!CKEDITOR.tools.arrayCompare(o.start,i.start)||!CKEDITOR.tools.arrayCompare(o.end,i.end))return!1}}return!0}};var a=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new r,this.lastKeydownImage=null};a.prototype={onKeydown:function(t){var i=t.data.getKey();229!==i&&(-1<CKEDITOR.tools.indexOf(e,t.data.getKeystroke())?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(i)||this.keyEventsStack.push(i),this.lastKeydownImage=new o(t.editor),(n.isNavigationKey(i)||this.undoManager.keyGroupChanged(i))&&(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager;e=e.data.getKey();var i=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e),n.ieFunctionalKeysBug(e)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new o(t.editor,!0))||(0<i?t.type(e):n.isNavigationKey(e)&&this.onNavigationKey(!0))},onNavigationKey:function(e){var t=this.undoManager;!e&&t.save(!0,null,!1)||t.updateSelection(new o(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),o=this;t.attachListener(t,"keydown",function(e){o.onKeydown(e),n.ieFunctionalKeysBug(e.data.getKey())&&o.onInput()},null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",o.onInput,o,null,999),t.attachListener(t,"keyup",o.onKeyup,o,null,999),t.attachListener(t,"paste",o.ignoreInputEventListener,o,null,999),t.attachListener(t,"drop",o.ignoreInputEventListener,o,null,999),e.on("afterPaste",o.activateInputEventListener,o,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",function(){o.onNavigationKey()},null,null,999),t.attachListener(this.undoManager.editor,"blur",function(){o.keyEventsStack.remove(9)},null,null,999)}};var r=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};r.prototype={push:function(e){return e=this.stack.push({keyCode:e,inputs:0}),this.stack[e-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return e=this.getLastIndex(e),-1!=e?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){-1!=(e=this.getLastIndex(e))&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){e=e.data.$,e.ctrlKey||e.metaKey||this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function n(e,t){var n=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:n,inline:n.isInline(),doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var o=CKEDITOR.tools.bind(this.queryViewport,this),r=CKEDITOR.tools.bind(this.hideVisible,this),s=CKEDITOR.tools.bind(this.removeAll,this);n.attachListener(this.winTop,"resize",o),n.attachListener(this.winTop,"scroll",o),n.attachListener(this.winTop,"resize",r),n.attachListener(this.win,"scroll",r),n.attachListener(this.inline?n:this.frame,"mouseout",function(e){var t=e.data.$.clientX;e=e.data.$.clientY,this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||e<=this.rect.top||e>=this.rect.bottom)&&this.hideVisible(),(0>=t||t>=this.winTopPane.width||0>=e||e>=this.winTopPane.height)&&this.hideVisible()},this),n.attachListener(e,"resize",o),n.attachListener(e,"mode",s),e.on("destroy",s),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},a,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},i,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},i,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function o(e){var t;return(t=e&&e.type==CKEDITOR.NODE_ELEMENT)&&(t=!(r[e.getComputedStyle("float")]||r[e.getAttribute("align")])),t&&!s[e.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t,n,o,i,a=this,r=this.editor,s=this.doc,l=CKEDITOR.tools.eventsBuffer(50,function(){r.readOnly||"wysiwyg"!=r.mode||(a.relations={},(n=s.$.elementFromPoint(o,i))&&n.nodeType&&(t=new CKEDITOR.dom.element(n),a.traverseSearch(t),isNaN(o+i)||a.pixelSearch(t,o,i),e&&e(a.relations,o,i)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(e){o=e.data.$.clientX,i=e.data.$.clientY,l.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){l.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var n=this.editor.createRange();return n.moveToPosition(this.relations[t.uid].element,e[t.type]),n}}(),store:function(){function e(e,t,n){var o=e.getUniqueId();o in n?n[o].type|=t:n[o]={element:e,type:t}}return function(t,n){var i;n&CKEDITOR.LINEUTILS_AFTER&&o(i=t.getNext())&&i.isVisible()&&(e(i,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_AFTER),n&CKEDITOR.LINEUTILS_INSIDE&&o(i=t.getFirst())&&i.isVisible()&&(e(i,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_INSIDE),e(t,n,this.relations)}}(),traverseSearch:function(e){var t,n,i;do{if(!((i=e.$["data-cke-expando"])&&i in this.relations)){if(e.equals(this.editable))break;if(o(e))for(t in this.lookups)(n=this.lookups[t](e))&&this.store(e,n)}}while((!e||e.type!=CKEDITOR.NODE_ELEMENT||"true"!=e.getAttribute("contenteditable"))&&(e=e.getParent()))},pixelSearch:function(){function e(e,n,i,a,r){for(var s,l=0;r(i)&&(i+=a,25!=++l);)if(s=this.doc.$.elementFromPoint(n,i))if(s==e)l=0;else if(t(e,s)&&(l=0,o(s=new CKEDITOR.dom.element(s))))return s}var t=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(t,n,i){var a=this.win.getViewPaneSize().height,r=e.call(this,t.$,n,i,-1,function(e){return 0<e});if(n=e.call(this,t.$,n,i,1,function(e){return e<a}),r)for(this.traverseSearch(r);!r.getParent().equals(t);)r=r.getParent();if(n)for(this.traverseSearch(n);!n.getParent().equals(t);)n=n.getParent();for(;(r||n)&&(r&&(r=r.getNext(o)),r&&!r.equals(n))&&(this.traverseSearch(r),n&&(n=n.getPrevious(o)),n&&!n.equals(r));)this.traverseSearch(n)}}(),greedySearch:function(){this.relations={};for(var e,t,n,i=this.editable.getElementsByTag("*"),a=0;e=i.getItem(a++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&o(e)&&e.isVisible())for(n in this.lookups)(t=this.lookups[n](e))&&this.store(e,t);return this.relations}},t.prototype={locate:function(){function e(e,t){var n=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return n&&o(n)?(e.siblingRect=n.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}return function(t){var n;this.locations={};for(var o in t)n=t[o],n.elementRect=n.element.getClientRect(),n.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(o,CKEDITOR.LINEUTILS_BEFORE,e(n,CKEDITOR.LINEUTILS_BEFORE)),n.type&CKEDITOR.LINEUTILS_AFTER&&this.store(o,CKEDITOR.LINEUTILS_AFTER,e(n,CKEDITOR.LINEUTILS_AFTER)),n.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(o,CKEDITOR.LINEUTILS_INSIDE,(n.elementRect.top+n.elementRect.bottom)/2);return this.locations}}(),sort:function(){var e,t,n,o;return function(i,a){e=this.locations,t=[];for(var r in e)for(var s in e[r])if(n=Math.abs(i-e[r][s]),t.length){for(o=0;o<t.length;o++)if(n<t[o].dist){t.splice(o,0,{uid:+r,type:s,dist:n});break}o==t.length&&t.push({uid:+r,type:s,dist:n})}else t.push({uid:+r,type:s,dist:n});return void 0!==a?t.slice(0,a):t}}(),store:function(e,t,n){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=n}};var i={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},a={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};n.prototype={removeAll:function(){for(var e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var n,o,i;if(n=this.getStyle(e.uid,e.type)){for(i in this.visible)if(this.visible[i].getCustomData("hash")!==this.hash){o=this.visible[i];break}if(!o)for(i in this.hidden)if(this.hidden[i].getCustomData("hash")!==this.hash){this.showLine(o=this.hidden[i]);break}o||this.showLine(o=this.addLine()),o.setCustomData("hash",this.hash),this.visible[o.getUniqueId()]=o,o.setStyles(n),t&&t(o)}},getStyle:function(e,t){var n=this.relations[e],o=this.locations[e][t],i={};if(i.width=n.siblingRect?Math.max(n.siblingRect.width,n.elementRect.width):n.elementRect.width,i.top=this.inline?o+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+o,i.top-this.winTopScroll.y<this.rect.top||i.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?i.left=n.elementRect.left-this.rect.relativeX:(0<n.elementRect.left?i.left=this.rect.left+n.elementRect.left:(i.width+=n.elementRect.left,i.left=this.rect.left),0<(n=i.left+i.width-(this.rect.left+this.winPane.width))&&(i.width-=n)),i.left+=this.winTopScroll.x;for(var a in i)i[a]=CKEDITOR.tools.cssLength(i[a]);return i},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e,t;for(t in this.visible)e=this.visible[t],e.getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(e){e=e.getClientRect();var t=this.container.getDocumentPosition(),n=this.container.getComputedStyle("position");return e.relativeX=e.relativeY=0,"static"!=n&&(e.relativeY=t.y,e.relativeX=t.x,e.top-=e.relativeY,e.bottom-=e.relativeY,e.left-=e.relativeX,e.right-=e.relativeX),e}};var r={left:1,right:1,center:1},s={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:n}}(),function(){function e(e){return e.getName&&!e.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(e){if(CKEDITOR.env.webkit){var t=CKEDITOR.plugins.widgetselection;e.on("contentDom",function(e){e=e.editor;var n=e.editable();n.attachListener(n,"keydown",function(e){e.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout(function(){t.addFillers(n)||t.removeFillers(n)},0)},null,null,-1),e.on("selectionCheck",function(e){t.removeFillers(e.editor.editable())}),e.on("paste",function(e){e.data.dataValue=t.cleanPasteData(e.data.dataValue)}),"selectall"in e.plugins&&t.addSelectAllIntegration(e)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(t){var n=t.editor;if(!this.isWholeContentSelected(t)&&0<t.getChildCount()){var o=t.getFirst(e),i=t.getLast(e);if(o&&o.type==CKEDITOR.NODE_ELEMENT&&!o.isEditable()&&(this.startFiller=this.createFiller(),t.append(this.startFiller,1)),i&&i.type==CKEDITOR.NODE_ELEMENT&&!i.isEditable()&&(this.endFiller=this.createFiller(!0),t.append(this.endFiller,0)),this.hasFiller(t))return n=n.createRange(),n.selectNodeContents(t),n.select(),!0}return!1},removeFillers:function(e){if(this.hasFiller(e)&&!this.isWholeContentSelected(e)){var t=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),n=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&t&&this.startFiller.equals(t)?this.removeFiller(this.startFiller,e):this.startFiller=t,this.endFiller&&n&&this.endFiller.equals(n)?this.removeFiller(this.endFiller,e):this.endFiller=n}},cleanPasteData:function(e){return e&&e.length&&(e=e.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),e},isWholeContentSelected:function(e){var t=e.editor.getSelection().getRanges()[0];return!(!t||t&&t.collapsed)&&(t=t.clone(),t.enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(t&&e&&t.startContainer&&t.endContainer&&0===t.startOffset&&t.endOffset===e.getChildCount()&&t.startContainer.equals(e)&&t.endContainer.equals(e)))},hasFiller:function(e){return 0<e.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(e){var t=new CKEDITOR.dom.element(this.fillerTagName);return t.setHtml(this.fillerContent),t.setAttribute(this.fillerAttribute,e?"end":"start"),t.setAttribute("data-cke-temp",1),t.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),t},removeFiller:function(e,t){if(e){var n,o,i=t.editor,a=t.editor.getSelection().getRanges()[0].startPath(),r=i.createRange();a.contains(e)&&(n=e.getHtml(),o=!0),a="start"==e.getAttribute(this.fillerAttribute),e.remove(),n&&0<n.length&&n!=this.fillerContent?(t.insertHtmlIntoRange(n,i.getSelection().getRanges()[0]),r.setStartAt(t.getChild(t.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),i.getSelection().selectRanges([r])):o&&(a?r.setStartAt(t.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):r.setEndAt(t.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),t.editor.getSelection().selectRanges([r]))}},createFillerRegex:function(e){var t=this.createFiller(e).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((e?"":"^")+t+(e?"$":""))},addSelectAllIntegration:function(e){var t=this;e.editable().attachListener(e,"beforeCommandExec",function(n){var o=e.editable();"selectAll"==n.data.name&&o&&t.addFillers(o)},null,null,9999)}}}(),function(){function e(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},D(this),I(this),this.on("checkWidgets",r),this.editor.on("contentDomInvalidated",this.checkWidgets,this),O(this),y(this),C(this),v(this),b(this)}function t(e,n,o,i,a){var r=e.editor;CKEDITOR.tools.extend(this,i,{editor:r,id:n,inline:"span"==o.getParent().getName(),element:o,data:CKEDITOR.tools.extend({},"function"==typeof i.defaults?i.defaults():i.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,definition:i,repository:e,draggable:!1!==i.draggable,_:{downcastFn:i.downcast&&"string"==typeof i.downcast?i.downcasts[i.downcast]:i.downcast}},!0),e.fire("instanceCreated",this),$(this,i),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(e))),a&&this.setData(a),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,H(this),this.fire("data",this.data),this.isInited()&&r.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function n(e,t,n){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this._={},t=this.filter=n.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=t?t.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=t?t.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function o(e,t){e.addCommand(t.name,{exec:function(e,n){function o(){e.widgets.finalizeCreation(s)}var i=e.widgets.focused;if(i&&i.name==t.name)i.edit();else if(t.insert)t.insert({editor:e,commandData:n});else if(t.template){var a,i="function"==typeof t.defaults?t.defaults():t.defaults,i=CKEDITOR.dom.element.createFromHtml(t.template.output(i)),r=e.widgets.wrapElement(i,t.name),s=new CKEDITOR.dom.documentFragment(r.getDocument());s.append(r),(a=e.widgets.initOn(i,t,n&&n.startupData))?(i=a.once("edit",function(t){t.data.dialog?a.once("dialog",function(t){t=t.data;var n,i;n=t.once("ok",o,null,null,20),i=t.once("cancel",function(t){t.data&&!1===t.data.hide||e.widgets.destroy(a,!0)}),t.once("hide",function(){n.removeListener(),i.removeListener()})}):o()},null,null,999),a.edit(),i.removeListener()):o()}},allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}function i(e,t){function n(e,n){var o,i,a=t.upcast.split(",");for(i=0;i<a.length;i++)if((o=a[i])===e.name)return t.upcasts[o].call(this,e,n);return!1}function o(t,n,o){var i=CKEDITOR.tools.getIndex(e._.upcasts,function(e){return e[2]>o});0>i&&(i=e._.upcasts.length),e._.upcasts.splice(i,0,[CKEDITOR.tools.bind(t,n),n.name,o])}var i=t.upcast,a=t.upcastPriority||10;i&&("string"==typeof i?o(n,t,a):o(i,t,a))}function a(e,t){if(e.focused=null,t.isInited()){var n=t.editor.checkDirty();e.fire("widgetBlurred",{widget:t}),t.setFocused(!1),!n&&t.editor.resetDirty()}}function r(e){if(e=e.data,"wysiwyg"==this.editor.mode){var n,o,i,a,r=this.editor.editable(),s=this.instances;if(r){for(n in s)s[n].isReady()&&!r.contains(s[n].wrapper)&&this.destroy(s[n],!0);if(e&&e.initOnlyNew)s=this.initOnAll();else{var l=r.find(".cke_widget_wrapper"),s=[];for(n=0,o=l.count();n<o;n++){if(i=l.getItem(n),a=!this.getByElement(i,!0)){e:{a=m;for(var c=i;c=c.getParent();)if(a(c)){a=!0;break e}a=!1}a=!a}a&&r.contains(i)&&(i.addClass("cke_widget_new"),s.push(this.initOn(i.getFirst(t.isDomWidgetElement))))}}e&&e.focusInited&&1==s.length&&s[0].focus()}}}function s(e){if(void 0!==e.attributes&&e.attributes["data-widget"]){var t=l(e),n=c(e),o=!1;t&&t.value&&t.value.match(/^\s/g)&&(t.parent.attributes["data-cke-white-space-first"]=1,t.value=t.value.replace(/^\s/g,"&nbsp;"),o=!0),n&&n.value&&n.value.match(/\s$/g)&&(n.parent.attributes["data-cke-white-space-last"]=1,n.value=n.value.replace(/\s$/g,"&nbsp;"),o=!0),o&&(e.attributes["data-cke-widget-white-space"]=1)}}function l(e){return e.find(function(e){return 3===e.type},!0).shift()}function c(e){return e.find(function(e){return 3===e.type},!0).pop()}function u(e,t,n){if(!n.allowedContent&&!n.disallowedContent)return null;var o=this._.filters[e];return o||(this._.filters[e]=o={}),e=o[t],e||(e=n.allowedContent?new CKEDITOR.filter(n.allowedContent):this.editor.filter.clone(),o[t]=e,n.disallowedContent&&e.disallow(n.disallowedContent)),e}function d(e){var n=[],o=e._.upcasts,i=e._.upcastCallbacks;return{toBeWrapped:n,iterator:function(e){var a,r,s,l,c;if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(t.isParserWidgetElement))&&n.push([e]),!1;if("data-widget"in e.attributes)return n.push([e]),!1;if(c=o.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(l=0,a=i.length;l<a;++l)if(!1===i[l](e))return;for(l=0;l<c;++l)if(a=o[l],s={},r=a[0](e,s))return r instanceof CKEDITOR.htmlParser.element&&(e=r),e.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(s)),e.attributes["data-cke-widget-upcasted"]=1,n.push([e,a[1]]),!1}}}}function f(e,t){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")+(t?" cke_widget_"+t:"")}}function p(e,t,n){if(e.type==CKEDITOR.NODE_ELEMENT){var o=CKEDITOR.dtd[e.name];if(o&&!o[n.name]){var o=e.split(t),i=e.parent;return t=o.getIndex(),e.children.length||(--t,e.remove()),o.children.length||o.remove(),p(i,t,n)}}e.add(n,t)}function h(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function m(e){return e.hasAttribute("data-cke-temp")}function g(e,t,n,o){var i=e.editor;i.fire("lockSnapshot"),n?(o=n.data("cke-widget-editable"),o=t.editables[o],e.widgetHoldingFocusedEditable=t,t.focusedEditable=o,n.addClass("cke_widget_editable_focused"),o.filter&&i.setActiveFilter(o.filter),i.setActiveEnterMode(o.enterMode,o.shiftEnterMode)):(o||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,i.setActiveFilter(null),i.setActiveEnterMode(null,null)),i.fire("unlockSnapshot")}function E(e){e.contextMenu&&e.contextMenu.addListener(function(t){if(t=e.widgets.getByElement(t,!0))return t.fire("contextMenu",{})})}function T(e,t){return CKEDITOR.tools.trim(t)}function v(e){var n=e.editor,o=CKEDITOR.plugins.lineutils;n.on("dragstart",function(o){var i=o.data.target;t.isDomDragHandler(i)&&(i=e.getByElement(i),o.data.dataTransfer.setData("cke/widget-id",i.id),n.focus(),i.focus())}),n.on("drop",function(t){var o=t.data.dataTransfer,i=o.getData("cke/widget-id"),a=o.getTransferType(n),o=n.createRange();""!==i&&a===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?t.cancel():""!==i&&a==CKEDITOR.DATA_TRANSFER_INTERNAL&&(i=e.instances[i])&&(o.setStartBefore(i.wrapper),o.setEndAfter(i.wrapper),t.data.dragRange=o,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,t.data.dataTransfer.setData("text/html",n.editable().getHtmlFromRange(o).getHtml()),n.widgets.destroy(i,!0))}),n.on("contentDom",function(){var i=n.editable();CKEDITOR.tools.extend(e,{finder:new o.finder(n,{lookups:{default:function(n){if(!n.is(CKEDITOR.dtd.$listItem)&&n.is(CKEDITOR.dtd.$block)&&!t.isDomNestedEditable(n)&&!e._.draggedWidget.wrapper.contains(n)){var o=t.getNestedEditable(i,n);if(o){if(n=e._.draggedWidget,e.getByElement(o)==n)return;if(o=CKEDITOR.filter.instances[o.data("cke-filter")],n=n.requiredContent,o&&n&&!o.check(n))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new o.locator(n),liner:new o.liner(n,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function y(e){var n=e.editor;n.on("contentDom",function(){var o,i,a=n.editable(),r=a.isInline()?a:n.document;a.attachListener(r,"mousedown",function(a){var r=a.data.getTarget();o=r instanceof CKEDITOR.dom.element?e.getByElement(r):null,i=0,o&&(o.inline&&r.type==CKEDITOR.NODE_ELEMENT&&r.hasAttribute("data-cke-widget-drag-handler")?(i=1,e.focused!=o&&n.getSelection().removeAllRanges()):t.getNestedEditable(o.wrapper,r)?o=null:(a.data.preventDefault(),CKEDITOR.env.ie||o.focus()))}),a.attachListener(r,"mouseup",function(){i&&o&&o.wrapper&&(i=0,o.focus())}),CKEDITOR.env.ie&&a.attachListener(r,"mouseup",function(){setTimeout(function(){o&&o.wrapper&&a.contains(o.wrapper)&&(o.focus(),o=null)})})}),n.on("doubleclick",function(n){var o=e.getByElement(n.data.element);if(o&&!t.getNestedEditable(o.wrapper,n.data.element))return o.fire("doubleclick",{element:n.data.element})},null,null,1)}function C(e){e.editor.on("key",function(t){var n,o=e.focused,i=e.widgetHoldingFocusedEditable;return o?n=o.fire("key",{keyCode:t.data.keyCode}):i&&(o=t.data.keyCode,t=i.focusedEditable,o==CKEDITOR.CTRL+65?(o=t.getBogus(),i=i.editor.createRange(),i.selectNodeContents(t),o&&i.setEndAt(o,CKEDITOR.POSITION_BEFORE_START),i.select(),n=!1):8==o||46==o?(n=i.editor.getSelection().getRanges(),i=n[0],n=!(1==n.length&&i.collapsed&&i.checkBoundaryOfElement(t,CKEDITOR[8==o?"START":"END"]))):n=void 0),n},null,null,1)}function b(e){function t(t){e.focused&&K(e.focused,"cut"==t.name)}var n=e.editor;n.on("contentDom",function(){var e=n.editable();e.attachListener(e,"copy",t),e.attachListener(e,"cut",t)})}function O(e){var n=e.editor;n.on("selectionCheck",function(){e.fire("checkSelection")}),e.on("checkSelection",e.checkSelection,e),n.on("selectionChange",function(o){var i=(o=t.getNestedEditable(n.editable(),o.data.selection.getStartElement()))&&e.getByElement(o),a=e.widgetHoldingFocusedEditable;a?a===i&&a.focusedEditable.equals(o)||(g(e,a,null),i&&o&&g(e,i,o)):i&&o&&g(e,i,o)}),n.on("dataReady",function(){R(e).commit()}),n.on("blur",function(){var t;(t=e.focused)&&a(e,t),(t=e.widgetHoldingFocusedEditable)&&g(e,t,null)})}function I(e){var n=e.editor,o={};n.on("toDataFormat",function(n){var i=CKEDITOR.tools.getNextNumber(),a=[];n.data.downcastingSessionId=i,o[i]=a,n.data.dataValue.forEach(function(n){var o,i=n.attributes;if("data-cke-widget-white-space"in i){o=l(n);var r=c(n);o.parent.attributes["data-cke-white-space-first"]&&(o.value=o.value.replace(/^&nbsp;/g," ")),r.parent.attributes["data-cke-white-space-last"]&&(r.value=r.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in i)(i=e.instances[i["data-cke-widget-id"]])&&(o=n.getFirst(t.isParserWidgetElement),a.push({wrapper:n,element:o,widget:i,editables:{}}),"1"!=o.attributes["data-cke-widget-keep-attr"]&&delete o.attributes["data-widget"]);else if("data-cke-widget-editable"in i)return a[a.length-1].editables[i["data-cke-widget-editable"]]=n,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),n.on("toDataFormat",function(e){if(e.data.downcastingSessionId){e=o[e.data.downcastingSessionId];for(var t,n,i,a,r,s;t=e.shift();){n=t.widget,i=t.element,a=n._.downcastFn&&n._.downcastFn.call(n,i);for(s in t.editables)r=t.editables[s],delete r.attributes.contenteditable,r.setHtml(n.editables[s].getData());a||(a=i),t.wrapper.replaceWith(a)}}},null,null,13),n.on("contentDomUnload",function(){e.destroyAll(!0)})}function D(e){var n,o,i=e.editor;i.on("toHtml",function(o){var i,a=d(e);for(o.data.dataValue.forEach(a.iterator,CKEDITOR.NODE_ELEMENT,!0);i=a.toBeWrapped.pop();){var r=i[0],s=r.parent;s.type==CKEDITOR.NODE_ELEMENT&&s.attributes["data-cke-widget-wrapper"]&&s.replaceWith(r),e.wrapElement(i[0],i[1])}n=o.data.protectedWhitespaces?3==o.data.dataValue.children.length&&t.isParserWidgetWrapper(o.data.dataValue.children[1]):1==o.data.dataValue.children.length&&t.isParserWidgetWrapper(o.data.dataValue.children[0])},null,null,8),i.on("dataReady",function(){if(o)for(var n,a,r=i.editable().find(".cke_widget_wrapper"),s=0,l=r.count();s<l;++s)n=r.getItem(s),a=n.getFirst(t.isDomWidgetElement),a.type==CKEDITOR.NODE_ELEMENT&&a.data("widget")?(a.replace(n),e.wrapElement(a)):n.remove();o=0,e.destroyAll(!0),e.initOnAll()}),i.on("loadSnapshot",function(t){/data-cke-widget/.test(t.data)&&(o=1),e.destroyAll(!0)},null,null,9),i.on("paste",function(e){e=e.data,e.dataValue=e.dataValue.replace(U,T),e.range&&(e=t.getNestedEditable(i.editable(),e.range.startContainer))&&(e=CKEDITOR.filter.instances[e.data("cke-filter")])&&i.setActiveFilter(e)}),i.on("afterInsertHtml",function(t){t.data.intoRange?e.checkWidgets({initOnlyNew:!0}):(i.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:n}),i.fire("unlockSnapshot"))})}function R(e){var t=e.selected,n=[],o=t.slice(0),i=null;return{select:function(e){return 0>CKEDITOR.tools.indexOf(t,e)&&n.push(e),e=CKEDITOR.tools.indexOf(o,e),0<=e&&o.splice(e,1),this},focus:function(e){return i=e,this},commit:function(){var r,s,l=e.focused!==i;for(e.editor.fire("lockSnapshot"),l&&(r=e.focused)&&a(e,r);r=o.pop();)t.splice(CKEDITOR.tools.indexOf(t,r),1),r.isInited()&&(s=r.editor.checkDirty(),r.setSelected(!1),!s&&r.editor.resetDirty());for(l&&i&&(s=e.editor.checkDirty(),e.focused=i,e.fire("widgetFocused",{widget:i}),i.setFocused(!0),!s&&e.editor.resetDirty());r=n.pop();)t.push(r),r.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function _(e,t,n){var o=0;t=S(t);var i,a=e.data.classes||{};if(t){for(a=CKEDITOR.tools.clone(a);i=t.pop();)n?a[i]||(o=a[i]=1):a[i]&&(delete a[i],o=1);o&&e.setData("classes",a)}}function k(e){e.cancel()}function K(e,t){var n=e.editor,o=n.document,i=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!o.getById("cke_copybin")){var a=!n.blockless&&!CKEDITOR.env.ie||i?"div":"span",i=o.createElement(a),r=o.createElement(a),a=CKEDITOR.env.ie&&9>CKEDITOR.env.version;r.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),i.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),i.setStyle("ltr"==n.config.contentsLangDirection?"left":"right","-5000px");var s=n.createRange();s.setStartBefore(e.wrapper),s.setEndAfter(e.wrapper),i.setHtml('<span data-cke-copybin-start="1"></span>'+n.editable().getHtmlFromRange(s).getHtml()+'<span data-cke-copybin-end="1"></span>'),n.fire("saveSnapshot"),n.fire("lockSnapshot"),r.append(i),n.editable().append(r);var l=n.on("selectionChange",k,null,null,0),c=e.repository.on("checkSelection",k,null,null,0);if(a)var u=o.getDocumentElement().$,d=u.scrollTop;s=n.createRange(),s.selectNodeContents(i),s.select(),a&&(u.scrollTop=d),setTimeout(function(){t||e.focus(),r.remove(),l.removeListener(),c.removeListener(),n.fire("unlockSnapshot"),t&&!n.readOnly&&(e.repository.del(e),n.fire("saveSnapshot"))},100)}}function S(e){return(e=(e=e.getDefinition().attributes)&&e.class)?e.split(/\s+/):null}function w(){var e=CKEDITOR.document.getActive(),t=this.editor,n=t.editable();(n.isInline()?n:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(n)}function x(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function N(e){var t=null;e.on("data",function(){var e,n=this.data.classes;if(t!=n){for(e in t)n&&n[e]||this.removeClass(e);for(e in n)this.addClass(e);t=n}})}function A(e){e.on("data",function(){if(e.wrapper){var t=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());e.wrapper.setAttribute("role","region"),e.wrapper.setAttribute("aria-label",t)}},null,null,9999)}function P(e){if(e.draggable){var n,o=e.editor,i=e.wrapper.getLast(t.isDomDragHandlerContainer);i?n=i.findOne("img"):(i=new CKEDITOR.dom.element("span",o.document),i.setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+o.plugins.widget.path+"images/handle.png)"}),n=new CKEDITOR.dom.element("img",o.document),n.setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:o.lang.widget.move,height:15,role:"presentation"}),e.inline&&n.setAttribute("draggable","true"),i.append(n),e.wrapper.append(i)),e.wrapper.on("dragover",function(e){e.data.preventDefault()}),e.wrapper.on("mouseenter",e.updateDragHandlerPosition,e),setTimeout(function(){e.on("data",e.updateDragHandlerPosition,e)},50),!e.inline&&(n.on("mousedown",L,e),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&n.on("dragstart",function(e){e.data.preventDefault(!0)}),e.dragHandlerContainer=i}}function L(e){function t(){var t;for(f.reset();t=c.pop();)t.removeListener();var n=u;t=e.sender;var o=this.repository.finder,i=this.repository.liner,a=this.editor,r=this.editor.editable();CKEDITOR.tools.isEmpty(i.visible)||(n=o.getRange(n[0]),this.focus(),a.fire("drop",{dropRange:n,target:n.startContainer})),r.removeClass("cke_widget_dragging"),i.hideVisible(),a.fire("dragend",{target:t})}if(CKEDITOR.tools.getMouseButton(e)===CKEDITOR.MOUSE_BUTTON_LEFT){var n,o,i=this.repository.finder,a=this.repository.locator,r=this.repository.liner,s=this.editor,l=s.editable(),c=[],u=[];this.repository._.draggedWidget=this;var d=i.greedySearch(),f=CKEDITOR.tools.eventsBuffer(50,function(){n=a.locate(d),u=a.sort(o,1),u.length&&(r.prepare(d,n),r.placeLine(u[0]),r.cleanup())});l.addClass("cke_widget_dragging"),c.push(l.on("mousemove",function(e){o=e.data.$.clientY,f.input()})),s.fire("dragstart",{target:e.sender}),c.push(s.document.once("mouseup",t,this)),l.isInline()||c.push(CKEDITOR.document.once("mouseup",t,this))}}function F(e){var t,n,o=e.editables;if(e.editables={},e.editables)for(t in o)n=o[t],e.initEditable(t,"string"==typeof n?{selector:n}:n)}function M(e){if(e.mask){var t=e.wrapper.findOne(".cke_widget_mask");t||(t=new CKEDITOR.dom.element("img",e.editor.document),t.setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}}function B(e){if(e.parts){var t,n,o={};for(n in e.parts)t=e.wrapper.findOne(e.parts[n]),o[n]=t;e.parts=o}}function $(e,n){j(e),B(e),F(e),M(e),P(e),N(e),A(e),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.wrapper.on("dragstart",function(n){var o=n.data.getTarget();t.getNestedEditable(e,o)||e.inline&&t.isDomDragHandler(o)||n.data.preventDefault()}),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",function(t){if(13==(t=t.data.keyCode))e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void K(e,t==CKEDITOR.CTRL+88);if(t in z||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1},null,null,999),e.on("doubleclick",function(t){e.edit()&&t.cancel()}),n.data&&e.on("data",n.data),n.edit&&e.on("edit",n.edit)}function j(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)}function H(e){e.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(e.data)))}function q(){function e(){}function n(e,t,n){return!(!n||!this.checkElement(e))&&((e=n.widgets.getByElement(e,!0))&&e.checkStyleActive(this))}var o={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(e){if(this.widget=e.widget,this.group="string"==typeof e.group?[e.group]:e.group){e=this.widget;var t;o[e]||(o[e]={});for(var n=0,i=this.group.length;n<i;n++)t=this.group[n],o[e][t]||(o[e][t]=[]),o[e][t].push(this)}},apply:function(e){var t;e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&(t=e.widgets.focused,this.group&&this.removeStylesFromSameGroup(e),t.applyStyle(this))},remove:function(e){e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(e){var t,n,i=!1;if(!(e instanceof CKEDITOR.editor))return!1;if(n=e.elementPath(),this.checkApplicable(n,e))for(var a=0,r=this.group.length;a<r;a++){t=o[this.widget][this.group[a]];for(var s=0;s<t.length;s++)t[s]!==this&&t[s].checkActive(n,e)&&(e.widgets.focused.removeStyle(t[s]),i=!0)}return i},checkActive:function(e,t){return this.checkElementMatch(e.lastElement,0,t)},checkApplicable:function(e,t){return t instanceof CKEDITOR.editor&&this.checkElement(e.lastElement)},checkElementMatch:n,checkElementRemovable:n,checkElement:function(e){return!!t.isDomWidgetWrapper(e)&&((e=e.getFirst(t.isDomWidgetElement))&&e.data("widget")==this.widget)},buildPreview:function(e){return e||this._.definition.name},toAllowedContentRules:function(e){if(!e)return null;e=e.widgets.registered[this.widget];var t,n={};return e?e.styleableElements?(t=this.getClassesArray())?(n[e.styleableElements]={classes:t,propertiesOnly:!0},n):null:e.styleToAllowedContentRules?e.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var e=this._.definition.attributes&&this._.definition.attributes.class;return e?CKEDITOR.tools.trim(e).split(/\s+/):null},applyToRange:e,removeFromRange:e,applyToObject:e})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),q())},beforeInit:function(t){void 0!==CKEDITOR.document.$.querySelectorAll&&(t.widgets=new e(t))},afterInit:function(e){if(void 0!==CKEDITOR.document.$.querySelectorAll){var t,n,o,i=e.widgets.registered;for(n in i)t=i[n],(o=t.button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:o,command:t.name,toolbar:"insert,10"});E(e)}}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){return t=CKEDITOR.tools.prototypedCopy(t),t.name=e,t._=t._||{},this.editor.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),o(this.editor,t),i(this,t),this.registered[e]=t},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){var e,n=this.editor.getSelection(),o=n.getSelectedElement(),i=R(this);if(o&&(e=this.getByElement(o,!0)))return i.focus(e).select(e).commit();if(!(n=n.getRanges()[0])||n.collapsed)return i.commit();for(n=new CKEDITOR.dom.walker(n),n.evaluator=t.isDomWidgetWrapper;o=n.next();)i.select(this.getByElement(o));i.commit()},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t,n=e.editor,o=n.createRange();(t=o.moveToClosestEditablePosition(e.wrapper,!0))||(t=o.moveToClosestEditablePosition(e.wrapper,!1)),t&&n.getSelection().selectRanges([o])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&g(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e,t){var n,o,i=this.instances;if(t&&!e){o=t.find(".cke_widget_wrapper");for(var i=o.count(),a=0;a<i;++a)(n=this.getByElement(o.getItem(a),!0))&&this.destroy(n)}else for(o in i)n=i[o],this.destroy(n,e)},finalizeCreation:function(e){(e=e.getFirst())&&t.isDomWidgetWrapper(e)&&(this.editor.insertElement(e),e=this.getByElement(e),e.ready=!0,e.fire("ready"),e.focus())},getByElement:function(){function e(e){return e.is(t)&&e.data("cke-widget-id")}var t={div:1,span:1};return function(t,n){if(!t)return null;var o=e(t);if(!n&&!o){var i=this.editor.editable();do{t=t.getParent()}while(t&&!t.equals(i)&&!(o=e(t)))}return this.instances[o]||null}}(),initOn:function(e,n,o){if(n?"string"==typeof n&&(n=this.registered[n]):n=this.registered[e.data("widget")],!n)return null;var i=this.wrapElement(e,n.name);return i?i.hasClass("cke_widget_new")?(e=new t(this,this._.nextId++,e,n,o),e.isInited()?this.instances[e.id]=e:null):this.getByElement(e):null},initOnAll:function(e){e=(e||this.editor.editable()).find(".cke_widget_new");for(var n,o=[],i=e.count();i--;)(n=this.initOn(e.getItem(i).getFirst(t.isDomWidgetElement)))&&o.push(n);return o},onWidget:function(e){var t=Array.prototype.slice.call(arguments);t.shift();for(var n in this.instances){var o=this.instances[n];o.name==e&&o.on.apply(o,t)}this.on("instanceCreated",function(n){n=n.data,n.name==e&&n.on.apply(n,t)})},parseElementClasses:function(e){if(!e)return null;e=CKEDITOR.tools.trim(e).split(/\s+/);for(var t,n={},o=0;t=e.pop();)-1==t.indexOf("cke_")&&(n[t]=o=1);return o?n:null},wrapElement:function(e,t){var n,o,i=null;if(e instanceof CKEDITOR.dom.element){if(t=t||e.data("widget"),!(n=this.registered[t]))return null;if((i=e.getParent())&&i.type==CKEDITOR.NODE_ELEMENT&&i.data("cke-widget-wrapper"))return i;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),e.data("widget",t),(o=h(n,e.getName()))&&s(e),i=new CKEDITOR.dom.element(o?"span":"div"),i.setAttributes(f(o,t)),i.data("cke-display-name",n.pathName?n.pathName:e.getName()),e.getParent(!0)&&i.replace(e),e.appendTo(i)}else if(e instanceof CKEDITOR.htmlParser.element){if(t=t||e.attributes["data-widget"],!(n=this.registered[t]))return null;if((i=e.parent)&&i.type==CKEDITOR.NODE_ELEMENT&&i.attributes["data-cke-widget-wrapper"])return i;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),(o=h(n,e.name))&&s(e),i=new CKEDITOR.htmlParser.element(o?"span":"div",f(o,t)),i.attributes["data-cke-display-name"]=n.pathName?n.pathName:e.name,n=e.parent;var a;n&&(a=e.getIndex(),e.remove()),i.add(e),n&&p(n,a,i)}return i},_tests_createEditableFilter:u},CKEDITOR.event.implementOn(e.prototype),t.prototype={addClass:function(e){this.element.addClass(e),this.wrapper.addClass(t.WRAPPER_CLASS_PREFIX+e)},applyStyle:function(e){_(this,e,1)},checkStyleActive:function(e){e=S(e);var t;if(!e)return!1;for(;t=e.pop();)if(!this.hasClass(t))return!1;return!0},destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var n=this.editables[e],o=!0;if(n.removeListener("focus",x),n.removeListener("blur",w),this.editor.focusManager.remove(n),n.filter){for(var i in this.repository.instances){var a=this.repository.instances[i];a.editables&&(a=a.editables[e])&&a!==n&&n.filter===a.filter&&(o=!1)}o&&(n.filter.destroy(),(o=this.repository._.filters[this.name])&&delete o[e])}t||(this.repository.destroyAll(!1,n),n.removeClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),n.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;return!(!1===this.fire("edit",e)||!e.dialog)&&(this.editor.openDialog(e.dialog,function(e){var n,o;!1!==t.fire("dialog",e)&&(n=e.on("show",function(){e.setupContent(t)}),o=e.on("ok",function(){var n,o=t.on("data",function(e){n=1,e.cancel()},null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),o.removeListener(),n&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))}),e.once("hide",function(){n.removeListener(),o.removeListener()}))}),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(e){return this.element.hasClass(e)},initEditable:function(e,t){var o=this._findOneNotNested(t.selector);return!(!o||!o.is(CKEDITOR.dtd.$editable))&&(o=new n(this.editor,o,{filter:u.call(this.repository,this.name,e,t)}),this.editables[e]=o,o.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":o.enterMode}),o.filter&&o.data("cke-filter",o.filter.id),o.addClass("cke_widget_editable"),o.removeClass("cke_widget_editable_focused"),t.pathName&&o.data("cke-display-name",t.pathName),this.editor.focusManager.add(o),o.on("focus",x,this),CKEDITOR.env.ie&&o.on("blur",w,this),o._.initialSetData=!0,o.setData(o.getHtml()),!0)},_findOneNotNested:function(e){e=this.wrapper.find(e);for(var n,o,i=0;i<e.count();i++)if(n=e.getItem(i),o=n.getAscendant(t.isDomWidgetWrapper),this.wrapper.equals(o))return n;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();if(e){var t=this.editor.checkDirty();e.fake(this.wrapper),!t&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(e){this.element.removeClass(e),this.wrapper.removeClass(t.WRAPPER_CLASS_PREFIX+e)},removeStyle:function(e){_(this,e,0)},setData:function(e,t){var n=this.data,o=0;if("string"==typeof e)n[e]!==t&&(n[e]=t,o=1);else{var i=e;for(e in i)n[e]!==i[e]&&(o=1,n[e]=i[e])}return o&&this.dataReady&&(H(this),this.fire("data",n)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this},updateDragHandlerPosition:function(){var e=this.editor,t=this.element.$,n=this._.dragHandlerOffset,t={x:t.offsetLeft,y:t.offsetTop-15};n&&t.x==n.x&&t.y==n.y||(n=e.checkDirty(),e.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:t.y+"px",left:t.x+"px",display:"block"}),e.fire("unlockSnapshot"),!n&&e.resetDirty(),this._.dragHandlerOffset=t)}},CKEDITOR.event.implementOn(t.prototype),t.getNestedEditable=function(e,n){return!n||n.equals(e)?null:t.isDomNestedEditable(n)?n:t.getNestedEditable(e,n.getParent())},t.isDomDragHandler=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")},t.isDomDragHandlerContainer=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_widget_drag_handler_container")},t.isDomNestedEditable=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")},t.isDomWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")},t.isDomWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")},t.isDomWidget=function(e){return!!e&&(this.isDomWidgetWrapper(e)||this.isDomWidgetElement(e))},t.isParserWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]},t.isParserWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-cke-widget-wrapper"]},t.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",n.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var U=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,z={37:1,38:1,39:1,40:1,8:1,46:1};CKEDITOR.plugins.widget=t,t.repository=e,t.nestedEditable=n}(),function(){function e(e,t,n){this.editor=e,this.notification=null,this._message=new CKEDITOR.template(t),this._singularMessage=n?new CKEDITOR.template(n):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function t(e){this._weight=e||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),e.prototype={createTask:function(e){e=e||{};var t,n=!this.notification;return n&&(this.notification=this._createNotification()),t=this._addTask(e),t.on("updated",this._onTaskUpdate,this),t.on("done",this._onTaskDone,this),t.on("canceled",function(){this._removeTask(t)},this),this.update(),n&&this.notification.show(),t},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var e=this.getTaskCount(),t={current:this.getDoneTaskCount(),max:e,percentage:Math.round(100*this.getPercentage())};return(1==e&&this._singularMessage?this._singularMessage:this._message).output(t)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(e){return e=new t(e.weight),this._tasks.push(e),this._totalWeights+=e._weight,e},_removeTask:function(e){var t=CKEDITOR.tools.indexOf(this._tasks,e);-1!==t&&(e._doneWeight&&(this._doneWeights-=e._doneWeight),this._totalWeights-=e._weight,this._tasks.splice(t,1),this.update())},_onTaskUpdate:function(e){this._doneWeights+=e.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(e.prototype),t.prototype={done:function(){this.update(this._weight)},update:function(e){if(!this.isDone()&&!this.isCanceled()){e=Math.min(this._weight,e);var t=e-this._doneWeight;this._doneWeight=e,this.fire("updated",t),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(t.prototype),CKEDITOR.plugins.notificationAggregator=e,CKEDITOR.plugins.notificationAggregator.task=t}(),function(){CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(e){e.filter.allow("*[!data-widget,!data-cke-upload-id]")}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(e,t,n){var o=CKEDITOR.fileTools,i=e.uploadRepository,a=n.supportedTypes?10:20;n.fileToElement&&e.on("paste",function(n){n=n.data;var a,r,s=e.widgets.registered[t],l=n.dataTransfer,c=l.getFilesCount(),u=s.loadMethod||"loadAndUpload";if(!n.dataValue&&c)for(r=0;r<c;r++)if(a=l.getFile(r),!s.supportedTypes||o.isTypeSupported(a,s.supportedTypes)){var d=s.fileToElement(a);a=i.create(a,void 0,s.loaderType),d&&(a[u](s.uploadUrl,s.additionalRequestParameters),CKEDITOR.fileTools.markElement(d,t,a.id),"loadAndUpload"!=u&&"upload"!=u||s.skipNotifications||CKEDITOR.fileTools.bindNotifications(e,a),n.dataValue+=d.getOuterHtml())}},null,null,a),CKEDITOR.tools.extend(n,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var t,n,o=this,a=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),r=i.loaders[a],s=CKEDITOR.tools.capitalize;r.on("update",function(i){"abort"===r.status&&"function"==typeof o.onAbort&&o.onAbort(r),o.wrapper&&o.wrapper.getParent()?(e.fire("lockSnapshot"),i="on"+s(r.status),"abort"!==r.status&&"function"==typeof o[i]&&!1===o[i](r)||(n="cke_upload_"+r.status,o.wrapper&&n!=t&&(t&&o.wrapper.removeClass(t),o.wrapper.addClass(n),t=n),"error"!=r.status&&"abort"!=r.status||e.widgets.del(o)),e.fire("unlockSnapshot")):(CKEDITOR.instances[e.name]&&e.editable().find('[data-cke-upload-id="'+a+'"]').count()||r.abort(),i.removeListener())}),r.update()},replaceWith:function(t,n){if(""===t.trim())e.widgets.del(this);else{var o,i,a=this==e.widgets.focused,r=e.editable(),s=e.createRange();a||(i=e.getSelection().createBookmarks()),s.setStartBefore(this.wrapper),s.setEndAfter(this.wrapper),a&&(o=s.createBookmark()),r.insertHtmlIntoRange(t,s,n),e.widgets.checkWidgets({initOnlyNew:!0}),e.widgets.destroy(this,!0),a?(s.moveToBookmark(o),s.select()):e.getSelection().selectBookmarks(i)}},_getLoader:function(){var e=this.wrapper.findOne("[data-cke-upload-id]");return e?this.editor.uploadRepository.loaders[e.data("cke-upload-id")]:null}}),e.widgets.add(t,n)},markElement:function(e,t,n){e.setAttributes({"data-cke-upload-id":n,"data-widget":t})},bindNotifications:function(e,t){function n(){(o=e._.uploadWidgetNotificaionAggregator)&&!o.isFinished()||(o=e._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(e,e.lang.uploadwidget.uploadMany,e.lang.uploadwidget.uploadOne),o.once("finished",function(){var t=o.getTaskCount();0===t?o.notification.hide():o.notification.update({message:1==t?e.lang.uploadwidget.doneOne:e.lang.uploadwidget.doneMany.replace("%1",t),type:"success",important:1})}))}var o,i=null;t.on("update",function(){!i&&t.uploadTotal&&(n(),i=o.createTask({weight:t.uploadTotal})),i&&"uploading"==t.status&&i.update(t.uploaded)}),t.on("uploaded",function(){i&&i.done()}),t.on("error",function(){i&&i.cancel(),e.showNotification(t.message,"warning")}),t.on("abort",function(){i&&i.cancel(),CKEDITOR.instances[e.name]&&e.showNotification(e.lang.uploadwidget.abort,"info")})}})}(),function(){function e(e){return 9>=e&&(e="0"+e),String(e)}function t(t){var o=new Date,o=[o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()];return n+=1,"image-"+CKEDITOR.tools.array.map(o,e).join("")+"-"+n+"."+t}var n=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},init:function(e){if(CKEDITOR.plugins.clipboard.isFileApiSupported){var n=CKEDITOR.fileTools,o=n.getUploadUrl(e.config,"image");o&&(n.addUploadWidget(e,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:o,fileToElement:function(){var e=new CKEDITOR.dom.element("img");return e.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),e},parts:{img:"img"},onUploading:function(e){this.parts.img.setAttribute("src",e.data)},onUploaded:function(e){var t=this.parts.img.$;this.replaceWith('<img src="'+e.url+'" width="'+(e.responseData.width||t.naturalWidth)+'" height="'+(e.responseData.height||t.naturalHeight)+'">')}}),e.on("paste",function(i){if(i.data.dataValue.match(/<img[\s\S]+data:/i)){i=i.data;var a,r,s,l=document.implementation.createHTMLDocument(""),l=new CKEDITOR.dom.element(l.body);for(l.data("cke-editable",1),l.appendHtml(i.dataValue),a=l.find("img"),s=0;s<a.count();s++){r=a.getItem(s);var c=r.getAttribute("src"),u=c&&"data:"==c.substring(0,5),d=null===r.data("cke-realelement");u&&d&&!r.data("cke-upload-id")&&!r.isReadOnly(1)&&(u=(u=c.match(/image\/([a-z]+?);/i))&&u[1]||"jpg",c=e.uploadRepository.create(c,t(u)),c.upload(o),n.markElement(r,"uploadimage",c.id),n.bindNotifications(e,c))}i.dataValue=l.getHtml()}}))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,e.config.wsc_interfaceLang=e.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css")},init:function(e){var t=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||t.ie&&(8>t.version||t.quirks))},void 0===e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function e(e){function n(e){var t=!1;s.attachListener(s,"keydown",function(){var n=i.getBody().getElementsByTag(e);if(!t){for(var o=0;o<n.count();o++)n.getItem(o).setCustomData("retain",!0);t=!0}},null,null,1),s.attachListener(s,"keyup",function(){var n=i.getElementsByTag(e);t&&(1==n.count()&&!n.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(n.getItem(0).getAttributes())&&n.getItem(0).remove(1),t=!1)})}var o=this.editor,i=e.document,a=i.body,r=i.getElementById("cke_actscrpt");r&&r.parentNode.removeChild(r),(r=i.getElementById("cke_shimscrpt"))&&r.parentNode.removeChild(r),(r=i.getElementById("cke_basetagscrpt"))&&r.parentNode.removeChild(r),a.contentEditable=!0,CKEDITOR.env.ie&&(a.hideFocus=!0,a.disabled=!0,a.removeAttribute("disabled")),delete this._.isLoadingData,this.$=a,i=new CKEDITOR.dom.document(i),this.setup(),this.fixInitialSelection();var s=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.getDocumentElement().addClass(i.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&o.enterMode!=CKEDITOR.ENTER_P?n("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&o.enterMode!=CKEDITOR.ENTER_DIV&&n("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&i.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){o.editable().focus()})}),t(o);try{o.document.$.execCommand("2D-position",!1,!0)}catch(e){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==o.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout(function(){o.getSelection().scrollIntoView()},0);else if(o.window.$.innerHeight>this.$.offsetHeight){var n=o.createRange();n[33==t?"moveToElementEditStart":"moveToElementEditEnd"](this),n.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(i,"blur",function(){try{i.$.selection.empty()}catch(e){}}),CKEDITOR.env.iOS&&this.attachListener(i,"touchend",function(){e.focus()}),a=o.document.getElementsByTag("title").getItem(0),a.data("cke-title",a.getText()),CKEDITOR.env.ie&&(o.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),o.fire("contentDom"),this._.isPendingFocus&&(o.focus(),this._.isPendingFocus=!1),setTimeout(function(){o.fire("dataReady")},0)},0,this)}function t(e){function t(e){e.returnValue=!1}if(CKEDITOR.env.gecko)try{var n=e.document.$;n.execCommand("enableObjectResizing",!1,!e.config.disableObjectResizing),n.execCommand("enableInlineTableEditing",!1,!e.config.disableNativeTableHandles)}catch(e){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&e.config.disableObjectResizing&&function(){var n;e.editable().attachListener(e,"selectionChange",function(){var o=e.getSelection().getSelectedElement();o&&(n&&(n.detachEvent("onresizestart",t),n=null),o.$.attachEvent("onresizestart",t),n=o.$)})}()}function n(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,n=[];for(t in CKEDITOR.dtd.$removeEmpty)n.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(n.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}var o;CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",function(t){function n(n){n&&n.removeListener(),e.editable(new o(e,a.$.contentWindow.document.body)),e.setData(e.getData(1),t)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",a=CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>');a.setStyles({width:"100%",height:"100%"}),a.addClass("cke_wysiwyg_frame").addClass("cke_reset"),i=e.ui.space("contents"),i.append(a);var r=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;r&&a.on("load",n);var s=e.title,l=e.fire("ariaEditorHelpLabel",{}).label;if(s&&(CKEDITOR.env.ie&&l&&(s+=", "+l),a.setAttribute("title",s)),l){var s=CKEDITOR.tools.getNextId(),c=CKEDITOR.dom.element.createFromHtml('<span id="'+s+'" class="cke_voice_label">'+l+"</span>");i.append(c,1),a.setAttribute("aria-describedby",s)}e.on("beforeModeUnload",function(e){e.removeListener(),c&&c.remove()}),a.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"}),!r&&n(),e.fire("ariaWidget",a)})}}),CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,n=t.contentsCss;CKEDITOR.tools.isArray(n)||(t.contentsCss=n?[n]:[]),t.contentsCss.push(e)},o=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(e,0,this,t)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var o=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),o.fire("dataReady");else{this._.isLoadingData=!0,o._.dataStore={id:1};var i=o.config,a=i.fullPage,r=i.docType,s=CKEDITOR.tools.buildStyleHtml(n()).replace(/<style>/,'<style data-cke-temp="1">');a||(s+=CKEDITOR.tools.buildStyleHtml(o.config.contentsCss));var l=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";a&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){return o.docType=r=e,""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){return o.xmlDeclaration=e,""})),e=o.dataProcessor.toHtml(e),a?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(e=e.replace(/<head[^>]*?>/,"$&"+l)),e=e.replace(/<\/head\s*>/,s+"$&"),e=r+e):e=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||o.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+s+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),l&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),o.fire("contentDomUnload");var c=this.getDocument();try{c.write(e)}catch(t){setTimeout(function(){c.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();e=this.editor;var t=e.config,n=t.fullPage,o=n&&e.docType,i=n&&e.xmlDeclaration,a=this.getDocument(),n=n?a.getDocumentElement().getOuterHtml():a.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),n=e.dataProcessor.toDataFormat(n),i&&(n=i+"\n"+n),o&&(n=o+"\n"+n),n},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:o.baseProto.focus.call(this)},detach:function(){var e,t=this.editor,n=t.document;try{e=t.window.getFrame()}catch(e){}o.baseProto.detach.call(this),this.clearCustomData(),n.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),e&&e.getParent()?(e.clearCustomData(),(t=e.removeCustomData("onResize"))&&t.removeListener(),e.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var e=function(e,t){var n=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var o=0;o<e.length;o++)CKEDITOR.skin.icons[e[o]]={path:n,offset:-e[++o],bgsize:e[++o]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,find-rtl,792,,find,816,,replace,840,,flash,864,,button,888,,checkbox,912,,form,936,,hiddenfield,960,,imagebutton,984,,radio,1008,,select-rtl,1032,,select,1056,,textarea-rtl,1080,,textarea,1104,,textfield-rtl,1128,,textfield,1152,,horizontalrule,1176,,iframe,1200,,image,1224,,indent-rtl,1248,,indent,1272,,outdent-rtl,1296,,outdent,1320,,justifyblock,1344,,justifycenter,1368,,justifyleft,1392,,justifyright,1416,,language,1440,,anchor-rtl,1464,,anchor,1488,,link,1512,,unlink,1536,,bulletedlist-rtl,1560,,bulletedlist,1584,,numberedlist-rtl,1608,,numberedlist,1632,,mathjax,1656,,maximize,1680,,newpage-rtl,1704,,newpage,1728,,pagebreak-rtl,1752,,pagebreak,1776,,pastefromword-rtl,1800,,pastefromword,1824,,pastetext-rtl,1848,,pastetext,1872,,placeholder,1896,,preview-rtl,1920,,preview,1944,,print,1968,,removeformat,1992,,save,2016,,scayt,2040,,selectall,2064,,showblocks-rtl,2088,,showblocks,2112,,smiley,2136,,source-rtl,2160,,source,2184,,sourcedialog-rtl,2208,,sourcedialog,2232,,specialchar,2256,,table,2280,,templates-rtl,2304,,templates,2328,,uicolor,2352,,redo-rtl,2376,,redo,2400,,undo-rtl,2424,,undo,2448,,simplebox,4944,auto,spellchecker,2496,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,find-rtl,792,auto,find,816,auto,replace,840,auto,flash,864,auto,button,888,auto,checkbox,912,auto,form,936,auto,hiddenfield,960,auto,imagebutton,984,auto,radio,1008,auto,select-rtl,1032,auto,select,1056,auto,textarea-rtl,1080,auto,textarea,1104,auto,textfield-rtl,1128,auto,textfield,1152,auto,horizontalrule,1176,auto,iframe,1200,auto,image,1224,auto,indent-rtl,1248,auto,indent,1272,auto,outdent-rtl,1296,auto,outdent,1320,auto,justifyblock,1344,auto,justifycenter,1368,auto,justifyleft,1392,auto,justifyright,1416,auto,language,1440,auto,anchor-rtl,1464,auto,anchor,1488,auto,link,1512,auto,unlink,1536,auto,bulletedlist-rtl,1560,auto,bulletedlist,1584,auto,numberedlist-rtl,1608,auto,numberedlist,1632,auto,mathjax,1656,auto,maximize,1680,auto,newpage-rtl,1704,auto,newpage,1728,auto,pagebreak-rtl,1752,auto,pagebreak,1776,auto,pastefromword-rtl,1800,auto,pastefromword,1824,auto,pastetext-rtl,1848,auto,pastetext,1872,auto,placeholder,1896,auto,preview-rtl,1920,auto,preview,1944,auto,print,1968,auto,removeformat,1992,auto,save,2016,auto,scayt,2040,auto,selectall,2064,auto,showblocks-rtl,2088,auto,showblocks,2112,auto,smiley,2136,auto,source-rtl,2160,auto,source,2184,auto,sourcedialog-rtl,2208,auto,sourcedialog,2232,auto,specialchar,2256,auto,table,2280,auto,templates-rtl,2304,auto,templates,2328,auto,uicolor,2352,auto,redo-rtl,2376,auto,redo,2400,auto,undo-rtl,2424,auto,undo,2448,auto,simplebox,2472,auto,spellchecker,2496,auto","icons.png")}())}()},3893:function(e,t,n){t=e.exports=n(471)(!1),t.push([e.i,'.programStageEditForm {\n  display: flex;\n  box-sizing: border-box; }\n  .programStageEditForm .left {\n    width: auto; }\n  .programStageEditForm .right {\n    width: 30%;\n    min-width: 300px; }\n  .programStageEditForm .paletteContainer:hover .resizeHandle:after {\n    border-color: rgba(0, 0, 0, 0.12); }\n  .programStageEditForm .paletteContainer .resizeHandle {\n    position: absolute;\n    top: -20px;\n    right: 0;\n    bottom: -16px;\n    left: -8px;\n    width: 12px;\n    cursor: col-resize; }\n    .programStageEditForm .paletteContainer .resizeHandle:after {\n      content: "";\n      display: block;\n      position: absolute;\n      bottom: 0;\n      top: 0;\n      border: 0 dashed rgba(0, 0, 0, 0);\n      border-left-width: 1px;\n      margin-left: 5px;\n      transition: border 125ms linear; }\n    .programStageEditForm .paletteContainer .resizeHandle:hover:after {\n      border-color: rgba(0, 0, 0, 0.45); }\n  .programStageEditForm .paletteContainer .palette {\n    padding-left: 1rem; }\n    .programStageEditForm .paletteContainer .palette .elements {\n      padding: 0 8px 8px;\n      font-size: 13px;\n      font-weight: 300;\n      display: flex;\n      flex-direction: column;\n      overflow-x: auto; }\n      .programStageEditForm .paletteContainer .palette .elements .cell {\n        position: relative;\n        flex: 1 1;\n        transition: all 175ms ease-in-out; }\n        .programStageEditForm .paletteContainer .palette .elements .cell.expanded {\n          flex: 1; }\n          .programStageEditForm .paletteContainer .palette .elements .cell.expanded .header .arrow {\n            transform: rotate(90deg); }\n          .programStageEditForm .paletteContainer .palette .elements .cell.expanded .items {\n            height: 100%; }\n        .programStageEditForm .paletteContainer .palette .elements .cell .header {\n          font-weight: 700;\n          font-size: 16px;\n          padding-top: 8px;\n          cursor: pointer; }\n          .programStageEditForm .paletteContainer .palette .elements .cell .header .arrow {\n            display: inline-block;\n            margin: 0 2px;\n            transition: transform 175ms ease-out; }\n          .programStageEditForm .paletteContainer .palette .elements .cell .header .count {\n            display: inline-block;\n            font-weight: 400;\n            font-size: 14px;\n            margin-left: 4px; }\n        .programStageEditForm .paletteContainer .palette .elements .cell .items {\n          transition: height 175ms ease-in-out;\n          height: 0;\n          max-height: 500px;\n          position: relative;\n          padding-left: 16px;\n          overflow: auto; }\n          .programStageEditForm .paletteContainer .palette .elements .cell .items .item {\n            padding-bottom: 1px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis; }\n  .programStageEditForm .item.active a, .programStageEditForm .expand a {\n    cursor: pointer; }\n    .programStageEditForm .item.active a:hover, .programStageEditForm .expand a:hover {\n      text-decoration: underline; }\n  .programStageEditForm .item.inactive a {\n    color: inherit;\n    opacity: 0.5;\n    cursor: default; }\n',""])},4053:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}))};u=(0,s.default)(u),u.displayName="ActionDoneAll",u.muiName="SvgIcon",t.default=u},4054:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}))};u=(0,s.default)(u),u.displayName="ActionDone",u.muiName="SvgIcon",t.default=u},4055:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}))};u=(0,s.default)(u),u.displayName="ActionVisibilityOff",u.muiName="SvgIcon",t.default=u},4056:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}))};u=(0,s.default)(u),u.displayName="ActionVisibility",u.muiName="SvgIcon",t.default=u},4057:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))};u=(0,s.default)(u),u.displayName="ContentClear",u.muiName="SvgIcon",t.default=u},4058:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=o(i),r=n(41),s=o(r),l=n(42),c=o(l),u=function(e){return a.default.createElement(c.default,e,a.default.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}))};u=(0,s.default)(u),u.displayName="NavigationArrowDownward",u.muiName="SvgIcon",t.default=u}});
//# sourceMappingURL=2-e468785fce3c14806476.js.map