webpackJsonp([0],{3334:function(e,t,n){"use strict";function r(e){return e&&_.a[e]}function a(e){var t=e.major,n=e.minor;return e.snapshot?"master":t+"."+n}function i(e,t){var n=/\$\{(.+?)\}/g;return e.replace(n,function(e,n){return t.has(n)?t.get(n):".+?"})}function o(e,t){return Object.keys(_.a).find(function(n){var r=i(n,t);return new RegExp(r).test(e)})}function l(e,t){return r(e)?i(_.a[e],t):""}function s(e,t){var r=new Map([["objectType",t]]),a=new Map([["objectType",n.i(h.camelCaseToUnderscores)(t)]]);return l(o(e,r),a)}function u(e,t){var n=e.schema,r=t.d2,i=window.location.hash.replace(/^#/,"").replace(/\?.+?$/,""),o="https://docs.dhis2.org/"+a(r.system.version),l=s(i,n);return l?p.a.createElement(g.a,{href:""+o+l,target:"_blank",rel:"noopener noreferrer",tooltip:r.i18n.getTranslation("open_user_guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons",iconStyle:{top:-2}},"help_outline"):null}t.a=u;var c=n(0),p=n.n(c),d=n(1),m=n.n(d),f=n(132),g=n.n(f),h=n(720),y=(n.n(h),n(3345)),_=n.n(y);u.propTypes={schema:m.a.string.isRequired},u.contextTypes={d2:m.a.object}},3343:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,r){return n.i(D.isString)(e)?e===t.key:e===r}function o(e){var t=e.onBackClick;return c.a.createElement(E.a,{onClick:t},c.a.createElement(O.a,null))}function l(e){var t=e.onForwardClick;return c.a.createElement(E.a,{onClick:t},c.a.createElement(T.a,null))}function s(e,t){var n={buttons:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"4rem 1rem 1rem"}};return function(r){var a=r.children;return c.a.createElement("div",{style:n.buttons},c.a.createElement(e,null),a,c.a.createElement(t,null))}}n.d(t,"a",function(){return w}),n.d(t,"b",function(){return R}),n.d(t,"g",function(){return L}),n.d(t,"f",function(){return V}),t.e=s,n.d(t,"c",function(){return x}),n.d(t,"d",function(){return F});var u=n(0),c=n.n(u),p=n(1329),d=n.n(p),m=n(1327),f=n.n(m),g=n(1328),h=n.n(g),y=n(1326),_=n.n(y),v=n(202),E=n.n(v),S=n(3516),T=n.n(S),b=n(3515),O=n.n(b),A=n(169),N=n(19),C=n.n(N),D=n(16),I=(n.n(D),n(313)),U=n(200),P=n(3360),w=function(e,t,n){var r=P.a.groupsByField(n);return r&&t.map(function(t){return r[t.name]===e?t.props.style={display:"block"}:t.props.style={display:"none"},t}),[].concat(a(t))},R=function(e){var t=e.steps,n=e.activeStep,r=e.stepperClicked,a=e.orientation,i=void 0===a?"horizontal":a;return c.a.createElement(d.a,{activeStep:n,linear:!1,orientation:i,style:{margin:"0 -16px"}},t.map(function(e,t){return c.a.createElement(_.a,{key:e.label},c.a.createElement(f.a,{onClick:function(){return r(t)}},c.a.createElement(A.a,null,e.label)))}))},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return function(a){var o=a.activeStep,l=a.stepperClicked,s=a.disabled,u=r(a,["activeStep","stepperClicked","disabled"]),p=function(e){var t=[];return t.push(c.a.createElement(f.a,{key:"button",onClick:function(){return l(e.key)}},c.a.createElement(A.a,null,e.name))),e.content&&t.push(c.a.createElement(h.a,{key:"content"},c.a.createElement(e.content,u))),t};return c.a.createElement(d.a,{linear:!1,orientation:t,activeStep:n.i(D.isNumber)(o)?o:void 0},e.map(function(e,t){return c.a.createElement(_.a,{key:e.key,active:i(o,e,t),disabled:!!s},p(e))}))}},V=function(e){return function(t){var n=t.activeStep,a=r(t,["activeStep"]),i=e.find(function(e){return e.key===n});return i&&i.component?c.a.createElement(i.component,a):(n?C.a.warn("Could not find a content component for a step with key ("+n+") in",e):C.a.warn("The `activeStep` prop is undefined, therefore the component created by `createStepperContentFromConfig` will render null"),null)}},G=function(e){return function(t){return n.i(U.a)(e,t)}},x=function(e){return n.i(I.a)(void 0,G({onForwardClick:e}))(l)},F=function(e){return n.i(I.a)(void 0,G({onBackClick:e}))(o)}},3344:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),l=n(440),s=n.n(l),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e){var t=function(t,n){var r=n.d2,i={getCurrentUser:function(){return r.currentUser},getModelDefinitionByName:function(e){return r.models[e]}};return a.a.createElement(e,u({},t,i))};return t.displayName="WithAuth("+s()(e)+")",t.contextTypes={d2:o.a.object},t};t.b=c},3345:function(e,t){e.exports={"/edit/categorySection/categoryOptionGroupSet":"/en/user/html/manage_category.html#create_category_option_group_set","/edit/categorySection/categoryOptionGroup":"/en/user/html/manage_category.html#create_category_option_group","/edit/categorySection/categoryOptionCombo":"/en/user/html/manage_category.html#assign_code_category_option_combo","/edit/categorySection/categoryOption":"/en/user/html/manage_category.html#create_category_option","/edit/categorySection/categoryCombo":"/en/user/html/manage_category.html#create_category_combination","/edit/categorySection/category":"/en/user/html/manage_category.html#create_category","/list/categorySection":"/en/user/html/manage_category.html","/edit/dataElementSection/dataElementGroupSet":"/en/user/html/manage_data_element.html#create_data_element_group_set","/edit/dataElementSection/dataElementGroup":"/en/user/html/manage_data_element.html#create_data_element_group","/edit/dataElementSection/dataElement":"/en/user/html/manage_data_element.html#create_data_element","/list/dataElementSection":"/en/user/html/manage_data_element.html","/edit/dataSetSection/dataSet/${objectId}/sections":"/en/user/html/manage_data_set.html#manage_section_form","/edit/dataSetSection/dataSet":"/en/user/html/manage_data_set.html#create_data_set","/list/dataSetSection/dataSet":"/en/user/html/manage_data_set.html","/edit/indicatorSection/programIndicatorGroup":"/en/user/html/configure_program_indicator.html#create_program_indicator_group","/list/indicatorSection/programIndicatorGroup":"/en/user/html/configure_program_indicator.html","/edit/indicatorSection/programIndicator":"/en/user/html/configure_program_indicator.html#create_program_indicator","/list/indicatorSection/programIndicator":"/en/user/html/configure_program_indicator.html","/edit/indicatorSection/indicatorGroupSet":"/en/user/html/manage_indicator.html#create_indicator_group_set","/edit/indicatorSection/indicatorGroup":"/en/user/html/manage_indicator.html#create_indicator_group","/edit/indicatorSection/indicatorType":"/en/user/html/manage_indicator.html#create_indicator_type","/edit/indicatorSection/indicator":"/en/user/html/manage_indicator.html#create_indicator","/list/indicatorSection":"/en/user/html/manage_indicator.html","/edit/organisationUnitSection/organisationUnitGroupSet":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group_set","/edit/organisationUnitSection/organisationUnitGroup":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group","/edit/organisationUnitSection/organisationUnitLevel":"/en/user/html/manage_organisation_unit.html#name_organisation_unit_level","/edit/organisationUnitSection/organisationUnit":"/en/user/html/manage_organisation_unit.html#create_organisation_unit","/list/organisationUnitSection":"/en/user/html/manage_organisation_unit.html","/edit/programSection/trackedEntityAttribute":"/en/user/html/configure_tracked_entity.html#create_tracked_entity_attribute","/edit/programSection/programRuleVariable":"/en/user/html/configure_program_rule.html#create_program_rule_variable","/edit/programSection/relationshipType":"/en/user/html/configure_relationship_type.html#create_relationship_type","/edit/programSection/trackedEntity":"/en/user/html/configure_tracked_entity.html#about_tracked_entity","/edit/programSection/programRule":"/en/user/html/configure_program_rule.html#create_program_rule","/edit/programSection/program":"/en/user/html/configure_event_program_in_maintenance_app.html#create_event_program","/list/programSection":"/en/user/html/configure_programs_in_maintenance_app.html","/edit/validationSection/validationNotificationTemplate":"/en/user/html/manage_validation_rule.html#create_validation_notification","/edit/validationSection/validationRuleGroup":"/en/user/html/manage_validation_rule.html#create_validation_rule_group","/edit/validationSection/validationRule":"/en/user/html/manage_validation_rule.html#create_validation_rule","/list/validationSection":"/en/user/html/manage_validation_rule.html","/edit/otherSection/legendSet":"/en/user/html/manage_legend.html#create_legend","/list/otherSection/legendSet":"/en/user/html/manage_legend.html","/edit/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html#create_push_report","/list/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html","/edit/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html#create_external_map_layer","/list/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html","/edit/otherSection/predictorGroup":"/en/user/html/manage_predictor.html#create_predictor_group","/list/otherSection/predictorGroup":"/en/user/html/manage_predictor.html","/edit/otherSection/optionGroupSet":"/en/user/html/manage_option_set.html#create_option_group_set","/list/otherSection/optionGroupSet":"/en/user/html/manage_option_set.html#create_option_group_set","/edit/otherSection/optionGroup":"/en/user/html/manage_option_set.html#create_option_group","/list/otherSection/optionGroup":"/en/user/html/manage_option_set.html#create_option_group","/edit/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html#create_${objectType}","/list/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html"}},3360:function(e,t,n){"use strict";var r=n(16),a=(n.n(r),n(1302)),i=new Map([["programRule",[{label:"enter_program_rule_details",fields:["program","programStage","name","description","priority"]},{label:"enter_program_rule_expression",fields:["condition"]},{label:"define_program_rule_actions",fields:["programRuleActions"]}]],["dataSetNotificationTemplate",[{label:"what_to_send",fields:["name","code","dataSets","messageTemplate"]},{label:"when_to_send_it",fields:["dataSetNotificationTrigger","relativeScheduledDays","sendStrategy"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels"]}]],["programNotificationTemplate",[{label:"what_to_send",fields:["name","messageTemplate"]},{label:"when_to_send_it",fields:["notificationTrigger","relativeScheduledDays"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels","recipientProgramAttribute","notifyUsersInHierarchyOnly","notifyParentOrganisationUnitOnly"]}]],["programStageNotificationTemplate",[{label:"what_to_send",fields:["name","messageTemplate"]},{label:"when_to_send_it",fields:["notificationTrigger","relativeScheduledDays"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels","recipientDataElement","recipientProgramAttribute","notifyUsersInHierarchyOnly","notifyParentOrganisationUnitOnly"]}]],["programIndicator",[{label:"program_indicator__details",fields:["program","name","shortName","code","style","description","decimals","aggregationType","analyticsType","analyticsPeriodBoundaries","displayInForm","legendSets","aggregateExportCategoryOptionCombo","aggregateExportAttributeOptionCombo"]},{label:"program_indicator__edit_expression",fields:["expression"]},{label:"program_indicator__edit_filter",fields:["filter"]}]]]);t.a={for:function(e){return this.isGroupedFields(e)?i.get(e):[{label:"details",fields:a.a.for(e)}]},isGroupedFields:function(e){return e&&i.has(e)},getStepLength:function(e){if(this.isGroupedFields(e)){return i.get(e).length}return 0},groupNoByName:function(e,t){if(this.isGroupedFields(t)){var a=i.get(t);return n.i(r.findIndex)(function(t){return t.fields.includes(e)},a)}return 0},groupNameByStep:function(e,t){if(this.isGroupedFields(t)){return i.get(t)[e].label}return""},groupsByField:function(e){if(this.isGroupedFields(e))return i.get(e).map(function(e){return e.fields}).reduce(function(e,t,n){return t.map(function(t){return e[t]=n}),e},{})}}},3380:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var a=e.level,i=e.schema,l=e.children,s=e.groupName,u=e.isDirtyHandler,g=e.skipTranslation,h=r(e,["level","schema","children","groupName","isDirtyHandler","skipTranslation"]);return o.a.createElement(c.a,f({},h,{level:a}),o.a.createElement(d.a,{onClick:function(){return n.i(m.b)("/list/"+s+"/"+i)},iconStyle:{top:3},isDirtyHandler:u}),g?l:t.d2.i18n.getTranslation(l),i&&o.a.createElement(p.a,{schema:i}))}var i=n(0),o=n.n(i),l=n(1),s=n.n(l),u=n(92),c=n(314),p=n(3334),d=n(3384),m=n(201),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={children:s.a.oneOfType([s.a.string,s.a.array]),level:s.a.number,isDirtyHandler:s.a.func,schema:s.a.string.isRequired,groupName:s.a.string.isRequired,skipTranslation:s.a.bool},a.defaultProps={isDirtyHandler:function(){},level:2,children:"",skipTranslation:!1},t.a=n.i(u.a)(a)},3381:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.props&&t.props.isRequired?e+" (*)":e}function i(e,t){var r=e.models[t];return Object.keys(r.attributeProperties).map(function(t){var a=r.attributeProperties[t];return n.i(D.a)({name:a.name,valueType:a.valueType,type:D.b.get(a.optionSet?"CONSTANT":a.valueType),required:Boolean(a.mandatory),fieldOptions:{labelText:a.name,options:a.optionSet?a.optionSet.options.map(function(e){return{name:e.displayName||e.name,value:e.code}}):[]}},r,e.models)})}function o(e,t){e.validators&&(e.validators=e.validators.map(function(e){return P({},e,{message:t.i18n.getTranslation(e.message)})}))}function l(e,t){e.translatedName=t.i18n.getTranslation(e.props.labelText),e.props.labelText=a(e.translatedName,e)}function s(e,t,n){if(N.a.isGroupedFields(t)&&"programNotificationTemplate"!==t){var r=N.a.groupNoByName(e.name,t),a=N.a.groupNameByStep(r,t);e.step=r+1+": "+n.i18n.getTranslation(a)}}function u(e,t,r){return function(a){if(!a||!a.trim())return Promise.resolve(!0);var i=t.filter().on(e.fieldOptions.referenceProperty).equals(a);return r&&(i=i.filter().on("id").notEqual(r)),i.list().then(function(e){return 0!==e.size?n.i(_.getInstance)().then(function(e){return e.i18n.getTranslation("value_not_unique")}).then(function(e){return Promise.reject(e)}):Promise.resolve(!0)})}}function c(e,t){return e.unique&&(e.asyncValidators=[u(e,t.modelDefinition,t.id)]),e}function p(e,t){return e.attributes&&new Set(Object.keys(e.attributes)).has(t.name)}function d(e,t){return e.map(function(e){return p(t,e)?P({},e,{value:t.attributes[e.name]}):P({},e,{value:t[e.name]})}).map(R).map(L(t))}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.identity,a=arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments[5];return r=r||S.identity,E()(function(l){return l.filter(function(e){return e.model}).combineLatest(y.Observable.fromPromise(w(e,t,a,o)),function(t,a){var l=d(a,t.model),s=i?n.i(I.a)(n.i(I.b)(o||e),r(l),t.model):l;return P({},t,{fieldConfigs:s})})})}function f(e,t,r,a,i){function o(e){var r=e.fieldConfigs,a=e.model,o=e.editFieldChanged,l=e.detailsFormStatusChange,s=void 0===l?S.noop:l,u=V(r,o),c=n.i(I.a)(n.i(I.b)(i||t),r,a);return h.a.createElement(T.a,{fields:c,onUpdateField:u,onUpdateFormStatus:s})}return n.i(S.compose)(E()(function(t){return t.combineLatest(e,function(e,t){return P({},e,{model:t})})}),m(t,r,void 0,a,!1,i))(o)}n.d(t,"a",function(){return w}),t.b=c,t.c=m,t.e=f,n.d(t,"d",function(){return G});var g=n(0),h=n.n(g),y=n(25),_=(n.n(y),n(18)),v=(n.n(_),n(718)),E=n.n(v),S=n(16),T=(n.n(S),n(1305)),b=n(1323),O=n(1324),A=n(1302),N=n(3360),C=n(1321),D=n(722),I=n(3477),U=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=function(){var e=r(regeneratorRuntime.mark(function e(t,r){var a,u,c,p,d,m,f,g,h,y,v,E=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(_.getInstance)();case 2:for(a=e.sent,u=new O.a(new b.a(a.models)),u.setFieldOrder(r||A.a.for(t)),c=!0,p=!1,d=void 0,e.prev=8,m=C.a.for(S||t)[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)g=f.value,h=U(g,2),y=h[0],v=h[1],u.addFieldOverrideFor(y,v);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),p=!0,d=e.t0;case 16:e.prev=16,e.prev=17,!c&&m.return&&m.return();case 19:if(e.prev=19,!p){e.next=22;break}throw d;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",u.getFormFieldsForModel({modelDefinition:a.models[t]},S).map(function(e){return o(e,a),s(e,t,a),l(e,a),e}).concat(E?i(a,t):[]));case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(t,n){return e.apply(this,arguments)}}(),R=function(e){return e.beforePassToFieldConverter?P({},e,{value:e.beforePassToFieldConverter(e.value)}):e},L=function(e){return function(t){return P({},t,{props:P({},t.props,{model:e})})}},V=function(e,t){return function(n,r){var a=e.find(function(e){return e.name===n}),i=a.beforeUpdateConverter||S.identity;return t(n,i(r))}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){return t.length<1||t.includes(n.name)?P({},n,{props:P({},n.props,e)}):n}}},3384:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var n=e.tooltip,a=e.onClick,i=e.isDirtyHandler,l=void 0===i?c.a.getState.bind(c.a):i,u=r(e,["tooltip","onClick","isDirtyHandler"]),d=function(){l&&l()&&l().dirty?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&a.apply(void 0,arguments):a.apply(void 0,arguments)};return o.a.createElement(s.a,p({tooltip:n||t.d2.i18n.getTranslation("back"),tooltipPosition:"bottom-right",onClick:d},u,{iconClassName:"material-icons"}),"î—„")}var i=n(0),o=n.n(i),l=n(202),s=n.n(l),u=n(92),c=n(243),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={tooltip:o.a.PropTypes.string},t.a=n.i(u.a)(a)},3385:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var n=t.d2,a=e.label,i=e.isSaving,l=(e.isValid,e.onClick),s=r(e,["label","isSaving","isValid","onClick"]),u=a||(i?n.i18n.getTranslation("saving"):n.i18n.getTranslation("save"));return o.a.createElement(c.a,d({},s,{primary:!0,onClick:l,label:u,disabled:i}))}var i=n(0),o=n.n(i),l=n(1),s=n.n(l),u=n(199),c=n.n(u),p=n(92),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={label:s.a.string,isSaving:s.a.bool,isValid:s.a.bool,onClick:s.a.func.isRequired},a.defaultProps={label:"",isSaving:!1,isValid:!0},t.a=n.i(p.a)(a)},3476:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var n=e.onClick,a=(e.isPristine,e.isDirtyHandler),i=void 0===a?c.a.getState.bind(c.a):a,l=r(e,["onClick","isPristine","isDirtyHandler"]),u=i&&i()&&i().dirty,d=function(){u?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&n.apply(void 0,arguments):n.apply(void 0,arguments)};return o.a.createElement(s.a,p({},l,{onClick:d,secondary:u,label:t.d2.i18n.getTranslation("cancel")}))}var i=n(0),o=n.n(i),l=n(72),s=n.n(l),u=n(92),c=n(243),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={onClick:o.a.PropTypes.func.isRequired,isDirtyHandler:o.a.PropTypes.func},t.a=n.i(u.a)(a)},3477:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){return U.a.has(e)?U.a.get(e):[]}function i(e,t,n,r){n&&t.setValue(r,e)}function o(e,t,n){if(e)return e.props[t.propName]=n?t.thenValue:t.elseValue}function l(e,t,n){n&&e?(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null}):e&&e.hiddenComponent&&(e.component=e.hiddenComponent,delete e.hiddenComponent)}function s(e,t,n){n&&e.hiddenComponent?(e.component=e.hiddenComponent,delete e.hiddenComponent):(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null})}function u(e){return R.has(e)?R.get(e):N.a}function c(e){return w.has(e)?w.get(e):N.a}function p(e){return void 0!==e&&null!==e}function d(e){return p(e)&&e.toString().trim().length>0}function m(e,t){return e===t}function f(e,t){return e!==t}function g(e,t){return t.indexOf(e)>=0}function h(e,t){return t.indexOf(e)<0}function y(e,t){return t(e)}function _(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){return!1}}function v(e,t,n){return n.hasOwnProperty("hiddenComponent")}function E(e,t){return!0===(P.a.getState()?P.a.getState()[t]:void 0)}function S(e,t){return!1===(P.a.getState()?P.a.getState()[t]:void 0)}function T(e,t,n){var r=e.whenFieldName,a=e.operatorFn,i=e.whenValue;return a(n[r],i,t,n,r)}function b(e,t,n,r){return e.map(function(e,a){var i=r.find(function(n){return n.name===(e.field||t.field)});return T({whenFieldName:e.field?e.field:t.field,operatorFn:c(e.operator),whenValue:e.value},i,n)})}function O(e,t,n){return e.forEach(function(e){var a=I()(e.when)?e.when:[e.when],i=b(a,e,n,t).some(function(e){return!0===e});(e.operations||[e.operation]).forEach(function(a){var o=t.find(function(t){return t.name===(a.field||e.field)}),l=(a.field,a.type),s=r(a,["field","type"]);u(l)(o,s,i,n)})}),t}t.b=a,t.a=O;var A=n(447),N=n.n(A),C=n(16),D=(n.n(C),n(168)),I=n.n(D),U=n(3507),P=n(450),w=new Map([["EQUALS",m],["NOT_EQUALS",f],["HAS_VALUE",p],["HAS_NO_VALUE",n.i(C.negate)(p)],["HAS_STRING_VALUE",d],["ONEOF",g],["NONEOF",h],["SYSTEM_SETTING_IS_TRUE",E],["SYSTEM_SETTING_IS_FALSE",S],["IS_VALID_POINT",_],["IS_HIDDEN_FIELD",v],["PREDICATE",y]]),R=new Map([["SET_PROP",o],["CHANGE_VALUE",i],["HIDE_FIELD",l],["SHOW_FIELD",s]])},3481:function(e,t,n){"use strict";function r(e){var t={marginTop:"1rem"},n={marginRight:"1rem",width:"10rem"},r=l()(e.children)?e.children:[e.children];return i.a.createElement("div",{style:Object.assign(t,e.style)},r.map(function(e,t){return i.a.cloneElement(e,{style:n,key:t})}))}t.a=r;var a=n(0),i=n.n(a),o=n(168),l=n.n(o);r.propTypes={style:i.a.PropTypes.object,children:i.a.PropTypes.oneOfType([i.a.PropTypes.array,i.a.PropTypes.object]).isRequired,isFormValid:i.a.PropTypes.func}},3506:function(e,t,n){"use strict";function r(e,t){var r={enrollment:[{analyticsPeriodBoundaryType:o.g,boundaryTarget:o.c},{analyticsPeriodBoundaryType:o.f,boundaryTarget:o.c}],event:[{analyticsPeriodBoundaryType:o.g,boundaryTarget:o.b},{analyticsPeriodBoundaryType:o.f,boundaryTarget:o.b}]};return t&&function(e){return!n.i(i.isEqual)(e,r.event)&&!n.i(i.isEqual)(e,r.enrollment)}(t)?t:r[e]}function a(e,t){return{field:e,when:[{operator:"EQUALS",value:void 0}],operations:[{type:"CHANGE_VALUE",setValue:function(e,n){n&&(n.value=t,e[n.name]=t)}}]}}t.b=r,t.a=a;var i=n(16),o=(n.n(i),n(1322))},3507:function(e,t,n){"use strict";function r(e,t){e.optionSet&&e.optionSet.valueType&&(t.value=e.optionSet.valueType,e[t.name]!==e.optionSet.valueType&&(e[t.name]=e.optionSet.valueType))}var a=n(3506);t.a=new Map([["dataElement",[{field:"domainType",when:{operator:"EQUALS",value:"TRACKER"},operations:[{field:"categoryCombo",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:r}]},{field:"aggregationType",when:{field:"valueType",operator:"ONEOF",value:["TEXT","LONG_TEXT","LETTER","PHONE_NUMBER","EMAIL","TRACKER_ASSOCIATE","USERNAME","FILE_RESOURCE","COORDINATE"]},operations:[{field:"aggregationType",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"aggregationType",type:"CHANGE_VALUE",setValue:function(e,t){t.value="NONE",e[t.name]="NONE"}}]}]],["dataSetNotificationTemplate",[{when:[{field:"dataSetNotificationTrigger",operator:"NOT_EQUALS",value:"SCHEDULED_DAYS"}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"},{field:"sendStrategy",type:"HIDE_FIELD"}]},{field:"deliveryChannels",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"ORGANISATION_UNIT_CONTACT"}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]}]],["attribute",[{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:r}]}]],["trackedEntityAttribute",[{field:"unique",when:[{field:"valueType",operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{field:"unique",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"unique",type:"CHANGE_VALUE",setValue:function(e,t){t.value=!1,e.unique=!1}}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:r}]},{field:"orgunitScope",when:[{field:"unique",operator:"NOT_EQUALS",value:!0},{field:"valueType",operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{type:"HIDE_FIELD"}]},{field:"generated",when:[{field:"orgunitScope",operator:"IS_HIDDEN_FIELD"},{field:"orgunitScope",operator:"ONEOF",value:["organisation_unit"]},{field:"orgunitScope",operator:"EQUALS",value:!0}],operations:[{type:"HIDE_FIELD"},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=!1,e.generated=!1}}]},{field:"pattern",when:[{field:"generated",operator:"IS_HIDDEN_FIELD"},{field:"generated",operator:"NOT_EQUALS",value:!0}],operations:[{type:"HIDE_FIELD"},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=null,e.pattern=null}}]}]],["externalMapLayer",[{field:"legendSetUrl",when:[{field:"legendSet",operator:"HAS_VALUE"}],operations:[{field:"legendSetUrl",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"legendSet",when:[{field:"legendSetUrl",operator:"HAS_STRING_VALUE"}],operations:[{field:"legendSet",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["organisationUnit",[{field:"dataSets",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"dataSets",type:"HIDE_FIELD"}]},{field:"programs",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"programs",type:"HIDE_FIELD"}]}]],["programRule",[{field:"name",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"description",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"priority",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"condition",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"programRuleActions",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]}]],["programRuleVariable",[{field:"program",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"},{field:"trackedEntityAttribute",operator:"HAS_STRING_VALUE"},{field:"programStage",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"dataElement",when:[{field:"programRuleVariableSourceType",operator:"ONEOF",value:["CALCULATED_VALUE","TEI_ATTRIBUTE"]}],operations:[{field:"dataElement",type:"HIDE_FIELD"}]},{field:"trackedEntityAttribute",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"TEI_ATTRIBUTE"}],operations:[{field:"trackedEntityAttribute",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE"}],operations:[{field:"programStage",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["programStage",[{field:"autoGenerateEvent",when:[{field:"autoGenerateEvent",operator:"NOT_EQUALS",value:!0}],operations:[{field:"openAfterEnrollment",type:"HIDE_FIELD"},{field:"reportDateToUse",type:"HIDE_FIELD"}]},{field:"reportDateToUse",when:[{field:"openAfterEnrollment",operator:"NOT_EQUALS",value:!0}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["eventProgramStage",[n.i(a.a)("validationStrategy","ON_COMPLETE")]],["programIndicator",[{field:"analyticsPeriodBoundaries",when:[{field:"analyticsType",operator:"EQUALS",value:"EVENT"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t&&(t.value=n.i(a.b)("event",t.value),e[t.name]=n.i(a.b)("event",t.value))}}]},{field:"analyticsPeriodBoundaries",when:[{field:"analyticsType",operator:"EQUALS",value:"ENROLLMENT"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t&&(t.value=n.i(a.b)("enrollment",t.value),e[t.name]=n.i(a.b)("enrollment",t.value))}}]}]],["programStageNotificationTemplate",[{field:"notificationTrigger",when:[{field:"notificationTrigger",operator:"NOT_EQUALS",value:"SCHEDULED_DAYS_DUE_DATE"}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NONEOF",value:["TRACKED_ENTITY_INSTANCE","ORGANISATION_UNIT_CONTACT"]}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"DATA_ELEMENT"}],operations:[{field:"recipientDataElement",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"PROGRAM_ATTRIBUTE"}],operations:[{field:"recipientProgramAttribute",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyUsersInHierarchyOnly",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyParentOrganisationUnitOnly",type:"HIDE_FIELD"}]},{field:"notifyUsersInHierarchyOnly",when:[{field:"notifyParentOrganisationUnitOnly",operator:"EQUALS",value:!0}],operations:[{field:"notifyUsersInHierarchyOnly",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"notifyParentOrganisationUnitOnly",when:[{field:"notifyUsersInHierarchyOnly",operator:"EQUALS",value:!0}],operations:[{field:"notifyParentOrganisationUnitOnly",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["programNotificationTemplate",[{field:"notificationTrigger",when:[{field:"notificationTrigger",operator:"NONEOF",value:["SCHEDULED_DAYS_INCIDENT_DATE","SCHEDULED_DAYS_ENROLLMENT_DATE"]}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NONEOF",value:["TRACKED_ENTITY_INSTANCE","ORGANISATION_UNIT_CONTACT"]}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"PROGRAM_ATTRIBUTE"}],operations:[{field:"recipientProgramAttribute",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyUsersInHierarchyOnly",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"USER_GROUP"}],operations:[{field:"notifyParentOrganisationUnitOnly",type:"HIDE_FIELD"}]}]],["categoryCombo",[{field:"dataDimensionType",when:[{field:"dataDimensionType",operator:"HAS_NO_VALUE"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.name]="DISAGGREGATION"}}]}]],["sqlView",[{field:"name",when:{field:"id",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"type",when:{field:"id",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["relationshipType",[{field:"toFromName",when:{field:"bidirectional",operator:"NOT_EQUALS",value:!0},operations:[{type:"HIDE_FIELD"}]}]],["dataSet",[{field:"openPeriodsAfterCoEndDate",when:{field:"categoryCombo",operator:"PREDICATE",value:function(e){return e&&"default"===e.name}},operations:[{type:"HIDE_FIELD"}]}]]])},3515:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(a),o=n(41),l=r(o),s=n(42),u=r(s),c=function(e){return i.default.createElement(u.default,e,i.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))};c=(0,l.default)(c),c.displayName="NavigationArrowBack",c.muiName="SvgIcon",t.default=c},3516:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(a),o=n(41),l=r(o),s=n(42),u=r(s),c=function(e){return i.default.createElement(u.default,e,i.default.createElement("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}))};c=(0,l.default)(c),c.displayName="NavigationArrowForward",c.muiName="SvgIcon",t.default=c},3675:function(e,t,n){"use strict";function r(e,t){var n=t.getStateClone(),r=p(e,t,n);return r?(t.setState(n),c(r)):""}t.a=r;var a=n(16),i=(n.n(a),function(e){return!0!==e}),o=function(e){return!0===n.i(a.get)("isRequired",e.fieldOptions)},l=function(e){return e.value},s=function(e){return o(e)||l(e)},u=function(e,t,n){var r=t.validateField(n,e.name,e.value);return{invalid:i(r),step:e.step,name:e.translatedName,message:r}},c=function(e){var t=e.step?": "+e.name+". On step "+e.step:"";return""+e.message+t},p=function(e,t,n){return e.filter(function(e){return s(e)}).map(function(e){return u(e,t,n)}).find(function(e){return e.invalid})}},3699:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(u.a,null))}function i(e,t){return e.map(function(e){return e.value}).find(function(e){return-1!==Array.from(t.indicatorGroups.values()).map(function(e){return e.id}).indexOf(e)})}var o=n(0),l=n.n(o),s=n(18),u=(n.n(s),n(167)),c=n(83),p=n(1337);t.a=l.a.createClass({displayName:"DataIndicatorGroupsAssignment.component",propTypes:{source:l.a.PropTypes.object.isRequired},getInitialState:function(){return p.a.setState({indicatorGroupValues:{},remove:[],save:[]}),{indicatorGroupSets:null}},componentDidMount:function(){var e=this;n.i(s.getInstance)().then(function(e){return e.Api.getApi().get("indicatorGroupSets",{fields:"id,displayName,indicatorGroups[id,displayName]",filter:["compulsory:eq:true"],paging:!1})}).then(function(e){return e.indicatorGroupSets}).then(function(t){return e.setState({indicatorGroupSets:t})}),this.subscription=p.a.subscribe(function(){return e.forceUpdate()})},componentWillUnmount:function(){this.subscription&&this.subscription&&this.subscription.unsubscribe()},render:function(){var e=this;return this.state.indicatorGroupSets?l.a.createElement("div",null,this.state.indicatorGroupSets.map(function(t,n){var r=t.indicatorGroups.map(function(e){return{value:e.id,text:e.displayName}}),a=Object.prototype.hasOwnProperty.call(p.a.state.indicatorGroupValues,t.id)?p.a.state.indicatorGroupValues[t.id]:i(r,e.props.source);return l.a.createElement("div",{key:"dataIndicatorGroupAssignment"+n},l.a.createElement(c.a,{key:t.id,labelText:t.displayName,translateLabel:!1,options:r,value:a,onChange:e._updateGroupStatus.bind(e,t.id,i(r,e.props.source)),fullWidth:!0}))})):a()},_updateGroupStatus:function(e,t,n){this.props.source.dirty=!0,p.a.setState({indicatorGroupValues:Object.assign({},p.a.state.indicatorGroupValues,r({},e,n.target.value?n.target.value:null)),remove:Array.from(new Set(p.a.state.remove.concat([t])).values())})}})},3700:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(19),o=n.n(i),l=n(25),s=(n.n(l),n(18)),u=(n.n(s),n(167)),c=n(1304),p=n(1305),d=n(3385),m=n(3476),f=n(3702),g=n(3481),h=n(3360),y=n(3707),_=n(3717),v=n(243),E=n(116),S=n(81),T=n(133),b=n(3381),O=n(3477),A=n(3708),N=n(3343),C=n(3675),D=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I=T.b.filter(function(e){return e.sideBar&&e.sideBar.currentSection}).map(function(e){return e.sideBar.currentSubSection}).filter(function(e){return e}).distinctUntilChanged(),U=I.flatMap(function(e){return l.Observable.fromPromise(n.i(b.a)(e))}),P=function(e){return void 0===e.id},w=l.Observable.fromPromise(n.i(s.getInstance)()),R=l.Observable.combineLatest(v.a,U,I,w).filter(function(e){var t=D(e,3),n=t[0],r=(t[1],t[2]);return!!(n&&n.modelDefinition&&n.modelDefinition.name)&&n.modelDefinition.name===r}).map(function(e){var t=D(e,4),r=t[0],a=t[1],i=t[2],o=(t[3],a.map(function(e){return e.fieldOptions.model=r,P(r)||-1===_.a.for(i).indexOf(e.name)||(e.props.disabled=!0),Object.keys(r.attributes||[]).indexOf(e.name)>=0?(e.value=r.attributes[e.name],e):(e.beforePassToFieldConverter?e.value=e.beforePassToFieldConverter(r[e.name]):e.value=r[e.name],e)}));return{fieldConfigs:[].concat(n.i(O.a)(n.i(O.b)(r.modelDefinition.name),o,r),(y.a[i]||[]).map(function(e){return e.props=e.props||{},e.props.modelToEdit=r,e})).map(function(e){return n.i(b.b)(e,r)}),modelToEdit:r,isLoading:!1}});t.a=a.a.createClass({displayName:"EditModelForm.component",propTypes:{modelId:a.a.PropTypes.string.isRequired,modelType:a.a.PropTypes.string.isRequired,onSaveSuccess:a.a.PropTypes.func.isRequired,onSaveError:a.a.PropTypes.func,onCancel:a.a.PropTypes.func.isRequired},mixins:[c.a],getInitialState:function(){return{modelToEdit:void 0,isLoading:!0,formState:{validating:!1,valid:!0,pristine:!0},activeStep:0}},isAddOperation:function(){return"add"===this.props.modelId},componentWillMount:function(){var e=this;this.subscription=R.subscribe(function(t){e.setState(t),e.setActiveStep(e.state.activeStep)},function(e){S.a.show({message:e,action:"ok"})})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe(),this.saveSubscription&&this.saveSubscription.unsubscribe()},setActiveStep:function(e){this.setState({activeStep:e,fieldConfigs:n.i(N.a)(e,this.state.fieldConfigs,this.props.modelType)})},setFormRef:function(e){this.formRef=e},_onUpdateField:function(e,t){var n=this.state.fieldConfigs.find(function(t){return t.name===e});return n&&n.beforeUpdateConverter?E.a.update({fieldName:e,value:n.beforeUpdateConverter(t)}):E.a.update({fieldName:e,value:t})},_onUpdateFormStatus:function(e){this.setState({formState:e})},saveSuccess:function(e){S.a.show({message:e,translate:!0}),this.props.onSaveSuccess(this.state.modelToEdit)},saveFail:function(e){if(this.setState({isSaving:!1}),200===e.httpStatusCode)o.a.warn("Save errored due to empty 200 OK body"),S.a.show({message:"success",action:"ok",translate:!0}),this.props.onSaveSuccess(this.state.modelToEdit);else{var t=void 0;t="string"==typeof e?e:n.i(A.a)(e),S.a.show({message:t,action:"ok"}),this.props.onSaveError&&this.props.onSaveError(e),o.a.error(e)}},_saveAction:function(e){var t=this;e.preventDefault();var r=n.i(C.a)(this.state.fieldConfigs,this.formRef);if(r)return void S.a.show({message:r,action:"ok"});this.setState({isSaving:!0}),this.saveSubscription=E.a.saveObject({id:this.props.modelId,modelType:this.props.modelType}).subscribe(this.saveSuccess,this.saveFail,function(){return t.setState({isSaving:!1})})},_closeAction:function(e){e.preventDefault(),this.props.onCancel()},renderSharingNotification:function(){var e={width:"100%",margin:"0 auto 3rem",position:"relative"};return this.isAddOperation()?a.a.createElement(f.a,{style:e,modelType:this.props.modelType}):null},renderStepper:function(){var e=h.a.for(this.props.modelType);return e.length>1&&n.i(N.b)({steps:e,activeStep:this.state.activeStep,stepperClicked:this.setActiveStep})},renderForm:function(){var e={width:"100%",margin:"0 auto 2rem",padding:"2rem 5rem 4rem",position:"relative"};return this.state.isLoading?a.a.createElement(u.a,null):a.a.createElement("div",{style:e},this.renderStepper(),this.renderSharingNotification(),a.a.createElement(p.a,{fields:this.state.fieldConfigs,onUpdateField:this._onUpdateField,onUpdateFormStatus:this._onUpdateFormStatus,ref:this.setFormRef}),a.a.createElement(g.a,null,a.a.createElement(d.a,{onClick:this._saveAction,isValid:this.state.formState.valid&&!this.state.formState.validating,isSaving:this.state.isSaving}),a.a.createElement(m.a,{onClick:this._closeAction})))},render:function(){return this.state.loading?a.a.createElement("div",null,"Loading data...."):this.renderForm()}})},3701:function(e,t,n){"use strict";var r=n(25),a=(n.n(r),n(18)),i=(n.n(a),n(112)),o=n(734),l=n(0),s=n.n(l),u=n(1304),c=n(3722),p=n(735),d=n.i(p.a)("indicators/expression/description");i.a.createActionsFromNames(["requestExpressionStatus"]).requestExpressionStatus.debounceTime(500).map(function(e){var t=encodeURIComponent(e.data),i="expressions/description?expression="+t,o=n.i(a.getInstance)().then(function(e){return e.Api.getApi().get(i)});return r.Observable.fromPromise(o)}).concatAll().subscribe(function(e){c.a.setState(e)});var m=s.a.createClass({displayName:"IndicatorExpressionManagerContainer",propTypes:{indicatorExpressionChanged:s.a.PropTypes.func.isRequired,description:s.a.PropTypes.string,formula:s.a.PropTypes.string,titleText:s.a.PropTypes.string},mixins:[u.a],getInitialState:function(){return{organisationUnitGroups:[],constants:[],programTrackedEntityAttributes:[],programIndicators:[],programDataElements:[]}},componentDidMount:function(){var e=this;n.i(a.getInstance)().then(function(e){return e.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"})}).then(function(e){return e.toArray().map(function(e){return{value:e.id,label:e.displayName}})}).then(function(t){return e.setState({organisationUnitGroups:t})}),n.i(a.getInstance)().then(function(e){return e.models.constant.list({paging:!1,fields:"id,displayName"})}).then(function(e){return e.toArray().map(function(e){return{value:e.id,label:e.displayName}})}).then(function(t){return e.setState({constants:t})}),this.refs.expressionManager.requestExpressionStatus()},getExpressionManager:function(){return this.refs.expressionManager},render:function(){return s.a.createElement(o.a,{descriptionLabel:this.getTranslation("description"),descriptionValue:this.props.description,formulaValue:this.props.formula,expressionStatusStore:c.a,expressionChanged:this.props.indicatorExpressionChanged,titleText:this.props.titleText,validateExpression:d,ref:"expressionManager",expressionType:"indicator"})}});t.a=m},3702:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(1304),o=n(719),l=n.n(o),s=n(315),u=n.n(s),c=n(3344),p=a.a.createClass({displayName:"SharingNotification",propTypes:{modelType:a.a.PropTypes.string,style:a.a.PropTypes.object},mixins:[i.a],render:function(){var e=this.props.getModelDefinitionByName(this.props.modelType),t=this.props.getCurrentUser().canCreatePublic(e),n=this.props.getCurrentUser().canCreatePrivate(e),r=Object.assign({},this.props.style,{background:"none",margin:"14px 0 0 -4px"}),i={verticalAlign:"super",lineHeight:"24px",paddingLeft:".5rem"},o=null;return t?o=a.a.createElement(u.a,{style:r,zDepth:0},a.a.createElement(l.a,{className:"material-icons"},"lock_open"),a.a.createElement("span",{style:i},this.getTranslation("object_will_created_public"))):n&&(o=a.a.createElement(u.a,{style:r,zDepth:0},a.a.createElement(l.a,{className:"material-icons"},"lock"),a.a.createElement("span",{style:i},this.getTranslation("object_will_created_private")))),o}});t.a=n.i(c.a)(p)},3703:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(u.a,null))}function i(e,t){return e.map(function(e){return e.value}).find(function(e){return-1!==Array.from(t.dataElementGroups.values()).map(function(e){return e.id}).indexOf(e)})}var o=n(0),l=n.n(o),s=n(18),u=(n.n(s),n(167)),c=n(83),p=n(1333);t.a=l.a.createClass({displayName:"DataElementGroupsAssignment.component",propTypes:{source:l.a.PropTypes.object.isRequired},getInitialState:function(){return p.a.setState({dataElementGroupValues:{},remove:[],save:[]}),{dataElementGroupSets:null}},componentDidMount:function(){var e=this;n.i(s.getInstance)().then(function(e){return e.Api.getApi().get("dataElementGroupSets",{fields:"id,displayName,dataElementGroups[id,displayName]",filter:["compulsory:eq:true"],paging:!1})}).then(function(e){return e.dataElementGroupSets}).then(function(t){return e.setState({dataElementGroupSets:t})}),this.subscription=p.a.subscribe(function(){return e.forceUpdate()})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe&&this.subscription.unsubscribe()},_updateGroupStatus:function(e,t,n){this.props.source.dirty=!0,p.a.setState({dataElementGroupValues:Object.assign({},p.a.state.dataElementGroupValues,r({},e,n.target.value?n.target.value:null)),remove:Array.from(new Set(p.a.state.remove.concat([t])).values())})},render:function(){var e=this;return this.state.dataElementGroupSets?l.a.createElement("div",null,this.state.dataElementGroupSets.map(function(t){var n=t.dataElementGroups.map(function(e){return{value:e.id,text:e.displayName}}),r=Object.prototype.hasOwnProperty.call(p.a.state.dataElementGroupValues,t.id)?p.a.state.dataElementGroupValues[t.id]:i(n,e.props.source);return l.a.createElement("div",{key:t.id},l.a.createElement(c.a,{labelText:t.displayName,translateLabel:!1,options:n,value:r,onChange:e._updateGroupStatus.bind(e,t.id,i(n,e.props.source)),fullWidth:!0}))})):a()}})},3707:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),l=n.n(o),s=n(436),u=n.n(s),c=n(199),p=n.n(c),d=n(150),m=n.n(d),f=n(92),g=n(3701),h=n(243),y=n(3699),_=n(3703),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S={saveButton:{marginRight:"1rem"},customContentStyle:{width:"95%",maxWidth:"none"}},T=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={dialogValid:!0,dialogOpen:!1},i.setNumerator=i.setNumerator.bind(i),i.setDenominator=i.setDenominator.bind(i),i.closeDialog=i.closeDialog.bind(i),i.saveToModelAndCloseDialog=i.saveToModelAndCloseDialog.bind(i),i.indicatorExpressionChanged=i.indicatorExpressionChanged.bind(i),i}return i(t,e),E(t,[{key:"setNumerator",value:function(){this.setState({type:"numerator",dialogOpen:!0})}},{key:"setDenominator",value:function(){this.setState({type:"denominator",dialogOpen:!0})}},{key:"closeDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"saveToModelAndCloseDialog",value:function(){this.state.expressionStatus.isValid&&(this.props.modelToEdit[this.state.type]=this.state.expressionFormula,this.props.modelToEdit[this.state.type+"Description"]=this.state.expressionDescription,h.a.setState(this.props.modelToEdit)),this.setState({dialogOpen:!1})}},{key:"indicatorExpressionChanged",value:function(e){var t={};e.expressionStatus.isValid&&(t.expressionStatus=e.expressionStatus,t.expressionDescription=e.description,t.expressionFormula=e.formula),this.setState(v({dialogValid:e.expressionStatus.isValid&&Boolean(e.description.trim())},t))}},{key:"renderExpressionManager",value:function(){return l.a.createElement(g.a,{indicatorExpressionChanged:this.indicatorExpressionChanged,formula:this.props.modelToEdit[this.state.type]||"",description:this.props.modelToEdit[this.state.type+"Description"]||"",ref:"expressionManagerContainer"})}},{key:"render",value:function(){var e=this.context.d2,t=[l.a.createElement(m.a,{label:e.i18n.getTranslation("cancel"),onTouchTap:this.closeDialog}),l.a.createElement(m.a,{label:e.i18n.getTranslation("done"),onTouchTap:this.saveToModelAndCloseDialog,disabled:!this.state.dialogValid})];return l.a.createElement("div",null,l.a.createElement("div",{style:{marginTop:"2rem"}},l.a.createElement(p.a,{label:e.i18n.getTranslation("edit_numerator"),onClick:this.setNumerator,style:{marginRight:"2rem"}}),l.a.createElement(p.a,{label:e.i18n.getTranslation("edit_denominator"),onClick:this.setDenominator}),l.a.createElement(u.a,{title:e.i18n.getTranslation("edit_"+this.state.type),open:this.state.dialogOpen,modal:!0,actions:t,contentStyle:S.customContentStyle,autoScrollBodyContent:!0,repositionOnUpdate:!1},this.state?this.renderExpressionManager():null)),l.a.createElement("div",{style:{marginTop:"2rem"}},l.a.createElement(y.a,{source:this.props.modelToEdit})))}}]),t}(l.a.Component);T.propTypes={modelToEdit:l.a.PropTypes.object.isRequired},t.a={dataElement:[{name:"dataElementGroupAssignment",component:function(e){return l.a.createElement("div",{style:{marginTop:"2rem"}},l.a.createElement(_.a,{source:e.modelToEdit}))}}],indicator:[{name:"indicatorGroupAssignmentAndGroupAssignments",component:n.i(f.a)(T)}]}},3708:function(e,t,n){"use strict";function r(e){var t=[i(e),o(e)];return l(t)}t.a=r;var a=n(16),i=(n.n(a),n.i(a.compose)(n.i(a.get)("message"),a.first,n.i(a.getOr)([],"errorReports"),n.i(a.get)("response"))),o=n.i(a.compose)(n.i(a.get)("message"),a.first,n.i(a.get)("messages")),l=n.i(a.compose)(a.first,n.i(a.filter)(a.identity))},3712:function(e,t,n){"use strict";t.a=["dataDimensionType"]},3713:function(e,t,n){"use strict";t.a=["dataDimensionType"]},3714:function(e,t,n){"use strict";t.a=["name"]},3715:function(e,t,n){"use strict";t.a=["dataDimensionType"]},3716:function(e,t,n){"use strict";t.a=["dataDimensionType"]},3717:function(e,t,n){"use strict";var r=n(3712),a=n(3713),i=n(3714),o=n(3715),l=n(3716),s=n(3720),u=n(3721),c=n(3718),p=n(3719),d={category:r.a,categoryCombo:a.a,categoryOptionCombo:i.a,categoryOptionGroup:o.a,categoryOptionGroupSet:l.a,optionSet:s.a,programRule:u.a,optionGroup:c.a,optionGroupSet:p.a};t.a={for:function(e){return e&&d[e]?d[e]:[]}}},3718:function(e,t,n){"use strict";t.a=["optionSet"]},3719:function(e,t,n){"use strict";t.a=["optionSet"]},3720:function(e,t,n){"use strict";t.a=["valueType"]},3721:function(e,t,n){"use strict";t.a=["program"]},3722:function(e,t,n){"use strict";var r=n(48);t.a=r.a.create()},3851:function(e,t,n){"use strict";function r(e){return i.a.createElement(l.a,null,i.a.createElement(s.a,c({},e,{onCancel:function(){return n.i(u.b)("/list/"+e.groupName+"/"+e.modelType)},onSaveSuccess:function(){return n.i(u.b)("/list/"+e.groupName+"/"+e.modelType)}})))}t.a=r;var a=n(0),i=n.n(a),o=n(315),l=n.n(o),s=n(3700),u=n(201),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},740:function(e,t,n){"use strict";function r(e){var t=e.params.modelType||"organisationUnit";return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:"1rem"}},i.a.createElement(c.a,{schema:t,groupName:e.params.groupName},n.i(s.camelCaseToUnderscores)(t))),i.a.createElement(u.a,{groupName:e.params.groupName,modelType:t,modelId:e.params.modelId}))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n.n(a),o=n(1),l=n.n(o),s=n(720),u=(n.n(s),n(3851)),c=n(3380);r.propTypes={params:l.a.any.isRequired},t.default=r}});
//# sourceMappingURL=0-a931f4d56e3ff9c41fd2.js.map