{"version":3,"sources":["webpack:///12-4c6892cb7b2d8482404d.js","webpack:///./~/d2-ui/lib/headings/Heading.component.js?d681*********","webpack:///./src/App/AccessDenied.component.js","webpack:///./src/OrganisationUnitHierarchy/OrganisationUnitHierarchy.component.js"],"names":["webpackJsonp","1974","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__OrganisationUnitHierarchy_component__","d","1979","_objectWithoutProperties","obj","keys","target","i","indexOf","prototype","hasOwnProperty","call","Heading","props","level","text","style","children","other","tag","type","headingStyle","_extends","fontSize","fontWeight","color","padding","margin","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","__WEBPACK_IMPORTED_MODULE_0_react__","n","__WEBPACK_IMPORTED_MODULE_1_prop_types__","__WEBPACK_IMPORTED_MODULE_1_prop_types___default","assign","arguments","length","source","key","propTypes","oneOf","string","defaultProps","2472","AccessDenied","__WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_headings_Heading_component__","2520","_toConsumableArray","arr","Array","isArray","arr2","from","_asyncToGenerator","fn","gen","apply","this","Promise","resolve","reject","step","arg","info","error","done","then","err","_defineProperty","enumerable","configurable","writable","identity","v","onClickLeft","event","model","hierarchy$","take","subscribe","hierarchy","selectedLeft","indexOfModelInSelected","map","id","slice","concat","__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__","reload","setHierarchyProcessingStatus","status","isProcessing","changeOrganisationUnitParentAndSave","organisationUnit","combineLatest","d2$","flatMap","_ref6","_ref7","_slicedToArray","d2","parent","selectedRight","movingStatus","save","i18n","getTranslation","ouName","displayName","catch","e","errorMessage","__WEBPACK_IMPORTED_MODULE_9_rxjs__","fromPromise","moveOrganisationUnit","do","ouIds","getOrganisationUnitByIds","concatAll","message","__WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__","show","translate","state","initiallySelected","moveTargetPath","path","leftRoots","rightRoots","filter","rootId","RegExp","test","reduce","setTimeout","onClickRight","SelectedOrganisationUnitList","context","styles","title","marginBottom","display","list","paddingLeft","listItems","organisationUnits","noOrganisationUnitsMessage","hasEqualElement","left","right","selector","some","item","splitOuPath","undefined","split","part","sourceIsInPathOfTarget","__WEBPACK_IMPORTED_MODULE_13_loglevel___default","warn","targetModel","sourceModel","moveButtonDisabled","OrganisationUnitHierarchy","wrap","flex","flexOrientation","ouTreeLeft","marginRight","ouTreeRight","moveButton","width","marginTop","pendingOperationsWrap","pendingOperationsListsWrap","flexDirection","pendingOperationsList","lineHeight","alignItems","errorIcon","currentUser","authorities","has","__WEBPACK_IMPORTED_MODULE_15__App_AccessDenied_component__","buttonLabel","ouCount","headingTitle","warningForMovingWithinSubtree","initiallyExpandedRight","initiallyExpanded","__WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_headings_Heading_component__","__WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default","__WEBPACK_IMPORTED_MODULE_2__OrganisationUnitTree_OrganisationUnitTreeWithSingleSelectionAndSearch_component__","roots","selected","onSelectClick","onUpdateInput","leftTreeSearch","idsThatShouldBeReloaded","noHitsLabel","forceReloadChildren","rightTreeSearch","hideCheckboxes","hideMemberCount","SelectedOrganisationUnitListWithContext","__WEBPACK_IMPORTED_MODULE_14_material_ui_FontIcon_FontIcon___default","className","__WEBPACK_IMPORTED_MODULE_6_material_ui_RaisedButton_RaisedButton___default","primary","label","onClick","disabled","__WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper__","__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_component_helpers_withStateFrom__","__WEBPACK_IMPORTED_MODULE_5_d2_ui_lib_action_Action__","__WEBPACK_IMPORTED_MODULE_6_material_ui_RaisedButton_RaisedButton__","__WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_component_helpers_addD2Context__","__WEBPACK_IMPORTED_MODULE_8_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_12__searchForOrganisationUnitsWithinHierarchy__","__WEBPACK_IMPORTED_MODULE_13_loglevel__","__WEBPACK_IMPORTED_MODULE_14_material_ui_FontIcon_FontIcon__","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","push","TypeError","_ref5","regeneratorRuntime","mark","_callee","ids","_context","prev","sent","models","join","fields","abrupt","toArray","stop","_x","create","merge","action","side","debounceTime","data","_ref","complete","of","result","_ref2","_ref3","userOrganisationUnits","organisationUnitHierarchy$","_ref4","_ref4$hierarchy"],"mappings":"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","file":"12-4c6892cb7b2d8482404d.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 1974:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__OrganisationUnitHierarchy_component__ = __webpack_require__(2520);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return __WEBPACK_IMPORTED_MODULE_0__OrganisationUnitHierarchy_component__[\"a\"]; });\n\n\n/***/ }),\n\n/***/ 1979:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\nfunction Heading(props) {\n    var level = props.level,\n        text = props.text,\n        style = props.style,\n        children = props.children,\n        other = _objectWithoutProperties(props, ['level', 'text', 'style', 'children']);\n\n    var tag = { type: level <= 6 ? 'h' + level : 'span' };\n    var headingStyle = _extends({\n        fontSize: 24,\n        fontWeight: 300,\n        color: 'rgba(0, 0, 0, 0.87)',\n        padding: '16px 0 5px 0',\n        margin: 0\n    }, style);\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        tag.type,\n        _extends({}, other, { style: headingStyle }),\n        children || text\n    );\n}\n\nHeading.propTypes = {\n    level: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.oneOf([1, 2, 3, 4, 5, 6]),\n    text: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.string\n};\n\nHeading.defaultProps = {\n    level: 1\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Heading);\n\n/***/ }),\n\n/***/ 2472:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccessDenied;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_headings_Heading_component__ = __webpack_require__(1979);\n\n\n\nfunction AccessDenied() {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        null,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_headings_Heading_component__[\"a\" /* default */],\n            null,\n            'Access denied!'\n        ),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'p',\n            null,\n            'Unfortunately you do not have access to this functionality.'\n        )\n    );\n}\n\n/***/ }),\n\n/***/ 2520:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper__ = __webpack_require__(784);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__OrganisationUnitTree_OrganisationUnitTreeWithSingleSelectionAndSearch_component__ = __webpack_require__(847);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_component_helpers_withStateFrom__ = __webpack_require__(793);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_d2_ui_lib_action_Action__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_material_ui_RaisedButton_RaisedButton__ = __webpack_require__(780);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_material_ui_RaisedButton_RaisedButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_material_ui_RaisedButton_RaisedButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_component_helpers_addD2Context__ = __webpack_require__(390);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_d2_lib_d2__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_rxjs__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_rxjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_headings_Heading_component__ = __webpack_require__(1979);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__searchForOrganisationUnitsWithinHierarchy__ = __webpack_require__(846);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_loglevel__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_loglevel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_material_ui_FontIcon_FontIcon__ = __webpack_require__(398);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_material_ui_FontIcon_FontIcon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_material_ui_FontIcon_FontIcon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__App_AccessDenied_component__ = __webpack_require__(2472);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar getOrganisationUnitByIds = function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(ids) {\n        var d2, organisationUnits;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        _context.next = 2;\n                        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8_d2_lib_d2__[\"getInstance\"])();\n\n                    case 2:\n                        d2 = _context.sent;\n                        _context.next = 5;\n                        return d2.models.organisationUnit.list({ filter: ['id:in:[' + ids.join(',') + ']'], fields: ':owner,href,id,parent,displayName,path,children[id,displayName,path]' });\n\n                    case 5:\n                        organisationUnits = _context.sent;\n                        return _context.abrupt('return', organisationUnits.toArray());\n\n                    case 7:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, this);\n    }));\n\n    return function getOrganisationUnitByIds(_x) {\n        return _ref5.apply(this, arguments);\n    };\n}();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction identity(v) {\n    return v;\n}\n\nvar d2$ = __WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].fromPromise(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8_d2_lib_d2__[\"getInstance\"])());\n\nvar hierarchy$ = __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].map(function (state) {\n    return state.hierarchy || {};\n});\n\nvar rightTreeSearch = __WEBPACK_IMPORTED_MODULE_5_d2_ui_lib_action_Action__[\"a\" /* default */].create('rightTreeSearch', 'Hierarchy');\nvar leftTreeSearch = __WEBPACK_IMPORTED_MODULE_5_d2_ui_lib_action_Action__[\"a\" /* default */].create('leftTreeSearch', 'Hierarchy');\n\n__WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"]\n// Merge the search action streams for the left and right side trees as we handle them the same\n.merge(leftTreeSearch.map(function (action) {\n    return _extends({}, action, { side: 'left' });\n}).debounceTime(400), rightTreeSearch.map(function (action) {\n    return _extends({}, action, { side: 'right' });\n}).debounceTime(400))\n// Only search when we have values\n.filter(function (action) {\n    return action.data;\n})\n// Do the actual search\n.map(function (_ref) {\n    var complete = _ref.complete,\n        error = _ref.error,\n        data = _ref.data,\n        side = _ref.side;\n    return __WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].fromPromise(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__searchForOrganisationUnitsWithinHierarchy__[\"a\" /* default */])(data, 50)).map(function (organisationUnits) {\n        return { complete: complete, error: error, organisationUnits: organisationUnits, side: side };\n    });\n})\n// Make sure we only take the latest\n.concatAll()\n// Grab the current state from the appState\n.flatMap(function (v) {\n    return __WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].of(v).combineLatest(hierarchy$.take(1), function (result, hierarchy) {\n        return { result: result, hierarchy: hierarchy };\n    });\n})\n// Update the app state with the result\n.subscribe(function (_ref2) {\n    var result = _ref2.result,\n        hierarchy = _ref2.hierarchy;\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"c\" /* setAppState */])({\n        hierarchy: _extends({}, __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy, _defineProperty({}, result.side + 'Roots', result.organisationUnits))\n    });\n});\n\n// Reset the trees to the userOrganisationUnits when no search value was found\n__WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].merge(\n// Emit for the empty left searchfield\nleftTreeSearch.filter(function (action) {\n    return !action.data;\n}).map(function () {\n    return 'left';\n}),\n// Emit for the empty right searchfield\nrightTreeSearch.filter(function (action) {\n    return !action.data;\n}).map(function () {\n    return 'right';\n})).flatMap(function (side) {\n    return __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].take(1).map(function (state) {\n        return { side: side, state: state };\n    });\n}).subscribe(function (_ref3) {\n    var side = _ref3.side,\n        state = _ref3.state;\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"c\" /* setAppState */])({\n        hierarchy: _extends({}, state.hierarchy, _defineProperty({}, side + 'Roots', state.userOrganisationUnits.toArray()))\n    });\n});\n\nvar organisationUnitHierarchy$ = __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].map(function (_ref4) {\n    var _ref4$hierarchy = _ref4.hierarchy,\n        hierarchy = _ref4$hierarchy === undefined ? {} : _ref4$hierarchy,\n        userOrganisationUnits = _ref4.userOrganisationUnits;\n    return {\n        roots: userOrganisationUnits.toArray(),\n        leftRoots: hierarchy.leftRoots,\n        rightRoots: hierarchy.rightRoots,\n        initiallyExpanded: userOrganisationUnits.toArray().map(function (model) {\n            return model.path;\n        }),\n        moveTargetPath: hierarchy.moveTargetPath || null,\n        selectedLeft: hierarchy.selectedLeft || [],\n        selectedRight: hierarchy.selectedRight || [],\n        isProcessing: hierarchy.isProcessing,\n        reload: hierarchy.reload\n    };\n});\n\nfunction onClickLeft(event, model) {\n    hierarchy$.take(1) // Only grab the current state\n    .subscribe(function (hierarchy) {\n        var selectedLeft = [];\n        var indexOfModelInSelected = hierarchy.selectedLeft.map(function (model) {\n            return model.id;\n        }).indexOf(model.id);\n\n        if (indexOfModelInSelected >= 0) {\n            selectedLeft = hierarchy.selectedLeft.slice(0, indexOfModelInSelected).concat(hierarchy.selectedLeft.slice(indexOfModelInSelected + 1));\n        } else {\n            selectedLeft = hierarchy.selectedLeft.concat([model]);\n        }\n\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"c\" /* setAppState */])({\n            hierarchy: _extends({}, hierarchy, {\n                reload: [],\n                selectedLeft: selectedLeft\n            })\n        });\n    });\n}\n\nfunction setHierarchyProcessingStatus(hierarchy, status) {\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"c\" /* setAppState */])({\n        hierarchy: _extends({}, hierarchy, {\n            isProcessing: status\n        })\n    });\n}\n\nfunction changeOrganisationUnitParentAndSave(organisationUnit) {\n    return hierarchy$.take(1).combineLatest(d2$).flatMap(function (_ref6) {\n        var _ref7 = _slicedToArray(_ref6, 2),\n            hierarchy = _ref7[0],\n            d2 = _ref7[1];\n\n        organisationUnit.parent = { id: hierarchy.selectedRight[0] && hierarchy.selectedRight[0].id };\n\n        var movingStatus = organisationUnit.save().then(function () {\n            return d2.i18n.getTranslation('successfully_moved_$$ouName$$', { ouName: organisationUnit.displayName });\n        }).catch(function (e) {\n            return d2.i18n.getTranslation('failed_to_move_$$ouName$$_($$errorMessage$$)', {\n                ouName: organisationUnit.displayName,\n                errorMessage: e\n            });\n        });\n\n        return __WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].fromPromise(movingStatus);\n    });\n}\n\nfunction moveOrganisationUnit() {\n    hierarchy$.take(1).do(function (hierarchy) {\n        return setHierarchyProcessingStatus(hierarchy, true);\n    }).map(function (hierarchy) {\n        return (hierarchy.selectedLeft || []).map(function (model) {\n            return model.id;\n        });\n    }).flatMap(function (ouIds) {\n        return __WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].fromPromise(getOrganisationUnitByIds(ouIds)).flatMap(identity);\n    }).map(changeOrganisationUnitParentAndSave).concatAll().subscribe(function (message) {\n        __WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__[\"a\" /* default */].show({ message: message, translate: false });\n    }, function (e) {\n        setHierarchyProcessingStatus(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy, false);\n    }, function () {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"c\" /* setAppState */])({\n            hierarchy: _extends({}, __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy, {\n                selectedLeft: [],\n                selectedRight: [],\n                initiallySelected: [],\n                moveTargetPath: __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy.selectedRight[0].path,\n                reload: [].concat(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy.selectedRight.map(function (model) {\n                    return model.id;\n                })).concat(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy.selectedLeft.map(function (model) {\n                    if (model.parent && model.parent.id) {\n                        return model.parent.id;\n                    }\n                    return __WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy.leftRoots.concat(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy.rightRoots).map(function (value) {\n                        return value.id;\n                    }).filter(function (rootId) {\n                        return new RegExp(rootId).test(model.path);\n                    }).reduce(function (value) {\n                        return value;\n                    });\n                }))\n            })\n        });\n\n        // Wait till stack clears before setting isProcessing to false and triggering a rerender\n        // Without this the UI represents a stale state\n        setTimeout(function () {\n            setHierarchyProcessingStatus(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"b\" /* default */].state.hierarchy, false);\n        }, 0);\n    });\n}\n\nfunction onClickRight(event, model) {\n    hierarchy$.take(1) // Only grab the current state\n    .subscribe(function (hierarchy) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__App_appStateStore__[\"c\" /* setAppState */])({\n            hierarchy: _extends({}, hierarchy, {\n                reload: [],\n                selectedRight: [model],\n                moveTargetPath: null\n            })\n        });\n    });\n}\n\nfunction SelectedOrganisationUnitList(props, context) {\n    var styles = {\n        title: {\n            color: '#666',\n            marginBottom: '.5rem'\n        },\n        message: {\n            color: '#666',\n            padding: '.5rem',\n            display: 'block'\n        },\n        list: {\n            paddingLeft: '1.5rem'\n        }\n    };\n\n    var listItems = props.organisationUnits.map(function (model) {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'li',\n            { key: model.id },\n            model.displayName\n        );\n    });\n\n    var noOrganisationUnitsMessage = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'span',\n        { style: styles.message },\n        context.d2.i18n.getTranslation(props.noOrganisationUnitsMessage)\n    );\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        { style: props.style },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: styles.title },\n            context.d2.i18n.getTranslation(props.title)\n        ),\n        listItems.length ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'ul',\n            { style: styles.list },\n            listItems\n        ) : noOrganisationUnitsMessage\n    );\n}\nSelectedOrganisationUnitList.defaultProps = {\n    organisationUnits: []\n};\n\nvar SelectedOrganisationUnitListWithContext = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(SelectedOrganisationUnitList);\n\nfunction hasEqualElement(left, right, selector) {\n    return left.map(selector).some(function (item) {\n        return right.map(selector).indexOf(item) >= 0;\n    });\n}\n\nfunction splitOuPath() {\n    var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    return path.split('/').filter(function (part) {\n        return part;\n    });\n}\n\nfunction sourceIsInPathOfTarget(source, target) {\n    if (source.some(function (model) {\n        return !model.path;\n    }) || target.some(function (model) {\n        return !model.path;\n    })) {\n        __WEBPACK_IMPORTED_MODULE_13_loglevel___default.a.warn('No path found, so can not run hierarchy validation');\n        return true;\n    }\n\n    if (target.length !== 1) {\n        __WEBPACK_IMPORTED_MODULE_13_loglevel___default.a.warn('More than/less than 1 target found, can not move.');\n        return true;\n    }\n\n    var targetModel = target[0];\n\n    return source.some(function (sourceModel) {\n        return splitOuPath(targetModel.path).indexOf(sourceModel.id) >= 0;\n    });\n}\n\nfunction moveButtonDisabled(props) {\n    return props.isProcessing || !props.selectedLeft.length || !props.selectedRight.length || hasEqualElement(props.selectedLeft, props.selectedRight, function (v) {\n        return v && v.id;\n    }) || sourceIsInPathOfTarget(props.selectedLeft, props.selectedRight);\n}\n\nfunction OrganisationUnitHierarchy(props, context) {\n    var styles = {\n        wrap: {\n            flex: 1,\n            display: 'flex',\n            flexOrientation: 'row',\n            margin: '1rem 0'\n        },\n        ouTreeLeft: {\n            flex: 1,\n            marginRight: '2rem',\n            padding: '1rem'\n        },\n        ouTreeRight: {\n            flex: 1,\n            padding: '1rem'\n        },\n        moveButton: {\n            width: '100%',\n            marginBottom: '1rem',\n            marginTop: '1rem'\n        },\n        pendingOperationsWrap: {\n            padding: '1rem',\n            margin: '1rem 0'\n        },\n        pendingOperationsListsWrap: {\n            display: 'flex',\n            flexDirection: 'row'\n        },\n        pendingOperationsList: {\n            flex: 1,\n            padding: '.5rem'\n        },\n        errorMessage: {\n            color: 'orange',\n            lineHeight: '1.5rem',\n            padding: '1rem 0',\n            display: 'flex',\n            alignItems: 'flex-end'\n        },\n        errorIcon: {\n            color: 'orange'\n        }\n    };\n\n    if (!context.d2.currentUser.authorities.has('F_ORGANISATIONUNIT_MOVE')) {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15__App_AccessDenied_component__[\"a\" /* default */], null);\n    }\n\n    var buttonLabel = context.d2.i18n.getTranslation('move_$$ouCount$$_organisation_units', { ouCount: props.selectedLeft && props.selectedLeft.length || 0 });\n    var headingTitle = context.d2.i18n.getTranslation('hierarchy_operations');\n    var warningForMovingWithinSubtree = context.d2.i18n.getTranslation('you_can_not_move_higher_level_organisation_units_to_its_descendants');\n    var initiallyExpandedRight = props.moveTargetPath ? [].concat(_toConsumableArray(props.initiallyExpanded), [props.moveTargetPath]) : props.initiallyExpanded;\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        null,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_headings_Heading_component__[\"a\" /* default */],\n            null,\n            headingTitle\n        ),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: styles.wrap },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default.a,\n                { style: styles.ouTreeLeft },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__OrganisationUnitTree_OrganisationUnitTreeWithSingleSelectionAndSearch_component__[\"a\" /* default */], {\n                    roots: props.leftRoots,\n                    initiallyExpanded: props.initiallyExpanded,\n                    selected: props.selectedLeft.map(function (model) {\n                        return model.path;\n                    }),\n                    onSelectClick: onClickLeft,\n                    onUpdateInput: function onUpdateInput(value) {\n                        return leftTreeSearch(value);\n                    },\n                    idsThatShouldBeReloaded: props.reload,\n                    noHitsLabel: context.d2.i18n.getTranslation('no_matching_organisation_units'),\n                    forceReloadChildren: true\n                })\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default.a,\n                { style: styles.ouTreeRight },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__OrganisationUnitTree_OrganisationUnitTreeWithSingleSelectionAndSearch_component__[\"a\" /* default */], {\n                    roots: props.rightRoots,\n                    selected: props.selectedRight.map(function (model) {\n                        return model.path;\n                    }),\n                    initiallyExpanded: initiallyExpandedRight,\n                    onSelectClick: onClickRight,\n                    onUpdateInput: function onUpdateInput(value) {\n                        return rightTreeSearch(value);\n                    },\n                    idsThatShouldBeReloaded: props.reload,\n                    noHitsLabel: context.d2.i18n.getTranslation('no_matching_organisation_units'),\n                    hideCheckboxes: true,\n                    hideMemberCount: true,\n                    forceReloadChildren: true\n                })\n            )\n        ),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default.a,\n            { style: styles.pendingOperationsWrap },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                { style: styles.pendingOperationsListsWrap },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(SelectedOrganisationUnitListWithContext, {\n                    style: styles.pendingOperationsList,\n                    organisationUnits: props.selectedLeft,\n                    noOrganisationUnitsMessage: 'select_organisation_units_to_move_from_the_left_tree',\n                    title: 'move'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(SelectedOrganisationUnitListWithContext, {\n                    style: styles.pendingOperationsList,\n                    organisationUnits: props.selectedRight,\n                    noOrganisationUnitsMessage: 'select_new_parent_for_organisation_units_from_the_right_tree',\n                    title: 'new_parent'\n                })\n            )\n        ),\n        props.selectedLeft.length && props.selectedRight.length && sourceIsInPathOfTarget(props.selectedLeft || [], props.selectedRight || []) ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: styles.errorMessage },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_14_material_ui_FontIcon_FontIcon___default.a,\n                { style: styles.errorIcon, className: 'material-icons' },\n                'warning'\n            ),\n            warningForMovingWithinSubtree\n        ) : null,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_material_ui_RaisedButton_RaisedButton___default.a, {\n            primary: true,\n            style: styles.moveButton,\n            label: buttonLabel,\n            onClick: moveOrganisationUnit,\n            disabled: moveButtonDisabled(props)\n        })\n    );\n}\nOrganisationUnitHierarchy.defaultProps = {\n    selectedLeft: [],\n    selectedRight: []\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_component_helpers_withStateFrom__[\"a\" /* default */])(organisationUnitHierarchy$, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(OrganisationUnitHierarchy)));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 12-4c6892cb7b2d8482404d.js","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Heading(props) {\n    var level = props.level,\n        text = props.text,\n        style = props.style,\n        children = props.children,\n        other = _objectWithoutProperties(props, ['level', 'text', 'style', 'children']);\n\n    var tag = { type: level <= 6 ? 'h' + level : 'span' };\n    var headingStyle = _extends({\n        fontSize: 24,\n        fontWeight: 300,\n        color: 'rgba(0, 0, 0, 0.87)',\n        padding: '16px 0 5px 0',\n        margin: 0\n    }, style);\n\n    return React.createElement(\n        tag.type,\n        _extends({}, other, { style: headingStyle }),\n        children || text\n    );\n}\n\nHeading.propTypes = {\n    level: PropTypes.oneOf([1, 2, 3, 4, 5, 6]),\n    text: PropTypes.string\n};\n\nHeading.defaultProps = {\n    level: 1\n};\n\nexport default Heading;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/d2-ui/lib/headings/Heading.component.js\n// module id = 1979\n// module chunks = 0 1 2 3 4 5 6 8 9 10 12","import React from 'react';\nimport Heading from 'd2-ui/lib/headings/Heading.component';\n\nexport default function AccessDenied() {\n    return (\n        <div>\n            <Heading>Access denied!</Heading>\n            <p>\n                Unfortunately you do not have access to this functionality.\n            </p>\n        </div>\n    );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/App/AccessDenied.component.js","import React from 'react';\nimport Paper from 'material-ui/Paper/Paper';\nimport OrganisationUnitTreeWithSingleSelectionAndSearch from '../OrganisationUnitTree/OrganisationUnitTreeWithSingleSelectionAndSearch.component';\nimport withStateFrom from 'd2-ui/lib/component-helpers/withStateFrom';\nimport { setAppState, default as appState } from '../App/appStateStore';\nimport Action from 'd2-ui/lib/action/Action';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport addD2Context from 'd2-ui/lib/component-helpers/addD2Context';\nimport { getInstance } from 'd2/lib/d2';\nimport { Observable } from 'rxjs';\nimport snackActions from '../Snackbar/snack.actions';\nimport Heading from 'd2-ui/lib/headings/Heading.component';\nimport searchForOrganisationUnitsWithinHierarchy from './searchForOrganisationUnitsWithinHierarchy';\nimport log from 'loglevel';\nimport FontIcon from 'material-ui/FontIcon/FontIcon';\nimport AccessDenied from '../App/AccessDenied.component';\n\nfunction identity(v) {\n    return v;\n}\n\nconst d2$ = Observable.fromPromise(getInstance());\n\nconst hierarchy$ = appState\n    .map(state => state.hierarchy || {});\n\nconst rightTreeSearch = Action.create('rightTreeSearch', 'Hierarchy');\nconst leftTreeSearch = Action.create('leftTreeSearch', 'Hierarchy');\n\nObservable\n    // Merge the search action streams for the left and right side trees as we handle them the same\n    .merge(\n        leftTreeSearch\n            .map(action => ({ ...action, side: 'left' }))\n            .debounceTime(400),\n        rightTreeSearch\n            .map(action => ({ ...action, side: 'right' }))\n            .debounceTime(400)\n    )\n    // Only search when we have values\n    .filter(action => action.data)\n    // Do the actual search\n    .map(({ complete, error, data, side }) => Observable\n        .fromPromise(searchForOrganisationUnitsWithinHierarchy(data, 50))\n        .map(organisationUnits => ({ complete, error, organisationUnits, side }))\n    )\n    // Make sure we only take the latest\n    .concatAll()\n    // Grab the current state from the appState\n    .flatMap(v => Observable\n        .of(v)\n        .combineLatest(hierarchy$.take(1), (result, hierarchy) => ({ result, hierarchy }))\n    )\n    // Update the app state with the result\n    .subscribe(({ result, hierarchy }) => {\n        setAppState({\n            hierarchy: {\n                ...appState.state.hierarchy,\n                [`${result.side}Roots`]: result.organisationUnits,\n            },\n        });\n    });\n\n// Reset the trees to the userOrganisationUnits when no search value was found\nObservable\n    .merge(\n        // Emit for the empty left searchfield\n        leftTreeSearch\n            .filter(action => !action.data)\n            .map(() => 'left'),\n        // Emit for the empty right searchfield\n        rightTreeSearch\n            .filter(action => !action.data)\n            .map(() => 'right')\n    )\n    .flatMap(side => appState\n        .take(1)\n        .map(state => ({ side, state }))\n    )\n    .subscribe(({ side, state }) => {\n        setAppState({\n            hierarchy: {\n                ...state.hierarchy,\n                // Reset the roots of the left or right tree to the original root(s)\n                [`${side}Roots`]: state.userOrganisationUnits.toArray(),\n            },\n        });\n    });\n\nconst organisationUnitHierarchy$ = appState\n    .map(({ hierarchy = {}, userOrganisationUnits }) => ({\n        roots: userOrganisationUnits.toArray(),\n        leftRoots: hierarchy.leftRoots,\n        rightRoots: hierarchy.rightRoots,\n        initiallyExpanded: userOrganisationUnits.toArray().map(model => model.path),\n        moveTargetPath: hierarchy.moveTargetPath || null,\n        selectedLeft: hierarchy.selectedLeft || [],\n        selectedRight: hierarchy.selectedRight || [],\n        isProcessing: hierarchy.isProcessing,\n        reload: hierarchy.reload,\n    }));\n\nfunction onClickLeft(event, model) {\n    hierarchy$\n        .take(1) // Only grab the current state\n        .subscribe(\n            (hierarchy) => {\n                let selectedLeft = [];\n                const indexOfModelInSelected = hierarchy.selectedLeft\n                    .map(model => model.id)\n                    .indexOf(model.id);\n\n                if (indexOfModelInSelected >= 0) {\n                    selectedLeft = hierarchy.selectedLeft\n                       .slice(0, indexOfModelInSelected)\n                       .concat(hierarchy.selectedLeft.slice(indexOfModelInSelected + 1));\n                } else {\n                    selectedLeft = hierarchy.selectedLeft.concat([model]);\n                }\n\n                setAppState({\n                    hierarchy: {\n                        ...hierarchy,\n                        reload: [],\n                        selectedLeft,\n                    },\n                });\n            }\n        );\n}\n\nasync function getOrganisationUnitByIds(ids) {\n    const d2 = await getInstance();\n\n    const organisationUnits = await d2.models.organisationUnit\n        .list({ filter: [`id:in:[${ids.join(',')}]`], fields: ':owner,href,id,parent,displayName,path,children[id,displayName,path]' });\n\n    return organisationUnits.toArray();\n}\n\nfunction setHierarchyProcessingStatus(hierarchy, status) {\n    setAppState({\n        hierarchy: {\n            ...hierarchy,\n            isProcessing: status,\n        },\n    });\n}\n\nfunction changeOrganisationUnitParentAndSave(organisationUnit) {\n    return hierarchy$\n        .take(1)\n        .combineLatest(d2$)\n        .flatMap(([hierarchy, d2]) => {\n            organisationUnit.parent = { id: hierarchy.selectedRight[0] && hierarchy.selectedRight[0].id };\n\n            const movingStatus = organisationUnit\n                .save()\n                .then(() => d2.i18n.getTranslation('successfully_moved_$$ouName$$', { ouName: organisationUnit.displayName }))\n                .catch(e => d2.i18n.getTranslation('failed_to_move_$$ouName$$_($$errorMessage$$)', {\n                    ouName: organisationUnit.displayName,\n                    errorMessage: e,\n                }));\n\n            return Observable.fromPromise(movingStatus);\n        });\n}\n\nfunction moveOrganisationUnit() {\n    hierarchy$\n        .take(1)\n        .do(hierarchy => setHierarchyProcessingStatus(hierarchy, true))\n        .map(hierarchy => (hierarchy.selectedLeft || []).map(model => model.id))\n        .flatMap(ouIds => Observable\n            .fromPromise(getOrganisationUnitByIds(ouIds))\n            .flatMap(identity)\n        )\n        .map(changeOrganisationUnitParentAndSave)\n        .concatAll()\n        .subscribe(\n            (message) => {\n                snackActions.show({ message, translate: false });\n            },\n            (e) => {\n                setHierarchyProcessingStatus(appState.state.hierarchy, false);\n            },\n            () => {\n                setAppState({\n                    hierarchy: {\n                        ...appState.state.hierarchy,\n                        selectedLeft: [],\n                        selectedRight: [],\n                        initiallySelected: [],\n                        moveTargetPath: appState.state.hierarchy.selectedRight[0].path,\n                        reload: []\n                            .concat(appState.state.hierarchy.selectedRight.map(model => model.id))\n                            .concat(appState.state.hierarchy.selectedLeft.map((model) => {\n                                if (model.parent && model.parent.id) {\n                                    return model.parent.id;\n                                }\n                                return appState.state.hierarchy.leftRoots\n                                    .concat(appState.state.hierarchy.rightRoots)\n                                    .map(value => value.id)\n                                    .filter(rootId => new RegExp(rootId).test(model.path))\n                                    .reduce(value => value)\n                            })),\n                    },\n                });\n\n                // Wait till stack clears before setting isProcessing to false and triggering a rerender\n                // Without this the UI represents a stale state\n                setTimeout(() => {\n                    setHierarchyProcessingStatus(appState.state.hierarchy, false)\n                }, 0);\n            }\n        );\n}\n\nfunction onClickRight(event, model) {\n    hierarchy$\n        .take(1) // Only grab the current state\n        .subscribe(\n            hierarchy => setAppState({\n                hierarchy: {\n                    ...hierarchy,\n                    reload: [],\n                    selectedRight: [model],\n                    moveTargetPath: null,\n                },\n            })\n        );\n}\n\nfunction SelectedOrganisationUnitList(props, context) {\n    const styles = {\n        title: {\n            color: '#666',\n            marginBottom: '.5rem',\n        },\n        message: {\n            color: '#666',\n            padding: '.5rem',\n            display: 'block',\n        },\n        list: {\n            paddingLeft: '1.5rem',\n        },\n    };\n\n    const listItems = props.organisationUnits\n        .map(model => <li key={model.id}>{model.displayName}</li>);\n\n    const noOrganisationUnitsMessage = (\n        <span style={styles.message}>{context.d2.i18n.getTranslation(props.noOrganisationUnitsMessage)}</span>\n    );\n\n    return (\n        <div style={props.style}>\n            <div style={styles.title}>{context.d2.i18n.getTranslation(props.title)}</div>\n            {listItems.length ? <ul style={styles.list}>{listItems}</ul> : noOrganisationUnitsMessage}\n        </div>\n    );\n}\nSelectedOrganisationUnitList.defaultProps = {\n    organisationUnits: [],\n};\n\nconst SelectedOrganisationUnitListWithContext = addD2Context(SelectedOrganisationUnitList);\n\nfunction hasEqualElement(left, right, selector) {\n    return left.map(selector).some(item => right.map(selector).indexOf(item) >= 0);\n}\n\nfunction splitOuPath(path = '') {\n    return path\n        .split('/')\n        .filter(part => part);\n}\n\nfunction sourceIsInPathOfTarget(source, target) {\n    if (source.some(model => !model.path) || target.some(model => !model.path)) {\n        log.warn('No path found, so can not run hierarchy validation');\n        return true;\n    }\n\n    if (target.length !== 1) {\n        log.warn('More than/less than 1 target found, can not move.');\n        return true;\n    }\n\n    const targetModel = target[0];\n\n    return source.some(sourceModel => splitOuPath(targetModel.path).indexOf(sourceModel.id) >= 0);\n}\n\nfunction moveButtonDisabled(props) {\n    return props.isProcessing ||\n        !props.selectedLeft.length ||\n        !props.selectedRight.length ||\n        hasEqualElement(props.selectedLeft, props.selectedRight, v => v && v.id) ||\n        sourceIsInPathOfTarget(props.selectedLeft, props.selectedRight);\n}\n\nfunction OrganisationUnitHierarchy(props, context) {\n    const styles = {\n        wrap: {\n            flex: 1,\n            display: 'flex',\n            flexOrientation: 'row',\n            margin: '1rem 0',\n        },\n        ouTreeLeft: {\n            flex: 1,\n            marginRight: '2rem',\n            padding: '1rem',\n        },\n        ouTreeRight: {\n            flex: 1,\n            padding: '1rem',\n        },\n        moveButton: {\n            width: '100%',\n            marginBottom: '1rem',\n            marginTop: '1rem',\n        },\n        pendingOperationsWrap: {\n            padding: '1rem',\n            margin: '1rem 0',\n        },\n        pendingOperationsListsWrap: {\n            display: 'flex',\n            flexDirection: 'row',\n        },\n        pendingOperationsList: {\n            flex: 1,\n            padding: '.5rem',\n        },\n        errorMessage: {\n            color: 'orange',\n            lineHeight: '1.5rem',\n            padding: '1rem 0',\n            display: 'flex',\n            alignItems: 'flex-end',\n        },\n        errorIcon: {\n            color: 'orange',\n        },\n    };\n\n    if (!context.d2.currentUser.authorities.has('F_ORGANISATIONUNIT_MOVE')) {\n        return (\n            <AccessDenied />\n        );\n    }\n\n    const buttonLabel = context.d2.i18n.getTranslation('move_$$ouCount$$_organisation_units', { ouCount: (props.selectedLeft && props.selectedLeft.length) || 0 });\n    const headingTitle = context.d2.i18n.getTranslation('hierarchy_operations');\n    const warningForMovingWithinSubtree = context.d2.i18n.getTranslation('you_can_not_move_higher_level_organisation_units_to_its_descendants');\n    const initiallyExpandedRight = props.moveTargetPath ? [...props.initiallyExpanded, props.moveTargetPath] : props.initiallyExpanded;\n\n    return (\n        <div>\n            <Heading>{headingTitle}</Heading>\n            <div style={styles.wrap}>\n                <Paper style={styles.ouTreeLeft}>\n                    <OrganisationUnitTreeWithSingleSelectionAndSearch\n                        roots={props.leftRoots}\n                        initiallyExpanded={props.initiallyExpanded}\n                        selected={props.selectedLeft.map(model => model.path)}\n                        onSelectClick={onClickLeft}\n                        onUpdateInput={value => leftTreeSearch(value)}\n                        idsThatShouldBeReloaded={props.reload}\n                        noHitsLabel={context.d2.i18n.getTranslation('no_matching_organisation_units')}\n                        forceReloadChildren\n                    />\n                </Paper>\n                <Paper style={styles.ouTreeRight}>\n                    <OrganisationUnitTreeWithSingleSelectionAndSearch\n                        roots={props.rightRoots}\n                        selected={props.selectedRight.map(model => model.path)}\n                        initiallyExpanded={initiallyExpandedRight}\n                        onSelectClick={onClickRight}\n                        onUpdateInput={value => rightTreeSearch(value)}\n                        idsThatShouldBeReloaded={props.reload}\n                        noHitsLabel={context.d2.i18n.getTranslation('no_matching_organisation_units')}\n                        hideCheckboxes\n                        hideMemberCount\n                        forceReloadChildren\n                    />\n                </Paper>\n            </div>\n            <Paper style={styles.pendingOperationsWrap}>\n                <div style={styles.pendingOperationsListsWrap}>\n                    <SelectedOrganisationUnitListWithContext\n                        style={styles.pendingOperationsList}\n                        organisationUnits={props.selectedLeft}\n                        noOrganisationUnitsMessage=\"select_organisation_units_to_move_from_the_left_tree\"\n                        title=\"move\"\n                    />\n                    <SelectedOrganisationUnitListWithContext\n                        style={styles.pendingOperationsList}\n                        organisationUnits={props.selectedRight}\n                        noOrganisationUnitsMessage=\"select_new_parent_for_organisation_units_from_the_right_tree\"\n                        title=\"new_parent\"\n                    />\n                </div>\n            </Paper>\n            {props.selectedLeft.length && props.selectedRight.length && sourceIsInPathOfTarget(props.selectedLeft || [], props.selectedRight || []) ? <div style={styles.errorMessage}><FontIcon style={styles.errorIcon} className=\"material-icons\">warning</FontIcon>{warningForMovingWithinSubtree}</div> : null}\n            <RaisedButton\n                primary\n                style={styles.moveButton}\n                label={buttonLabel}\n                onClick={moveOrganisationUnit}\n                disabled={moveButtonDisabled(props)}\n            />\n        </div>\n    );\n}\nOrganisationUnitHierarchy.defaultProps = {\n    selectedLeft: [],\n    selectedRight: [],\n};\n\nexport default withStateFrom(organisationUnitHierarchy$, addD2Context(OrganisationUnitHierarchy));\n\n\n\n// WEBPACK FOOTER //\n// ./src/OrganisationUnitHierarchy/OrganisationUnitHierarchy.component.js"],"sourceRoot":""}